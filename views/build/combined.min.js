!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ScrollTrigger",[],t):"object"==typeof exports?exports.ScrollTrigger=t():e.ScrollTrigger=t()}(window,function(){return i=[function(e,t){e.exports=function t(i,n){return null==i||null==n||Object.keys(n).forEach(function(e){"[object Object]"!=Object.prototype.toString.call(n[e])||"[object Object]"!=Object.prototype.toString.call(i[e])?i[e]=n[e]:i[e]=t(i[e],n[e])}),i}},function(e,t){Array.prototype.each=function(e){for(var t=this.length,i=0;i<t;i++){var n=this[i];n&&e(n,i)}},NodeList.prototype.each=Array.prototype.each,NodeList.prototype.filter=Array.prototype.filter},function(e,t,i){"use strict";i.r(t);function n(){this.trigger={once:!1,offset:{viewport:{x:0,y:0},element:{x:0,y:0}},toggle:{class:{in:"visible",out:"invisible"},callback:{in:null,visible:null,out:null}}},this.scroll={sustain:300,element:window,callback:function(){},start:function(){},stop:function(){},directionChange:function(){}}}var a=i(0),s=i.n(a);function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e){return Number(e)===e&&e%1==0}function l(e){return Number(e)===e&&e%1!=0}i(1);o(u.prototype,[{key:"checkVisibility",value:function(e,t){if(!this.active)return this.visible;var e={w:e.offsetWidth||e.innerWidth||0,h:e.offsetHeight||e.innerHeight||0},i=this.getBounds(),i=this._checkVisibility(i,e,t);if(i!==this.visible){this.visible=i;e=this._toggleCallback();e instanceof Promise?e.then(this._toggleClass.bind(this)).catch(function(e){console.error("Trigger promise failed"),console.error(e)}):this._toggleClass(),this.visible&&this.once&&(this.active=!1)}else if(i&&"function"==typeof this.toggle.callback.visible)return this.toggle.callback.visible.call(this.element,this);return i}},{key:"getBounds",value:function(){return this.element.getBoundingClientRect()}},{key:"_getElementOffset",value:function(e,t){var i={x:0,y:0};return"function"==typeof this.offset.element.x?i.x=e.width*this.offset.element.x(this,e,t):l(this.offset.element.x)?i.x=e.width*this.offset.element.x:r(this.offset.element.x)&&(i.x=this.offset.element.x),"function"==typeof this.offset.element.y?i.y=e.height*this.offset.element.y(this,e,t):l(this.offset.element.y)?i.y=e.height*this.offset.element.y:r(this.offset.element.y)&&(i.y=this.offset.element.y),i}},{key:"_getViewportOffset",value:function(e,t){var i={x:0,y:0};return"function"==typeof this.offset.viewport.x?i.x=e.w*this.offset.viewport.x(this,e,t):l(this.offset.viewport.x)?i.x=e.w*this.offset.viewport.x:r(this.offset.viewport.x)&&(i.x=this.offset.viewport.x),"function"==typeof this.offset.viewport.y?i.y=e.h*this.offset.viewport.y(this,e,t):l(this.offset.viewport.y)?i.y=e.h*this.offset.viewport.y:r(this.offset.viewport.y)&&(i.y=this.offset.viewport.y),i}},{key:"_checkVisibility",value:function(e,t,i){var n=this._getElementOffset(e,i),i=this._getViewportOffset(t,i),a=!0;return e.left-i.x<-(e.width-n.x)&&(a=!1),e.left+i.x>t.w-n.x&&(a=!1),e.top-i.y<-(e.height-n.y)&&(a=!1),a=e.top+i.y>t.h-n.y?!1:a}},{key:"_toggleClass",value:function(){var t=this;this.visible?(Array.isArray(this.toggle.class.in)?this.toggle.class.in.each(function(e){t.element.classList.add(e)}):this.element.classList.add(this.toggle.class.in),Array.isArray(this.toggle.class.out)?this.toggle.class.out.each(function(e){t.element.classList.remove(e)}):this.element.classList.remove(this.toggle.class.out)):(Array.isArray(this.toggle.class.in)?this.toggle.class.in.each(function(e){t.element.classList.remove(e)}):this.element.classList.remove(this.toggle.class.in),Array.isArray(this.toggle.class.out)?this.toggle.class.out.each(function(e){t.element.classList.add(e)}):this.element.classList.add(this.toggle.class.out))}},{key:"_toggleCallback",value:function(){if(this.visible){if("function"==typeof this.toggle.callback.in)return this.toggle.callback.in.call(this.element,this)}else if("function"==typeof this.toggle.callback.out)return this.toggle.callback.out.call(this.element,this)}}]);var c=u;function u(e,t){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this.element=e,t=s()((new n).trigger,t),this.offset=t.offset,this.toggle=t.toggle,this.once=t.once,this.visible=null,this.active=!0}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}d(h.prototype,[{key:"add",value:function(e){var t=this;if(e instanceof c)return this.triggers.push(e);e.each(function(e){e instanceof c?t.triggers.push(e):console.error("Object added to TriggerCollection is not a Trigger. Object: ",e)})}},{key:"remove",value:function(e){e instanceof c&&(e=[e]),this.triggers=this.triggers.filter(function(t){var i=!1;return e.each(function(e){e==t&&(i=!0)}),!i})}},{key:"query",value:function(i){return this.triggers.filter(function(e){var e=e.element,t=e.parentNode;return-1<[].slice.call(t.querySelectorAll(i)).indexOf(e)})}},{key:"search",value:function(e){var t=this.triggers.filter(function(t){var i;return e instanceof NodeList||Array.isArray(e)?(i=!1,e.each(function(e){t.element==e&&(i=!0)}),i):t.element==e});return 0==t.length?null:1<t.length?t:t[0]}},{key:"call",value:function(e){this.triggers.each(e)}}]);a=h;function h(e){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.triggers=e instanceof Array?e:[]}function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}p(v.prototype,[{key:"_parseOptions",value:function(e){var t=(new n).scroll;"function"!=typeof e?(t.callback=function(){},t=s()(t,e)):t.callback=e,this.element=t.element,this.sustain=t.sustain,this.callback=t.callback,this.startCallback=t.start,this.stopCallback=t.stop,this.directionChange=t.directionChange}},{key:"_didScroll",value:function(){var e,t=this.getPosition();this.position!==t?(e=this.direction,(e=t.x!==this.position.x?t.x>this.position.x?"right":"left":t.y!==this.position.y?t.y>this.position.y?"bottom":"top":"none")!==this.direction&&(this.direction=e,"function"==typeof this.directionChange)&&this.directionChange(this.direction),this.position=t,this.lastAction=this._getTimestamp()):this.direction="none",this.running||this._startRun()}},{key:"_startRun",value:function(){this.running=!0,"function"==typeof this.startCallback&&this.startCallback(),this._loop()}},{key:"_stopRun",value:function(){this.running=!1,"function"==typeof this.stopCallback&&this.stopCallback()}},{key:"getPosition",value:function(){return{x:this.element.pageXOffset||this.element.scrollLeft||document.documentElement.scrollLeft||0,y:this.element.pageYOffset||this.element.scrollTop||document.documentElement.scrollTop||0}}},{key:"_getTimestamp",value:function(){return Number(Date.now())}},{key:"_tick",value:function(){this.callback(this.position,this.direction),this._getTimestamp()-this.lastAction>this.sustain&&this._stopRun(),this.running&&this._loop()}},{key:"_loop",value:function(){(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){setTimeout(e,1e3/60)})(this._tick.bind(this))}},{key:"kill",value:function(){this.running=!1,this.element.removeEventListener("scroll",this._boundListener)}}]);var f=v;function v(e,t){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this._parseOptions(e),"function"==typeof t&&(this.callback=t),this.direction="none",this.position=this.getPosition(),this.lastAction=this._getTimestamp(),this._startRun(),this._boundListener=this._didScroll.bind(this),this.element.addEventListener("scroll",this._boundListener)}function m(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.d(t,"Trigger",function(){return $}),i.d(t,"TriggerCollection",function(){return g}),i.d(t,"ScrollAnimationLoop",function(){return y}),i.d(t,"default",function(){return b});var $=c,g=a,y=f,b=(m(w.prototype,[{key:"_parseOptions",value:function(e){e=s()(new n,e),this.defaultTrigger=e.trigger,this.scrollOptions=e.scroll}},{key:"_initCollection",value:function(){var e=document.querySelectorAll("[data-scroll]"),t=[];0<e.length&&(t=this.createTriggers(e)),this.collection=new g(t)}},{key:"_initLoop",value:function(){var i=this;this.loop=new y({sustain:this.scrollOptions.sustain,element:this.scrollOptions.element,callback:function(e,t){i._scrollCallback(e,t)},start:function(){i._scrollStart()},stop:function(){i._scrollStop()},directionChange:function(e){i._scrollDirectionChange(e)}})}},{key:"_scrollCallback",value:function(e,t){var i=this;this.collection.call(function(e){e.checkVisibility(i.scrollOptions.element,t)}),this.scrollOptions.callback(e,t)}},{key:"_scrollStart",value:function(){this.scrollOptions.start()}},{key:"_scrollStop",value:function(){this.scrollOptions.stop()}},{key:"_scrollDirectionChange",value:function(e){this.scrollOptions.directionChange(e)}},{key:"createTrigger",value:function(e,t){return new $(e,s()(this.defaultTrigger,t))}},{key:"createTriggers",value:function(e,t){var i=this,n=[];return e.each(function(e){n.push(i.createTrigger(e,t))}),n}},{key:"add",value:function(e,t){return e instanceof HTMLElement?this.collection.add(this.createTrigger(e,t)):e instanceof $?this.collection.add(e):e instanceof NodeList?this.collection.add(this.createTriggers(e,t)):Array.isArray(e)&&e.length&&e[0]instanceof $?this.collection.add(e):Array.isArray(e)&&e.length&&e[0]instanceof HTMLElement?this.collection.add(this.createTriggers(e,t)):this.collection.add(this.createTriggers(document.querySelectorAll(e),t)),this}},{key:"remove",value:function(e){return e instanceof $||Array.isArray(e)&&e.length&&e[0]instanceof $?this.collection.remove(e):e instanceof HTMLElement||Array.isArray(e)&&e.length&&e[0]instanceof HTMLElement||e instanceof NodeList?this.collection.remove(this.search(e)):Array.isArray(e)&&e.length&&e[0]instanceof $?this.collection.remove(e):this.collection.remove(this.query(e.toString())),this}},{key:"query",value:function(e){return this.collection.query(e)}},{key:"search",value:function(e){return this.collection.search(e)}},{key:"listen",value:function(){this.loop||this._initLoop()}},{key:"kill",value:function(){this.loop.kill(),this.loop=null}}]),w);function w(e){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this._parseOptions(e),this._initCollection(),this._initLoop()}}],n={},a.m=i,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=2);function a(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},i[e].call(t.exports,t,t.exports,a),t.l=!0,t)).exports}var i,n});var $=jQuery,$body=$("body"),$h=$("header"),extraMenuCtrl={handlersBinded:!1,initSetting:!1,active:!1,$menuBtn:"",init:function(e){var t=this;!e&&0!=t.initSetting||(t.destroy(),$("#navMain > ul li:has(ul)").append('<a href="#" class="subbutton" title="Untermenü öffnen"></a>'),$("#navMain > ul li:has(ul)").each(function(){var e='<li class="submenu--header"><a href="#" class="backbutton" title="Untermenü schließen"></a>'+$(this).find(">:first-child")[0].outerHTML+"</li>";$(this).find("> ul").prepend(e)}),$(".shopNavWrap > ul li:has(ul)").append('<a href="#" class="subbutton" title="Untermenü öffnen"></a>'),$(".shopNavWrap > ul li:has(ul)").each(function(){var e='<li class="submenu--header"><a href="#" class="backbutton" title="Untermenü schließen"></a>'+$(this).find(">:first-child")[0].outerHTML+"</li>";$(this).find("ul").first().prepend(e)}),t.initSetting=!0),t.$menuBtn=$(".menu-button"),t.handlersBinded||t.bindHandlers()},destroy:function(){$("a.subbutton, .submenu--header").each(function(){$(this).remove()}),this.$menuBtn=$(".menu-button"),this.reset(),this.initSetting=!1},bindHandlers:function(){var i=this;i.handlersBinded=!0,$(document).on("click",".menu-item-has-children a.subbutton",function(e){e.preventDefault();var e=$(this),t=e.prev();i.active=e.parent().attr("data-id"),i.subMenu.show(e,t)}),$(document).on("click",".menu-item-has-children a.backbutton",function(e){e.preventDefault();var e=$(this),t=e.parent("ul");i.subMenu.reset(e,t)}),$(document).on("click",".menu-button",i.show.bind(i)),$(document).on("click",".app--nav--trigger",function(e){var t;$(this).data("nav")&&($(".app--nav--trigger").not($(this)).removeClass("active"),$(this).toggleClass("active"),t=$(this).data("nav"),e.preventDefault(),$body.hasClass("active-menu")&&!$body.hasClass("active-"+t)||($body.hasClass("active-menu")&&$body.hasClass("active-"+t)?($body.removeClass("active-menu"),i.subMenu.reset()):$body.addClass("active-menu")),$(".app--nav--trigger").each(function(e){$(this).data("nav")&&$(this).data("nav")!=t&&$body.removeClass("active-"+$(this).data("nav"))}),$body.toggleClass("active-"+t).removeClass("active-submenu"),i.subMenu.reset())})},show:function(e){e.preventDefault(),$body.toggleClass("active-menu"),this.$menuBtn.toggleClass("active-button")},reset:function(){$body.removeClass("active-menu"),this.$menuBtn.removeClass("active-button")},subMenu:{show:function(e,t){t.hasClass("sub-active")&&e.off("mouseenter mouseleave"),t.toggleClass("sub-active"),$body.toggleClass("active-submenu")},reset:function(){$body.removeClass("active-submenu"),setTimeout(function(){$(".sub-active").removeClass("sub-active"),$(".subbutton.active").removeClass("active")},300)}}};function forEach(e,t){return Array.prototype.forEach.call(e,t)}var resizeTimer,resizeTimerScroll,debounce=function(e){clearTimeout(resizeTimer),resizeTimer=setTimeout(function(){page.resizeHook()},50)},debounceScroll=function(e){clearTimeout(resizeTimerScroll),resizeTimerScroll=setTimeout(function(){checkPosition()},10)},checkPosition=function(e){var t=$(window).scrollTop();80<t||page.mobile&&50<t?($h.addClass("fluid"),$("#masterWrap").addClass("fluid")):($h.removeClass("fluid"),$("#masterWrap").removeClass("fluid"))};$(document).ready(function(){(page={$window:$(window),$html:$("html"),$body:$("body"),$header:$("header"),$masterWrap:$("#masterWrap"),$menuButton:$(".menu-button"),mobileSize:1080,tabletSize:1600,activeClass:"is-active",activeMenu:"active-menu",activeButton:"active-button",src:"data-desktop-src",videosrc:"desktop-src",init:function(){var e=this;e.bindHandlers(),e.themeChange(),e.desktopViewportCheck(),e.fixedHeader(),e.navMobile(),e.tabs(),e.selectTabs(),e.initSlider(),e.initScrolltrigger(),e.userMenuBtn(),e.initPlayer(),e.fancyBox(),e.updateOverlay(),e.pageReady(),e.passwordChange(),e.highlightIFrame()},bindHandlers:function(){window.addEventListener("resize",debounce),window.addEventListener("scroll",debounceScroll)},pageReady:function(){$("#loader").addClass("hidden"),$("body").removeClass("loading"),this.fancyLoad()},desktopViewportCheck:function(){var e=this;extraMenuCtrl.init(!0),window.innerWidth>=e.mobileSize?(e.mobile=!1,e.$masterWrap.removeClass("mobile-state")):(e.mobile=!0,e.$masterWrap.addClass("mobile-state"))},lockScrollPosition:function(){var e=[document.documentElement.scrollLeft,document.documentElement.scrollTop];this.$html.data("scroll-position",e),this.$html.css("overflow-y","hidden"),window.scroll(e[0],e[1])},unlockScrollPosition:function(){var e=this.$html.data("scroll-position");if(void 0===e)return!1;this.$html.css("overflow-y","auto"),window.scroll(e[0],e[1])},resizeHook:function(){var e=this;e.desktopViewportCheck(),e.fixedHeader(),e.navMobile(),e.fancyLoad(),e.repositionPlayerButtons()},initScrolltrigger:function(){var e=new ScrollTrigger.default({trigger:{once:!0},offset:{element:{x:0,y:function(e,t,i){return.5}}}});e.add("[data-trigger]"),e.add(".card-slider"),e.add(".genre-slider"),e.add("#load-count"),e.add(".currentWatch-slider")},fixedHeader:function(){headerHeight=this.$header.height(),this.$header.hasClass("fixed-header")?this.$body.css("padding-top",headerHeight):this.$body.css("padding-top",0)},navMobile:function(){var e=$("#navMain");headerHeight=this.$header.height(),e.css({top:headerHeight,height:"calc(100vh - "+headerHeight+"px)"})},fancyLoad:function(){var t=this;t.src="data-img",forEach(document.querySelectorAll("img[data-img]"),function(e){e.setAttribute("src",e.getAttribute(t.src)),$(e).removeAttr("data-img")})},themeChange:function(){var t=this,i="pageTheme";$("#theme-switch").on("click",function(e){e.preventDefault(),expireDate=new Date(Math.floor((new Date).getTime()+31536e6)),"light"===t.$html.attr("data-theme")?(document.cookie=i+"=dark; path=/; expires="+expireDate,t.$html.attr("data-theme","dark")):(document.cookie=i+"=light; path=/; expires="+expireDate,t.$html.attr("data-theme","light"))})},tabs:function(){var s=this;$(".tabs .tabs-title > a").on("click",function(e){e.preventDefault();var e=$(this),t=e.attr("href"),i=e.parent(),n=i.parent(),a=n.attr("id");i.hasClass(s.activeClass)||(n.children(".tabs-title").removeClass(s.activeClass).children("a").attr("aria-selected","false"),i.addClass(s.activeClass),e.attr("aria-selected","true"),i=(n=$('[data-tabs-content="'+a+'"]')).find(t),n.find(".tabs-panel").removeClass(s.activeClass),i.addClass(s.activeClass))})},selectTabs:function(){$(document).on("change",".tab-select",function(e){e.preventDefault();var e=$(this),i=e.val();tabsClass=e.attr("id"),$currTab=$("."+tabsClass+'[data-select-tab="'+i+'"]'),$("body select."+tabsClass).each(function(e,t){$(t).val(i)}),$("body select."+tabsClass).val(i),$("body select."+tabsClass+' option[value="'+i+'"]').prop("selected",!0),$("."+tabsClass+".is-active").toggleClass("is-active"),$currTab.toggleClass("is-active")})},fancyBox:function(){Fancybox.bind("[data-fancybox]",{dragToClose:!1})},initSlider:function(){sliderNumber=1,$(".swiper").each(function(){var e=$(this);const t="swiper-"+sliderNumber,i=".swiper-"+sliderNumber;e.addClass(t);var n=2,a=3,s=4,o=6,r=720,l=1080,c=1400;new Swiper(i,{loop:!0,slidesPerView:n,spaceBetween:16,allowTouchMove:!0,breakpoints:{720:{slidesPerView:a},1080:{slidesPerView:s},1400:{slidesPerView:o}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}).on("resize",function(){var e;e=this,(bp=window.innerWidth)>=c?$(i+" .swiper-slide").length>o?e.loop=!0:e.loop=!1:bp>=l?$(i+" .swiper-slide").length>s?e.loop=!0:e.loop=!1:bp>=r?$(i+" .swiper-slide").length>a?e.loop=!0:e.loop=!1:$(i+" .swiper-slide").length>n?e.loop=!0:e.loop=!1,e.update()}),e.find('[data-fancybox="gallery"]').each(function(){$(this).attr("data-fancybox",t)}),sliderNumber++})},initPlayer:function(){var t,e=this;0<$("#player").length&&(t=videojs("player"),(video=$("video")[0]).addEventListener("loadedmetadata",function(){$("#player-back-btn").appendTo(".video-js"),$("#player-session-btn").appendTo(".video-js"),$("#chat-open").appendTo(".video-js"),$("#player-sek-forward").appendTo(".video-js .vjs-control-bar"),$("#player-sek-back").appendTo(".video-js .vjs-control-bar"),0<$("#next-episode-btn").length&&$("#next-episode-btn").appendTo(".video-js"),0<$("#show-container").length&&$("#show-container").appendTo(".video-js"),0<$("#show-eps-btn").length&&$("#show-eps-btn").appendTo(".video-js .vjs-control-bar")}),t.on("play",function(){e.repositionPlayerButtons()}),($nextEpisodeBtn=$("#next-episode-btn"))&&video.addEventListener("timeupdate",function(){var e=video.currentTime,t=video.duration-20;t<=e&&$nextEpisodeBtn.addClass("visible"),e<=t&&$nextEpisodeBtn.hasClass("visible")&&$nextEpisodeBtn.removeClass("visible")}),showContainer="#show-container",$(showContainer+" .menu li>a").on("click",function(e){e.preventDefault(),$(showContainer).addClass("active-submenu"),listID=$(this).attr("data-id"),$(showContainer+" ul.sub-menu#"+listID).addClass("active")}),$(showContainer+" .sub-menu .back").on("click",function(e){e.preventDefault(),$(showContainer).removeClass("active-submenu"),$(showContainer+" ul.sub-menu").removeClass("active")}),$("a#show-eps-btn").on("click",function(e){e.preventDefault(),$(showContainer).toggleClass("visible")}),$("#player-sek-forward").on("click",function(e){e.preventDefault(),t.currentTime(t.currentTime()+10)}),$("#player-sek-back").on("click",function(e){e.preventDefault(),t.currentTime(t.currentTime()-10)}),$("#chat-open").on("click",function(e){e.preventDefault(),$("#chat").toggleClass("hidden")}),$("#chat-close").on("click",function(){$("#chat").toggleClass("hidden")}))},repositionPlayerButtons:function(){$fullscreen=$(".vjs-fullscreen-control"),$currTime=$(".vjs-current-time"),$divider=$(".vjs-time-divider"),$duration=$(".vjs-duration"),0<$("#show-eps-btn").length?($epsBtnWidth=$("#show-eps-btn").outerWidth(),$("#show-eps-btn").css("right",$fullscreen.outerWidth())):$epsBtnWidth=0,$duration.css("right",$fullscreen.outerWidth()+$epsBtnWidth),$divider.css("right",$fullscreen.outerWidth()+$epsBtnWidth+$duration.outerWidth()),$currTime.css("right",$fullscreen.outerWidth()+$epsBtnWidth+$duration.outerWidth()+$divider.outerWidth())},userMenuBtn:function(){($menuBtn=$("#user-menu-btn")).on("click",function(e){var t=$(this);t.hasClass("active")&&!$(e.target).is(".user-menu")?t.removeClass("active"):t.addClass("active")}),$menuBtn.on("blur",function(){var e=$(this);!e.is(":hover")&&e.hasClass("active")&&e.removeClass("active")})},updateOverlay:function(){function e(){$("body").addClass("loading"),$("#loader").removeClass("hidden"),$("#loader span").addClass("visible")}$(document).on("click","#add-movie",e),$(document).on("click","#delete-movie",e),$(document).on("click","#add-show",e),$(document).on("click","#update-show",e),$(document).on("click","#delete-show",e),$(document).on("click","#addHighlight",e)},passwordChange:function(){var e=!1,t=!1,i=!1;$('input[name="password"]').on("input",function(){$this=$(this),i="#"+$this.attr("id")+"-check",0<(e=$this.val()).length?$(i).removeAttr("disabled"):$(i).attr("disabled","disabled"),t===e?$(".change-user-pw").removeClass("disabled").removeAttr("disabled"):$(".change-user-pw").addClass("disabled").attr("disabled","disabled")}),$('input[name="password-check"]').on("input",function(){"#"+($this=$(this)).attr("id")===i&&((t=$this.val())===e?$(".change-user-pw").removeClass("disabled").removeAttr("disabled"):$(".change-user-pw").addClass("disabled").attr("disabled","disabled"))})},highlightIFrame:function(){var t;t=new YT.Player("highlightTrailer",{events:{onReady:function(e){e.target.playVideo()},onStateChange:function(e){e.data==YT.PlayerState.ENDED&&($(".content-wrap.desktop-only").css("opacity","1"),$(".content-wrap.desktop-only").css("pointer-events","all"),t.g.style.opacity="0",setTimeout(function(){t.g.style.display="none"},300))}}})}}).init()}),$(document).ready(function(){(custom={$window:$(window),$html:$("html"),$body:$("body"),$header:$("header"),$masterWrap:$("#masterWrap"),$menuButton:$(".menu-button"),$apiSearch:$("#movie-api-search"),$showApiSearch:$("#show-api-search"),$liveSearch:$("#movie-live-search"),$searchBtn:$(".search-btn"),mobileSize:1080,tabletSize:1600,activeClass:"is-active",activeMenu:"active-menu",activeButton:"active-button",src:"data-desktop-src",videosrc:"desktop-src",init:function(){var e=this;e.login(),e.saveAdminSettings(),e.uploadUserImg(),e.updateUserImg(),e.getGenre(),e.changeUserPassword(),e.movieLiveSearch(),e.showLiveSearch(),e.jstreeMovie(),e.jstreeEpisode(),e.myList(),e.movieTimeSafe(),e.remoteWatch(),e.highlight(),e.mediaPopUp(),e.sorting()},bindHandlers:function(){window.addEventListener("resize",debounce),window.addEventListener("scroll",debounceScroll)},callout:function(e,t){$callout=$("#callout"),$success="success",$warning="warning",$alert="alert",$callout.hasClass($success)&&$callout.removeClass($success),$callout.hasClass($warning)&&$callout.removeClass($warning),$callout.hasClass($alert)&&$callout.removeClass($alert),$callout.empty(),"success"!==e.type&&"warning"!==e.type&&"alert"!==e.type||setTimeout(function(){$callout.addClass(e.type),$callout.html("<p>"+e.msg+"</p>"),t.toggleClass("is-loading")},1e3)},redirect:function(e){window.location.href=e},login:function(){var i=this,n=!1;$("#login").on("click",function(e){var t;e.preventDefault(),!1===n&&(n=!0,($this=$(this)).toggleClass("is-loading"),e=$("#username").val(),t=$("#password").val(),$.ajax({url:"/login-request",type:"post",data:{username:e,psswd:t},success:function(e){e=$.parseJSON(e);"redirect"===e.type?i.redirect(e.location):i.callout(e,$this),n=!1},error:function(e,t,i){console.log("Fehler: "+i)}}))})},saveAdminSettings:function(){var a=this,s=!1;$("#save-admin-settings").on("click",function(e){var t,i,n;e.preventDefault(),!1===s&&(s=!0,($this=$(this)).toggleClass("is-loading"),e=$("#site_title").val(),t=$("#apikey").val(),i=$("#language").val(),n=$("#enable-edit").prop("checked"),$.ajax({url:"/save-admin-settings",type:"post",data:{site_title:e,apikey:t,language:i,enable_edit:n},success:function(e){e=$.parseJSON(e);"redirect"===e.type?a.redirect(e.location):a.callout(e,$this),s=!1},error:function(e,t,i){console.log("Fehler: "+i)}}))})},uploadUserImg:function(){var a=this,s=!1;$("#userImgUpload").on("click",function(e){var t,i,n;e.preventDefault(),!1===s&&(s=!0,($this=$(this)).toggleClass("is-loading"),t=$('input[name="id"]').val(),e=document.getElementById("userImgInput"),i=$("#userImgInput").val(),e=e.files[0],(n=new FormData).append("file",e),n.append("img",i),n.append("userID",t),$.ajax({url:"/uploadUserImg",type:"post",data:n,contentType:!1,processData:!1,success:function(e){e=$.parseJSON(e);$("#userImgInput").val(""),a.callout(e,$this),setTimeout(function(){a.refreshUserImg(t),$('.user-img-select input[type="radio"]').attr("data-current",0),setTimeout(function(){var e=$("#user-img").attr("src"),t=e.split("/"),e=e.replace(/\/[^\/]*$/,"/"),t=t[t.length-1];$("#allUserUploads").prepend('<div class="col-6 col-3-xsmall col-2-medium grid-padding marg-bottom-s"><div class="user-img-select"><input type="radio" id="img-0" name="userImg" value="'+t+'" data-current="1" data-id="1" checked=""><figure class="square"><img loading="lazy" alt="" src="'+e+t+'"></figure></div></div>')},500),s=!1},1e3)},error:function(e,t,i){console.log("Fehler: "+i)}}))})},updateUserImg:function(){var i=this,n=!1;$('input[name="userImg"]').on("click",function(){0==$(this).attr("data-current")?$("#updateUserImg").css("display","inline-flex"):$("#updateUserImg").css("display","none")}),$("#updateUserImg").on("click",function(e){var t;e.preventDefault(),!1===n&&(n=!0,($this=$(this)).toggleClass("is-loading"),e=$('.user-img-select input[type="radio"]:checked').val(),t=$('.user-img-select input[type="radio"]:checked').attr("data-id"),$('input[name="userImg"]').attr("data-current",0),$('.user-img-select input[name="userImg"]:checked').attr("data-current",1),$.ajax({url:"/updateUserImg",type:"post",data:{img:e,userID:t},success:function(e){e=$.parseJSON(e);i.callout(e,$this),setTimeout(function(){i.refreshUserImg(t),n=!1},1e3)},error:function(e,t,i){console.log("Fehler: "+i)}}))})},refreshUserImg:function(e){$.ajax({url:"/refresh-user-img",type:"post",data:{userID:e},success:function(e){$("#user-img").attr("src",e)},error:function(e,t,i){console.log("Fehler: "+i)}})},getGenre:function(){var t=this;$("#generate-genres").on("click",function(e){e.preventDefault(),($this=$(this)).toggleClass("is-loading"),$.ajax({url:"/get-genre",type:"post",success:function(e){e=$.parseJSON(e);"redirect"===e.type?t.redirect(e.location):t.callout(e,$this),setTimeout(function(){t.redirect("/admin/genres")},1500)},error:function(e,t,i){console.log("Fehler: "+i)}})})},changeUserPassword:function(){var i=this,n=!1;$(document).on("click",".change-user-pw",function(e){var t;e.preventDefault(),$this=$(this),!1===n&&(n=!0,$this.toggleClass("is-loading"),t=$this.val(),e=$("#username-"+t).val(),psswd=$(".password-"+t).val(),1<$(".password-"+t).val().length)&&$(".password-"+t+"-check").val()===$(".password-"+t).val()&&$.ajax({url:"/changeUserPW",type:"post",data:{userID:t,username:e,password:psswd},success:function(e){e=$.parseJSON(e);"redirect"===e.type?i.redirect(e.location):i.callout(e,$this),$("body .password-"+t).val(""),$("body .password-"+t+"-check").val("").attr("disabled","disabled"),$("body .change-user-pw").addClass("disabled").attr("disabled","disabled"),setTimeout(function(){Fancybox.close()},500),n=!1},error:function(e,t,i){console.log("Fehler: "+i)}})})},movieLiveSearch:function(){var t=this;$("#close-search").on("click",function(e){e.preventDefault(),$("#searchpage").addClass("hidden"),$("body").removeClass("active-search"),$(".search-bar").removeClass("active-search")}),t.$apiSearch.on("input",function(){$this=$(this),$resultList=$("#movieSearchResults"),setTimeout(function(){var e=$this.val();$this.val(e),0==e.length?$resultList.addClass("hidden"):$resultList.removeClass("hidden"),$.ajax({url:"/admin/movies/movie-api-search",type:"post",data:{movie:e},success:function(e){$resultList.html(e),t.fancyLoad()},error:function(e,t,i){console.log("Fehler: "+i)}})},500)}),t.$liveSearch.on("input",function(){$this=$(this),$resultList=$("#movieLivesearchResults"),$resultPageList=$("#moviePageLivesearchResults"),$searchValueEl=$("#search-value"),$searchPage=$("#searchpage"),setTimeout(function(){$searchPage.removeClass("hidden"),$("body").addClass("active-search");var e=$this.val();0<$("#searchpage").length&&($searchValueEl.text(e),$.ajax({url:"/live-search",type:"post",data:{media:e},success:function(e){$resultPageList.html(e),t.fancyLoad()},error:function(e,t,i){console.log("Fehler: "+i)}}))},500)}),t.$searchBtn.on("click",function(e){e.preventDefault(),$(".search-bar").toggleClass("active-search"),$(".search-bar").hasClass("active-search")?($("#searchpage").removeClass("hidden"),$("body").addClass("active-search")):($("#searchpage").addClass("hidden"),$("body").removeClass("active-search"))})},showLiveSearch:function(){var t=this;t.$showApiSearch.on("input",function(){$this=$(this),$resultList=$("#showSearchResults"),setTimeout(function(){var e=$this.val();$this.val(e),0==e.length?$resultList.addClass("hidden"):$resultList.removeClass("hidden"),$.ajax({url:"/admin/shows/show-api-search",type:"post",data:{show:e},success:function(e){$resultList.html(e),t.fancyLoad()},error:function(e,t,i){console.log("Fehler: "+i)}})},500)})},fancyLoad:function(){var t=this;t.src="data-img",forEach(document.querySelectorAll("img[data-img]"),function(e){e.setAttribute("src",e.getAttribute(t.src)),$(e).removeAttr("data-img")})},jstreeMovie:function(){0<$("#file-tree").length&&$.ajax({url:"/admin/file-api",type:"get",dataType:"json",success:function(e){$("#file-tree").jstree({core:{themes:{stripes:!0},data:e,multiple:!1},checkbox:{three_state:!1},plugins:["search","state","wholerow"]}),$("#file-tree").on("select_node.jstree",function(e,t){var i;t.instance.get_node(t.selected[0]).text.endsWith(".mp4")?(i=$("#file-tree").jstree("get_path",t.node,"/"),$("#inputMoviePath").attr("value","/media/"+i),$("#inputMovieSubmit").css("display","inline-flex")):(t.instance.deselect_node(t.selected[0]),$("#inputMovieSubmit").css("display","none"))});var t=!1;$("#jstree-search").keyup(function(){t&&clearTimeout(t),t=setTimeout(function(){var e=$("#jstree-search").val();$("#file-tree").jstree(!0).search(e)},250)})},error:function(e,t,i){console.error(i)}}),0<$(".file-tree-episode").length&&$.ajax({url:"/admin/file-api",type:"get",dataType:"json",success:function(e){$(".file-tree-episode").jstree({core:{animation:0,check_callback:!0,themes:{stripes:!0},data:e,multiple:!1},checkbox:{three_state:!1},types:{video:{icon:"jstree-file"}},plugins:["contextmenu","dnd","search","state","types","wholerow"]}),$(".file-tree-episode").on("select_node.jstree",function(e,t){var i=t.instance.get_node(t.selected[0]),n=$(this).attr("data-element-id");i.text.endsWith(".mp4")?(i=$(this).jstree("get_path",t.node,"/"),$("#inputEpisodePath-"+n).attr("value","/media/"+i),$("#inputEpisodeSubmit-"+n).css("display","inline-flex")):(t.instance.deselect_node(t.selected[0]),$("#inputEpisodeSubmit-"+n).css("display","none"))})},error:function(e,t,i){console.error(i)}})},jstreeEpisode:function(){0<$(".file-tree-episode").length&&($(".file-tree-episode").each(function(e,n){$.ajax({url:"/admin/file-api",type:"get",dataType:"json",success:function(e){$(n).jstree({core:{animation:0,check_callback:!0,themes:{stripes:!0},data:e,multiple:!1},checkbox:{three_state:!1},types:{video:{icon:"jstree-file"}},plugins:["contextmenu","dnd","search","state","types","wholerow"]}),$(n).on("select_node.jstree",function(e,t){var i;t.instance.get_node(t.selected[0]).text.endsWith(".mp4")?(i=$(n).jstree("get_path",t.node,"/"),elID=$(n).attr("data-element-id"),$('[data-submit="'+elID+'"]').attr("data-path","/media/"+i),$('[data-submit="'+elID+'"]').css("display","inline-flex")):(t.instance.deselect_node(t.selected[0]),$('[data-submit="'+elID+'"]').css("display","none"))})},error:function(e,t,i){console.error(i)}})}),$(".episode-path-submit").on("click",function(){var e=$(this).attr("data-path"),t=$(this).attr("data-submit");$.ajax({url:"/admin/episode-file-path",type:"post",data:{mediaID:t,path:e},success:function(e){alert("Gespeichert")},error:function(e,t,i){console.log("Fehler: "+i)}})}))},myList:function(){function t(e){$(e).addClass("is-loading");var t=$(e).attr("data-media-id"),i=$(e).attr("data-type");setTimeout(function(){$.ajax({url:"/add-to-list",type:"post",data:{mediaID:t,type:i},success:function(e){},error:function(e,t,i){console.log("Fehler: "+i)}}),$(e).removeClass("is-loading"),"add"===i?($('a[data-media-id="'+t+'"][data-type="add"]').addClass("hidden"),$('a[data-media-id="'+t+'"][data-type="remove"]').removeClass("hidden")):"remove"===i&&($('a[data-media-id="'+t+'"][data-type="remove"]').addClass("hidden"),$('a[data-media-id="'+t+'"][data-type="add"]').removeClass("hidden"))},1e3)}$(document).on("click","a.add-to-list",function(e){e.preventDefault();$(this).hasClass("is-loading")||t(this)}),$(document).on("click","a.remove-from-list",function(e){e.preventDefault();$(this).hasClass("is-loading")||t(this)})},movieTimeSafe:function(){0<$("#mainPlayer").length&&(videoJS=$("video")[0],videoJSPlayer=videojs("player"),videoJS.addEventListener("loadedmetadata",function(){currentTime=parseFloat($("span#time").attr("data-time")),videoDuration=videoJS.duration,currentTime==videoDuration&&(currentTime=0),videoJS.currentTime=currentTime,videoJSPlayer.volume(parseFloat($("span#time").attr("data-volume")));var e=!1;function t(e,t){var i=e,e=t,n=($resultList=$("#time")).attr("data-show"),t=$(videoJS).attr("data-id"),a=!1,s=!1,o=!1,r=!1;i===e?(watched=1,0<$("#next-episode-btn").length&&(a=($nextBtn=$("#next-episode-btn")).attr("data-id"),0==(s=$nextBtn.attr("data-current-time"))&&(s=1e-6),o=$nextBtn.attr("data-length"),r=0)):watched=0,$.ajax({url:"/movie-watch-time",type:"post",data:{mediaID:t,nextMediaID:a,show:n,time:i,nextTime:s,watched:watched,nextWatched:r,totalLength:e,nextTotalLength:o},success:function(e){$resultList.attr("data-time",i),$resultList.attr("data-show",n)},error:function(e,t,i){console.log("Fehler: "+i)}})}videoJSPlayer.on("play",function(){clearInterval(e),t(videoJS.currentTime,videoDuration),e=setInterval(function(){t(videoJS.currentTime,videoDuration)},3e4)}),videoJSPlayer.on("ended",function(){clearInterval(e),t(videoDuration,videoDuration)}),videoJSPlayer.on("seeking",function(){$(videoJS).hasClass("vjs-scrubbing")&&(clearInterval(e),t(videoDuration,videoDuration),e=setInterval(function(){t(videoJS.currentTime,videoDuration)},3e4))}),videoJSPlayer.on("pause",function(){clearInterval(e),videoJS.currentTime!==videoJS.duration?t(videoJS.currentTime,videoDuration):t(videoDuration,videoDuration)}),$(".play-trigger").on("click",function(){clearInterval(e),t(videoDuration,videoDuration)}),$("#next-episode-btn").on("click",function(){clearInterval(e),t(videoDuration,videoDuration)}),videoJSPlayer.on("volumechange",()=>{var t,e=videoJSPlayer.volume();t=e,$resultList=$("#time"),$.ajax({url:"/save-volume",type:"post",data:{volume:t},success:function(e){$resultList.attr("data-volume",t)},error:function(e,t,i){console.log("Fehler: "+i)}})})}))},remoteWatch:function(){const l=window.location.hostname;0<$("#mainPlayer").length&&(videoPlayer=videojs("player"),document.querySelector(".vjs-big-play-button"),videoPlayer.on("loadedmetadata",()=>{var t=$("span#time").attr("data-session");if(t){const r=new WebSocket(`ws://${l}:3000/?remotesessionID=`+t);let e=!0;function i(e){e=$(e).attr("href");r.send("url:"+e),window.location.href=e}function n(){var e="timeupdate:"+videoPlayer.currentTime();r.send(e)}function a(){var e=$("#message-input").val(),t=$("#message-use-id").val();username=$("#message-use-name").val(),send=`msg:${e}:${t}:`+username,$("#message-input").val(""),0<e.length&&(r.send(send),o(e,t,username))}function s(e,t){$.ajax({url:"/msg",type:"post",data:{joined:"true",userID:e,username:t},success:function(e){$("#message-wrap").append(e),e=document.getElementById("message-wrap");e.scrollTop=e.scrollHeight},error:function(e,t,i){console.log("Fehler: "+i)}})}function o(e,t,i){$.ajax({url:"/msg",type:"post",data:{message:e,userID:t,username:i},success:function(e){$("#message-wrap").append(e),e=document.getElementById("message-wrap");e.scrollTop=e.scrollHeight},error:function(e,t,i){console.log("Fehler: "+i)}})}r.onopen=()=>{var e=$("#message-use-id").val();username=$("#message-use-name").val(),send=`joined:${e}:`+username,s(e,username),r.send(send)},r.onerror=e=>{console.error("WebSocket error:",e)},r.onmessage=e=>{var t;e.data.startsWith("joined:")?s(e.data.split(":")[1],e.data.split(":")[2]):"play"===e.data?videoPlayer.play():"pause"===e.data?videoPlayer.pause():e.data.startsWith("timeupdate:")?(t=parseFloat(e.data.split(":")[1]),videoPlayer.currentTime(t)):e.data.startsWith("url:")?(t=e.data.split(":")[1],window.location.href=t):e.data.startsWith("msg:")&&o(e.data.split(":")[1],e.data.split(":")[2],e.data.split(":")[3])},videoPlayer.on("play",()=>{e?videoPlayer.pause():(n(),r.send("play"))}),videoPlayer.on("pause",()=>{e?e=!1:(n(),r.send("pause"))}),videoPlayer.on("seeking",function(){videoPlayer.hasClass("vjs-scrubbing")&&n()}),$("#player-sek-forward").on("click",function(){n()}),$("#player-sek-back").on("click",function(){n()}),$(".play-trigger").on("click",function(e){e.preventDefault(),i(this)}),$("#next-episode-btn").on("click",function(e){e.preventDefault(),i(this)}),($msgInput=$("#message-input")).on("keyup",function(e){"Enter"===e.key&&a()}),$("#chatMSG").on("click",function(){a()})}}))},highlight:function(){$(".highlight-change").on("change",function(){var e=$(this).attr("data-media"),t=(t=$(this).prop("checked"))?1:0;$.ajax({url:"/highlight-status",type:"post",data:{highlightID:e,status:t},success:function(e){},error:function(e,t,i){console.log("Fehler: "+i)}})})},mediaPopUp:function(){var t=this;0<$("#modal").length||t.$body.append('<div class="modal" id="modal"><div class="modal-overlay"></div><div class="modal-wrap large"><div class="modal-inner-wrap"></div><a href="#" class="modal-close"></a></div></div>'),$modal=$("#modal"),$modalWrap=$("#modal .modal-wrap"),$modalInnerWrap=$("#modal .modal-inner-wrap"),$modalOverlay=$("#modal .modal-overlay"),$modalCloseBtn=$("#modal .modal-close"),$(document).on("click",".info-trigger",function(e){e.preventDefault();var e=$(this).attr("data-src");0==$("#"+e).length?$.ajax({url:"/media-popup",type:"post",data:{mediaID:e},success:function(e){$("body").append(e),$modalInnerWrap.empty(),$(".modal-inner-wrap").append(e),$("body").addClass("active-modal"),$modal.addClass("active"),t.fancyLoad()},error:function(e,t,i){console.log("Fehler: "+i)}}):(e=$("#"+e),$modalInnerWrap.empty(),e.clone().appendTo(".modal-inner-wrap"),$("body").addClass("active-modal"),$modal.addClass("active"))}),$modalOverlay.on("click",function(){$modal.removeClass("active"),$("body").removeClass("active-modal")}),$modalCloseBtn.on("click",function(e){e.preventDefault(),$modal.removeClass("active"),$("body").removeClass("active-modal")})},sorting:function(){var n=this;function e(){var e=$("#genre-filter").val(),t=$("#title-filter").val(),i=$("#type-filter").attr("data-type");$.ajax({url:"/filter",type:"post",data:{genreID:e,order:t,type:i},success:function(e){$("#media-list").empty(),$("#media-list").append(e),n.fancyLoad()},error:function(e,t,i){console.log("Fehler: "+i)}})}$("#genre-filter").on("change",function(){e()}),$("#title-filter").on("change",function(){e()})}}).init()});