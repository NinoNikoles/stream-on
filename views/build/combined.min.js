!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ScrollTrigger",[],t):"object"==typeof exports?exports.ScrollTrigger=t():e.ScrollTrigger=t()}(window,function(){return i=[function(e,t){e.exports=function t(i,n){return null==i||null==n||Object.keys(n).forEach(function(e){"[object Object]"!=Object.prototype.toString.call(n[e])||"[object Object]"!=Object.prototype.toString.call(i[e])?i[e]=n[e]:i[e]=t(i[e],n[e])}),i}},function(e,t){Array.prototype.each=function(e){for(var t=this.length,i=0;i<t;i++){var n=this[i];n&&e(n,i)}},NodeList.prototype.each=Array.prototype.each,NodeList.prototype.filter=Array.prototype.filter},function(e,t,i){"use strict";i.r(t);function n(){this.trigger={once:!1,offset:{viewport:{x:0,y:0},element:{x:0,y:0}},toggle:{class:{in:"visible",out:"invisible"},callback:{in:null,visible:null,out:null}}},this.scroll={sustain:300,element:window,callback:function(){},start:function(){},stop:function(){},directionChange:function(){}}}var s=i(0),a=i.n(s);function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e){return Number(e)===e&&e%1==0}function l(e){return Number(e)===e&&e%1!=0}i(1);o(u.prototype,[{key:"checkVisibility",value:function(e,t){if(!this.active)return this.visible;var e={w:e.offsetWidth||e.innerWidth||0,h:e.offsetHeight||e.innerHeight||0},i=this.getBounds(),i=this._checkVisibility(i,e,t);if(i!==this.visible){this.visible=i;e=this._toggleCallback();e instanceof Promise?e.then(this._toggleClass.bind(this)).catch(function(e){console.error("Trigger promise failed"),console.error(e)}):this._toggleClass(),this.visible&&this.once&&(this.active=!1)}else if(i&&"function"==typeof this.toggle.callback.visible)return this.toggle.callback.visible.call(this.element,this);return i}},{key:"getBounds",value:function(){return this.element.getBoundingClientRect()}},{key:"_getElementOffset",value:function(e,t){var i={x:0,y:0};return"function"==typeof this.offset.element.x?i.x=e.width*this.offset.element.x(this,e,t):l(this.offset.element.x)?i.x=e.width*this.offset.element.x:r(this.offset.element.x)&&(i.x=this.offset.element.x),"function"==typeof this.offset.element.y?i.y=e.height*this.offset.element.y(this,e,t):l(this.offset.element.y)?i.y=e.height*this.offset.element.y:r(this.offset.element.y)&&(i.y=this.offset.element.y),i}},{key:"_getViewportOffset",value:function(e,t){var i={x:0,y:0};return"function"==typeof this.offset.viewport.x?i.x=e.w*this.offset.viewport.x(this,e,t):l(this.offset.viewport.x)?i.x=e.w*this.offset.viewport.x:r(this.offset.viewport.x)&&(i.x=this.offset.viewport.x),"function"==typeof this.offset.viewport.y?i.y=e.h*this.offset.viewport.y(this,e,t):l(this.offset.viewport.y)?i.y=e.h*this.offset.viewport.y:r(this.offset.viewport.y)&&(i.y=this.offset.viewport.y),i}},{key:"_checkVisibility",value:function(e,t,i){var n=this._getElementOffset(e,i),i=this._getViewportOffset(t,i),s=!0;return e.left-i.x<-(e.width-n.x)&&(s=!1),e.left+i.x>t.w-n.x&&(s=!1),e.top-i.y<-(e.height-n.y)&&(s=!1),s=e.top+i.y>t.h-n.y?!1:s}},{key:"_toggleClass",value:function(){var t=this;this.visible?(Array.isArray(this.toggle.class.in)?this.toggle.class.in.each(function(e){t.element.classList.add(e)}):this.element.classList.add(this.toggle.class.in),Array.isArray(this.toggle.class.out)?this.toggle.class.out.each(function(e){t.element.classList.remove(e)}):this.element.classList.remove(this.toggle.class.out)):(Array.isArray(this.toggle.class.in)?this.toggle.class.in.each(function(e){t.element.classList.remove(e)}):this.element.classList.remove(this.toggle.class.in),Array.isArray(this.toggle.class.out)?this.toggle.class.out.each(function(e){t.element.classList.add(e)}):this.element.classList.add(this.toggle.class.out))}},{key:"_toggleCallback",value:function(){if(this.visible){if("function"==typeof this.toggle.callback.in)return this.toggle.callback.in.call(this.element,this)}else if("function"==typeof this.toggle.callback.out)return this.toggle.callback.out.call(this.element,this)}}]);var c=u;function u(e,t){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this.element=e,t=a()((new n).trigger,t),this.offset=t.offset,this.toggle=t.toggle,this.once=t.once,this.visible=null,this.active=!0}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}d(h.prototype,[{key:"add",value:function(e){var t=this;if(e instanceof c)return this.triggers.push(e);e.each(function(e){e instanceof c?t.triggers.push(e):console.error("Object added to TriggerCollection is not a Trigger. Object: ",e)})}},{key:"remove",value:function(e){e instanceof c&&(e=[e]),this.triggers=this.triggers.filter(function(t){var i=!1;return e.each(function(e){e==t&&(i=!0)}),!i})}},{key:"query",value:function(i){return this.triggers.filter(function(e){var e=e.element,t=e.parentNode;return-1<[].slice.call(t.querySelectorAll(i)).indexOf(e)})}},{key:"search",value:function(e){var t=this.triggers.filter(function(t){var i;return e instanceof NodeList||Array.isArray(e)?(i=!1,e.each(function(e){t.element==e&&(i=!0)}),i):t.element==e});return 0==t.length?null:1<t.length?t:t[0]}},{key:"call",value:function(e){this.triggers.each(e)}}]);s=h;function h(e){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.triggers=e instanceof Array?e:[]}function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}f(p.prototype,[{key:"_parseOptions",value:function(e){var t=(new n).scroll;"function"!=typeof e?(t.callback=function(){},t=a()(t,e)):t.callback=e,this.element=t.element,this.sustain=t.sustain,this.callback=t.callback,this.startCallback=t.start,this.stopCallback=t.stop,this.directionChange=t.directionChange}},{key:"_didScroll",value:function(){var e,t=this.getPosition();this.position!==t?(e=this.direction,(e=t.x!==this.position.x?t.x>this.position.x?"right":"left":t.y!==this.position.y?t.y>this.position.y?"bottom":"top":"none")!==this.direction&&(this.direction=e,"function"==typeof this.directionChange)&&this.directionChange(this.direction),this.position=t,this.lastAction=this._getTimestamp()):this.direction="none",this.running||this._startRun()}},{key:"_startRun",value:function(){this.running=!0,"function"==typeof this.startCallback&&this.startCallback(),this._loop()}},{key:"_stopRun",value:function(){this.running=!1,"function"==typeof this.stopCallback&&this.stopCallback()}},{key:"getPosition",value:function(){return{x:this.element.pageXOffset||this.element.scrollLeft||document.documentElement.scrollLeft||0,y:this.element.pageYOffset||this.element.scrollTop||document.documentElement.scrollTop||0}}},{key:"_getTimestamp",value:function(){return Number(Date.now())}},{key:"_tick",value:function(){this.callback(this.position,this.direction),this._getTimestamp()-this.lastAction>this.sustain&&this._stopRun(),this.running&&this._loop()}},{key:"_loop",value:function(){(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){setTimeout(e,1e3/60)})(this._tick.bind(this))}},{key:"kill",value:function(){this.running=!1,this.element.removeEventListener("scroll",this._boundListener)}}]);var v=p;function p(e,t){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this._parseOptions(e),"function"==typeof t&&(this.callback=t),this.direction="none",this.position=this.getPosition(),this.lastAction=this._getTimestamp(),this._startRun(),this._boundListener=this._didScroll.bind(this),this.element.addEventListener("scroll",this._boundListener)}function m(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.d(t,"Trigger",function(){return $}),i.d(t,"TriggerCollection",function(){return g}),i.d(t,"ScrollAnimationLoop",function(){return b}),i.d(t,"default",function(){return y});var $=c,g=s,b=v,y=(m(w.prototype,[{key:"_parseOptions",value:function(e){e=a()(new n,e),this.defaultTrigger=e.trigger,this.scrollOptions=e.scroll}},{key:"_initCollection",value:function(){var e=document.querySelectorAll("[data-scroll]"),t=[];0<e.length&&(t=this.createTriggers(e)),this.collection=new g(t)}},{key:"_initLoop",value:function(){var i=this;this.loop=new b({sustain:this.scrollOptions.sustain,element:this.scrollOptions.element,callback:function(e,t){i._scrollCallback(e,t)},start:function(){i._scrollStart()},stop:function(){i._scrollStop()},directionChange:function(e){i._scrollDirectionChange(e)}})}},{key:"_scrollCallback",value:function(e,t){var i=this;this.collection.call(function(e){e.checkVisibility(i.scrollOptions.element,t)}),this.scrollOptions.callback(e,t)}},{key:"_scrollStart",value:function(){this.scrollOptions.start()}},{key:"_scrollStop",value:function(){this.scrollOptions.stop()}},{key:"_scrollDirectionChange",value:function(e){this.scrollOptions.directionChange(e)}},{key:"createTrigger",value:function(e,t){return new $(e,a()(this.defaultTrigger,t))}},{key:"createTriggers",value:function(e,t){var i=this,n=[];return e.each(function(e){n.push(i.createTrigger(e,t))}),n}},{key:"add",value:function(e,t){return e instanceof HTMLElement?this.collection.add(this.createTrigger(e,t)):e instanceof $?this.collection.add(e):e instanceof NodeList?this.collection.add(this.createTriggers(e,t)):Array.isArray(e)&&e.length&&e[0]instanceof $?this.collection.add(e):Array.isArray(e)&&e.length&&e[0]instanceof HTMLElement?this.collection.add(this.createTriggers(e,t)):this.collection.add(this.createTriggers(document.querySelectorAll(e),t)),this}},{key:"remove",value:function(e){return e instanceof $||Array.isArray(e)&&e.length&&e[0]instanceof $?this.collection.remove(e):e instanceof HTMLElement||Array.isArray(e)&&e.length&&e[0]instanceof HTMLElement||e instanceof NodeList?this.collection.remove(this.search(e)):Array.isArray(e)&&e.length&&e[0]instanceof $?this.collection.remove(e):this.collection.remove(this.query(e.toString())),this}},{key:"query",value:function(e){return this.collection.query(e)}},{key:"search",value:function(e){return this.collection.search(e)}},{key:"listen",value:function(){this.loop||this._initLoop()}},{key:"kill",value:function(){this.loop.kill(),this.loop=null}}]),w);function w(e){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this._parseOptions(e),this._initCollection(),this._initLoop()}}],n={},s.m=i,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=2);function s(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},i[e].call(t.exports,t,t.exports,s),t.l=!0,t)).exports}var i,n});var $=jQuery,$body=$("body"),$h=$("header"),extraMenuCtrl={handlersBinded:!1,initSetting:!1,active:!1,$menuBtn:"",init:function(e){var t=this;!e&&0!=t.initSetting||(t.destroy(),$("#navMain > ul li:has(ul)").append('<a href="#" class="subbutton" title="Untermenü öffnen"></a>'),$("#navMain > ul li:has(ul)").each(function(){var e='<li class="submenu--header"><a href="#" class="backbutton" title="Untermenü schließen"></a>'+$(this).find(">:first-child")[0].outerHTML+"</li>";$(this).find("> ul").prepend(e)}),$(".shopNavWrap > ul li:has(ul)").append('<a href="#" class="subbutton" title="Untermenü öffnen"></a>'),$(".shopNavWrap > ul li:has(ul)").each(function(){var e='<li class="submenu--header"><a href="#" class="backbutton" title="Untermenü schließen"></a>'+$(this).find(">:first-child")[0].outerHTML+"</li>";$(this).find("ul").first().prepend(e)}),t.initSetting=!0),t.$menuBtn=$(".menu-button"),t.handlersBinded||t.bindHandlers()},destroy:function(){$("a.subbutton, .submenu--header").each(function(){$(this).remove()}),this.$menuBtn=$(".menu-button"),this.reset(),this.initSetting=!1},bindHandlers:function(){var i=this;i.handlersBinded=!0,$(document).on("click",".menu-item-has-children a.subbutton",function(e){e.preventDefault();var e=$(this),t=e.prev();i.active=e.parent().attr("data-id"),i.subMenu.show(e,t)}),$(document).on("click",".menu-item-has-children a.backbutton",function(e){e.preventDefault();var e=$(this),t=e.parent("ul");i.subMenu.reset(e,t)}),$(document).on("click",".menu-button",i.show.bind(i)),$(document).on("click",".app--nav--trigger",function(e){var t;$(this).data("nav")&&($(".app--nav--trigger").not($(this)).removeClass("active"),$(this).toggleClass("active"),t=$(this).data("nav"),e.preventDefault(),$body.hasClass("active-menu")&&!$body.hasClass("active-"+t)||($body.hasClass("active-menu")&&$body.hasClass("active-"+t)?($body.removeClass("active-menu"),i.subMenu.reset()):$body.addClass("active-menu")),$(".app--nav--trigger").each(function(e){$(this).data("nav")&&$(this).data("nav")!=t&&$body.removeClass("active-"+$(this).data("nav"))}),$body.toggleClass("active-"+t).removeClass("active-submenu"),i.subMenu.reset())})},show:function(e){e.preventDefault(),$body.toggleClass("active-menu"),this.$menuBtn.toggleClass("active-button")},reset:function(){$body.removeClass("active-menu"),this.$menuBtn.removeClass("active-button")},subMenu:{show:function(e,t){t.hasClass("sub-active")&&e.off("mouseenter mouseleave"),t.toggleClass("sub-active"),$body.toggleClass("active-submenu")},reset:function(){$body.removeClass("active-submenu"),setTimeout(function(){$(".sub-active").removeClass("sub-active"),$(".subbutton.active").removeClass("active")},300)}}};function forEach(e,t){return Array.prototype.forEach.call(e,t)}var resizeTimer,resizeTimerScroll,debounce=function(e){clearTimeout(resizeTimer),resizeTimer=setTimeout(function(){page.resizeHook()},50)},debounceScroll=function(e){clearTimeout(resizeTimerScroll),resizeTimerScroll=setTimeout(function(){checkPosition()},10)},checkPosition=function(e){var t=$(window).scrollTop();80<t||page.mobile&&50<t?($h.addClass("fluid"),$("#masterWrap").addClass("fluid")):($h.removeClass("fluid"),$("#masterWrap").removeClass("fluid"))};$(document).ready(function(){(page={$window:$(window),$html:$("html"),$body:$("body"),$header:$("header"),$masterWrap:$("#masterWrap"),$menuButton:$(".menu-button"),mobileSize:1080,tabletSize:1600,activeClass:"is-active",activeMenu:"active-menu",activeButton:"active-button",src:"data-desktop-src",videosrc:"desktop-src",init:function(){var e=this;e.bindHandlers(),e.themeChange(),e.desktopViewportCheck(),e.fixedHeader(),e.navMobile(),e.tabs(),e.selectTabs(),e.initSlider(),e.initScrolltrigger(),e.userMenuBtn(),e.initPlayer(),e.fancyBox(),e.updateOverlay(),e.pageReady()},bindHandlers:function(){window.addEventListener("resize",debounce),window.addEventListener("scroll",debounceScroll)},pageReady:function(){$("#loader").addClass("hidden"),$("body").removeClass("loading"),this.fancyLoad()},desktopViewportCheck:function(){var e=this;extraMenuCtrl.init(!0),window.innerWidth>=e.mobileSize?(e.mobile=!1,e.$masterWrap.removeClass("mobile-state")):(e.mobile=!0,e.$masterWrap.addClass("mobile-state"))},lockScrollPosition:function(){var e=[document.documentElement.scrollLeft,document.documentElement.scrollTop];this.$html.data("scroll-position",e),this.$html.css("overflow-y","hidden"),window.scroll(e[0],e[1])},unlockScrollPosition:function(){var e=this.$html.data("scroll-position");if(void 0===e)return!1;this.$html.css("overflow-y","auto"),window.scroll(e[0],e[1])},resizeHook:function(){this.desktopViewportCheck(),this.fixedHeader(),this.navMobile(),this.fancyLoad()},initScrolltrigger:function(){var e=new ScrollTrigger.default({trigger:{once:!0},offset:{element:{x:0,y:function(e,t,i){return.5}}}});e.add("[data-trigger]"),e.add(".card-slider"),e.add(".genre-slider"),e.add("#load-count"),e.add(".currentWatch-slider")},fixedHeader:function(){headerHeight=this.$header.height(),this.$header.hasClass("fixed-header")?this.$body.css("padding-top",headerHeight):this.$body.css("padding-top",0)},navMobile:function(){var e=$("#navMain");headerHeight=this.$header.height(),e.css({top:headerHeight,height:"calc(100vh - "+headerHeight+"px)"})},fancyLoad:function(){var t=this;t.src="data-img",forEach(document.querySelectorAll("img[data-img]"),function(e){e.setAttribute("src",e.getAttribute(t.src)),$(e).removeAttr("data-img")})},themeChange:function(){var t=this,i="pageTheme";$("#theme-switch").on("click",function(e){e.preventDefault(),expireDate=new Date(Math.floor((new Date).getTime()+31536e6)),"light"===t.$html.attr("data-theme")?(document.cookie=i+"=dark; path=/; expires="+expireDate,t.$html.attr("data-theme","dark")):(document.cookie=i+"=light; path=/; expires="+expireDate,t.$html.attr("data-theme","light"))})},tabs:function(){var a=this;$(".tabs .tabs-title > a").on("click",function(e){e.preventDefault();var e=$(this),t=e.attr("href"),i=e.parent(),n=i.parent(),s=n.attr("id");i.hasClass(a.activeClass)||(n.children(".tabs-title").removeClass(a.activeClass).children("a").attr("aria-selected","false"),i.addClass(a.activeClass),e.attr("aria-selected","true"),i=(n=$('[data-tabs-content="'+s+'"]')).find(t),n.find(".tabs-panel").removeClass(a.activeClass),i.addClass(a.activeClass))})},selectTabs:function(){$(document).on("change",".tab-select",function(e){e.preventDefault();var e=$(this),i=e.val();tabsClass=e.attr("id"),$currTab=$("."+tabsClass+'[data-select-tab="'+i+'"]'),$("body select."+tabsClass).each(function(e,t){$(t).val(i)}),$("body select."+tabsClass).val(i),$("body select."+tabsClass+' option[value="'+i+'"]').prop("selected",!0),$("."+tabsClass+".is-active").toggleClass("is-active"),$currTab.toggleClass("is-active")})},fancyBox:function(){Fancybox.bind("[data-fancybox]",{dragToClose:!1})},initSlider:function(){sliderNumber=1,$(".swiper").each(function(){var e=$(this);const t="swiper-"+sliderNumber,i=".swiper-"+sliderNumber;e.addClass(t);var n=2,s=3,a=4,o=6,r=720,l=1080,c=1400;new Swiper(i,{loop:!0,slidesPerView:n,spaceBetween:16,allowTouchMove:!0,breakpoints:{720:{slidesPerView:s},1080:{slidesPerView:a},1400:{slidesPerView:o}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}).on("resize",function(){var e;e=this,(bp=window.innerWidth)>=c?$(i+" .swiper-slide").length>o?e.loop=!0:e.loop=!1:bp>=l?$(i+" .swiper-slide").length>a?e.loop=!0:e.loop=!1:bp>=r?$(i+" .swiper-slide").length>s?e.loop=!0:e.loop=!1:$(i+" .swiper-slide").length>n?e.loop=!0:e.loop=!1,e.update()}),e.find('[data-fancybox="gallery"]').each(function(){$(this).attr("data-fancybox",t)}),sliderNumber++})},initPlayer:function(){var e;0<$("#player").length&&(e=videojs("player"),video=$("video")[0],sekunde=$("span[data-time]").attr("data-time"),video.addEventListener("loadedmetadata",function(){video.currentTime=sekunde,$("#player-back-btn").appendTo(".video-js"),0<$("#next-episode-btn").length&&$("#next-episode-btn").appendTo(".video-js"),0<$("#show-container").length&&$("#show-container").appendTo(".video-js"),0<$("#show-eps-btn").length&&$("#show-eps-btn").appendTo(".video-js .vjs-control-bar")}),e.on("play",function(){$fullscreen=$(".vjs-fullscreen-control"),$currTime=$(".vjs-current-time"),$divider=$(".vjs-time-divider"),$duration=$(".vjs-duration"),0<$("#show-eps-btn").length?($epsBtnWidth=$("#show-eps-btn").outerWidth(),$("#show-eps-btn").css("right",$fullscreen.outerWidth())):$epsBtnWidth=0,$duration.css("right",$fullscreen.outerWidth()+$epsBtnWidth),$divider.css("right",$fullscreen.outerWidth()+$epsBtnWidth+$duration.outerWidth()),$currTime.css("right",$fullscreen.outerWidth()+$epsBtnWidth+$duration.outerWidth()+$divider.outerWidth())}),($nextEpisodeBtn=$("#next-episode-btn"))&&video.addEventListener("timeupdate",function(){var e=video.currentTime,t=video.duration-20;t<=e&&$nextEpisodeBtn.addClass("visible"),e<=t&&$nextEpisodeBtn.hasClass("visible")&&$nextEpisodeBtn.removeClass("visible")}),showContainer="#show-container",$(showContainer+" .menu li>a").on("click",function(e){e.preventDefault(),$(showContainer).addClass("active-submenu"),listID=$(this).attr("data-id"),$(showContainer+" ul.sub-menu#"+listID).addClass("active")}),$(showContainer+" .menu li .sub-menu .back").on("click",function(e){e.preventDefault(),$(showContainer).removeClass("active-submenu"),$(showContainer+" ul.sub-menu").removeClass("active")}),$("a#show-eps-btn").on("click",function(e){e.preventDefault(),$(showContainer).toggleClass("visible")}))},userMenuBtn:function(){($menuBtn=$("#user-menu-btn")).on("click",function(e){var t=$(this);t.hasClass("active")&&!$(e.target).is(".user-menu")?t.removeClass("active"):t.addClass("active")}),$menuBtn.on("blur",function(){var e=$(this);!e.is(":hover")&&e.hasClass("active")&&e.removeClass("active")})},updateOverlay:function(){function e(){$("body").addClass("loading"),$("#loader").removeClass("hidden"),$("#loader span").addClass("visible")}$(document).on("click","#add-movie",e),$(document).on("click","#delete-movie",e),$(document).on("click","#add-show",e),$(document).on("click","#update-show",e),$(document).on("click","#delete-show",e),$(document).on("click","#addHighlight",e)}}).init()});var inputTimer,throttel=function(e){clearTimeout(resizeTimer),inputTimer=setTimeout(function(){page.resizeHook()},50)};$(document).ready(function(){(page={$window:$(window),$html:$("html"),$body:$("body"),$header:$("header"),$masterWrap:$("#masterWrap"),$menuButton:$(".menu-button"),$apiSearch:$("#movie-api-search"),$showApiSearch:$("#show-api-search"),$liveSearch:$("#movie-live-search"),$searchBtn:$(".search-btn"),mobileSize:1080,tabletSize:1600,activeClass:"is-active",activeMenu:"active-menu",activeButton:"active-button",src:"data-desktop-src",videosrc:"desktop-src",init:function(){var e=this;e.movieLiveSearch(),e.showLiveSearch(),e.jstreeMovie(),e.jstreeEpisode(),e.myList(),e.movieTimeSafe(),e.highlight(),e.mediaPopUp(),e.sorting()},bindHandlers:function(){window.addEventListener("resize",debounce),window.addEventListener("scroll",debounceScroll)},movieLiveSearch:function(){var t=this;t.$apiSearch.on("input",function(){$this=$(this),$resultList=$("#movieSearchResults"),setTimeout(function(){var e=$this.val();$this.val(e),0==e.length?$resultList.addClass("hidden"):$resultList.removeClass("hidden"),$.ajax({url:"/admin/movies/movie-api-search",type:"post",data:{movie:e},success:function(e){$resultList.html(e),t.fancyLoad()},error:function(e,t,i){console.log("Fehler: "+i)}})},500)}),t.$liveSearch.on("input",function(){$this=$(this),$resultList=$("#movieLivesearchResults"),$resultPageList=$("#moviePageLivesearchResults"),$searchValueEl=$("#search-value"),setTimeout(function(){var e=$this.val();0<$("#searchpage").length?($searchValueEl.text(e),$.ajax({url:"/live-search",type:"post",data:{movie:e},success:function(e){$resultPageList.html(e),t.fancyLoad()},error:function(e,t,i){console.log("Fehler: "+i)}})):(0==e.length?$resultList.addClass("hidden"):$resultList.removeClass("hidden"),$.ajax({url:"/searchbar",type:"post",data:{movie:e},success:function(e){$resultList.html(e),t.fancyLoad()},error:function(e,t,i){console.log("Fehler: "+i)}}))},500)}),t.$searchBtn.on("click",function(e){0<t.$liveSearch.val().length||(e.preventDefault(),$(".search-bar").hasClass("active-search")?(t.$liveSearch.val(""),$(".search-bar").removeClass("active-search")):$(".search-bar").addClass("active-search"))})},showLiveSearch:function(){var t=this;t.$showApiSearch.on("input",function(){$this=$(this),$resultList=$("#showSearchResults"),setTimeout(function(){var e=$this.val();$this.val(e),0==e.length?$resultList.addClass("hidden"):$resultList.removeClass("hidden"),$.ajax({url:"/admin/shows/show-api-search",type:"post",data:{show:e},success:function(e){$resultList.html(e),t.fancyLoad()},error:function(e,t,i){console.log("Fehler: "+i)}})},500)})},fancyLoad:function(){var t=this;t.src="data-img",forEach(document.querySelectorAll("img[data-img]"),function(e){e.setAttribute("src",e.getAttribute(t.src)),$(e).removeAttr("data-img")})},jstreeMovie:function(){0<$("#file-tree").length&&$.ajax({url:"/admin/file-api",type:"get",dataType:"json",success:function(e){$("#file-tree").jstree({core:{themes:{stripes:!0},data:e,multiple:!1},checkbox:{three_state:!1},plugins:["search","state","wholerow"]}),$("#file-tree").on("select_node.jstree",function(e,t){var i;t.instance.get_node(t.selected[0]).text.endsWith(".mp4")?(i=$("#file-tree").jstree("get_path",t.node,"/"),$("#inputMoviePath").attr("value","/media/"+i),$("#inputMovieSubmit").css("display","inline-flex")):(t.instance.deselect_node(t.selected[0]),$("#inputMovieSubmit").css("display","none"))});var t=!1;$("#jstree-search").keyup(function(){t&&clearTimeout(t),t=setTimeout(function(){var e=$("#jstree-search").val();$("#file-tree").jstree(!0).search(e)},250)})},error:function(e,t,i){console.error(i)}}),0<$(".file-tree-episode").length&&$.ajax({url:"/admin/file-api",type:"get",dataType:"json",success:function(e){$(".file-tree-episode").jstree({core:{animation:0,check_callback:!0,themes:{stripes:!0},data:e,multiple:!1},checkbox:{three_state:!1},types:{video:{icon:"jstree-file"}},plugins:["contextmenu","dnd","search","state","types","wholerow"]}),$(".file-tree-episode").on("select_node.jstree",function(e,t){var i=t.instance.get_node(t.selected[0]),n=$(this).attr("data-element-id");i.text.endsWith(".mp4")?(i=$(this).jstree("get_path",t.node,"/"),$("#inputEpisodePath-"+n).attr("value","/media/"+i),$("#inputEpisodeSubmit-"+n).css("display","inline-flex")):(t.instance.deselect_node(t.selected[0]),$("#inputEpisodeSubmit-"+n).css("display","none"))})},error:function(e,t,i){console.error(i)}})},jstreeEpisode:function(){0<$(".file-tree-episode").length&&($(".file-tree-episode").each(function(e,n){$.ajax({url:"/admin/file-api",type:"get",dataType:"json",success:function(e){$(n).jstree({core:{animation:0,check_callback:!0,themes:{stripes:!0},data:e,multiple:!1},checkbox:{three_state:!1},types:{video:{icon:"jstree-file"}},plugins:["contextmenu","dnd","search","state","types","wholerow"]}),$(n).on("select_node.jstree",function(e,t){var i;t.instance.get_node(t.selected[0]).text.endsWith(".mp4")?(i=$(n).jstree("get_path",t.node,"/"),elID=$(n).attr("data-element-id"),$('[data-submit="'+elID+'"]').attr("data-path","/media/"+i),$('[data-submit="'+elID+'"]').css("display","inline-flex")):(t.instance.deselect_node(t.selected[0]),$('[data-submit="'+elID+'"]').css("display","none"))})},error:function(e,t,i){console.error(i)}})}),$(".episode-path-submit").on("click",function(){var e=$(this).attr("data-path"),t=$(this).attr("data-submit");$.ajax({url:"/admin/episode-file-path",type:"post",data:{mediaID:t,path:e},success:function(e){alert("Gespeichert")},error:function(e,t,i){console.log("Fehler: "+i)}})}))},myList:function(){function t(e){$(e).addClass("is-loading");var t=$(e).attr("data-media-id"),i=$(e).attr("data-type");setTimeout(function(){$.ajax({url:"/add-to-list",type:"post",data:{mediaID:t,type:i},success:function(e){},error:function(e,t,i){console.log("Fehler: "+i)}}),$(e).removeClass("is-loading"),"add"===i?($('a[data-media-id="'+t+'"][data-type="add"]').addClass("hidden"),$('a[data-media-id="'+t+'"][data-type="remove"]').removeClass("hidden")):"remove"===i&&($('a[data-media-id="'+t+'"][data-type="remove"]').addClass("hidden"),$('a[data-media-id="'+t+'"][data-type="add"]').removeClass("hidden"))},1e3)}$(document).on("click","a.add-to-list",function(e){e.preventDefault();$(this).hasClass("is-loading")||t(this)}),$(document).on("click","a.remove-from-list",function(e){e.preventDefault();$(this).hasClass("is-loading")||t(this)})},movieTimeSafe:function(){0<$("#mainPlayer").length&&(video=$("#player")[0],$(video).on("loadedmetadata",function(){var e=!1,t=!1;function i(e,t){var i=e,e=t,n=($resultList=$("#time")).attr("data-show");watched=i===e?1:0,$.ajax({url:"/movie-watch-time",type:"post",data:{mediaID:$(video).attr("data-id"),show:n,time:i,watched:watched,totalLength:e},success:function(e){$resultList.attr("data-time",i),$resultList.attr("data-show",n)},error:function(e,t,i){console.log("Fehler: "+i)}})}$(video).on("play",function(){t=!1,i(video.currentTime,video.duration),clearInterval(e),e=setInterval(i,3e4)}),$(video).on("ended",function(){t=!0,clearInterval(e),i(video.duration,video.duration)}),$(video).on("pause",function(){t||video.currentTime===video.duration||(clearInterval(e),i(video.currentTime,video.duration))})}))},highlight:function(){$(".highlight-change").on("change",function(){var e=$(this).attr("data-media"),t=(t=$(this).prop("checked"))?1:0;$.ajax({url:"/highlight-status",type:"post",data:{highlightID:e,status:t},success:function(e){},error:function(e,t,i){console.log("Fehler: "+i)}})})},mediaPopUp:function(){var t=this;0<$("#modal").length||t.$body.append('<div class="modal" id="modal"><div class="modal-overlay"></div><div class="modal-wrap large"><div class="modal-inner-wrap"></div><a href="#" class="modal-close"></a></div></div>'),$modal=$("#modal"),$modalWrap=$("#modal .modal-wrap"),$modalInnerWrap=$("#modal .modal-inner-wrap"),$modalOverlay=$("#modal .modal-overlay"),$modalCloseBtn=$("#modal .modal-close"),$(document).on("click",".info-trigger",function(e){e.preventDefault();var e=$(this).attr("data-src");0==$("#"+e).length?$.ajax({url:"/media-popup",type:"post",data:{mediaID:e},success:function(e){$("body").append(e),$modalInnerWrap.empty(),$(".modal-inner-wrap").append(e),$("body").addClass("active-modal"),$modal.addClass("active"),t.fancyLoad()},error:function(e,t,i){console.log("Fehler: "+i)}}):(e=$("#"+e),$modalInnerWrap.empty(),e.clone().appendTo(".modal-inner-wrap"),$("body").addClass("active-modal"),$modal.addClass("active"))}),$modalOverlay.on("click",function(){$modal.removeClass("active"),$("body").removeClass("active-modal")}),$modalCloseBtn.on("click",function(e){e.preventDefault(),$modal.removeClass("active"),$("body").removeClass("active-modal")})},sorting:function(){function e(){var e=$("#genre-filter").val(),t=$("#title-filter").val();$.ajax({url:"/sorting",type:"post",data:{genreID:e,order:t},success:function(e){$("#media-list").empty(),$("#media-list").append(e)},error:function(e,t,i){console.log("Fehler: "+i)}})}$("#genre-filter").on("change",function(){e()}),$("#title-filter").on("change",function(){e()})}}).init()});