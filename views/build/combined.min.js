!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(e.document)return t(e);throw new Error("jQuery requires a window with a document")}:t(e)}("undefined"!=typeof window?window:this,function(w,N){"use strict";function y(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item}function m(e){return null!=e&&e===e.window}var t=[],R=Object.getPrototypeOf,o=t.slice,B=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},U=t.push,F=t.indexOf,$={},H=$.toString,q=$.hasOwnProperty,z=q.toString,W=z.call(Object),g={},x=w.document,V={type:!0,src:!0,nonce:!0,noModule:!0};function X(e,t,i){var n,r,s=(i=i||x).createElement("script");if(s.text=e,t)for(n in V)(r=t[n]||t.getAttribute&&t.getAttribute(n))&&s.setAttribute(n,r);i.head.appendChild(s).parentNode.removeChild(s)}function f(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?$[H.call(e)]||"object":typeof e}var e="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function G(e){var t=!!e&&"length"in e&&e.length,i=f(e);return!y(e)&&!m(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:e,constructor:S,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=S.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return S.each(this,e)},map:function(i){return this.pushStack(S.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:U,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,i,n,r,s=arguments[0]||{},a=1,o=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||y(s)||(s={}),a===o&&(s=this,a--);a<o;a++)if(null!=(e=arguments[a]))for(t in e)i=e[t],"__proto__"!==t&&s!==i&&(l&&i&&(S.isPlainObject(i)||(n=Array.isArray(i)))?(r=s[t],r=n&&!Array.isArray(r)?[]:n||S.isPlainObject(r)?r:{},n=!1,s[t]=S.extend(l,r,i)):void 0!==i&&(s[t]=i));return s},S.extend({expando:"jQuery"+(e+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==H.call(e)||(e=R(e))&&("function"!=typeof(e=q.call(e,"constructor")&&e.constructor)||z.call(e)!==W))},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,i){X(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(G(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){t=t||[];return null!=e&&(G(Object(e))?S.merge(t,"string"==typeof e?[e]:e):U.call(t,e)),t},inArray:function(e,t,i){return null==t?-1:F.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,s=e.length,a=!i;r<s;r++)!t(e[r],r)!=a&&n.push(e[r]);return n},map:function(e,t,i){var n,r,s=0,a=[];if(G(e))for(n=e.length;s<n;s++)null!=(r=t(e[s],s,i))&&a.push(r);else for(s in e)null!=(r=t(e[s],s,i))&&a.push(r);return B(a)},guid:1,support:g}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){$["[object "+t+"]"]=t.toLowerCase()});function n(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&S(e).is(i))break;n.push(e)}return n}function Y(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}var e=function(N){function u(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function R(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}function B(){w()}var e,h,b,s,U,p,F,$,T,l,c,w,x,i,S,f,n,r,m,k="sizzle"+ +new Date,d=N.document,E=0,H=0,q=I(),z=I(),W=I(),g=I(),V=function(e,t){return e===t&&(c=!0),0},X={}.hasOwnProperty,t=[],G=t.pop,Y=t.push,C=t.push,K=t.slice,y=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},Q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",a="[\\x20\\t\\r\\n\\f]",o="(?:\\\\[\\da-fA-F]{1,6}"+a+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",J="\\["+a+"*("+o+")(?:"+a+"*([*^$|!~]?=)"+a+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+o+"))|)"+a+"*\\]",Z=":("+o+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+J+")*)|.*)\\)|)",ee=new RegExp(a+"+","g"),v=new RegExp("^"+a+"+|((?:^|[^\\\\])(?:\\\\.)*)"+a+"+$","g"),te=new RegExp("^"+a+"*,"+a+"*"),ie=new RegExp("^"+a+"*([>+~]|"+a+")"+a+"*"),ne=new RegExp(a+"|>"),re=new RegExp(Z),se=new RegExp("^"+o+"$"),_={ID:new RegExp("^#("+o+")"),CLASS:new RegExp("^\\.("+o+")"),TAG:new RegExp("^("+o+"|[*])"),ATTR:new RegExp("^"+J),PSEUDO:new RegExp("^"+Z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+a+"*(even|odd|(([+-]|)(\\d*)n|)"+a+"*(?:([+-]|)"+a+"*(\\d+)|))"+a+"*\\)|)","i"),bool:new RegExp("^(?:"+Q+")$","i"),needsContext:new RegExp("^"+a+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+a+"*((?:-\\d)?\\d*)"+a+"*\\)|)(?=[^-]|$)","i")},ae=/HTML$/i,oe=/^(?:input|select|textarea|button)$/i,le=/^h\d$/i,A=/^[^{]+\{\s*\[native \w/,ce=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,de=/[+~]/,P=new RegExp("\\\\[\\da-fA-F]{1,6}"+a+"?|\\\\([^\\r\\n\\f])","g"),ue=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,he=ye(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{C.apply(t=K.call(d.childNodes),d.childNodes),t[d.childNodes.length].nodeType}catch(e){C={apply:t.length?function(e,t){Y.apply(e,K.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function L(e,t,i,n){var r,s,a,o,l,c,d=t&&t.ownerDocument,u=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==u&&9!==u&&11!==u)return i;if(!n&&(w(t),t=t||x,S)){if(11!==u&&(o=ce.exec(e)))if(r=o[1]){if(9===u){if(!(c=t.getElementById(r)))return i;if(c.id===r)return i.push(c),i}else if(d&&(c=d.getElementById(r))&&m(t,c)&&c.id===r)return i.push(c),i}else{if(o[2])return C.apply(i,t.getElementsByTagName(e)),i;if((r=o[3])&&h.getElementsByClassName&&t.getElementsByClassName)return C.apply(i,t.getElementsByClassName(r)),i}if(h.qsa&&!g[e+" "]&&(!f||!f.test(e))&&(1!==u||"object"!==t.nodeName.toLowerCase())){if(c=e,d=t,1===u&&(ne.test(e)||ie.test(e))){for((d=de.test(e)&&ge(t.parentNode)||t)===t&&h.scope||((a=t.getAttribute("id"))?a=a.replace(ue,R):t.setAttribute("id",a=k)),s=(l=p(e)).length;s--;)l[s]=(a?"#"+a:":scope")+" "+j(l[s]);c=l.join(",")}try{return C.apply(i,d.querySelectorAll(c)),i}catch(t){g(e,!0)}finally{a===k&&t.removeAttribute("id")}}}return $(e.replace(v,"$1"),t,i,n)}function I(){var n=[];return function e(t,i){return n.push(t+" ")>b.cacheLength&&delete e[n.shift()],e[t+" "]=i}}function O(e){return e[k]=!0,e}function M(e){var t=x.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function pe(e,t){for(var i=e.split("|"),n=i.length;n--;)b.attrHandle[i[n]]=t}function fe(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function me(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&he(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function D(a){return O(function(s){return s=+s,O(function(e,t){for(var i,n=a([],e.length,s),r=n.length;r--;)e[i=n[r]]&&(e[i]=!(t[i]=e[i]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in h=L.support={},U=L.isXML=function(e){var t=e&&e.namespaceURI,e=e&&(e.ownerDocument||e).documentElement;return!ae.test(t||e&&e.nodeName||"HTML")},w=L.setDocument=function(e){var e=e?e.ownerDocument||e:d;return e!=x&&9===e.nodeType&&e.documentElement&&(i=(x=e).documentElement,S=!U(x),d!=x&&(e=x.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",B,!1):e.attachEvent&&e.attachEvent("onunload",B)),h.scope=M(function(e){return i.appendChild(e).appendChild(x.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),h.attributes=M(function(e){return e.className="i",!e.getAttribute("className")}),h.getElementsByTagName=M(function(e){return e.appendChild(x.createComment("")),!e.getElementsByTagName("*").length}),h.getElementsByClassName=A.test(x.getElementsByClassName),h.getById=M(function(e){return i.appendChild(e).id=k,!x.getElementsByName||!x.getElementsByName(k).length}),h.getById?(b.filter.ID=function(e){var t=e.replace(P,u);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&S)return(t=t.getElementById(e))?[t]:[]}):(b.filter.ID=function(e){var t=e.replace(P,u);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var i,n,r,s=t.getElementById(e);if(s){if((i=s.getAttributeNode("id"))&&i.value===e)return[s];for(r=t.getElementsByName(e),n=0;s=r[n++];)if((i=s.getAttributeNode("id"))&&i.value===e)return[s]}return[]}}),b.find.TAG=h.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):h.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,s=t.getElementsByTagName(e);if("*"!==e)return s;for(;i=s[r++];)1===i.nodeType&&n.push(i);return n},b.find.CLASS=h.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&S)return t.getElementsByClassName(e)},n=[],f=[],(h.qsa=A.test(x.querySelectorAll))&&(M(function(e){var t;i.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&f.push("[*^$]="+a+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||f.push("\\["+a+"*(?:value|"+Q+")"),e.querySelectorAll("[id~="+k+"-]").length||f.push("~="),(t=x.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||f.push("\\["+a+"*name"+a+"*="+a+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||f.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||f.push(".#.+[+~]"),e.querySelectorAll("\\\f"),f.push("[\\r\\n\\f]")}),M(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=x.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&f.push("name"+a+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&f.push(":enabled",":disabled"),i.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),f.push(",.*:")})),(h.matchesSelector=A.test(r=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector||i.msMatchesSelector))&&M(function(e){h.disconnectedMatch=r.call(e,"*"),r.call(e,"[s!='']:x"),n.push("!=",Z)}),f=f.length&&new RegExp(f.join("|")),n=n.length&&new RegExp(n.join("|")),e=A.test(i.compareDocumentPosition),m=e||A.test(i.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(i.contains?i.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=e?function(e,t){var i;return e===t?(c=!0,0):!e.compareDocumentPosition-!t.compareDocumentPosition||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!h.sortDetached&&t.compareDocumentPosition(e)===i?e==x||e.ownerDocument==d&&m(d,e)?-1:t==x||t.ownerDocument==d&&m(d,t)?1:l?y(l,e)-y(l,t):0:4&i?-1:1)}:function(e,t){if(e===t)return c=!0,0;var i,n=0,r=e.parentNode,s=t.parentNode,a=[e],o=[t];if(!r||!s)return e==x?-1:t==x?1:r?-1:s?1:l?y(l,e)-y(l,t):0;if(r===s)return fe(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)o.unshift(i);for(;a[n]===o[n];)n++;return n?fe(a[n],o[n]):a[n]==d?-1:o[n]==d?1:0}),x},L.matches=function(e,t){return L(e,null,null,t)},L.matchesSelector=function(e,t){if(w(e),h.matchesSelector&&S&&!g[t+" "]&&(!n||!n.test(t))&&(!f||!f.test(t)))try{var i=r.call(e,t);if(i||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){g(t,!0)}return 0<L(t,x,null,[e]).length},L.contains=function(e,t){return(e.ownerDocument||e)!=x&&w(e),m(e,t)},L.attr=function(e,t){(e.ownerDocument||e)!=x&&w(e);var i=b.attrHandle[t.toLowerCase()],i=i&&X.call(b.attrHandle,t.toLowerCase())?i(e,t,!S):void 0;return void 0!==i?i:h.attributes||!S?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},L.escape=function(e){return(e+"").replace(ue,R)},L.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},L.uniqueSort=function(e){var t,i=[],n=0,r=0;if(c=!h.detectDuplicates,l=!h.sortStable&&e.slice(0),e.sort(V),c){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return l=null,e},s=L.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=s(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=s(t);return i},(b=L.selectors={cacheLength:50,createPseudo:O,match:_,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(P,u),e[3]=(e[3]||e[4]||e[5]||"").replace(P,u),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||L.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&L.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return _.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&re.test(i)&&(t=(t=p(i,!0))&&i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(P,u).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+a+")"+e+"("+a+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(e){e=L.attr(e,t);return null==e?"!="===i:!i||(e+="","="===i?e===n:"!="===i?e!==n:"^="===i?n&&0===e.indexOf(n):"*="===i?n&&-1<e.indexOf(n):"$="===i?n&&e.slice(-n.length)===n:"~="===i?-1<(" "+e.replace(ee," ")+" ").indexOf(n):"|="===i&&(e===n||e.slice(0,n.length+1)===n+"-"))}},CHILD:function(f,e,t,m,g){var v="nth"!==f.slice(0,3),y="last"!==f.slice(-4),_="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,i){var n,r,s,a,o,l,c=v!=y?"nextSibling":"previousSibling",d=e.parentNode,u=_&&e.nodeName.toLowerCase(),h=!i&&!_,p=!1;if(d){if(v){for(;c;){for(a=e;a=a[c];)if(_?a.nodeName.toLowerCase()===u:1===a.nodeType)return!1;l=c="only"===f&&!l&&"nextSibling"}return!0}if(l=[y?d.firstChild:d.lastChild],y&&h){for(p=(o=(n=(r=(s=(a=d)[k]||(a[k]={}))[a.uniqueID]||(s[a.uniqueID]={}))[f]||[])[0]===E&&n[1])&&n[2],a=o&&d.childNodes[o];a=++o&&a&&a[c]||(p=o=0,l.pop());)if(1===a.nodeType&&++p&&a===e){r[f]=[E,o,p];break}}else if(!1===(p=h?o=(n=(r=(s=(a=e)[k]||(a[k]={}))[a.uniqueID]||(s[a.uniqueID]={}))[f]||[])[0]===E&&n[1]:p))for(;(a=++o&&a&&a[c]||(p=o=0,l.pop()))&&((_?a.nodeName.toLowerCase()!==u:1!==a.nodeType)||!++p||(h&&((r=(s=a[k]||(a[k]={}))[a.uniqueID]||(s[a.uniqueID]={}))[f]=[E,p]),a!==e)););return(p-=g)===m||p%m==0&&0<=p/m}}},PSEUDO:function(e,s){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||L.error("unsupported pseudo: "+e);return a[k]?a(s):1<a.length?(t=[e,e,"",s],b.setFilters.hasOwnProperty(e.toLowerCase())?O(function(e,t){for(var i,n=a(e,s),r=n.length;r--;)e[i=y(e,n[r])]=!(t[i]=n[r])}):function(e){return a(e,0,t)}):a}},pseudos:{not:O(function(e){var n=[],r=[],o=F(e.replace(v,"$1"));return o[k]?O(function(e,t,i,n){for(var r,s=o(e,null,n,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))}):function(e,t,i){return n[0]=e,o(n,null,i,r),n[0]=null,!r.pop()}}),has:O(function(t){return function(e){return 0<L(t,e).length}}),contains:O(function(t){return t=t.replace(P,u),function(e){return-1<(e.textContent||s(e)).indexOf(t)}}),lang:O(function(i){return se.test(i||"")||L.error("unsupported lang: "+i),i=i.replace(P,u).toLowerCase(),function(e){var t;do{if(t=S?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=N.location&&N.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===i},focus:function(e){return e===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return le.test(e.nodeName)},input:function(e){return oe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:D(function(){return[0]}),last:D(function(e,t){return[t-1]}),eq:D(function(e,t,i){return[i<0?i+t:i]}),even:D(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:D(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:D(function(e,t,i){for(var n=i<0?i+t:t<i?t:i;0<=--n;)e.push(n);return e}),gt:D(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=function(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}(e);function ve(){}function j(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function ye(a,e,t){var o=e.dir,l=e.next,c=l||o,d=t&&"parentNode"===c,u=H++;return e.first?function(e,t,i){for(;e=e[o];)if(1===e.nodeType||d)return a(e,t,i);return!1}:function(e,t,i){var n,r,s=[E,u];if(i){for(;e=e[o];)if((1===e.nodeType||d)&&a(e,t,i))return!0}else for(;e=e[o];)if(1===e.nodeType||d)if(r=(r=e[k]||(e[k]={}))[e.uniqueID]||(r[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[o]||e;else{if((n=r[c])&&n[0]===E&&n[1]===u)return s[2]=n[2];if((r[c]=s)[2]=a(e,t,i))return!0}return!1}}function _e(r){return 1<r.length?function(e,t,i){for(var n=r.length;n--;)if(!r[n](e,t,i))return!1;return!0}:r[0]}function be(e,t,i,n,r){for(var s,a=[],o=0,l=e.length,c=null!=t;o<l;o++)!(s=e[o])||i&&!i(s,n,r)||(a.push(s),c&&t.push(o));return a}function Te(e){for(var n,t,i,r=e.length,s=b.relative[e[0].type],a=s||b.relative[" "],o=s?1:0,l=ye(function(e){return e===n},a,!0),c=ye(function(e){return-1<y(n,e)},a,!0),d=[function(e,t,i){e=!s&&(i||t!==T)||((n=t).nodeType?l:c)(e,t,i);return n=null,e}];o<r;o++)if(t=b.relative[e[o].type])d=[ye(_e(d),t)];else{if((t=b.filter[e[o].type].apply(null,e[o].matches))[k]){for(i=++o;i<r&&!b.relative[e[i].type];i++);return function e(p,f,m,g,v,t){return g&&!g[k]&&(g=e(g)),v&&!v[k]&&(v=e(v,t)),O(function(e,t,i,n){var r,s,a,o=[],l=[],c=t.length,d=e||function(e,t,i){for(var n=0,r=t.length;n<r;n++)L(e,t[n],i);return i}(f||"*",i.nodeType?[i]:i,[]),u=!p||!e&&f?d:be(d,o,p,i,n),h=m?v||(e?p:c||g)?[]:t:u;if(m&&m(u,h,i,n),g)for(r=be(h,l),g(r,[],i,n),s=r.length;s--;)(a=r[s])&&(h[l[s]]=!(u[l[s]]=a));if(e){if(v||p){if(v){for(r=[],s=h.length;s--;)(a=h[s])&&r.push(u[s]=a);v(null,h=[],r,n)}for(s=h.length;s--;)(a=h[s])&&-1<(r=v?y(e,a):o[s])&&(e[r]=!(t[r]=a))}}else h=be(h===t?h.splice(c,h.length):h),v?v(null,t,h,n):C.apply(t,h)})}(1<o&&_e(d),1<o&&j(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(v,"$1"),t,o<i&&Te(e.slice(o,i)),i<r&&Te(e=e.slice(i)),i<r&&j(e))}d.push(t)}return _e(d)}return ve.prototype=b.filters=b.pseudos,b.setFilters=new ve,p=L.tokenize=function(e,t){var i,n,r,s,a,o,l,c=z[e+" "];if(c)return t?0:c.slice(0);for(a=e,o=[],l=b.preFilter;a;){for(s in i&&!(n=te.exec(a))||(n&&(a=a.slice(n[0].length)||a),o.push(r=[])),i=!1,(n=ie.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(v," ")}),a=a.slice(i.length)),b.filter)!(n=_[s].exec(a))||l[s]&&!(n=l[s](n))||(i=n.shift(),r.push({value:i,type:s,matches:n}),a=a.slice(i.length));if(!i)break}return t?a.length:a?L.error(e):z(e,o).slice(0)},F=L.compile=function(e,t){var i,g,v,y,_,n,r=[],s=[],a=W[e+" "];if(!a){for(i=(t=t||p(e)).length;i--;)((a=Te(t[i]))[k]?r:s).push(a);(a=W(e,(y=0<(v=r).length,_=0<(g=s).length,n=function(e,t,i,n,r){var s,a,o,l=0,c="0",d=e&&[],u=[],h=T,p=e||_&&b.find.TAG("*",r),f=E+=null==h?1:Math.random()||.1,m=p.length;for(r&&(T=t==x||t||r);c!==m&&null!=(s=p[c]);c++){if(_&&s){for(a=0,t||s.ownerDocument==x||(w(s),i=!S);o=g[a++];)if(o(s,t||x,i)){n.push(s);break}r&&(E=f)}y&&((s=!o&&s)&&l--,e)&&d.push(s)}if(l+=c,y&&c!==l){for(a=0;o=v[a++];)o(d,u,t,i);if(e){if(0<l)for(;c--;)d[c]||u[c]||(u[c]=G.call(n));u=be(u)}C.apply(n,u),r&&!e&&0<u.length&&1<l+v.length&&L.uniqueSort(n)}return r&&(E=f,T=h),d},y?O(n):n))).selector=e}return a},$=L.select=function(e,t,i,n){var r,s,a,o,l,c="function"==typeof e&&e,d=!n&&p(e=c.selector||e);if(i=i||[],1===d.length){if(2<(s=d[0]=d[0].slice(0)).length&&"ID"===(a=s[0]).type&&9===t.nodeType&&S&&b.relative[s[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(P,u),t)||[])[0]))return i;c&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(r=_.needsContext.test(e)?0:s.length;r--&&(a=s[r],!b.relative[o=a.type]);)if((l=b.find[o])&&(n=l(a.matches[0].replace(P,u),de.test(s[0].type)&&ge(t.parentNode)||t))){if(s.splice(r,1),e=n.length&&j(s))break;return C.apply(i,n),i}}return(c||F(e,d))(n,t,!S,i,!t||de.test(e)&&ge(t.parentNode)||t),i},h.sortStable=k.split("").sort(V).join("")===k,h.detectDuplicates=!!c,w(),h.sortDetached=M(function(e){return 1&e.compareDocumentPosition(x.createElement("fieldset"))}),M(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),h.attributes&&M(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),M(function(e){return null==e.getAttribute("disabled")})||pe(Q,function(e,t,i){if(!i)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),L}(w),K=(S.find=e,S.expr=e.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=e.uniqueSort,S.text=e.getText,S.isXMLDoc=e.isXML,S.contains=e.contains,S.escapeSelector=e.escape,S.expr.match.needsContext);function l(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var Q=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function J(e,i,n){return y(i)?S.grep(e,function(e,t){return!!i.call(e,t,e)!==n}):i.nodeType?S.grep(e,function(e){return e===i!==n}):"string"!=typeof i?S.grep(e,function(e){return-1<F.call(i,e)!==n}):S.filter(i,e,n)}S.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?S.find.matchesSelector(n,e)?[n]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<n;t++)if(S.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)S.find(e,r[t],i);return 1<n?S.uniqueSort(i):i},filter:function(e){return this.pushStack(J(this,e||[],!1))},not:function(e){return this.pushStack(J(this,e||[],!0))},is:function(e){return!!J(this,"string"==typeof e&&K.test(e)?S(e):e||[],!1).length}});var Z,ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,te=((S.fn.init=function(e,t,i){if(e){if(i=i||Z,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==i.ready?i.ready(e):e(S):S.makeArray(e,this);if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ee.exec(e))||!n[1]&&t)return(!t||t.jquery?t||i:this.constructor(t)).find(e);if(n[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:x,!0)),Q.test(n[1])&&S.isPlainObject(t))for(var n in t)y(this[n])?this[n](t[n]):this.attr(n,t[n])}else(i=x.getElementById(n[2]))&&(this[0]=i,this.length=1)}return this}).prototype=S.fn,Z=S(x),/^(?:parents|prev(?:Until|All))/),ie={children:!0,contents:!0,next:!0,prev:!0};function ne(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,s=[],a="string"!=typeof e&&S(e);if(!K.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&S.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(1<s.length?S.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?F.call(S(e),this[0]):F.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return n(e,"parentNode")},parentsUntil:function(e,t,i){return n(e,"parentNode",i)},next:function(e){return ne(e,"nextSibling")},prev:function(e){return ne(e,"previousSibling")},nextAll:function(e){return n(e,"nextSibling")},prevAll:function(e){return n(e,"previousSibling")},nextUntil:function(e,t,i){return n(e,"nextSibling",i)},prevUntil:function(e,t,i){return n(e,"previousSibling",i)},siblings:function(e){return Y((e.parentNode||{}).firstChild,e)},children:function(e){return Y(e.firstChild)},contents:function(e){return null!=e.contentDocument&&R(e.contentDocument)?e.contentDocument:(l(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(n,r){S.fn[n]=function(e,t){var i=S.map(this,r,e);return(t="Until"!==n.slice(-5)?e:t)&&"string"==typeof t&&(i=S.filter(t,i)),1<this.length&&(ie[n]||S.uniqueSort(i),te.test(n))&&i.reverse(),this.pushStack(i)}});var k=/[^\x20\t\r\n\f]+/g;function d(e){return e}function re(e){throw e}function se(e,t,i,n){var r;try{e&&y(r=e.promise)?r.call(e).done(t).fail(i):e&&y(r=e.then)?r.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}S.Callbacks=function(n){var e,i;n="string"==typeof n?(e=n,i={},S.each(e.match(k)||[],function(e,t){i[t]=!0}),i):S.extend({},n);function r(){for(o=o||n.once,a=s=!0;c.length;d=-1)for(t=c.shift();++d<l.length;)!1===l[d].apply(t[0],t[1])&&n.stopOnFalse&&(d=l.length,t=!1);n.memory||(t=!1),s=!1,o&&(l=t?[]:"")}var s,t,a,o,l=[],c=[],d=-1,u={add:function(){return l&&(t&&!s&&(d=l.length-1,c.push(t)),function i(e){S.each(e,function(e,t){y(t)?n.unique&&u.has(t)||l.push(t):t&&t.length&&"string"!==f(t)&&i(t)})}(arguments),t)&&!s&&r(),this},remove:function(){return S.each(arguments,function(e,t){for(var i;-1<(i=S.inArray(t,l,i));)l.splice(i,1),i<=d&&d--}),this},has:function(e){return e?-1<S.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return o=c=[],l=t="",this},disabled:function(){return!l},lock:function(){return o=c=[],t||s||(l=t=""),this},locked:function(){return!!o},fireWith:function(e,t){return o||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),s)||r(),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!a}};return u},S.extend({Deferred:function(e){var s=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var r=arguments;return S.Deferred(function(n){S.each(s,function(e,t){var i=y(r[t[4]])&&r[t[4]];o[t[1]](function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this,i?[e]:arguments)})}),r=null}).promise()},then:function(t,i,n){var l=0;function c(r,s,a,o){return function(){function e(){var e,t;if(!(r<l)){if((e=a.apply(i,n))===s.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,y(t)?o?t.call(e,c(l,s,d,o),c(l,s,re,o)):(l++,t.call(e,c(l,s,d,o),c(l,s,re,o),c(l,s,d,s.notifyWith))):(a!==d&&(i=void 0,n=[e]),(o||s.resolveWith)(i,n))}}var i=this,n=arguments,t=o?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),l<=r+1&&(a!==re&&(i=void 0,n=[e]),s.rejectWith(i,n))}};r?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),w.setTimeout(t))}}return S.Deferred(function(e){s[0][3].add(c(0,e,y(n)?n:d,e.notifyWith)),s[1][3].add(c(0,e,y(t)?t:d)),s[2][3].add(c(0,e,y(i)?i:re))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},o={};return S.each(s,function(e,t){var i=t[2],n=t[5];a[t[1]]=i.add,n&&i.add(function(){r=n},s[3-e][2].disable,s[3-e][3].disable,s[0][2].lock,s[0][3].lock),i.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=i.fireWith}),a.promise(o),e&&e.call(o,o),o},when:function(e){function t(t){return function(e){r[t]=this,s[t]=1<arguments.length?o.call(arguments):e,--i||a.resolveWith(r,s)}}var i=arguments.length,n=i,r=Array(n),s=o.call(arguments),a=S.Deferred();if(i<=1&&(se(e,a.done(t(n)).resolve,a.reject,!i),"pending"===a.state()||y(s[n]&&s[n].then)))return a.then();for(;n--;)se(s[n],t(n),a.reject);return a.promise()}});var ae=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,oe=(S.Deferred.exceptionHook=function(e,t){w.console&&w.console.warn&&e&&ae.test(e.name)&&w.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){w.setTimeout(function(){throw e})},S.Deferred());function le(){x.removeEventListener("DOMContentLoaded",le),w.removeEventListener("load",le),S.ready()}S.fn.ready=function(e){return oe.then(e).catch(function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||oe.resolveWith(x,[S])}}),S.ready.then=oe.then,"complete"===x.readyState||"loading"!==x.readyState&&!x.documentElement.doScroll?w.setTimeout(S.ready):(x.addEventListener("DOMContentLoaded",le),w.addEventListener("load",le));function u(e,t,i,n,r,s,a){var o=0,l=e.length,c=null==i;if("object"===f(i))for(o in r=!0,i)u(e,t,o,i[o],!0,s,a);else if(void 0!==n&&(r=!0,y(n)||(a=!0),t=c?a?(t.call(e,n),null):(c=t,function(e,t,i){return c.call(S(e),i)}):t))for(;o<l;o++)t(e[o],i,a?n:n.call(e[o],o,t(e[o],i)));return r?e:c?t.call(e):l?t(e[0],i):s}var ce=/^-ms-/,de=/-([a-z])/g;function ue(e,t){return t.toUpperCase()}function _(e){return e.replace(ce,"ms-").replace(de,ue)}function v(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function he(){this.expando=S.expando+he.uid++}he.uid=1,he.prototype={cache:function(e){var t=e[this.expando];return t||(t={},v(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[_(t)]=i;else for(n in t)r[_(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][_(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(_):(t=_(t))in n?[t]:t.match(k)||[]).length;for(;i--;)delete n[t[i]]}void 0!==t&&!S.isEmptyObject(n)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var b=new he,c=new he,pe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,fe=/[A-Z]/g;function me(e,t,i){var n,r;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(fe,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:pe.test(r)?JSON.parse(r):r)}catch(e){}c.set(e,t,i)}else i=void 0;return i}S.extend({hasData:function(e){return c.hasData(e)||b.hasData(e)},data:function(e,t,i){return c.access(e,t,i)},removeData:function(e,t){c.remove(e,t)},_data:function(e,t,i){return b.access(e,t,i)},_removeData:function(e,t){b.remove(e,t)}}),S.fn.extend({data:function(i,e){var t,n,r,s=this[0],a=s&&s.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){c.set(this,i)}):u(this,function(e){var t;if(s&&void 0===e)return void 0!==(t=c.get(s,i))||void 0!==(t=me(s,i))?t:void 0;this.each(function(){c.set(this,i,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(r=c.get(s),1===s.nodeType)&&!b.get(s,"hasDataAttrs")){for(t=a.length;t--;)a[t]&&0===(n=a[t].name).indexOf("data-")&&(n=_(n.slice(5)),me(s,n,r[n]));b.set(s,"hasDataAttrs",!0)}return r},removeData:function(e){return this.each(function(){c.remove(this,e)})}}),S.extend({queue:function(e,t,i){var n;if(e)return n=b.get(e,t=(t||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=b.access(e,t,S.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=S.queue(e,t),n=i.length,r=i.shift(),s=S._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete s.stop,r.call(e,function(){S.dequeue(e,t)},s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return b.get(e,i)||b.access(e,i,{empty:S.Callbacks("once memory").add(function(){b.remove(e,[t+"queue",i])})})}}),S.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===i?this:this.each(function(){var e=S.queue(this,t,i);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function i(){--r||s.resolveWith(a,[a])}var n,r=1,s=S.Deferred(),a=this,o=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=b.get(a[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(i));return i(),s.promise(t)}});function ge(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&E(e)&&"none"===S.css(e,"display")}var e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ve=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),h=["Top","Right","Bottom","Left"],T=x.documentElement,E=function(e){return S.contains(e.ownerDocument,e)},ye={composed:!0};T.getRootNode&&(E=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(ye)===e.ownerDocument});function _e(e,t,i,n){var r,s,a=20,o=n?function(){return n.cur()}:function(){return S.css(e,t,"")},l=o(),c=i&&i[3]||(S.cssNumber[t]?"":"px"),d=e.nodeType&&(S.cssNumber[t]||"px"!==c&&+l)&&ve.exec(S.css(e,t));if(d&&d[3]!==c){for(c=c||d[3],d=+(l/=2)||1;a--;)S.style(e,t,d+c),(1-s)*(1-(s=o()/l||.5))<=0&&(a=0),d/=s;S.style(e,t,(d*=2)+c),i=i||[]}return i&&(d=+d||+l||0,r=i[1]?d+(i[1]+1)*i[2]:+i[2],n)&&(n.unit=c,n.start=d,n.end=r),r}var be={};function C(e,t){for(var i,n,r,s,a,o,l=[],c=0,d=e.length;c<d;c++)(n=e[c]).style&&(i=n.style.display,t?("none"===i&&(l[c]=b.get(n,"display")||null,l[c]||(n.style.display="")),""===n.style.display&&ge(n)&&(l[c]=(o=s=r=void 0,s=n.ownerDocument,a=n.nodeName,(o=be[a])||(r=s.body.appendChild(s.createElement(a)),o=S.css(r,"display"),r.parentNode.removeChild(r),be[a]=o="none"===o?"block":o)))):"none"!==i&&(l[c]="none",b.set(n,"display",i)));for(c=0;c<d;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ge(this)?S(this).show():S(this).hide()})}});var Te=/^(?:checkbox|radio)$/i,we=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,xe=/^$|^module$|\/(?:java|ecma)script/i,i=x.createDocumentFragment().appendChild(x.createElement("div")),A=((O=x.createElement("input")).setAttribute("type","radio"),O.setAttribute("checked","checked"),O.setAttribute("name","t"),i.appendChild(O),g.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,i.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!i.cloneNode(!0).lastChild.defaultValue,i.innerHTML="<option></option>",g.option=!!i.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function P(e,t){var i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&l(e,t)?S.merge([e],i):i}function Se(e,t){for(var i=0,n=e.length;i<n;i++)b.set(e[i],"globalEval",!t||b.get(t[i],"globalEval"))}A.tbody=A.tfoot=A.colgroup=A.caption=A.thead,A.th=A.td,g.option||(A.optgroup=A.option=[1,"<select multiple='multiple'>","</select>"]);var ke=/<|&#?\w+;/;function Ee(e,t,i,n,r){for(var s,a,o,l,c,d=t.createDocumentFragment(),u=[],h=0,p=e.length;h<p;h++)if((s=e[h])||0===s)if("object"===f(s))S.merge(u,s.nodeType?[s]:s);else if(ke.test(s)){for(a=a||d.appendChild(t.createElement("div")),o=(we.exec(s)||["",""])[1].toLowerCase(),o=A[o]||A._default,a.innerHTML=o[1]+S.htmlPrefilter(s)+o[2],c=o[0];c--;)a=a.lastChild;S.merge(u,a.childNodes),(a=d.firstChild).textContent=""}else u.push(t.createTextNode(s));for(d.textContent="",h=0;s=u[h++];)if(n&&-1<S.inArray(s,n))r&&r.push(s);else if(l=E(s),a=P(d.appendChild(s),"script"),l&&Se(a),i)for(c=0;s=a[c++];)xe.test(s.type||"")&&i.push(s);return d}var Ce=/^([^.]*)(?:\.(.+)|)/;function a(){return!0}function p(){return!1}function Ae(e,t){return e===function(){try{return x.activeElement}catch(e){}}()==("focus"===t)}function Pe(e,t,i,n,r,s){var a,o;if("object"==typeof t){for(o in"string"!=typeof i&&(n=n||i,i=void 0),t)Pe(e,o,i,n,t[o],s);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=p;else if(!r)return e;return 1===s&&(a=r,(r=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,r,n,i)})}function Le(e,r,s){s?(b.set(e,r,!1),S.event.add(e,r,{namespace:!1,handler:function(e){var t,i,n=b.get(this,r);if(1&e.isTrigger&&this[r]){if(n.length)(S.event.special[r]||{}).delegateType&&e.stopPropagation();else if(n=o.call(arguments),b.set(this,r,n),t=s(this,r),this[r](),n!==(i=b.get(this,r))||t?b.set(this,r,!1):i={},n!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else n.length&&(b.set(this,r,{value:S.event.trigger(S.extend(n[0],S.Event.prototype),n.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===b.get(e,r)&&S.event.add(e,r,a)}S.event={global:{},add:function(t,e,i,n,r){var s,a,o,l,c,d,u,h,p,f=b.get(t);if(v(t))for(i.handler&&(i=(s=i).handler,r=s.selector),r&&S.find.matchesSelector(T,r),i.guid||(i.guid=S.guid++),o=(o=f.events)||(f.events=Object.create(null)),a=(a=f.handle)||(f.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(k)||[""]).length;l--;)u=p=(h=Ce.exec(e[l])||[])[1],h=(h[2]||"").split(".").sort(),u&&(c=S.event.special[u]||{},u=(r?c.delegateType:c.bindType)||u,c=S.event.special[u]||{},p=S.extend({type:u,origType:p,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&S.expr.match.needsContext.test(r),namespace:h.join(".")},s),(d=o[u])||((d=o[u]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,n,h,a))||t.addEventListener&&t.addEventListener(u,a),c.add&&(c.add.call(t,p),p.handler.guid||(p.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,p):d.push(p),S.event.global[u]=!0)},remove:function(e,t,i,n,r){var s,a,o,l,c,d,u,h,p,f,m,g=b.hasData(e)&&b.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(k)||[""]).length;c--;)if(p=m=(o=Ce.exec(t[c])||[])[1],f=(o[2]||"").split(".").sort(),p){for(u=S.event.special[p]||{},h=l[p=(n?u.delegateType:u.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;s--;)d=h[s],!r&&m!==d.origType||i&&i.guid!==d.guid||o&&!o.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(h.splice(s,1),d.selector&&h.delegateCount--,u.remove&&u.remove.call(e,d));a&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,f,g.handle)||S.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)S.event.remove(e,p+t[c],i,n,!0);S.isEmptyObject(l)&&b.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,s,a=new Array(arguments.length),o=S.event.fix(e),e=(b.get(this,"events")||Object.create(null))[o.type]||[],l=S.event.special[o.type]||{};for(a[0]=o,t=1;t<arguments.length;t++)a[t]=arguments[t];if(o.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,o)){for(s=S.event.handlers.call(this,o,e),t=0;(n=s[t++])&&!o.isPropagationStopped();)for(o.currentTarget=n.elem,i=0;(r=n.handlers[i++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!1!==r.namespace&&!o.rnamespace.test(r.namespace)||(o.handleObj=r,o.data=r.data,void 0!==(r=((S.event.special[r.origType]||{}).handle||r.handler).apply(n.elem,a))&&!1===(o.result=r)&&(o.preventDefault(),o.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,o),o.result}},handlers:function(e,t){var i,n,r,s,a,o=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(s=[],a={},i=0;i<l;i++)void 0===a[r=(n=t[i]).selector+" "]&&(a[r]=n.needsContext?-1<S(r,this).index(c):S.find(r,this,null,[c]).length),a[r]&&s.push(n);s.length&&o.push({elem:c,handlers:s})}return c=this,l<t.length&&o.push({elem:c,handlers:t.slice(l)}),o},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return Te.test(e.type)&&e.click&&l(e,"input")&&Le(e,"click",a),!1},trigger:function(e){e=this||e;return Te.test(e.type)&&e.click&&l(e,"input")&&Le(e,"click"),!0},_default:function(e){e=e.target;return Te.test(e.type)&&e.click&&l(e,"input")&&b.get(e,"click")||l(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?a:p,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=a,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=a,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=a,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Le(this,e,Ae),!1},trigger:function(){return Le(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){S.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||S.contains(this,i))||(e.type=n.origType,t=n.handler.apply(this,arguments),e.type=r),t}}}),S.fn.extend({on:function(e,t,i,n){return Pe(this,e,t,i,n)},one:function(e,t,i,n){return Pe(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)n=e.handleObj,S(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler);else{if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=p),this.each(function(){S.event.remove(this,e,i,t)});for(r in e)this.off(r,t,e[r])}return this}});var Ie=/<script|<style|<link/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function De(e,t){return l(e,"table")&&l(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function je(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ne(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Re(e,t){var i,n,r,s;if(1===t.nodeType){if(b.hasData(e)&&(s=b.get(e).events))for(r in b.remove(t,"handle events"),s)for(i=0,n=s[r].length;i<n;i++)S.event.add(t,r,s[r][i]);c.hasData(e)&&(e=c.access(e),e=S.extend({},e),c.set(t,e))}}function L(i,n,r,s){n=B(n);var e,t,a,o,l,c,d=0,u=i.length,h=u-1,p=n[0],f=y(p);if(f||1<u&&"string"==typeof p&&!g.checkClone&&Oe.test(p))return i.each(function(e){var t=i.eq(e);f&&(n[0]=p.call(this,e,t.html())),L(t,n,r,s)});if(u&&(t=(e=Ee(n,i[0].ownerDocument,!1,i,s)).firstChild,1===e.childNodes.length&&(e=t),t||s)){for(o=(a=S.map(P(e,"script"),je)).length;d<u;d++)l=e,d!==h&&(l=S.clone(l,!0,!0),o)&&S.merge(a,P(l,"script")),r.call(i[d],l,d);if(o)for(c=a[a.length-1].ownerDocument,S.map(a,Ne),d=0;d<o;d++)l=a[d],xe.test(l.type||"")&&!b.access(l,"globalEval")&&S.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&!l.noModule&&S._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):X(l.textContent.replace(Me,""),l,c))}return i}function Be(e,t,i){for(var n,r=t?S.filter(t,e):e,s=0;null!=(n=r[s]);s++)i||1!==n.nodeType||S.cleanData(P(n)),n.parentNode&&(i&&E(n)&&Se(P(n,"script")),n.parentNode.removeChild(n));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,r,s,a,o,l,c,d=e.cloneNode(!0),u=E(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=P(d),n=0,r=(s=P(e)).length;n<r;n++)o=s[n],"input"===(c=(l=a[n]).nodeName.toLowerCase())&&Te.test(o.type)?l.checked=o.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=o.defaultValue);if(t)if(i)for(s=s||P(e),a=a||P(d),n=0,r=s.length;n<r;n++)Re(s[n],a[n]);else Re(e,d);return 0<(a=P(d,"script")).length&&Se(a,!u&&P(e,"script")),d},cleanData:function(e){for(var t,i,n,r=S.event.special,s=0;void 0!==(i=e[s]);s++)if(v(i)){if(t=i[b.expando]){if(t.events)for(n in t.events)r[n]?S.event.remove(i,n):S.removeEvent(i,n,t.handle);i[b.expando]=void 0}i[c.expando]&&(i[c.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return u(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return L(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||De(this,e).appendChild(e)})},prepend:function(){return L(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=De(this,e)).insertBefore(e,t.firstChild)})},before:function(){return L(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return L(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(P(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return u(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ie.test(e)&&!A[(we.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(S.cleanData(P(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=[];return L(this,arguments,function(e){var t=this.parentNode;S.inArray(this,i)<0&&(S.cleanData(P(this)),t)&&t.replaceChild(e,this)},i)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,i=[],n=S(e),r=n.length-1,s=0;s<=r;s++)t=s===r?this:this.clone(!0),S(n[s])[a](t),U.apply(i,t.get());return this.pushStack(i)}});function Ue(e){var t=e.ownerDocument.defaultView;return(t=t&&t.opener?t:w).getComputedStyle(e)}function Fe(e,t,i){var n,r={};for(n in t)r[n]=e.style[n],e.style[n]=t[n];for(n in i=i.call(e),t)e.style[n]=r[n];return i}var $e,He,qe,ze,We,Ve,Xe,r,Ge=new RegExp("^("+e+")(?!px)[a-z%]+$","i"),Ye=new RegExp(h.join("|"),"i");function Ke(e,t,i){var n,r,s=e.style;return(i=i||Ue(e))&&(""!==(r=i.getPropertyValue(t)||i[t])||E(e)||(r=S.style(e,t)),!g.pixelBoxStyles())&&Ge.test(r)&&Ye.test(t)&&(e=s.width,t=s.minWidth,n=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=i.width,s.width=e,s.minWidth=t,s.maxWidth=n),void 0!==r?r+"":r}function Qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function Je(){var e;r&&(Xe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",r.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",T.appendChild(Xe).appendChild(r),e=w.getComputedStyle(r),$e="1%"!==e.top,Ve=12===Ze(e.marginLeft),r.style.right="60%",ze=36===Ze(e.right),He=36===Ze(e.width),r.style.position="absolute",qe=12===Ze(r.offsetWidth/3),T.removeChild(Xe),r=null)}function Ze(e){return Math.round(parseFloat(e))}Xe=x.createElement("div"),(r=x.createElement("div")).style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===r.style.backgroundClip,S.extend(g,{boxSizingReliable:function(){return Je(),He},pixelBoxStyles:function(){return Je(),ze},pixelPosition:function(){return Je(),$e},reliableMarginLeft:function(){return Je(),Ve},scrollboxSize:function(){return Je(),qe},reliableTrDimensions:function(){var e,t,i;return null==We&&(e=x.createElement("table"),t=x.createElement("tr"),i=x.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",i.style.height="9px",i.style.display="block",T.appendChild(e).appendChild(t).appendChild(i),i=w.getComputedStyle(t),We=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,T.removeChild(e)),We}}));var et=["Webkit","Moz","ms"],tt=x.createElement("div").style,it={};function nt(e){return S.cssProps[e]||it[e]||(e in tt?e:it[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=et.length;i--;)if((e=et[i]+t)in tt)return e}(e)||e)}var rt=/^(none|table(?!-c[ea]).+)/,st=/^--/,at={position:"absolute",visibility:"hidden",display:"block"},ot={letterSpacing:"0",fontWeight:"400"};function lt(e,t,i){var n=ve.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function ct(e,t,i,n,r,s){var a="width"===t?1:0,o=0,l=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(l+=S.css(e,i+h[a],!0,r)),n?("content"===i&&(l-=S.css(e,"padding"+h[a],!0,r)),"margin"!==i&&(l-=S.css(e,"border"+h[a]+"Width",!0,r))):(l+=S.css(e,"padding"+h[a],!0,r),"padding"!==i?l+=S.css(e,"border"+h[a]+"Width",!0,r):o+=S.css(e,"border"+h[a]+"Width",!0,r));return!n&&0<=s&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-l-o-.5))||0),l}function dt(e,t,i){var n=Ue(e),r=(!g.boxSizingReliable()||i)&&"border-box"===S.css(e,"boxSizing",!1,n),s=r,a=Ke(e,t,n),o="offset"+t[0].toUpperCase()+t.slice(1);if(Ge.test(a)){if(!i)return a;a="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&l(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,n))&&e.getClientRects().length&&(r="border-box"===S.css(e,"boxSizing",!1,n),s=o in e)&&(a=e[o]),(a=parseFloat(a)||0)+ct(e,t,i||(r?"border":"content"),s,n,a)+"px"}function s(e,t,i,n,r){return new s.prototype.init(e,t,i,n,r)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(t=Ke(e,"opacity"))?"1":t}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,a,o=_(t),l=st.test(t),c=e.style;if(l||(t=nt(o)),a=S.cssHooks[t]||S.cssHooks[o],void 0===i)return a&&"get"in a&&void 0!==(r=a.get(e,!1,n))?r:c[t];"string"==(s=typeof i)&&(r=ve.exec(i))&&r[1]&&(i=_e(e,t,r),s="number"),null!=i&&i==i&&("number"!==s||l||(i+=r&&r[3]||(S.cssNumber[o]?"":"px")),g.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(l?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,n){var r,s=_(t);return st.test(t)||(t=nt(s)),"normal"===(r=void 0===(r=(s=S.cssHooks[t]||S.cssHooks[s])&&"get"in s?s.get(e,!0,i):r)?Ke(e,t,n):r)&&t in ot&&(r=ot[t]),(""===i||i)&&(s=parseFloat(r),!0===i||isFinite(s))?s||0:r}}),S.each(["height","width"],function(e,a){S.cssHooks[a]={get:function(e,t,i){if(t)return!rt.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?dt(e,a,i):Fe(e,at,function(){return dt(e,a,i)})},set:function(e,t,i){var n=Ue(e),r=!g.scrollboxSize()&&"absolute"===n.position,s=(r||i)&&"border-box"===S.css(e,"boxSizing",!1,n),i=i?ct(e,a,i,s,n):0;return s&&r&&(i-=Math.ceil(e["offset"+a[0].toUpperCase()+a.slice(1)]-parseFloat(n[a])-ct(e,a,"border",!1,n)-.5)),i&&(s=ve.exec(t))&&"px"!==(s[3]||"px")&&(e.style[a]=t,t=S.css(e,a)),lt(0,t,i)}}}),S.cssHooks.marginLeft=Qe(g.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ke(e,"marginLeft"))||e.getBoundingClientRect().left-Fe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(r,s){S.cssHooks[r+s]={expand:function(e){for(var t=0,i={},n="string"==typeof e?e.split(" "):[e];t<4;t++)i[r+h[t]+s]=n[t]||n[t-2]||n[0];return i}},"margin"!==r&&(S.cssHooks[r+s].set=lt)}),S.fn.extend({css:function(e,t){return u(this,function(e,t,i){var n,r,s={},a=0;if(Array.isArray(t)){for(n=Ue(e),r=t.length;a<r;a++)s[t[a]]=S.css(e,t[a],!1,n);return s}return void 0!==i?S.style(e,t,i):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=s).prototype={constructor:s,init:function(e,t,i,n,r,s){this.elem=e,this.prop=i,this.easing=r||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(S.cssNumber[i]?"":"px")},cur:function(){var e=s.propHooks[this.prop];return(e&&e.get?e:s.propHooks._default).get(this)},run:function(e){var t,i=s.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(i&&i.set?i:s.propHooks._default).set(this),this}}).init.prototype=s.prototype,(s.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=S.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[nt(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=s.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=s.prototype.init,S.fx.step={};var I,ut,O,ht=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function ft(){ut&&(!1===x.hidden&&w.requestAnimationFrame?w.requestAnimationFrame(ft):w.setTimeout(ft,S.fx.interval),S.fx.tick())}function mt(){return w.setTimeout(function(){I=void 0}),I=Date.now()}function gt(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)r["margin"+(i=h[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function vt(e,t,i){for(var n,r=(M.tweeners[t]||[]).concat(M.tweeners["*"]),s=0,a=r.length;s<a;s++)if(n=r[s].call(i,t,e))return n}function M(r,e,t){var i,s,n,a,o,l,c,d=0,u=M.prefilters.length,h=S.Deferred().always(function(){delete p.elem}),p=function(){if(s)return!1;for(var e=I||mt(),e=Math.max(0,f.startTime+f.duration-e),t=1-(e/f.duration||0),i=0,n=f.tweens.length;i<n;i++)f.tweens[i].run(t);return h.notifyWith(r,[f,t,e]),t<1&&n?e:(n||h.notifyWith(r,[f,1,0]),h.resolveWith(r,[f]),!1)},f=h.promise({elem:r,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:I||mt(),duration:t.duration,tweens:[],createTween:function(e,t){t=S.Tween(r,f.opts,e,t,f.opts.specialEasing[e]||f.opts.easing);return f.tweens.push(t),t},stop:function(e){var t=0,i=e?f.tweens.length:0;if(!s){for(s=!0;t<i;t++)f.tweens[t].run(1);e?(h.notifyWith(r,[f,1,0]),h.resolveWith(r,[f,e])):h.rejectWith(r,[f,e])}return this}}),m=f.props,g=m,v=f.opts.specialEasing;for(n in g)if(o=v[a=_(n)],l=g[n],Array.isArray(l)&&(o=l[1],l=g[n]=l[0]),n!==a&&(g[a]=l,delete g[n]),(c=S.cssHooks[a])&&"expand"in c)for(n in l=c.expand(l),delete g[a],l)n in g||(g[n]=l[n],v[n]=o);else v[a]=o;for(;d<u;d++)if(i=M.prefilters[d].call(f,r,m,f.opts))return y(i.stop)&&(S._queueHooks(f.elem,f.opts.queue).stop=i.stop.bind(i)),i;return S.map(m,vt,f),y(f.opts.start)&&f.opts.start.call(r,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),S.fx.timer(S.extend(p,{elem:r,anim:f,queue:f.opts.queue})),f}S.Animation=S.extend(M,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return _e(i.elem,e,ve.exec(t),i),i}]},tweener:function(e,t){for(var i,n=0,r=(e=y(e)?(t=e,["*"]):e.match(k)).length;n<r;n++)i=e[n],M.tweeners[i]=M.tweeners[i]||[],M.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,r,s,a,o,l,c,d="width"in t||"height"in t,u=this,h={},p=e.style,f=e.nodeType&&ge(e),m=b.get(e,"fxshow");for(n in i.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,o=a.empty.fire,a.empty.fire=function(){a.unqueued||o()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(r=t[n],ht.test(r)){if(delete t[n],s=s||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;f=!0}h[n]=m&&m[n]||S.style(e,n)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(h))for(n in d&&1===e.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=b.get(e,"display")),"none"===(d=S.css(e,"display"))&&(c?d=c:(C([e],!0),c=e.style.display||c,d=S.css(e,"display"),C([e]))),"inline"===d||"inline-block"===d&&null!=c)&&"none"===S.css(e,"float")&&(l||(u.done(function(){p.display=c}),null==c&&(d=p.display,c="none"===d?"":d)),p.display="inline-block"),i.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1,h)l||(m?"hidden"in m&&(f=m.hidden):m=b.access(e,"fxshow",{display:c}),s&&(m.hidden=!f),f&&C([e],!0),u.done(function(){for(n in f||C([e]),b.remove(e,"fxshow"),h)S.style(e,n,h[n])})),l=vt(f?m[n]:0,n,u),n in m||(m[n]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?M.prefilters.unshift(e):M.prefilters.push(e)}}),S.speed=function(e,t,i){var n=e&&"object"==typeof e?S.extend({},e):{complete:i||!i&&t||y(e)&&e,duration:e,easing:i&&t||t&&!y(t)&&t};return S.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in S.fx.speeds?n.duration=S.fx.speeds[n.duration]:n.duration=S.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&S.dequeue(this,n.queue)},n},S.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ge).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(t,e,i,n){function r(){var e=M(this,S.extend({},t),a);(s||b.get(this,"finish"))&&e.stop(!0)}var s=S.isEmptyObject(t),a=S.speed(e,i,n);return r.finish=r,s||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(r,e,s){function a(e){var t=e.stop;delete e.stop,t(s)}return"string"!=typeof r&&(s=e,e=r,r=void 0),e&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",i=S.timers,n=b.get(this);if(t)n[t]&&n[t].stop&&a(n[t]);else for(t in n)n[t]&&n[t].stop&&pt.test(t)&&a(n[t]);for(t=i.length;t--;)i[t].elem!==this||null!=r&&i[t].queue!==r||(i[t].anim.stop(s),e=!1,i.splice(t,1));!e&&s||S.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=b.get(this),i=t[a+"queue"],n=t[a+"queueHooks"],r=S.timers,s=i?i.length:0;for(t.finish=!0,S.queue(this,a,[]),n&&n.stop&&n.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===a&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,n){var r=S.fn[n];S.fn[n]=function(e,t,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(gt(n,!0),e,t,i)}}),S.each({slideDown:gt("show"),slideUp:gt("hide"),slideToggle:gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){S.fn[e]=function(e,t,i){return this.animate(n,e,t,i)}}),S.timers=[],S.fx.tick=function(){var e,t=0,i=S.timers;for(I=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||S.fx.stop(),I=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ut||(ut=!0,ft())},S.fx.stop=function(){ut=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(n,e){return n=S.fx&&S.fx.speeds[n]||n,this.queue(e=e||"fx",function(e,t){var i=w.setTimeout(e,n);t.stop=function(){w.clearTimeout(i)}})},O=x.createElement("input"),i=x.createElement("select").appendChild(x.createElement("option")),O.type="checkbox",g.checkOn=""!==O.value,g.optSelected=i.selected,(O=x.createElement("input")).value="t",O.type="radio",g.radioValue="t"===O.value;var yt,_t=S.expr.attrHandle,bt=(S.fn.extend({attr:function(e,t){return u(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,i){var n,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?S.prop(e,t,i):(1===s&&S.isXMLDoc(e)||(r=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?yt:void 0)),void 0!==i?null===i?void S.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):!(r&&"get"in r&&null!==(n=r.get(e,t)))&&null==(n=S.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){var i;if(!g.radioValue&&"radio"===t&&l(e,"input"))return i=e.value,e.setAttribute("type",t),i&&(e.value=i),t}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(k);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),yt={set:function(e,t,i){return!1===t?S.removeAttr(e,i):e.setAttribute(i,i),i}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=_t[t]||S.find.attr;_t[t]=function(e,t,i){var n,r,s=t.toLowerCase();return i||(r=_t[s],_t[s]=n,n=null!=a(e,t,i)?s:null,_t[s]=r),n}}),/^(?:input|select|textarea|button)$/i),Tt=/^(?:a|area)$/i;function D(e){return(e.match(k)||[]).join(" ")}function j(e){return e.getAttribute&&e.getAttribute("class")||""}function wt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(k)||[]}S.fn.extend({prop:function(e,t){return u(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,i){var n,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&S.isXMLDoc(e)||(t=S.propFix[t]||t,r=S.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(S.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode)&&e.parentNode.selectedIndex}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,i,n,r,s,a,o=0;if(y(t))return this.each(function(e){S(this).addClass(t.call(this,e,j(this)))});if((e=wt(t)).length)for(;i=this[o++];)if(a=j(i),n=1===i.nodeType&&" "+D(a)+" "){for(s=0;r=e[s++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");a!==(a=D(n))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,r,s,a,o=0;if(y(t))return this.each(function(e){S(this).removeClass(t.call(this,e,j(this)))});if(!arguments.length)return this.attr("class","");if((e=wt(t)).length)for(;i=this[o++];)if(a=j(i),n=1===i.nodeType&&" "+D(a)+" "){for(s=0;r=e[s++];)for(;-1<n.indexOf(" "+r+" ");)n=n.replace(" "+r+" "," ");a!==(a=D(n))&&i.setAttribute("class",a)}return this},toggleClass:function(r,t){var s=typeof r,a="string"==s||Array.isArray(r);return"boolean"==typeof t&&a?t?this.addClass(r):this.removeClass(r):y(r)?this.each(function(e){S(this).toggleClass(r.call(this,e,j(this),t),t)}):this.each(function(){var e,t,i,n;if(a)for(t=0,i=S(this),n=wt(r);e=n[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==r&&"boolean"!=s||((e=j(this))&&b.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==r&&b.get(this,"__className__")||""))})},hasClass:function(e){for(var t,i=0,n=" "+e+" ";t=this[i++];)if(1===t.nodeType&&-1<(" "+D(j(t))+" ").indexOf(n))return!0;return!1}});function xt(e){e.stopPropagation()}var St=/\r/g,kt=(S.fn.extend({val:function(t){var i,e,n,r=this[0];return arguments.length?(n=y(t),this.each(function(e){1===this.nodeType&&(null==(e=n?t.call(this,e,S(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=S.map(e,function(e){return null==e?"":e+""})),(i=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):r?(i=S.valHooks[r.type]||S.valHooks[r.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(r,"value"))?e:"string"==typeof(e=r.value)?e.replace(St,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:D(S.text(e))}},select:{get:function(e){for(var t,i=e.options,n=e.selectedIndex,r="select-one"===e.type,s=r?null:[],a=r?n+1:i.length,o=n<0?a:r?n:0;o<a;o++)if(((t=i[o]).selected||o===n)&&!t.disabled&&(!t.parentNode.disabled||!l(t.parentNode,"optgroup"))){if(t=S(t).val(),r)return t;s.push(t)}return s},set:function(e,t){for(var i,n,r=e.options,s=S.makeArray(t),a=r.length;a--;)((n=r[a]).selected=-1<S.inArray(S.valHooks.option.get(n),s))&&(i=!0);return i||(e.selectedIndex=-1),s}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},g.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),g.focusin="onfocusin"in w,/^(?:focusinfocus|focusoutblur)$/),Et=(S.extend(S.event,{trigger:function(e,t,i,n){var r,s,a,o,l,c,d,u=[i||x],h=q.call(e,"type")?e.type:e,p=q.call(e,"namespace")?e.namespace.split("."):[],f=d=s=i=i||x;if(3!==i.nodeType&&8!==i.nodeType&&!kt.test(h+S.event.triggered)&&(-1<h.indexOf(".")&&(h=(p=h.split(".")).shift(),p.sort()),o=h.indexOf(":")<0&&"on"+h,(e=e[S.expando]?e:new S.Event(h,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[h]||{},n||!c.trigger||!1!==c.trigger.apply(i,t))){if(!n&&!c.noBubble&&!m(i)){for(a=c.delegateType||h,kt.test(a+h)||(f=f.parentNode);f;f=f.parentNode)u.push(f),s=f;s===(i.ownerDocument||x)&&u.push(s.defaultView||s.parentWindow||w)}for(r=0;(f=u[r++])&&!e.isPropagationStopped();)d=f,e.type=1<r?a:c.bindType||h,(l=(b.get(f,"events")||Object.create(null))[e.type]&&b.get(f,"handle"))&&l.apply(f,t),(l=o&&f[o])&&l.apply&&v(f)&&(e.result=l.apply(f,t),!1===e.result)&&e.preventDefault();return e.type=h,n||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(u.pop(),t)||!v(i)||o&&y(i[h])&&!m(i)&&((s=i[o])&&(i[o]=null),S.event.triggered=h,e.isPropagationStopped()&&d.addEventListener(h,xt),i[h](),e.isPropagationStopped()&&d.removeEventListener(h,xt),S.event.triggered=void 0,s)&&(i[o]=s),e.result}},simulate:function(e,t,i){i=S.extend(new S.Event,i,{type:e,isSimulated:!0});S.event.trigger(i,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return S.event.trigger(e,t,i,!0)}}),g.focusin||S.each({focus:"focusin",blur:"focusout"},function(i,n){function r(e){S.event.simulate(n,e.target,S.event.fix(e))}S.event.special[n]={setup:function(){var e=this.ownerDocument||this.document||this,t=b.access(e,n);t||e.addEventListener(i,r,!0),b.access(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=b.access(e,n)-1;t?b.access(e,n,t):(e.removeEventListener(i,r,!0),b.remove(e,n))}}}),w.location),Ct={guid:Date.now()},At=/\?/,Pt=(S.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{t=(new w.DOMParser).parseFromString(e,"text/xml")}catch(e){}return i=t&&t.getElementsByTagName("parsererror")[0],t&&!i||S.error("Invalid XML: "+(i?S.map(i.childNodes,function(e){return e.textContent}).join("\n"):e)),t},/\[\]$/),Lt=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;S.param=function(e,t){function i(e,t){t=y(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var n,r=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)!function i(n,e,r,s){if(Array.isArray(e))S.each(e,function(e,t){r||Pt.test(n)?s(n,t):i(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,s)});else if(r||"object"!==f(e))s(n,e);else for(var t in e)i(n+"["+t+"]",e[t],r,s)}(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Ot.test(this.nodeName)&&!It.test(e)&&(this.checked||!Te.test(e))}).map(function(e,t){var i=S(this).val();return null==i?null:Array.isArray(i)?S.map(i,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}}):{name:t.name,value:i.replace(Lt,"\r\n")}}).get()}});var Mt=/%20/g,Dt=/#.*$/,jt=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,Bt=/^\/\//,Ut={},Ft={},$t="*/".concat("*"),Ht=x.createElement("a");function qt(s){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,n=0,r=e.toLowerCase().match(k)||[];if(y(t))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(s[i]=s[i]||[]).unshift(t)):(s[i]=s[i]||[]).push(t)}}function zt(t,n,r,s){var a={},o=t===Ft;function l(e){var i;return a[e]=!0,S.each(t[e]||[],function(e,t){t=t(n,r,s);return"string"!=typeof t||o||a[t]?o?!(i=t):void 0:(n.dataTypes.unshift(t),l(t),!1)}),i}return l(n.dataTypes[0])||!a["*"]&&l("*")}function Wt(e,t){var i,n,r=S.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n=n||{})[i]=t[i]);return n&&S.extend(!0,e,n),e}Ht.href=Et.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Wt(Wt(e,S.ajaxSettings),t):Wt(S.ajaxSettings,e)},ajaxPrefilter:qt(Ut),ajaxTransport:qt(Ft),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var l,c,d,i,u,h,p,n,r,f=S.ajaxSetup({},t=t||{}),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?S(m):S.event,v=S.Deferred(),y=S.Callbacks("once memory"),_=f.statusCode||{},s={},a={},o="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(h){if(!i)for(i={};t=Nt.exec(d);)i[t[1].toLowerCase()+" "]=(i[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=i[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?d:null},setRequestHeader:function(e,t){return null==h&&(e=a[e.toLowerCase()]=a[e.toLowerCase()]||e,s[e]=t),this},overrideMimeType:function(e){return null==h&&(f.mimeType=e),this},statusCode:function(e){if(e)if(h)b.always(e[b.status]);else for(var t in e)_[t]=[_[t],e[t]];return this},abort:function(e){e=e||o;return l&&l.abort(e),T(0,e),this}};if(v.promise(b),f.url=((e||f.url||Et.href)+"").replace(Bt,Et.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(k)||[""],null==f.crossDomain){r=x.createElement("a");try{r.href=f.url,r.href=r.href,f.crossDomain=Ht.protocol+"//"+Ht.host!=r.protocol+"//"+r.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=S.param(f.data,f.traditional)),zt(Ut,f,t,b),!h){for(n in(p=S.event&&f.global)&&0==S.active++&&S.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Rt.test(f.type),c=f.url.replace(Dt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Mt,"+")):(r=f.url.slice(c.length),f.data&&(f.processData||"string"==typeof f.data)&&(c+=(At.test(c)?"&":"?")+f.data,delete f.data),!1===f.cache&&(c=c.replace(jt,"$1"),r=(At.test(c)?"&":"?")+"_="+Ct.guid+++r),f.url=c+r),f.ifModified&&(S.lastModified[c]&&b.setRequestHeader("If-Modified-Since",S.lastModified[c]),S.etag[c])&&b.setRequestHeader("If-None-Match",S.etag[c]),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&b.setRequestHeader("Content-Type",f.contentType),b.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+$t+"; q=0.01":""):f.accepts["*"]),f.headers)b.setRequestHeader(n,f.headers[n]);if(f.beforeSend&&(!1===f.beforeSend.call(m,b,f)||h))return b.abort();if(o="abort",y.add(f.complete),b.done(f.success),b.fail(f.error),l=zt(Ft,f,t,b)){if(b.readyState=1,p&&g.trigger("ajaxSend",[b,f]),h)return b;f.async&&0<f.timeout&&(u=w.setTimeout(function(){b.abort("timeout")},f.timeout));try{h=!1,l.send(s,T)}catch(e){if(h)throw e;T(-1,e)}}else T(-1,"No Transport")}return b;function T(e,t,i,n){var r,s,a,o=t;h||(h=!0,u&&w.clearTimeout(u),l=void 0,d=n||"",b.readyState=0<e?4:0,n=200<=e&&e<300||304===e,i&&(a=function(e,t,i){for(var n,r,s,a,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in o)if(o[r]&&o[r].test(n)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}a=a||r}s=s||a}if(s)return s!==l[0]&&l.unshift(s),i[s]}(f,b,i)),!n&&-1<S.inArray("script",f.dataTypes)&&S.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),a=function(e,t,i,n){var r,s,a,o,l,c={},d=e.dataTypes.slice();if(d[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(s=d.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=d.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(a=c[l+" "+s]||c["* "+s]))for(r in c)if((o=r.split(" "))[1]===s&&(a=c[l+" "+o[0]]||c["* "+o[0]])){!0===a?a=c[r]:!0!==c[r]&&(s=o[0],d.unshift(o[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(f,a,b,n),n?(f.ifModified&&((i=b.getResponseHeader("Last-Modified"))&&(S.lastModified[c]=i),i=b.getResponseHeader("etag"))&&(S.etag[c]=i),204===e||"HEAD"===f.type?o="nocontent":304===e?o="notmodified":(o=a.state,r=a.data,n=!(s=a.error))):(s=o,!e&&o||(o="error",e<0&&(e=0))),b.status=e,b.statusText=(t||o)+"",n?v.resolveWith(m,[r,o,b]):v.rejectWith(m,[b,o,s]),b.statusCode(_),_=void 0,p&&g.trigger(n?"ajaxSuccess":"ajaxError",[b,f,n?r:s]),y.fireWith(m,[b,o]),p&&(g.trigger("ajaxComplete",[b,f]),--S.active||S.event.trigger("ajaxStop")))}},getJSON:function(e,t,i){return S.get(e,t,i,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,r){S[r]=function(e,t,i,n){return y(t)&&(n=n||i,i=t,t=void 0),S.ajax(S.extend({url:e,type:r,dataType:n,data:t,success:i},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,i){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,i)}})},S.fn.extend({wrapAll:function(e){return this[0]&&(y(e)&&(e=e.call(this[0])),e=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(i){return y(i)?this.each(function(e){S(this).wrapInner(i.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=y(t);return this.each(function(e){S(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Xt=S.ajaxSettings.xhr();g.cors=!!Xt&&"withCredentials"in Xt,g.ajax=Xt=!!Xt,S.ajaxTransport(function(r){var s,a;if(g.cors||Xt&&!r.crossDomain)return{send:function(e,t){var i,n=r.xhr();if(n.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(i in r.xhrFields)n[i]=r.xhrFields[i];for(i in r.mimeType&&n.overrideMimeType&&n.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)n.setRequestHeader(i,e[i]);s=function(e){return function(){s&&(s=a=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,"abort"===e?n.abort():"error"===e?"number"!=typeof n.status?t(0,"error"):t(n.status,n.statusText):t(Vt[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=s(),a=n.onerror=n.ontimeout=s("error"),void 0!==n.onabort?n.onabort=a:n.onreadystatechange=function(){4===n.readyState&&w.setTimeout(function(){s&&a()})},s=s("abort");try{n.send(r.hasContent&&r.data||null)}catch(e){if(s)throw e}},abort:function(){s&&s()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(i){var n,r;if(i.crossDomain||i.scriptAttrs)return{send:function(e,t){n=S("<script>").attr(i.scriptAttrs||{}).prop({charset:i.scriptCharset,src:i.url}).on("load error",r=function(e){n.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),x.head.appendChild(n[0])},abort:function(){r&&r()}}});var Gt=[],Yt=/(=)\?(?=&|$)|\?\?/,Kt=(S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||S.expando+"_"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,i){var n,r,s,a=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Yt,"$1"+n):!1!==e.jsonp&&(e.url+=(At.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return s||S.error(n+" was not called"),s[0]},e.dataTypes[0]="json",r=w[n],w[n]=function(){s=arguments},i.always(function(){void 0===r?S(w).removeProp(n):w[n]=r,e[n]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(n)),s&&y(r)&&r(s[0]),s=r=void 0}),"script"}),g.createHTMLDocument=((e=x.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===e.childNodes.length),S.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(g.createHTMLDocument?((n=(t=x.implementation.createHTMLDocument("")).createElement("base")).href=x.location.href,t.head.appendChild(n)):t=x),n=!i&&[],(i=Q.exec(e))?[t.createElement(i[1])]:(i=Ee([e],t,n),n&&n.length&&S(n).remove(),S.merge([],i.childNodes)));var n},S.fn.load=function(e,t,i){var n,r,s,a=this,o=e.indexOf(" ");return-1<o&&(n=D(e.slice(o)),e=e.slice(0,o)),y(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<a.length&&S.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){s=arguments,a.html(n?S("<div>").append(S.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,s||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,i){var n,r,s,a,o=S.css(e,"position"),l=S(e),c={};"static"===o&&(e.style.position="relative"),s=l.offset(),n=S.css(e,"top"),a=S.css(e,"left"),o=("absolute"===o||"fixed"===o)&&-1<(n+a).indexOf("auto")?(r=(o=l.position()).top,o.left):(r=parseFloat(n)||0,parseFloat(a)||0),null!=(t=y(t)?t.call(e,i,S.extend({},s)):t).top&&(c.top=t.top-s.top+r),null!=t.left&&(c.left=t.left-s.left+o),"using"in t?t.using.call(e,c):l.css(c)}},S.fn.extend({offset:function(t){var e,i;return arguments.length?void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)}):(i=this[0])?i.getClientRects().length?(e=i.getBoundingClientRect(),i=i.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],r={top:0,left:0};if("fixed"===S.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((r=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),r.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-S.css(n,"marginTop",!0),left:t.left-r.left-S.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||T})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var s="pageYOffset"===r;S.fn[t]=function(e){return u(this,function(e,t,i){var n;if(m(e)?n=e:9===e.nodeType&&(n=e.defaultView),void 0===i)return n?n[r]:e[t];n?n.scrollTo(s?n.pageXOffset:i,s?i:n.pageYOffset):e[t]=i},t,e,arguments.length)}}),S.each(["top","left"],function(e,i){S.cssHooks[i]=Qe(g.pixelPosition,function(e,t){if(t)return t=Ke(e,i),Ge.test(t)?S(e).position()[i]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,o){S.each({padding:"inner"+a,content:o,"":"outer"+a},function(n,s){S.fn[s]=function(e,t){var i=arguments.length&&(n||"boolean"!=typeof e),r=n||(!0===e||!0===t?"margin":"border");return u(this,function(e,t,i){var n;return m(e)?0===s.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+a],n["scroll"+a],e.body["offset"+a],n["offset"+a],n["client"+a])):void 0===i?S.css(e,t,r):S.style(e,t,i,r)},o,i?e:void 0,i)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){S.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g),Qt=(S.proxy=function(e,t){var i,n;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return i=o.call(arguments,2),(n=function(){return e.apply(t||this,i.concat(o.call(arguments)))}).guid=e.guid=e.guid||S.guid++,n},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=l,S.isFunction=y,S.isWindow=m,S.camelCase=_,S.type=f,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Kt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S}),w.jQuery),Jt=w.$;return S.noConflict=function(e){return w.$===S&&(w.$=Jt),e&&w.jQuery===S&&(w.jQuery=Qt),S},void 0===N&&(w.jQuery=w.$=S),S}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).window=e.window||{})}(this,function(e){"use strict";function N(t,e){var i,n=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)),n}function y(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach(function(e){var t,i;t=n,i=r[e=e],e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,i){return t&&R(e.prototype,t),i&&R(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(i),t=(e=n?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}}function U(){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:i):n.value}).apply(this,arguments)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,s=[],a=!0,o=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(s.push(n.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(o)throw r}}return s}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var i;if(e)return"string"==typeof e?r(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function w(e,t){var i,n,r,s,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return r=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){r=!0,i=e},f:function(){try{n||null==a.return||a.return()}finally{if(r)throw i}}};if(Array.isArray(e)||(a=l(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),s=0,{s:t=function(){},n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(){for(var e=!1,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];"boolean"==typeof i[0]&&(e=i.shift());var r=i[0];if(!r||"object"!==h(r))throw new Error("extendee must be an object");for(var s=i.slice(1),a=s.length,o=0;o<a;o++){var l,c,d,u=s[o];for(l in u)u.hasOwnProperty(l)&&(c=u[l],e&&(Array.isArray(c)||m(c))?(d=Array.isArray(c)?[]:{},r[l]=f(!0,r.hasOwnProperty(l)?r[l]:d,c)):r[l]=c)}return r}function b(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e4;return e=parseFloat(e)||0,Math.round((e+Number.EPSILON)*t)/t}function d(e){return!!(e&&"object"===h(e)&&e instanceof Element&&e!==document.body)&&!e.__Panzoom&&(t=e,i=getComputedStyle(t)["overflow-y"],n=getComputedStyle(t)["overflow-x"],i=("scroll"===i||"auto"===i)&&1<Math.abs(t.scrollHeight-t.clientHeight),n=("scroll"===n||"auto"===n)&&1<Math.abs(t.scrollWidth-t.clientWidth),i||n?e:d(e.parentNode));var t,i,n}function F(e,t){return t?Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2)):0}function u(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}var $,m=function(e){return"object"===h(e)&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e)},H="undefined"!=typeof window&&window.ResizeObserver||(t(V,[{key:"observe",value:function(t){var e;this.observables.some(function(e){return e.el===t})||(e={el:t,size:{height:t.clientHeight,width:t.clientWidth}},this.observables.push(e))}},{key:"unobserve",value:function(t){this.observables=this.observables.filter(function(e){return e.el!==t})}},{key:"disconnect",value:function(){this.observables=[]}},{key:"check",value:function(){var e=this.observables.filter(function(e){var t=e.el.clientHeight,i=e.el.clientWidth;if(e.size.height!==t||e.size.width!==i)return e.size.height=t,e.size.width=i,!0}).map(function(e){return e.el});0<e.length&&this.callback(e),window.requestAnimationFrame(this.boundCheck)}}]),V),p=t(function e(t){o(this,e),this.id=self.Touch&&t instanceof Touch?t.identifier:-1,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY}),q=(t(W,[{key:"stop",value:function(){this._element.removeEventListener("mousedown",this._pointerStart,{passive:!1}),this._element.removeEventListener("touchstart",this._touchStart,{passive:!1}),this._element.removeEventListener("touchmove",this._move,{passive:!1}),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}},{key:"_triggerPointerStart",value:function(e,t){return!!this._startCallback(e,t)&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}}]),W),g=(t(x,[{key:"option",value:function(e,t){e=String(e);e=e,i=this.options;var i,e=e.split(".").reduce(function(e,t){return e&&e[t]},i);if("function"==typeof e){for(var n=arguments.length,r=new Array(2<n?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];e=e.call.apply(e,[this,this].concat(r))}return void 0===e?t:e}},{key:"localize",value:function(e){var s=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return(e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,function(e,t,i){var n="";i?n=s.option("".concat(t[0]+t.toLowerCase().substring(1),".l10n.").concat(i)):t&&(n=s.option("l10n.".concat(t)));for(var n=n||e,r=0;r<a.length;r++)n=n.split(a[r][0]).join(a[r][1]);return n})).replace(/\{\{(.*)\}\}/,function(e,t){return t})}},{key:"on",value:function(e,t){var i=this;if(m(e))for(var n=0,r=Object.entries(e);n<r.length;n++){var s=r[n];this.on.apply(this,_(s))}else String(e).split(" ").forEach(function(e){e=i.events[e]=i.events[e]||[];-1==e.indexOf(t)&&e.push(t)});return this}},{key:"once",value:function(e,s){var a=this;if(m(e))for(var t=0,i=Object.entries(e);t<i.length;t++){var n=i[t];this.once.apply(this,_(n))}else String(e).split(" ").forEach(function(n){function r(){a.off(n,r);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];s.call.apply(s,[a,a].concat(t))}r._=s,a.on(n,r)});return this}},{key:"off",value:function(e,a){var o=this;if(!m(e))return e.split(" ").forEach(function(e){var t=o.events[e];if(!t||!t.length)return o;for(var i=-1,n=0,r=t.length;n<r;n++){var s=t[n];if(s&&(s===a||s._===a)){i=n;break}}-1!=i&&t.splice(i,1)}),this;for(var t=0,i=Object.entries(e);t<i.length;t++){var n=i[t];this.off.apply(this,_(n))}}},{key:"trigger",value:function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r,s=w(_(this.events[e]||[]).slice());try{for(s.s();!(r=s.n()).done;){var a=r.value;if(a&&!1===a.call.apply(a,[this,this].concat(i)))return!1}}catch(e){s.e(e)}finally{s.f()}var o,l=w(_(this.events["*"]||[]).slice());try{for(l.s();!(o=l.n()).done;){var c=o.value;if(c&&!1===c.call.apply(c,[this,e,this].concat(i)))return!1}}catch(e){l.e(e)}finally{l.f()}return!0}},{key:"attachPlugins",value:function(e){for(var t={},i=0,n=Object.entries(e||{});i<n.length;i++){var r=c(n[i],2),s=r[0],r=r[1];!1===this.options[s]||this.plugins[s]||(this.options[s]=f({},r.defaults||{},this.options[s]),t[s]=new r(this))}for(var a=0,o=Object.entries(t);a<o.length;a++){var l=c(o[a],2);l[0],l[1].attach(this)}return this.plugins=Object.assign({},this.plugins,t),this}},{key:"detachPlugins",value:function(){for(var e in this.plugins){var t=void 0;(t=this.plugins[e])&&"function"==typeof t.detach&&t.detach(this)}return this.plugins={},this}}]),x),z={touch:!0,zoom:!0,pinchToZoom:!0,panOnlyZoomed:!1,lockAxis:!1,friction:.64,decelFriction:.88,zoomFriction:.74,bounceForce:.2,baseScale:1,minScale:1,maxScale:2,step:.5,textSelection:!1,click:"toggleZoom",wheel:"zoom",wheelFactor:42,wheelLimit:5,draggableClass:"is-draggable",draggingClass:"is-dragging",ratio:1},v=(i(T,g),$=n(T),t(T,[{key:"initLayout",value:function(){var e=this.$container;if(!(e instanceof HTMLElement))throw new Error("Panzoom: Container not found");var t=this.option("content")||e.querySelector(".panzoom__content");if(!t)throw new Error("Panzoom: Content not found");this.$content=t;var i=this.option("viewport")||e.querySelector(".panzoom__viewport");i||!1===this.option("wrapInner")||((i=document.createElement("div")).classList.add("panzoom__viewport"),i.append.apply(i,_(e.childNodes)),e.appendChild(i)),this.$viewport=i||t.parentNode}},{key:"resetValues",value:function(){this.updateRate=this.option("updateRate",/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?250:24),this.container={width:0,height:0},this.viewport={width:0,height:0},this.content={origWidth:0,origHeight:0,width:0,height:0,x:this.option("x",0),y:this.option("y",0),scale:this.option("baseScale")},this.transform={x:0,y:0,scale:1},this.resetDragPosition()}},{key:"onLoad",value:function(e){this.updateMetrics(),this.panTo({scale:this.option("baseScale"),friction:0}),this.trigger("load",e)}},{key:"onClick",value:function(e){var t;e.defaultPrevented||document.activeElement&&document.activeElement.closest("[contenteditable]")||(!this.option("textSelection")||!window.getSelection().toString().length||e.target&&e.target.hasAttribute("data-fancybox-close")?(t=this.$content.getClientRects()[0],"ready"!==this.state&&(this.dragPosition.midPoint||1<Math.abs(t.top-this.dragStart.rect.top)||1<Math.abs(t.left-this.dragStart.rect.left))?(e.preventDefault(),e.stopPropagation()):!1!==this.trigger("click",e)&&this.option("zoom")&&"toggleZoom"===this.option("click")&&(e.preventDefault(),e.stopPropagation(),this.zoomWithClick(e))):e.stopPropagation())}},{key:"onWheel",value:function(e){!1!==this.trigger("wheel",e)&&this.option("zoom")&&this.option("wheel")&&this.zoomWithWheel(e)}},{key:"zoomWithWheel",value:function(e){void 0===this.changedDelta&&(this.changedDelta=0);var t=Math.max(-1,Math.min(1,-e.deltaY||-e.deltaX||e.wheelDelta||-e.detail)),i=this.content.scale,n=i*(100+t*this.option("wheelFactor"))/100,n=t<0&&Math.abs(i-this.option("minScale"))<.01||0<t&&Math.abs(i-this.option("maxScale"))<.01?(this.changedDelta+=Math.abs(t),i):(this.changedDelta=0,Math.max(Math.min(n,this.option("maxScale")),this.option("minScale")));this.changedDelta>this.option("wheelLimit")||(e.preventDefault(),n===i)||(t=this.$content.getBoundingClientRect(),i=e.clientX-t.left,e=e.clientY-t.top,this.zoomTo(n,{x:i,y:e}))}},{key:"zoomWithClick",value:function(e){var t=this.$content.getClientRects()[0],i=e.clientX-t.left,e=e.clientY-t.top;this.toggleZoom({x:i,y:e})}},{key:"attachEvents",value:function(){var l=this,c=(this.$content.addEventListener("load",this.onLoad),this.$container.addEventListener("wheel",this.onWheel,{passive:!1}),this.$container.addEventListener("click",this.onClick,{passive:!1}),this.initObserver(),new q(this.$container,{start:function(e,t){if(!l.option("touch"))return!1;if(l.velocity.scale<0)return!1;var o=t.composedPath()[0];if(!c.currentPointers.length){if(-1!==["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(o.nodeName))return!1;if(l.option("textSelection")&&function(e,t){for(var i=o.childNodes,n=document.createRange(),r=0;r<i.length;r++){var s=i[r];if(s.nodeType===Node.TEXT_NODE){n.selectNodeContents(s);var a=n.getBoundingClientRect();if(e>=a.left&&t>=a.top&&e<=a.right&&t<=a.bottom)return s}}}(e.clientX,e.clientY))return!1}return!d(o)&&!1!==l.trigger("touchStart",t)&&("mousedown"===t.type&&t.preventDefault(),l.state="pointerdown",l.resetDragPosition(),l.dragPosition.midPoint=null,l.dragPosition.time=Date.now(),!0)},move:function(e,t,i){if("pointerdown"===l.state)if(!1!==l.trigger("touchMove",i)){if(!(t.length<2&&!0===l.option("panOnlyZoomed")&&l.content.width<=l.viewport.width&&l.content.height<=l.viewport.height&&l.transform.scale<=l.option("baseScale"))&&(!(1<t.length)||l.option("zoom")&&!1!==l.option("pinchToZoom"))){var n=u(e[0],e[1]),r=u(t[0],t[1]),s=r.clientX-n.clientX,n=r.clientY-n.clientY,e=F(e[0],e[1]),a=F(t[0],t[1]),a=e&&a?a/e:1,e=(l.dragOffset.x+=s,l.dragOffset.y+=n,l.dragOffset.scale*=a,l.dragOffset.time=Date.now()-l.dragPosition.time,1===l.dragStart.scale&&l.option("lockAxis"));if(e&&!l.lockAxis){if(Math.abs(l.dragOffset.x)<6&&Math.abs(l.dragOffset.y)<6)return void i.preventDefault();var s=Math.abs(180*Math.atan2(l.dragOffset.y,l.dragOffset.x)/Math.PI);l.lockAxis=45<s&&s<135?"y":"x"}"xy"!==e&&"y"===l.lockAxis||(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),l.lockAxis&&(l.dragOffset["x"===l.lockAxis?"y":"x"]=0),l.$container.classList.add(l.option("draggingClass")),l.transform.scale===l.option("baseScale")&&"y"===l.lockAxis||(l.dragPosition.x=l.dragStart.x+l.dragOffset.x),l.transform.scale===l.option("baseScale")&&"x"===l.lockAxis||(l.dragPosition.y=l.dragStart.y+l.dragOffset.y),l.dragPosition.scale=l.dragStart.scale*l.dragOffset.scale,1<t.length?(a=(n=u(c.startPointers[0],c.startPointers[1])).clientX-l.dragStart.rect.x,s=n.clientY-l.dragStart.rect.y,t=(e=l.getZoomDelta(l.content.scale*l.dragOffset.scale,a,s)).deltaX,n=e.deltaY,l.dragPosition.x-=t,l.dragPosition.y-=n,l.dragPosition.midPoint=r):l.setDragResistance(),l.transform={x:l.dragPosition.x,y:l.dragPosition.y,scale:l.dragPosition.scale},l.startAnimation())}}else i.preventDefault()},end:function(e,t){var i;"pointerdown"===l.state&&(l._dragOffset=y({},l.dragOffset),c.currentPointers.length?l.resetDragPosition():(l.state="decel",l.friction=l.option("decelFriction"),l.recalculateTransform(),l.$container.classList.remove(l.option("draggingClass")),!1!==l.trigger("touchEnd",t)&&"decel"===l.state&&(t=l.option("minScale"),l.transform.scale<t?l.zoomTo(t,{friction:.64}):(t=l.option("maxScale"),.01<l.transform.scale-t&&(e=l.dragPosition.midPoint||e,i=l.$content.getClientRects()[0],l.zoomTo(t,{friction:.64,x:e.clientX-i.left,y:e.clientY-i.top}))))))}}));this.pointerTracker=c}},{key:"initObserver",value:function(){var t=this;this.resizeObserver||(this.resizeObserver=new H(function(){t.updateTimer||(t.updateTimer=setTimeout(function(){var e=t.$container.getBoundingClientRect();e.width&&e.height&&(1<Math.abs(e.width-t.container.width)||1<Math.abs(e.height-t.container.height))&&(t.isAnimating()&&t.endAnimation(!0),t.updateMetrics(),t.panTo({x:t.content.x,y:t.content.y,scale:t.option("baseScale"),friction:0})),t.updateTimer=null},t.updateRate))}),this.resizeObserver.observe(this.$container))}},{key:"resetDragPosition",value:function(){this.lockAxis=null,this.friction=this.option("friction"),this.velocity={x:0,y:0,scale:0};var e=this.content,t=e.x,i=e.y,e=e.scale;this.dragStart={rect:this.$content.getBoundingClientRect(),x:t,y:i,scale:e},this.dragPosition=y(y({},this.dragPosition),{},{x:t,y:i,scale:e}),this.dragOffset={x:0,y:0,scale:1,time:0}}},{key:"updateMetrics",value:function(e){!0!==e&&this.trigger("beforeUpdate");var t,i=this.$container,n=this.$content,r=this.$viewport,s=n instanceof HTMLImageElement,a=this.option("zoom"),o=this.option("resizeParent",a),l=this.option("width"),c=this.option("height"),d=l||(d=n,Math.max(parseFloat(d.naturalWidth||0),parseFloat(d.width&&d.width.baseVal&&d.width.baseVal.value||0),parseFloat(d.offsetWidth||0),parseFloat(d.scrollWidth||0))),u=c||(u=n,Math.max(parseFloat(u.naturalHeight||0),parseFloat(u.height&&u.height.baseVal&&u.height.baseVal.value||0),parseFloat(u.offsetHeight||0),parseFloat(u.scrollHeight||0))),h=(Object.assign(n.style,{width:l?"".concat(l,"px"):"",height:c?"".concat(c,"px"):"",maxWidth:"",maxHeight:""}),o&&Object.assign(r.style,{width:"",height:""}),this.option("ratio")),h=(l=d=b(d*h),c=u=b(u*h),n.getBoundingClientRect()),p=r.getBoundingClientRect(),i=r==i?p:i.getBoundingClientRect(),f=Math.max(r.offsetWidth,b(p.width)),p=Math.max(r.offsetHeight,b(p.height)),m=window.getComputedStyle(r);f-=parseFloat(m.paddingLeft)+parseFloat(m.paddingRight),p-=parseFloat(m.paddingTop)+parseFloat(m.paddingBottom),this.viewport.width=f,this.viewport.height=p,a&&((.1<Math.abs(d-h.width)||.1<Math.abs(u-h.height))&&(m=function(e,t,i,n){i=Math.min(i/e||0,n/t);return{width:e*i||0,height:t*i||0}}(d,u,Math.min(d,h.width),Math.min(u,h.height)),l=b(m.width),c=b(m.height)),Object.assign(n.style,{width:"".concat(l,"px"),height:"".concat(c,"px"),transform:""})),o&&(Object.assign(r.style,{width:"".concat(l,"px"),height:"".concat(c,"px")}),this.viewport=y(y({},this.viewport),{},{width:l,height:c})),s&&a&&"function"!=typeof this.options.maxScale&&(t=this.option("maxScale"),this.options.maxScale=function(){return 0<this.content.origWidth&&0<this.content.fitWidth?this.content.origWidth/this.content.fitWidth:t}),this.content=y(y({},this.content),{},{origWidth:d,origHeight:u,fitWidth:l,fitHeight:c,width:l,height:c,scale:1,isZoomable:a}),this.container={width:i.width,height:i.height},!0!==e&&this.trigger("afterUpdate")}},{key:"zoomIn",value:function(e){this.zoomTo(this.content.scale+(e||this.option("step")))}},{key:"zoomOut",value:function(e){this.zoomTo(this.content.scale-(e||this.option("step")))}},{key:"toggleZoom",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this.option("maxScale"),i=this.option("baseScale"),i=this.content.scale>i+.5*(t-i)?i:t;this.zoomTo(i,e)}},{key:"zoomTo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.option("baseScale"),t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t.x,i=void 0===i?null:i,t=t.y,t=void 0===t?null:t,e=Math.max(Math.min(e,this.option("maxScale")),this.option("minScale")),n=b(this.content.scale/(this.content.width/this.content.fitWidth),1e7),n=(null===i&&(i=this.content.width*n*.5),null===t&&(t=this.content.height*n*.5),this.getZoomDelta(e,i,t)),r=n.deltaX,n=n.deltaY,i=this.content.x-r,t=this.content.y-n;this.panTo({x:i,y:t,scale:e,friction:this.option("zoomFriction")})}},{key:"getZoomDelta",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=this.content.fitWidth*this.content.scale,r=this.content.fitHeight*this.content.scale;return{deltaX:(this.content.fitWidth*e-n)*(0<t&&n?t/n:0),deltaY:(this.content.fitHeight*e-r)*(0<i&&r?i/r:0)}}},{key:"panTo",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=t.x,i=void 0===i?this.content.x:i,n=t.y,n=void 0===n?this.content.y:n,r=t.scale,s=t.friction,s=void 0===s?this.option("friction"):s,t=t.ignoreBounds,r=r||this.content.scale||1;void 0!==t&&t||(e=(t=this.getBounds(r)).boundX,t=t.boundY,e&&(i=Math.max(Math.min(i,e.to),e.from)),t&&(n=Math.max(Math.min(n,t.to),t.from))),this.friction=s,this.transform=y(y({},this.transform),{},{x:i,y:n,scale:r}),s?(this.state="panning",this.velocity={x:(1/this.friction-1)*(i-this.content.x),y:(1/this.friction-1)*(n-this.content.y),scale:(1/this.friction-1)*(r-this.content.scale)},this.startAnimation()):this.endAnimation()}},{key:"startAnimation",value:function(){var e=this;this.rAF?cancelAnimationFrame(this.rAF):this.trigger("startAnimation"),this.rAF=requestAnimationFrame(function(){return e.animate()})}},{key:"animate",value:function(){var e=this;if(this.setEdgeForce(),this.setDragForce(),this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.velocity.scale*=this.friction,this.content.x+=this.velocity.x,this.content.y+=this.velocity.y,this.content.scale+=this.velocity.scale,this.isAnimating())this.setTransform();else if("pointerdown"!==this.state)return void this.endAnimation();this.rAF=requestAnimationFrame(function(){return e.animate()})}},{key:"getBounds",value:function(e){var t,i,n,r,s=this.boundX,a=this.boundY;return void 0!==s&&void 0!==a||(s={from:0,to:0},a={from:0,to:0},e=e||this.transform.scale,t=this.content.fitWidth*e,e=this.content.fitHeight*e,i=this.viewport.width,n=this.viewport.height,t<i?(r=b(.5*(i-t)),s.from=r,s.to=r):s.from=b(i-t),e<n?(a.from=r=.5*(n-e),a.to=r):a.from=b(n-e)),{boundX:s,boundY:a}}},{key:"setEdgeForce",value:function(){var e,t,i,n,r,s,a;"decel"===this.state&&(i=this.option("bounceForce"),a=(n=this.getBounds(Math.max(this.transform.scale,this.content.scale))).boundX,n=n.boundY,a&&(s=this.content.x<a.from,r=this.content.x>a.to),n&&(e=this.content.y<n.from,t=this.content.y>n.to),(s||r)&&(r=((s?a.from:a.to)-this.content.x)*i,(s=this.content.x+(this.velocity.x+r)/this.friction)>=a.from&&s<=a.to&&(r+=this.velocity.x),this.velocity.x=r,this.recalculateTransform()),e||t)&&(s=((e?n.from:n.to)-this.content.y)*i,(a=this.content.y+(s+this.velocity.y)/this.friction)>=n.from&&a<=n.to&&(s+=this.velocity.y),this.velocity.y=s,this.recalculateTransform())}},{key:"setDragResistance",value:function(){var e,t,i,n,r,s;"pointerdown"===this.state&&(r=(i=this.getBounds(this.dragPosition.scale)).boundX,i=i.boundY,r&&(n=this.dragPosition.x<r.from,s=this.dragPosition.x>r.to),i&&(e=this.dragPosition.y<i.from,t=this.dragPosition.y>i.to),!n&&!s||n&&s||(n=(s=n?r.from:r.to)-this.dragPosition.x,this.dragPosition.x=s-.3*n),!e&&!t||e&&t||(s=(r=e?i.from:i.to)-this.dragPosition.y,this.dragPosition.y=r-.3*s))}},{key:"setDragForce",value:function(){"pointerdown"===this.state&&(this.velocity.x=this.dragPosition.x-this.content.x,this.velocity.y=this.dragPosition.y-this.content.y,this.velocity.scale=this.dragPosition.scale-this.content.scale)}},{key:"recalculateTransform",value:function(){this.transform.x=this.content.x+this.velocity.x/(1/this.friction-1),this.transform.y=this.content.y+this.velocity.y/(1/this.friction-1),this.transform.scale=this.content.scale+this.velocity.scale/(1/this.friction-1)}},{key:"isAnimating",value:function(){return!(!this.friction||!(.05<Math.abs(this.velocity.x)||.05<Math.abs(this.velocity.y)||.05<Math.abs(this.velocity.scale)))}},{key:"setTransform",value:function(e){var t,i,n,r;e?(t=b(this.transform.x),i=b(this.transform.y),n=this.transform.scale,this.content=y(y({},this.content),{},{x:t,y:i,scale:n})):(t=b(this.content.x),i=b(this.content.y),n=this.content.scale/(this.content.width/this.content.fitWidth),this.content=y(y({},this.content),{},{x:t,y:i})),this.trigger("beforeTransform"),t=b(this.content.x),i=b(this.content.y),e&&this.option("zoom")?(e=b(this.content.fitWidth*n),r=b(this.content.fitHeight*n),this.content.width=e,this.content.height=r,this.transform=y(y({},this.transform),{},{width:e,height:r,scale:n}),Object.assign(this.$content.style,{width:"".concat(e,"px"),height:"".concat(r,"px"),maxWidth:"none",maxHeight:"none",transform:"translate3d(".concat(t,"px, ").concat(i,"px, 0) scale(1)")})):this.$content.style.transform="translate3d(".concat(t,"px, ").concat(i,"px, 0) scale(").concat(n,")"),this.trigger("afterTransform")}},{key:"endAnimation",value:function(e){cancelAnimationFrame(this.rAF),this.rAF=null,this.velocity={x:0,y:0,scale:0},this.setTransform(!0),this.state="ready",this.handleCursor(),!0!==e&&this.trigger("endAnimation")}},{key:"handleCursor",value:function(){var e=this.option("draggableClass");e&&this.option("touch")&&(1==this.option("panOnlyZoomed")&&this.content.width<=this.viewport.width&&this.content.height<=this.viewport.height&&this.transform.scale<=this.option("baseScale")?this.$container.classList.remove(e):this.$container.classList.add(e))}},{key:"detachEvents",value:function(){this.$content.removeEventListener("load",this.onLoad),this.$container.removeEventListener("wheel",this.onWheel,{passive:!1}),this.$container.removeEventListener("click",this.onClick,{passive:!1}),this.pointerTracker&&(this.pointerTracker.stop(),this.pointerTracker=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}},{key:"destroy",value:function(){"destroy"!==this.state&&(this.state="destroy",clearTimeout(this.updateTimer),this.updateTimer=null,cancelAnimationFrame(this.rAF),this.rAF=null,this.detachEvents(),this.detachPlugins(),this.resetDragPosition())}}]),T);function T(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};o(this,T),(t=$.call(this,f(!0,{},z,i))).state="init",t.$container=e;for(var n=0,r=["onLoad","onWheel","onClick"];n<r.length;n++){var s=r[n];t[s]=t[s].bind(a(t))}return t.initLayout(),t.resetValues(),t.attachPlugins(T.Plugins),t.trigger("init"),t.updateMetrics(),t.attachEvents(),t.trigger("ready"),!1===t.option("centerOnStart")?t.state="ready":t.panTo({friction:0}),e.__Panzoom=a(t),t}function x(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};o(this,x),this.options=f(!0,{},e),this.plugins=[],this.events={};for(var t=0,i=["on","once"];t<i.length;t++)for(var n=i[t],r=0,s=Object.entries(this.options[n]||{});r<s.length;r++){var a=s[r];this[n].apply(this,_(a))}}function W(e){var a=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t.start,i=void 0===i?function(){return!0}:i,n=t.move,n=void 0===n?function(){}:n,t=t.end,t=void 0===t?function(){}:t;o(this,W),this._element=e,this.startPointers=[],this.currentPointers=[],this._pointerStart=function(e){var t;0<e.buttons&&0!==e.button||(t=new p(e),a.currentPointers.some(function(e){return e.id===t.id}))||a._triggerPointerStart(t,e)&&(window.addEventListener("mousemove",a._move),window.addEventListener("mouseup",a._pointerEnd))},this._touchStart=function(e){for(var t=0,i=Array.from(e.changedTouches||[]);t<i.length;t++){var n=i[t];a._triggerPointerStart(new p(n),e)}},this._move=function(e){var i,t=a.currentPointers.slice(),n="changedTouches"in e?Array.from(e.changedTouches).map(function(e){return new p(e)}):[new p(e)],r=[],s=w(n);try{for(s.s();!(i=s.n()).done;)!function(){var t=i.value,e=a.currentPointers.findIndex(function(e){return e.id===t.id});if(e<0)return;r.push(t),a.currentPointers[e]=t}()}catch(e){s.e(e)}finally{s.f()}a._moveCallback(t,a.currentPointers.slice(),e)},this._triggerPointerEnd=function(t,e){var i=a.currentPointers.findIndex(function(e){return e.id===t.id});return!(i<0||(a.currentPointers.splice(i,1),a.startPointers.splice(i,1),a._endCallback(t,e),0))},this._pointerEnd=function(e){0<e.buttons&&0!==e.button||a._triggerPointerEnd(new p(e),e)&&(window.removeEventListener("mousemove",a._move,{passive:!1}),window.removeEventListener("mouseup",a._pointerEnd,{passive:!1}))},this._touchEnd=function(e){for(var t=0,i=Array.from(e.changedTouches||[]);t<i.length;t++){var n=i[t];a._triggerPointerEnd(new p(n),e)}},this._startCallback=i,this._moveCallback=n,this._endCallback=t,this._element.addEventListener("mousedown",this._pointerStart,{passive:!1}),this._element.addEventListener("touchstart",this._touchStart,{passive:!1}),this._element.addEventListener("touchmove",this._move,{passive:!1}),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd)}function V(e){o(this,V),this.observables=[],this.boundCheck=this.check.bind(this),this.boundCheck(),this.callback=e}v.version="4.0.31",v.Plugins={};function X(t,i){var n=0;return function(){var e=(new Date).getTime();if(!(e-n<i))return n=e,t.apply(void 0,arguments)}}t(G,[{key:"option",value:function(e){return this.carousel.option("Navigation.".concat(e))}},{key:"createButton",value:function(t){var e,i=this,n=document.createElement("button"),r=(n.setAttribute("title",this.carousel.localize("{{".concat(t.toUpperCase(),"}}"))),this.option("classNames.button")+" "+this.option("classNames.".concat(t)));return(e=n.classList).add.apply(e,_(r.split(" "))),n.setAttribute("tabindex","0"),n.innerHTML=this.carousel.localize(this.option("".concat(t,"Tpl"))),n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),i.carousel["slide".concat("next"===t?"Next":"Prev")]()}),n}},{key:"build",value:function(){var e;this.$container||(this.$container=document.createElement("div"),(e=this.$container.classList).add.apply(e,_(this.option("classNames.main").split(" "))),this.carousel.$container.appendChild(this.$container)),this.$next||(this.$next=this.createButton("next"),this.$container.appendChild(this.$next)),this.$prev||(this.$prev=this.createButton("prev"),this.$container.appendChild(this.$prev))}},{key:"onRefresh",value:function(){var e=this.carousel.pages.length;e<=1||1<e&&this.carousel.elemDimWidth<this.carousel.wrapDimWidth&&!Number.isInteger(this.carousel.option("slidesPerPage"))?this.cleanup():(this.build(),this.$prev.removeAttribute("disabled"),this.$next.removeAttribute("disabled"),this.carousel.option("infiniteX",this.carousel.option("infinite"))||(this.carousel.page<=0&&this.$prev.setAttribute("disabled",""),this.carousel.page>=e-1&&this.$next.setAttribute("disabled","")))}},{key:"cleanup",value:function(){this.$prev&&this.$prev.remove(),this.$prev=null,this.$next&&this.$next.remove(),this.$next=null,this.$container&&this.$container.remove(),this.$container=null}},{key:"attach",value:function(){this.carousel.on("refresh change",this.onRefresh)}},{key:"detach",value:function(){this.carousel.off("refresh change",this.onRefresh),this.cleanup()}}]);var S=G;function G(e){o(this,G),this.$container=null,this.$prev=null,this.$next=null,this.carousel=e,this.onRefresh=this.onRefresh.bind(this)}S.defaults={prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>',nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',classNames:{main:"carousel__nav",button:"carousel__button",next:"is-next",prev:"is-prev"}};t(Q,[{key:"buildList",value:function(){var e,i=this;if(!(this.carousel.pages.length<this.carousel.option("Dots.minSlideCount")))return(e=document.createElement("ol")).classList.add("carousel__dots"),e.addEventListener("click",function(e){var t;"page"in e.target.dataset&&(e.preventDefault(),e.stopPropagation(),(e=parseInt(e.target.dataset.page,10))!==(t=i.carousel).page)&&(t.pages.length<3&&t.option("infinite")?t[0==e?"slidePrev":"slideNext"]():t.slideTo(e))}),this.$list=e,this.carousel.$container.appendChild(e),this.carousel.$container.classList.add("has-dots"),e}},{key:"removeList",value:function(){this.$list&&(this.$list.parentNode.removeChild(this.$list),this.$list=null),this.carousel.$container.classList.remove("has-dots")}},{key:"rebuildDots",value:function(){var t=this,e=!!this.$list,i=this.carousel.pages.length;if(i<2)e&&this.removeList();else{e||this.buildList();var n=this.$list.children.length;if(i<n)for(var r=i;r<n;r++)this.$list.removeChild(this.$list.lastChild);else{for(var s=n;s<i;s++)!function(e){var i=document.createElement("li");i.classList.add("carousel__dot"),i.dataset.page=e,i.setAttribute("role","button"),i.setAttribute("tabindex","0"),i.setAttribute("title",t.carousel.localize("{{GOTO}}",[["%d",e+1]])),i.addEventListener("keydown",function(e){var t,e=e.code;"Enter"===e||"NumpadEnter"===e?t=i:"ArrowRight"===e?t=i.nextSibling:"ArrowLeft"===e&&(t=i.previousSibling),t&&t.click()}),t.$list.appendChild(i)}(s);this.setActiveDot()}}}},{key:"setActiveDot",value:function(){var e;this.$list&&(this.$list.childNodes.forEach(function(e){e.classList.remove("is-selected")}),e=this.$list.childNodes[this.carousel.page])&&e.classList.add("is-selected")}},{key:"onChange",value:function(){this.setActiveDot()}},{key:"onRefresh",value:function(){this.rebuildDots()}},{key:"attach",value:function(){this.carousel.on(this.events)}},{key:"detach",value:function(){this.removeList(),this.carousel.off(this.events),this.carousel=null}}]);var Y=Q,k=(t(K,[{key:"addAsTargetFor",value:function(e){this.target=this.carousel,this.nav=e,this.attachEvents()}},{key:"addAsNavFor",value:function(e){this.target=e,this.nav=this.carousel,this.attachEvents()}},{key:"attachEvents",value:function(){this.nav.options.initialSlide=this.target.options.initialPage,this.nav.on("ready",this.onNavReady),this.nav.on("createSlide",this.onNavCreateSlide),this.nav.on("Panzoom.click",this.onNavClick),this.target.on("change",this.onTargetChange),this.target.on("Panzoom.afterUpdate",this.onTargetChange)}},{key:"onNavReady",value:function(){this.onTargetChange(!0)}},{key:"onNavClick",value:function(e,t,i){var n=i.target.closest(".carousel__slide");n&&(i.stopPropagation(),i=parseInt(n.dataset.index,10),n=this.target.findPageForSlide(i),this.target.page!==n&&this.target.slideTo(n,{friction:this.friction}),this.markSelectedSlide(i))}},{key:"onNavCreateSlide",value:function(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}},{key:"onTargetChange",value:function(){var e=this.target.pages[this.target.page].indexes[0],t=this.nav.findPageForSlide(e);this.nav.slideTo(t),this.markSelectedSlide(e)}},{key:"markSelectedSlide",value:function(e){this.selectedIndex=e,_(this.nav.slides).filter(function(e){return e.$el&&e.$el.classList.remove("is-nav-selected")});e=this.nav.slides[e];e&&e.$el&&e.$el.classList.add("is-nav-selected")}},{key:"attach",value:function(e){e=e.options.Sync;(e.target||e.nav)&&(e.target?this.addAsNavFor(e.target):e.nav&&this.addAsTargetFor(e.nav),this.friction=e.friction)}},{key:"detach",value:function(){this.nav&&(this.nav.off("ready",this.onNavReady),this.nav.off("Panzoom.click",this.onNavClick),this.nav.off("createSlide",this.onNavCreateSlide)),this.target&&(this.target.off("Panzoom.afterUpdate",this.onTargetChange),this.target.off("change",this.onTargetChange))}}]),K);function K(e){o(this,K),this.carousel=e,this.selectedIndex=null,this.friction=0,this.onNavReady=this.onNavReady.bind(this),this.onNavClick=this.onNavClick.bind(this),this.onNavCreateSlide=this.onNavCreateSlide.bind(this),this.onTargetChange=this.onTargetChange.bind(this)}function Q(e){o(this,Q),this.carousel=e,this.$list=null,this.events={change:this.onChange.bind(this),refresh:this.onRefresh.bind(this)}}k.defaults={friction:.92};var J,S={Navigation:S,Dots:Y,Sync:k},Z={slides:[],preload:0,slidesPerPage:"auto",initialPage:null,initialSlide:null,friction:.92,center:!0,infinite:!0,fill:!0,dragFree:!1,prefix:"",classNames:{viewport:"carousel__viewport",track:"carousel__track",slide:"carousel__slide",slideSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}},E=(i(C,g),J=n(C),t(C,[{key:"init",value:function(){this.pages=[],this.page=this.pageIndex=null,this.prevPage=this.prevPageIndex=null,this.attachPlugins(C.Plugins),this.trigger("init"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.$track&&this.pages.length&&(this.$track.style.transform="translate3d(".concat(-1*this.pages[this.page].left,"px, 0px, 0) scale(1)")),this.manageSlideVisiblity(),this.initPanzoom(),this.state="ready",this.trigger("ready")}},{key:"initLayout",value:function(){var e,t=this.option("prefix"),i=this.option("classNames");this.$viewport=this.option("viewport")||this.$container.querySelector(".".concat(t).concat(i.viewport)),this.$viewport||(this.$viewport=document.createElement("div"),(e=this.$viewport.classList).add.apply(e,_((t+i.viewport).split(" "))),(e=this.$viewport).append.apply(e,_(this.$container.childNodes)),this.$container.appendChild(this.$viewport)),this.$track=this.option("track")||this.$container.querySelector(".".concat(t).concat(i.track)),this.$track||(this.$track=document.createElement("div"),(e=this.$track.classList).add.apply(e,_((t+i.track).split(" "))),(e=this.$track).append.apply(e,_(this.$viewport.childNodes)),this.$viewport.appendChild(this.$track))}},{key:"initSlides",value:function(){var t=this;this.slides=[],this.$viewport.querySelectorAll(".".concat(this.option("prefix")).concat(this.option("classNames.slide"))).forEach(function(e){e={$el:e,isDom:!0};t.slides.push(e),t.trigger("createSlide",e,t.slides.length)}),Array.isArray(this.options.slides)&&(this.slides=f(!0,_(this.slides),this.options.slides))}},{key:"updateMetrics",value:function(){var n,r=this,s=0,a=[],i=(this.slides.forEach(function(e,t){var i=e.$el,i=e.isDom||!n?r.getSlideMetrics(i):n;e.index=t,e.width=i,e.left=s,s+=n=i,a.push(t)}),Math.max(this.$track.offsetWidth,b(this.$track.getBoundingClientRect().width))),e=getComputedStyle(this.$track),t=(i-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),this.contentWidth=s,this.viewportWidth=i,[]),o=this.option("slidesPerPage");if(Number.isInteger(o)&&i<s)for(var l=0;l<this.slides.length;l+=o)t.push({indexes:a.slice(l,l+o),slides:this.slides.slice(l,l+o)});else for(var c=0,d=0,u=0;u<this.slides.length;u+=1){var h=this.slides[u];(!t.length||d+h.width>i)&&(t.push({indexes:[],slides:[]}),c=t.length-1,d=0),d+=h.width,t[c].indexes.push(u),t[c].slides.push(h)}var p=this.option("center"),f=this.option("fill");t.forEach(function(e,t){e.index=t,e.width=e.slides.reduce(function(e,t){return e+t.width},0),e.left=e.slides[0].left,p&&(e.left+=.5*(i-e.width)*-1),f&&!r.option("infiniteX",r.option("infinite"))&&i<s&&(e.left=Math.max(e.left,0),e.left=Math.min(e.left,s-i))});var m,g,v=[],e=(t.forEach(function(e){e=y({},e);m&&e.left===m.left?(m.width+=e.width,m.slides=[].concat(_(m.slides),_(e.slides)),m.indexes=[].concat(_(m.indexes),_(e.indexes))):(e.index=v.length,m=e,v.push(e))}),this.pages=v,this.page);null===e&&(e=null!==(g=this.option("initialSlide"))?this.findPageForSlide(g):parseInt(this.option("initialPage",0),10)||0,v[e]||(e=v.length&&v.length<e?v[v.length-1].index:0),this.page=e,this.pageIndex=e),this.updatePanzoom(),this.trigger("refresh")}},{key:"getSlideMetrics",value:function(e){e||(i=this.slides[0],(e=document.createElement("div")).dataset.isTestEl=1,e.style.visibility="hidden",(t=e.classList).add.apply(t,_((this.option("prefix")+this.option("classNames.slide")).split(" "))),i.customClass&&(t=e.classList).add.apply(t,_(i.customClass.split(" "))),this.$track.prepend(e));var t=Math.max(e.offsetWidth,b(e.getBoundingClientRect().width)),i=e.currentStyle||window.getComputedStyle(e),t=t+(parseFloat(i.marginLeft)||0)+(parseFloat(i.marginRight)||0);return e.dataset.isTestEl&&e.remove(),t}},{key:"findPageForSlide",value:function(t){t=parseInt(t,10)||0;var e=this.pages.find(function(e){return-1<e.indexes.indexOf(t)});return e?e.index:null}},{key:"slideNext",value:function(){this.slideTo(this.pageIndex+1)}},{key:"slidePrev",value:function(){this.slideTo(this.pageIndex-1)}},{key:"slideTo",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t.x,e=void 0===i?-1*this.setPage(e,!0):i,i=t.y,i=void 0===i?0:i,t=t.friction,t=void 0===t?this.option("friction"):t;this.Panzoom.content.x===e&&!this.Panzoom.velocity.x&&t||(this.Panzoom.panTo({x:e,y:i,friction:t,ignoreBounds:!0}),"ready"===this.state&&"ready"===this.Panzoom.state&&this.trigger("settle"))}},{key:"initPanzoom",value:function(){var r=this,e=(this.Panzoom&&this.Panzoom.destroy(),f(!0,{},{content:this.$track,wrapInner:!1,resizeParent:!1,zoom:!1,click:!1,lockAxis:"x",x:this.pages.length?-1*this.pages[this.page].left:0,centerOnStart:!1,textSelection:function(){return r.option("textSelection",!1)},panOnlyZoomed:function(){return this.content.width<=this.viewport.width}},this.option("Panzoom")));this.Panzoom=new v(this.$container,e),this.Panzoom.on({"*":function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return r.trigger.apply(r,["Panzoom.".concat(e)].concat(i))},afterUpdate:function(){r.updatePage()},beforeTransform:this.onBeforeTransform.bind(this),touchEnd:this.onTouchEnd.bind(this),endAnimation:function(){r.trigger("settle")}}),this.updateMetrics(),this.manageSlideVisiblity()}},{key:"updatePanzoom",value:function(){this.Panzoom&&(this.Panzoom.content=y(y({},this.Panzoom.content),{},{fitWidth:this.contentWidth,origWidth:this.contentWidth,width:this.contentWidth}),1<this.pages.length&&this.option("infiniteX",this.option("infinite"))?this.Panzoom.boundX=null:this.pages.length&&(this.Panzoom.boundX={from:-1*this.pages[this.pages.length-1].left,to:-1*this.pages[0].left}),this.option("infiniteY",this.option("infinite"))?this.Panzoom.boundY=null:this.Panzoom.boundY={from:0,to:0},this.Panzoom.handleCursor())}},{key:"manageSlideVisiblity",value:function(){var a=this,o=this.contentWidth,l=this.viewportWidth,c=this.Panzoom?-1*this.Panzoom.content.x:this.pages.length?this.pages[this.page].left:0,d=this.option("preload"),u=this.option("infiniteX",this.option("infinite")),h=parseFloat(getComputedStyle(this.$viewport,null).getPropertyValue("padding-left")),p=parseFloat(getComputedStyle(this.$viewport,null).getPropertyValue("padding-right")),n=(this.slides.forEach(function(e){var t=0,i=c-h,n=c+l+p,r=(n+=d*(l+h+p),e.left+e.width>(i-=d*(l+h+p))&&e.left<n),s=(i=c+o-h,n=c+o+l+p,i-=d*(l+h+p),u&&e.left+e.width>i&&e.left<n),i=(i=c-o-h,n=c-o+l+p,i-=d*(l+h+p),u&&e.left+e.width>i&&e.left<n);s||r||i?(a.createSlideEl(e),r&&(t=0),s&&(t=-1),i&&(t=1),e.left+e.width>c&&e.left<=c+l+p&&(t=0)):a.removeSlideEl(e),e.hasDiff=t}),0),r=0;this.slides.forEach(function(e,t){var i=0;e.$el?(t!==n||e.hasDiff?i=r+e.hasDiff*o:r=0,e.$el.style.left=.1<Math.abs(i)?"".concat(r+e.hasDiff*o,"px"):"",n++):r+=e.width}),this.markSelectedSlides()}},{key:"createSlideEl",value:function(e){var t,i,n;if(e){if(!e.$el)return(t=document.createElement("div")).dataset.index=e.index,(r=t.classList).add.apply(r,_((this.option("prefix")+this.option("classNames.slide")).split(" "))),e.customClass&&(r=t.classList).add.apply(r,_(e.customClass.split(" "))),e.html&&(t.innerHTML=e.html),i=[],this.slides.forEach(function(e,t){e.$el&&i.push(t)}),n=e.index,r=null,i.length&&(s=i.reduce(function(e,t){return Math.abs(t-n)<Math.abs(e-n)?t:e}),r=this.slides[s]),this.$track.insertBefore(t,r&&r.$el?r.index<e.index?r.$el.nextSibling:r.$el:null),e.$el=t,this.trigger("createSlide",e,n),e;var r,s=e.$el.dataset.index;s&&parseInt(s,10)===e.index||(e.$el.dataset.index=e.index,e.$el.querySelectorAll("[data-lazy-srcset]").forEach(function(e){e.srcset=e.dataset.lazySrcset}),e.$el.querySelectorAll("[data-lazy-src]").forEach(function(e){var t=e.dataset.lazySrc;e instanceof HTMLImageElement?e.src=t:e.style.backgroundImage="url('".concat(t,"')")}),(r=e.$el.dataset.lazySrc)&&(e.$el.style.backgroundImage="url('".concat(r,"')")),e.state="ready")}}},{key:"removeSlideEl",value:function(e){e.$el&&!e.isDom&&(this.trigger("removeSlide",e),e.$el.remove(),e.$el=null)}},{key:"markSelectedSlides",value:function(){var r=this,s=this.option("classNames.slideSelected"),a="aria-hidden";this.slides.forEach(function(e,t){var i,n=e.$el;n&&((i=r.pages[r.page])&&i.indexes&&-1<i.indexes.indexOf(t)?(s&&!n.classList.contains(s)&&(n.classList.add(s),r.trigger("selectSlide",e)),n.removeAttribute(a)):(s&&n.classList.contains(s)&&(n.classList.remove(s),r.trigger("unselectSlide",e)),n.setAttribute(a,!0)))})}},{key:"updatePage",value:function(){this.updateMetrics(),this.slideTo(this.page,{friction:0})}},{key:"onBeforeTransform",value:function(){this.option("infiniteX",this.option("infinite"))&&this.manageInfiniteTrack(),this.manageSlideVisiblity()}},{key:"manageInfiniteTrack",value:function(){var e,t,i=this.contentWidth,n=this.viewportWidth;if(!(!this.option("infiniteX",this.option("infinite"))||this.pages.length<2||i<n))return t=!1,(e=this.Panzoom).content.x<-1*(i-n)&&(e.content.x+=i,this.pageIndex=this.pageIndex-this.pages.length,t=!0),e.content.x>n&&(e.content.x-=i,this.pageIndex=this.pageIndex+this.pages.length,t=!0),t&&"pointerdown"===e.state&&e.resetDragPosition(),t}},{key:"onTouchEnd",value:function(e,t){var i=this.option("dragFree");!i&&1<this.pages.length&&e.dragOffset.time<350&&Math.abs(e.dragOffset.y)<1&&5<Math.abs(e.dragOffset.x)?this[e.dragOffset.x<0?"slideNext":"slidePrev"]():i?(i=c(this.getPageFromPosition(-1*e.transform.x),2)[1],this.setPage(i)):this.slideToClosest()}},{key:"slideToClosest",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=c(this.getPageFromPosition(-1*this.Panzoom.content.x),2)[1];this.slideTo(t,e)}},{key:"getPageFromPosition",value:function(t){var e=this.pages.length,i=(this.option("center")&&(t+=.5*this.viewportWidth),Math.floor(t/this.contentWidth)),n=(t-=i*this.contentWidth,this.slides.find(function(e){return e.left<=t&&e.left+e.width>t}));return n?[n=this.findPageForSlide(n.index),n+i*e]:[0,0]}},{key:"setPage",value:function(e,t){var i,n,r=0,s=parseInt(e,10)||0,a=this.page,o=this.pageIndex,l=this.pages.length,c=this.contentWidth,d=this.viewportWidth;return e=(s%l+l)%l,this.option("infiniteX",this.option("infinite"))&&d<c?(d=Math.floor(s/l)||0,r=this.pages[e].left+d*c,!0===t&&2<l&&(d=-1*this.Panzoom.content.x,t=r-c,c=r+c,i=Math.abs(d-r),n=Math.abs(d-t),(d=Math.abs(d-c))<i&&d<=n?(r=c,s+=l):n<i&&n<d&&(r=t,s-=l))):(e=s=Math.max(0,Math.min(s,l-1)),r=this.pages.length?this.pages[e].left:0),this.page=e,this.pageIndex=s,null!==a&&e!==a&&(this.prevPage=a,this.prevPageIndex=o,this.trigger("change",e,a)),r}},{key:"destroy",value:function(){var t=this;this.state="destroy",this.slides.forEach(function(e){t.removeSlideEl(e)}),this.slides=[],this.Panzoom.destroy(),this.detachPlugins()}}]),C);function C(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(o(this,C),t=f(!0,{},Z,t),(t=J.call(this,t)).state="init",t.$container=e,t.$container instanceof HTMLElement)return t.slideNext=X(t.slideNext.bind(a(t)),250),t.slidePrev=X(t.slidePrev.bind(a(t)),250),t.init(),e.__Carousel=a(t),t;throw new Error("No root element provided")}E.version="4.0.31",E.Plugins=S;function A(e){if(e&&P){null===ee&&document.createElement("div").focus({get preventScroll(){return!(ee=!0)}});try{var t,i;e.setActive?e.setActive():ee?e.focus({preventScroll:!0}):(t=window.pageXOffset||document.body.scrollTop,i=window.pageYOffset||document.body.scrollLeft,e.focus(),document.body.scrollTo({top:t,left:i,behavior:"auto"}))}catch(e){}}}var P=!("undefined"==typeof window||!window.document||!window.document.createElement),ee=null,te=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'],Y=(t(ne,[{key:"onReady",value:function(){var e=window.visualViewport;e&&(this.viewport=e,this.startY=0,e.addEventListener("resize",this.onResize),this.updateViewport()),window.addEventListener("touchstart",this.onTouchstart,{passive:!1}),window.addEventListener("touchmove",this.onTouchmove,{passive:!1}),window.addEventListener("wheel",this.onWheel,{passive:!1})}},{key:"onResize",value:function(){this.updateViewport()}},{key:"updateViewport",value:function(){var e,t,i,n=this.fancybox,r=this.viewport,s=r.scale||1,n=n.$container;n&&(i=t=e="",.1<s-1&&(e="".concat(r.width*s,"px"),t="".concat(r.height*s,"px"),i="translate3d(".concat(r.offsetLeft,"px, ").concat(r.offsetTop,"px, 0) scale(").concat(1/s,")")),n.style.width=e,n.style.height=t,n.style.transform=i)}},{key:"onTouchstart",value:function(e){this.startY=(e.touches?e.touches[0]:e).screenY}},{key:"onTouchmove",value:function(e){var t,i,n,r=this.startY,s=window.innerWidth/window.document.documentElement.clientWidth;!e.cancelable||1<e.touches.length||1!=s||(s=d(e.composedPath()[0]))&&(t=window.getComputedStyle(s),t=parseInt(t.getPropertyValue("height"),10),i=r<=(n=(e.touches?e.touches[0]:e).screenY)&&0===s.scrollTop,n=n<=r&&s.scrollHeight-s.scrollTop===t,!i)&&!n||e.preventDefault()}},{key:"onWheel",value:function(e){d(e.composedPath()[0])||e.preventDefault()}},{key:"cleanup",value:function(){this.pendingUpdate&&(cancelAnimationFrame(this.pendingUpdate),this.pendingUpdate=null);var e=this.viewport;e&&(e.removeEventListener("resize",this.onResize),this.viewport=null),window.removeEventListener("touchstart",this.onTouchstart,!1),window.removeEventListener("touchmove",this.onTouchmove,!1),window.removeEventListener("wheel",this.onWheel,{passive:!1})}},{key:"attach",value:function(){this.fancybox.on("initLayout",this.onReady)}},{key:"detach",value:function(){this.fancybox.off("initLayout",this.onReady),this.cleanup()}}]),ne),k=(t(ie,[{key:"onPrepare",value:function(){this.getSlides().length<this.fancybox.option("Thumbs.minSlideCount")?this.state="disabled":!0===this.fancybox.option("Thumbs.autoStart")&&this.fancybox.Carousel.Panzoom.content.height>=this.fancybox.option("Thumbs.minScreenHeight")&&this.build()}},{key:"onClosing",value:function(){this.Carousel&&this.Carousel.Panzoom.detachEvents()}},{key:"onKeydown",value:function(e,t){t===e.option("Thumbs.key")&&this.toggle()}},{key:"build",value:function(){var e,i=this;this.$container||((e=document.createElement("div")).classList.add("fancybox__thumbs"),this.fancybox.$carousel.parentNode.insertBefore(e,this.fancybox.$carousel.nextSibling),this.Carousel=new E(e,f(!0,{Dots:!1,Navigation:!1,Sync:{friction:0},infinite:!1,center:!0,fill:!0,dragFree:!0,slidesPerPage:1,preload:1},this.fancybox.option("Thumbs.Carousel"),{Sync:{target:this.fancybox.Carousel},slides:this.getSlides()})),this.Carousel.Panzoom.on("wheel",function(e,t){t.preventDefault(),i.fancybox[t.deltaY<0?"prev":"next"]()}),this.$container=e,this.state="visible")}},{key:"getSlides",value:function(){var e,t=[],i=w(this.fancybox.items);try{for(i.s();!(e=i.n()).done;){var n=e.value,r=n.thumb;r&&t.push({html:this.fancybox.option("Thumbs.tpl").replace(/\{\{src\}\}/gi,r),customClass:"has-thumb has-".concat(n.type||"image")})}}catch(e){i.e(e)}finally{i.f()}return t}},{key:"toggle",value:function(){"visible"===this.state?this.hide():"hidden"===this.state?this.show():this.build()}},{key:"show",value:function(){"hidden"===this.state&&(this.$container.style.display="",this.Carousel.Panzoom.attachEvents(),this.state="visible")}},{key:"hide",value:function(){"visible"===this.state&&(this.Carousel.Panzoom.detachEvents(),this.$container.style.display="none",this.state="hidden")}},{key:"cleanup",value:function(){this.Carousel&&(this.Carousel.destroy(),this.Carousel=null),this.$container&&(this.$container.remove(),this.$container=null),this.state="init"}},{key:"attach",value:function(){this.fancybox.on(this.events)}},{key:"detach",value:function(){this.fancybox.off(this.events),this.cleanup()}}]),ie);function ie(e){o(this,ie),this.fancybox=e,this.$container=null,this.state="init";for(var t=0,i=["onPrepare","onClosing","onKeydown"];t<i.length;t++){var n=i[t];this[n]=this[n].bind(this)}this.events={prepare:this.onPrepare,closing:this.onClosing,keydown:this.onKeydown}}function ne(e){o(this,ne),this.fancybox=e,this.viewport=null,this.pendingUpdate=null;for(var t=0,i=["onReady","onResize","onTouchstart","onTouchmove"];t<i.length;t++){var n=i[t];this[n]=this[n].bind(this)}}k.defaults={minSlideCount:2,minScreenHeight:500,autoStart:!0,key:"t",Carousel:{},tpl:'<div class="fancybox__thumb" style="background-image:url(\'{{src}}\')"></div>'};function re(e,t){for(var i=new URL(e),i=new URLSearchParams(i.search),n=new URLSearchParams,r=0,s=[].concat(_(i),_(Object.entries(t)));r<s.length;r++){var a=c(s[r],2),o=a[0],a=a[1];"t"===o?n.set("start",parseInt(a)):n.set(o,a)}return n=n.toString(),(i=e.match(/#t=((.*)?\d+s)/))&&(n+="#t=".concat(i[1])),n}var se={video:{autoplay:!0,ratio:16/9},youtube:{autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},vimeo:{hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},html5video:{tpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos.</video>',format:""}},S=(t(ae,[{key:"onInit",value:function(){var e,t=w(this.fancybox.items);try{for(t.s();!(e=t.n()).done;){var i=e.value;this.processType(i)}}catch(e){t.e(e)}finally{t.f()}}},{key:"processType",value:function(e){var t,i,n,r,s;e.html?(e.src=e.html,e.type="html",delete e.html):(t=e.src||"",i=e.type||this.fancybox.options.type,n=null,t&&"string"!=typeof t||((n=t.match(/(?:youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i))?(r=re(t,this.fancybox.option("Html.youtube")),s=encodeURIComponent(n[1]),e.videoId=s,e.src="https://www.youtube-nocookie.com/embed/".concat(s,"?").concat(r),e.thumb=e.thumb||"https://i.ytimg.com/vi/".concat(s,"/mqdefault.jpg"),e.vendor="youtube",i="video"):(n=t.match(/^.+vimeo.com\/(?:\/)?([\d]+)(.*)?/))?(r=re(t,this.fancybox.option("Html.vimeo")),s=encodeURIComponent(n[1]),e.videoId=s,e.src="https://player.vimeo.com/video/".concat(s,"?").concat(r),e.vendor="vimeo",i="video"):(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src="//maps.google.".concat(n[1],"/?ll=").concat((n[2]?n[2]+"&z="+Math.floor(n[3])+(n[4]?n[4].replace(/^\//,"&"):""):n[4]+"").replace(/\?/,"&"),"&output=").concat(n[4]&&0<n[4].indexOf("layer=c")?"svembed":"embed"),i="map"):(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src="//maps.google.".concat(n[1],"/maps?q=").concat(n[2].replace("query=","q=").replace("api=1",""),"&output=embed"),i="map"),i||("#"===t.charAt(0)?i="inline":(n=t.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i="html5video",e.format=e.format||"video/"+("ogv"===n[1]?"ogg":n[1])):t.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i="image":t.match(/\.(pdf)((\?|#).*)?$/i)&&(i="pdf")),e.type=i||this.fancybox.option("defaultType","image"),"html5video"!==i&&"video"!==i)||(e.video=f({},this.fancybox.option("Html.video"),e.video),e._width&&e._height?e.ratio=parseFloat(e._width)/parseFloat(e._height):e.ratio=e.ratio||e.video.ratio||se.video.ratio))}},{key:"onReady",value:function(){var t=this;this.fancybox.Carousel.slides.forEach(function(e){e.$el&&(t.setContent(e),e.index===t.fancybox.getSlide().index)&&t.playVideo(e)})}},{key:"onCreateSlide",value:function(e,t,i){"ready"===this.fancybox.state&&this.setContent(i)}},{key:"loadInlineContent",value:function(e){var t,i;e.src instanceof HTMLElement?t=e.src:"string"==typeof e.src&&(i=2===(i=e.src.split("#",2)).length&&""===i[0]?i[1]:i[0],t=document.getElementById(i)),t?("clone"===e.type||t.$placeHolder?(i=(i=(t=t.cloneNode(!0)).getAttribute("id"))?"".concat(i,"--clone"):"clone-".concat(this.fancybox.id,"-").concat(e.index),t.setAttribute("id",i)):((i=document.createElement("div")).classList.add("fancybox-placeholder"),t.parentNode.insertBefore(i,t),t.$placeHolder=i),this.fancybox.setContent(e,t)):this.fancybox.setError(e,"{{ELEMENT_NOT_FOUND}}")}},{key:"loadAjaxContent",value:function(e){var t=this.fancybox,i=new XMLHttpRequest,n=(t.showLoading(e),i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&"ready"===t.state&&(t.hideLoading(e),200===i.status?t.setContent(e,i.responseText):t.setError(e,404===i.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))},e.ajax||null);i.open(n?"POST":"GET",e.src),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(n),e.xhr=i}},{key:"loadIframeContent",value:function(t){var e,i=this,n=this.fancybox,r=document.createElement("iframe");r.className="fancybox__iframe",r.setAttribute("id","fancybox__iframe_".concat(n.id,"_").concat(t.index)),r.setAttribute("allow","autoplay; fullscreen"),r.setAttribute("scrolling","auto"),t.$iframe=r,"iframe"!==t.type||!1===t.preload?(r.setAttribute("src",t.src),this.fancybox.setContent(t,r),this.resizeIframe(t)):(n.showLoading(t),(e=document.createElement("div")).style.visibility="hidden",this.fancybox.setContent(t,e),e.appendChild(r),r.onerror=function(){n.setError(t,"{{IFRAME_ERROR}}")},r.onload=function(){n.hideLoading(t);var e=!1;r.isReady||(e=r.isReady=!0),r.src.length&&(r.parentNode.style.visibility="",i.resizeIframe(t),e)&&n.revealContent(t)},r.setAttribute("src",t.src))}},{key:"setAspectRatio",value:function(e){var t,i,n,r=e.$content,s=e.ratio;r&&(t=e._width,e=e._height,s||t&&e)&&(Object.assign(r.style,{width:t&&e?"100%":"",height:t&&e?"100%":"",maxWidth:"",maxHeight:""}),n=r.offsetWidth,i=r.offsetHeight,e=e||i,((t=t||n)>n||i<e)&&(t*=n=Math.min(n/t,i/e),e*=n),.01<Math.abs(t/e-s)&&(s<t/e?t=e*s:e=t/s),Object.assign(r.style,{width:"".concat(t,"px"),height:"".concat(e,"px")}))}},{key:"resizeIframe",value:function(e){var t=e.$iframe;if(t){var i=e._width||0,n=e._height||0,r=(i&&n&&(e.autoSize=!1),t.parentNode),s=r&&r.style;if(!1!==e.preload&&!1!==e.autoSize&&s)try{var a=window.getComputedStyle(r),o=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),l=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom),c=t.contentWindow.document,d=c.getElementsByTagName("html")[0],u=c.body;s.width="",u.style.overflow="hidden",i=i||d.scrollWidth+o,s.width="".concat(i,"px"),u.style.overflow="",s.flex="0 0 auto",s.height="".concat(u.scrollHeight,"px"),n=d.scrollHeight+l}catch(e){}(i||n)&&(r={flex:"0 1 auto"},i&&(r.width="".concat(i,"px")),n&&(r.height="".concat(n,"px")),Object.assign(s,r))}}},{key:"onRefresh",value:function(e,t){var i=this;t.slides.forEach(function(e){e.$el&&(e.$iframe&&i.resizeIframe(e),e.ratio)&&i.setAspectRatio(e)})}},{key:"setContent",value:function(e){if(e&&!e.isDom){switch(e.type){case"html":this.fancybox.setContent(e,e.src);break;case"html5video":this.fancybox.setContent(e,this.fancybox.option("Html.html5video.tpl").replace(/\{\{src\}\}/gi,e.src).replace("{{format}}",e.format||e.html5video&&e.html5video.format||"").replace("{{poster}}",e.poster||e.thumb||""));break;case"inline":case"clone":this.loadInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case"video":case"map":e.preload=!1;case"iframe":this.loadIframeContent(e)}e.ratio&&this.setAspectRatio(e)}}},{key:"onSelectSlide",value:function(e,t,i){"ready"===e.state&&this.playVideo(i)}},{key:"playVideo",value:function(i){if("html5video"===i.type&&i.video.autoplay)try{var e,t=i.$el.querySelector("video");t&&void 0!==(e=t.play())&&e.then(function(){}).catch(function(e){t.muted=!0,t.play()})}catch(i){}"video"===i.type&&i.$iframe&&i.$iframe.contentWindow&&!function e(){if("done"===i.state&&i.$iframe&&i.$iframe.contentWindow){var t;if(i.$iframe.isReady)return void((t=i.video&&i.video.autoplay?"youtube"==i.vendor?{event:"command",func:"playVideo"}:{method:"play",value:"true"}:t)&&i.$iframe.contentWindow.postMessage(JSON.stringify(t),"*"));"youtube"===i.vendor&&(t={event:"listening",id:i.$iframe.getAttribute("id")},i.$iframe.contentWindow.postMessage(JSON.stringify(t),"*"))}i.poller=setTimeout(e,250)}()}},{key:"onUnselectSlide",value:function(e,t,i){if("html5video"!==i.type){var n=!1;"vimeo"==i.vendor?n={method:"pause",value:"true"}:"youtube"===i.vendor&&(n={event:"command",func:"pauseVideo"}),n&&i.$iframe&&i.$iframe.contentWindow&&i.$iframe.contentWindow.postMessage(JSON.stringify(n),"*"),clearTimeout(i.poller)}else try{i.$el.querySelector("video").pause()}catch(e){}}},{key:"onRemoveSlide",value:function(e,t,i){i.xhr&&(i.xhr.abort(),i.xhr=null),i.$iframe&&(i.$iframe.onload=i.$iframe.onerror=null,i.$iframe.src="//about:blank",i.$iframe=null);var n=i.$content,i=("inline"===i.type&&n&&(n.classList.remove("fancybox__content"),"none"!==n.style.display)&&(n.style.display="none"),i.$closeButton&&(i.$closeButton.remove(),i.$closeButton=null),n&&n.$placeHolder);i&&(i.parentNode.insertBefore(n,i),i.remove(),n.$placeHolder=null)}},{key:"onMessage",value:function(e){try{var t=JSON.parse(e.data);if("https://player.vimeo.com"===e.origin){if("ready"===t.event){var i,n=w(document.getElementsByClassName("fancybox__iframe"));try{for(n.s();!(i=n.n()).done;){var r=i.value;r.contentWindow===e.source&&(r.isReady=1)}}catch(e){n.e(e)}finally{n.f()}}}else"https://www.youtube-nocookie.com"===e.origin&&"onReady"===t.event&&(document.getElementById(t.id).isReady=1)}catch(e){}}},{key:"attach",value:function(){this.fancybox.on(this.events),window.addEventListener("message",this.onMessage,!1)}},{key:"detach",value:function(){this.fancybox.off(this.events),window.removeEventListener("message",this.onMessage,!1)}}]),ae);function ae(e){o(this,ae),this.fancybox=e;for(var t=0,i=["onInit","onReady","onCreateSlide","onRemoveSlide","onSelectSlide","onUnselectSlide","onRefresh","onMessage"];t<i.length;t++){var n=i[t];this[n]=this[n].bind(this)}this.events={init:this.onInit,ready:this.onReady,"Carousel.createSlide":this.onCreateSlide,"Carousel.removeSlide":this.onRemoveSlide,"Carousel.selectSlide":this.onSelectSlide,"Carousel.unselectSlide":this.onUnselectSlide,"Carousel.refresh":this.onRefresh}}S.defaults=se;t(le,[{key:"onReady",value:function(){var t=this;this.fancybox.Carousel.slides.forEach(function(e){e.$el&&t.setContent(e)})}},{key:"onDone",value:function(e,t){this.handleCursor(t)}},{key:"onClosing",value:function(e){clearTimeout(this.clickTimer),this.clickTimer=null,e.Carousel.slides.forEach(function(e){e.$image&&(e.state="destroy"),e.Panzoom&&e.Panzoom.detachEvents()}),"closing"===this.fancybox.state&&this.canZoom(e.getSlide())&&this.zoomOut()}},{key:"onCreateSlide",value:function(e,t,i){"ready"===this.fancybox.state&&this.setContent(i)}},{key:"onRemoveSlide",value:function(e,t,i){i.$image&&(i.$el.classList.remove(e.option("Image.canZoomInClass")),i.$image.remove(),i.$image=null),i.Panzoom&&(i.Panzoom.destroy(),i.Panzoom=null),i.$el&&i.$el.dataset&&delete i.$el.dataset.imageFit}},{key:"setContent",value:function(t){var e,i,n,r,s=this;t.isDom||t.html||t.type&&"image"!==t.type||t.$image||(t.type="image",t.state="loading",(e=document.createElement("div")).style.visibility="hidden",(i=document.createElement("img")).addEventListener("load",function(e){e.stopImmediatePropagation(),s.onImageStatusChange(t)}),i.addEventListener("error",function(){s.onImageStatusChange(t)}),i.src=t.src,i.alt="",i.draggable=!1,i.classList.add("fancybox__image"),t.srcset&&i.setAttribute("srcset",t.srcset),t.sizes&&i.setAttribute("sizes",t.sizes),t.$image=i,(n=this.fancybox.option("Image.wrap"))?((r=document.createElement("div")).classList.add("string"==typeof n?n:"fancybox__image-wrap"),r.appendChild(i),e.appendChild(r),t.$wrap=r):e.appendChild(i),t.$el.dataset.imageFit=this.fancybox.option("Image.fit"),this.fancybox.setContent(t,e),i.complete||i.error?this.onImageStatusChange(t):this.fancybox.showLoading(t))}},{key:"onImageStatusChange",value:function(t){var i=this,e=t.$image;e&&"loading"===t.state&&(e.complete&&e.naturalWidth&&e.naturalHeight?(this.fancybox.hideLoading(t),"contain"===this.fancybox.option("Image.fit")&&this.initSlidePanzoom(t),t.$el.addEventListener("wheel",function(e){return i.onWheel(t,e)},{passive:!1}),t.$content.addEventListener("click",function(e){return i.onClick(t,e)},{passive:!1}),this.revealContent(t)):this.fancybox.setError(t,"{{IMAGE_ERROR}}"))}},{key:"initSlidePanzoom",value:function(e){var t=this;e.Panzoom||(e.Panzoom=new v(e.$el,f(!0,this.fancybox.option("Image.Panzoom",{}),{viewport:e.$wrap,content:e.$image,width:e._width,height:e._height,wrapInner:!1,textSelection:!0,touch:this.fancybox.option("Image.touch"),panOnlyZoomed:!0,click:!1,wheel:!1})),e.Panzoom.on("startAnimation",function(){t.fancybox.trigger("Image.startAnimation",e)}),e.Panzoom.on("endAnimation",function(){"zoomIn"===e.state&&t.fancybox.done(e),t.handleCursor(e),t.fancybox.trigger("Image.endAnimation",e)}),e.Panzoom.on("afterUpdate",function(){t.handleCursor(e),t.fancybox.trigger("Image.afterUpdate",e)}))}},{key:"revealContent",value:function(e){null===this.fancybox.Carousel.prevPage&&e.index===this.fancybox.options.startIndex&&this.canZoom(e)?this.zoomIn():this.fancybox.revealContent(e)}},{key:"getZoomInfo",value:function(e){var t=e.$thumb.getBoundingClientRect(),i=t.width,n=t.height,e=e.$content.getBoundingClientRect(),r=e.width,s=e.height,a=e.top-t.top,e=e.left-t.left,t=this.fancybox.option("Image.zoomOpacity");return{top:a,left:e,scale:r&&i?i/r:1,opacity:t="auto"===t?.1<Math.abs(i/n-r/s):t}}},{key:"canZoom",value:function(e){var t=this.fancybox,i=t.$container;if(window.visualViewport&&1!==window.visualViewport.scale)return!1;if(e.Panzoom&&!e.Panzoom.content.width)return!1;if(!t.option("Image.zoom")||"contain"!==t.option("Image.fit"))return!1;t=e.$thumb;if(!t||"loading"===e.state)return!1;i.classList.add("fancybox__no-click");var n,r,e=t.getBoundingClientRect();return r=this.fancybox.option("Image.ignoreCoveredThumbnail")?(r=document.elementFromPoint(e.left+1,e.top+1)===t,n=document.elementFromPoint(e.right-1,e.bottom-1)===t,r&&n):document.elementFromPoint(e.left+.5*e.width,e.top+.5*e.height)===t,i.classList.remove("fancybox__no-click"),r}},{key:"zoomIn",value:function(){var e=this.fancybox,t=e.getSlide(),i=t.Panzoom,n=this.getZoomInfo(t),r=n.top,s=n.left,a=n.scale,n=n.opacity;e.trigger("reveal",t),i.panTo({x:-1*s,y:-1*r,scale:a,friction:0,ignoreBounds:!0}),t.$content.style.visibility="",t.state="zoomIn",!0===n&&i.on("afterTransform",function(e){"zoomIn"!==t.state&&"zoomOut"!==t.state||(e.$content.style.opacity=Math.min(1,1-(1-e.content.scale)/(1-a)))}),i.panTo({x:0,y:0,scale:1,friction:this.fancybox.option("Image.zoomFriction")})}},{key:"zoomOut",value:function(){var s,e,a=this,t=this.fancybox,o=t.getSlide(),l=o.Panzoom;l&&(o.state="zoomOut",t.state="customClosing",o.$caption&&(o.$caption.style.visibility="hidden"),s=this.fancybox.option("Image.zoomFriction"),e=function(e){var t=a.getZoomInfo(o),i=t.top,n=t.left,r=t.scale,t=t.opacity;e||t||(s*=.82),l.panTo({x:-1*n,y:-1*i,scale:r,friction:s,ignoreBounds:!0}),s*=.98},window.addEventListener("scroll",e),l.once("endAnimation",function(){window.removeEventListener("scroll",e),t.destroy()}),e())}},{key:"handleCursor",value:function(e){var t,i,n,r,s;"image"===e.type&&e.$el&&(t=e.Panzoom,i=this.fancybox.option("Image.click",!1,e),n=this.fancybox.option("Image.touch"),e=e.$el.classList,r=this.fancybox.option("Image.canZoomInClass"),s=this.fancybox.option("Image.canZoomOutClass"),e.remove(s),e.remove(r),t&&"toggleZoom"===i?t&&1===t.content.scale&&.01<t.option("maxScale")-t.content.scale?e.add(r):1<t.content.scale&&!n&&e.add(s):"close"===i&&e.add(s))}},{key:"onWheel",value:function(e,t){if("ready"===this.fancybox.state&&!1!==this.fancybox.trigger("Image.wheel",t))switch(this.fancybox.option("Image.wheel")){case"zoom":"done"===e.state&&e.Panzoom&&e.Panzoom.zoomWithWheel(t);break;case"close":this.fancybox.close();break;case"slide":this.fancybox[t.deltaY<0?"prev":"next"]()}}},{key:"onClick",value:function(t,i){var n=this;if("ready"===this.fancybox.state){var e=t.Panzoom;if(!e||!e.dragPosition.midPoint&&0===e.dragOffset.x&&0===e.dragOffset.y&&1===e.dragOffset.scale){if(this.fancybox.Carousel.Panzoom.lockAxis)return!1;var r=function(e){switch(e){case"toggleZoom":i.stopPropagation(),t.Panzoom&&t.Panzoom.zoomWithClick(i);break;case"close":n.fancybox.close();break;case"next":i.stopPropagation(),n.fancybox.next()}},s=this.fancybox.option("Image.click"),e=this.fancybox.option("Image.doubleClick");e?this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null,r(e)):this.clickTimer=setTimeout(function(){n.clickTimer=null,r(s)},300):r(s)}}}},{key:"onPageChange",value:function(e,t){var i=e.getSlide();t.slides.forEach(function(e){e.Panzoom&&"done"===e.state&&e.index!==i.index&&e.Panzoom.panTo({x:0,y:0,scale:1,friction:.8})})}},{key:"attach",value:function(){this.fancybox.on(this.events)}},{key:"detach",value:function(){this.fancybox.off(this.events)}}]);var oe=le;function le(e){o(this,le),this.fancybox=e;for(var t=0,i=["onReady","onClosing","onDone","onPageChange","onCreateSlide","onRemoveSlide","onImageStatusChange"];t<i.length;t++){var n=i[t];this[n]=this[n].bind(this)}this.events={ready:this.onReady,closing:this.onClosing,done:this.onDone,"Carousel.change":this.onPageChange,"Carousel.createSlide":this.onCreateSlide,"Carousel.removeSlide":this.onRemoveSlide}}oe.defaults={canZoomInClass:"can-zoom_in",canZoomOutClass:"can-zoom_out",zoom:!0,zoomOpacity:"auto",zoomFriction:.82,ignoreCoveredThumbnail:!1,touch:!0,click:"toggleZoom",doubleClick:null,wheel:"zoom",fit:"contain",wrap:!1,Panzoom:{ratio:1}};t(I,[{key:"onChange",value:function(e){var t,i=this,n=e.Carousel,r=(this.timer&&clearTimeout(this.timer),null===n.prevPage),s=e.getSlide(),a=new URL(document.URL).hash,o=!1;s.slug?o="#"+s.slug:(t=s.$trigger&&s.$trigger.dataset,(e=e.option("slug")||t&&t.fancybox)&&e.length&&"true"!==e&&(o="#"+e+(1<n.slides.length?"-"+(s.index+1):""))),r&&(this.origHash=a!==o?a:""),o&&a!==o&&(this.timer=setTimeout(function(){try{window.history[r?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+o),r&&(i.hasCreatedHistory=!0)}catch(e){}},300))}},{key:"onClosing",value:function(){if(this.timer&&clearTimeout(this.timer),!0!==this.hasSilentClose)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(this.origHash||""))}catch(e){}}},{key:"attach",value:function(e){e.on(this.events)}},{key:"detach",value:function(e){e.off(this.events)}}],[{key:"startFromUrl",value:function(){var e,t,i,n=I.Fancybox;n&&!n.getInstance()&&!1!==n.defaults.Hash&&(i=(t=I.getParsedURL()).hash,e=t.slug,t=t.index,e)&&((i=document.querySelector('[data-slug="'.concat(i,'"]')))&&i.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),n.getInstance()||(n=document.querySelectorAll('[data-fancybox="'.concat(e,'"]'))).length&&(null===t&&1===n.length?i=n[0]:t&&(i=n[t-1]),i)&&i.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))}},{key:"onHashChange",value:function(){var e=I.getParsedURL(),t=e.slug,e=e.index,i=I.Fancybox,i=i&&i.getInstance();if(i&&i.plugins.Hash){if(t){var n=i.Carousel;if(t===i.option("slug"))return n.slideTo(e-1);var r,s=w(n.slides);try{for(s.s();!(r=s.n()).done;){var a=r.value;if(a.slug&&a.slug===t)return n.slideTo(a.index)}}catch(e){s.e(e)}finally{s.f()}var o=i.getSlide(),o=o.$trigger&&o.$trigger.dataset;if(o&&o.fancybox===t)return n.slideTo(e-1)}i.plugins.Hash.hasSilentClose=!0,i.close()}I.startFromUrl()}},{key:"create",value:function(e){function t(){window.addEventListener("hashchange",I.onHashChange,!1),I.startFromUrl()}I.Fancybox=e,P&&window.requestAnimationFrame(function(){/complete|interactive|loaded/.test(document.readyState)?t():document.addEventListener("DOMContentLoaded",t)})}},{key:"destroy",value:function(){window.removeEventListener("hashchange",I.onHashChange,!1)}},{key:"getParsedURL",value:function(){var e=window.location.hash.substr(1),t=e.split("-"),i=1<t.length&&/^\+?\d+$/.test(t[t.length-1])&&parseInt(t.pop(-1),10)||null;return{hash:e,slug:t.join("-"),index:i}}}]);var ce=I,L={pageXOffset:0,pageYOffset:0,element:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement},activate:function(e){L.pageXOffset=window.pageXOffset,L.pageYOffset=window.pageYOffset,e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},deactivate:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},de=(t(fe,[{key:"isActive",value:function(){return this.active}},{key:"setTimer",value:function(){var e,t,i=this;this.active&&!this.timer&&(e=this.fancybox.option("slideshow.delay",3e3),this.timer=setTimeout(function(){i.timer=null,i.fancybox.option("infinite")||i.fancybox.getSlide().index!==i.fancybox.Carousel.slides.length-1?i.fancybox.next():i.fancybox.jumpTo(0,{friction:0})},e),(t=this.$progress)||((t=document.createElement("div")).classList.add("fancybox__progress"),this.fancybox.$carousel.parentNode.insertBefore(t,this.fancybox.$carousel),(this.$progress=t).offsetHeight),t.style.transitionDuration="".concat(e,"ms"),t.style.transform="scaleX(1)")}},{key:"clearTimer",value:function(){clearTimeout(this.timer),this.timer=null,this.$progress&&(this.$progress.style.transitionDuration="",this.$progress.style.transform="",this.$progress.offsetHeight)}},{key:"activate",value:function(){this.active||(this.active=!0,this.fancybox.$container.classList.add("has-slideshow"),"done"===this.fancybox.getSlide().state&&this.setTimer(),document.addEventListener("visibilitychange",this.handleVisibilityChange,!1))}},{key:"handleVisibilityChange",value:function(){this.deactivate()}},{key:"deactivate",value:function(){this.active=!1,this.clearTimer(),this.fancybox.$container.classList.remove("has-slideshow"),document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1)}},{key:"toggle",value:function(){this.active?this.deactivate():1<this.fancybox.Carousel.slides.length&&this.activate()}}]),fe),ue={display:["counter","zoom","slideshow","fullscreen","thumbs","close"],autoEnable:!0,items:{counter:{position:"left",type:"div",class:"fancybox__counter",html:'<span data-fancybox-index=""></span>&nbsp;/&nbsp;<span data-fancybox-count=""></span>',attr:{tabindex:-1}},prev:{type:"button",class:"fancybox__button--prev",label:"PREV",html:'<svg viewBox="0 0 24 24"><path d="M15 4l-8 8 8 8"/></svg>',attr:{"data-fancybox-prev":""}},next:{type:"button",class:"fancybox__button--next",label:"NEXT",html:'<svg viewBox="0 0 24 24"><path d="M8 4l8 8-8 8"/></svg>',attr:{"data-fancybox-next":""}},fullscreen:{type:"button",class:"fancybox__button--fullscreen",label:"TOGGLE_FULLSCREEN",html:'<svg viewBox="0 0 24 24">\n                <g><path d="M3 8 V3h5"></path><path d="M21 8V3h-5"></path><path d="M8 21H3v-5"></path><path d="M16 21h5v-5"></path></g>\n                <g><path d="M7 2v5H2M17 2v5h5M2 17h5v5M22 17h-5v5"/></g>\n            </svg>',click:function(e){e.preventDefault(),L.element()?L.deactivate():L.activate(this.fancybox.$container)}},slideshow:{type:"button",class:"fancybox__button--slideshow",label:"TOGGLE_SLIDESHOW",html:'<svg viewBox="0 0 24 24">\n                <g><path d="M6 4v16"/><path d="M20 12L6 20"/><path d="M20 12L6 4"/></g>\n                <g><path d="M7 4v15M17 4v15"/></g>\n            </svg>',click:function(e){e.preventDefault(),this.Slideshow.toggle()}},zoom:{type:"button",class:"fancybox__button--zoom",label:"TOGGLE_ZOOM",html:'<svg viewBox="0 0 24 24"><circle cx="10" cy="10" r="7"></circle><path d="M16 16 L21 21"></svg>',click:function(e){e.preventDefault();e=this.fancybox.getSlide().Panzoom;e&&e.toggleZoom()}},download:{type:"link",label:"DOWNLOAD",class:"fancybox__button--download",html:'<svg viewBox="0 0 24 24"><path d="M12 15V3m0 12l-4-4m4 4l4-4M2 17l.62 2.48A2 2 0 004.56 21h14.88a2 2 0 001.94-1.51L22 17"/></svg>',click:function(e){e.stopPropagation()}},thumbs:{type:"button",label:"TOGGLE_THUMBS",class:"fancybox__button--thumbs",html:'<svg viewBox="0 0 24 24"><circle cx="4" cy="4" r="1" /><circle cx="12" cy="4" r="1" transform="rotate(90 12 4)"/><circle cx="20" cy="4" r="1" transform="rotate(90 20 4)"/><circle cx="4" cy="12" r="1" transform="rotate(90 4 12)"/><circle cx="12" cy="12" r="1" transform="rotate(90 12 12)"/><circle cx="20" cy="12" r="1" transform="rotate(90 20 12)"/><circle cx="4" cy="20" r="1" transform="rotate(90 4 20)"/><circle cx="12" cy="20" r="1" transform="rotate(90 12 20)"/><circle cx="20" cy="20" r="1" transform="rotate(90 20 20)"/></svg>',click:function(e){e.stopPropagation();e=this.fancybox.plugins.Thumbs;e&&e.toggle()}},close:{type:"button",label:"CLOSE",class:"fancybox__button--close",html:'<svg viewBox="0 0 24 24"><path d="M20 20L4 4m16 0L4 20"></path></svg>',attr:{"data-fancybox-close":"",tabindex:0}}}},he=(t(pe,[{key:"onInit",value:function(){if(this.fancybox.option("Toolbar.autoEnable")){var e,t=!1,i=w(this.fancybox.items);try{for(i.s();!(e=i.n()).done;)if("image"===e.value.type){t=!0;break}}catch(e){i.e(e)}finally{i.f()}if(!t)return void(this.state="disabled")}var n,r=w(this.fancybox.option("Toolbar.display"));try{for(r.s();!(n=r.n()).done;){var s=n.value;if("close"===(m(s)?s.id:s)){this.fancybox.options.closeButton=!1;break}}}catch(e){r.e(e)}finally{r.f()}}},{key:"onPrepare",value:function(){var e=this.fancybox;if("init"===this.state&&(this.build(),this.update(),this.Slideshow=new de(e),!e.Carousel.prevPage)&&(e.option("slideshow.autoStart")&&this.Slideshow.activate(),e.option("fullscreen.autoStart"))&&!L.element())try{L.activate(e.$container)}catch(e){}}},{key:"onFsChange",value:function(){window.scrollTo(L.pageXOffset,L.pageYOffset)}},{key:"onSettle",value:function(){var e=this.fancybox,t=this.Slideshow;t&&t.isActive()&&(e.getSlide().index!==e.Carousel.slides.length-1||e.option("infinite")?"done"===e.getSlide().state&&t.setTimer():t.deactivate())}},{key:"onChange",value:function(){this.update(),this.Slideshow&&this.Slideshow.isActive()&&this.Slideshow.clearTimer()}},{key:"onDone",value:function(e,t){var i=this.Slideshow;t.index===e.getSlide().index&&(this.update(),i)&&i.isActive()&&(e.option("infinite")||t.index!==e.Carousel.slides.length-1?i.setTimer():i.deactivate())}},{key:"onRefresh",value:function(e){e&&e.index!==this.fancybox.getSlide().index||(this.update(),!this.Slideshow)||!this.Slideshow.isActive()||e&&"done"!==e.state||this.Slideshow.deactivate()}},{key:"onKeydown",value:function(e,t,i){" "===t&&this.Slideshow&&(this.Slideshow.toggle(),i.preventDefault())}},{key:"onClosing",value:function(){this.Slideshow&&this.Slideshow.deactivate(),document.removeEventListener("fullscreenchange",this.onFsChange)}},{key:"createElement",value:function(e){var t,i;for(i in"div"===e.type?t=document.createElement("div"):(t=document.createElement("link"===e.type?"a":"button")).classList.add("carousel__button"),t.innerHTML=e.html,t.setAttribute("tabindex",e.tabindex||0),e.class&&(n=t.classList).add.apply(n,_(e.class.split(" "))),e.attr)t.setAttribute(i,e.attr[i]);e.label&&t.setAttribute("title",this.fancybox.localize("{{".concat(e.label,"}}"))),e.click&&t.addEventListener("click",e.click.bind(this)),"prev"===e.id&&t.setAttribute("data-fancybox-prev",""),"next"===e.id&&t.setAttribute("data-fancybox-next","");var n=t.querySelector("svg");return n&&(n.setAttribute("role","img"),n.setAttribute("tabindex","-1"),n.setAttribute("xmlns","http://www.w3.org/2000/svg")),t}},{key:"build",value:function(){var r=this;this.cleanup();var s,a=this.fancybox.option("Toolbar.items"),o=[{position:"left",items:[]},{position:"center",items:[]},{position:"right",items:[]}],l=this.fancybox.plugins.Thumbs,e=w(this.fancybox.option("Toolbar.display"));try{for(e.s();!(s=e.n()).done;)!function(){var t,e=s.value,i=void 0,n=void 0,n=m(e)?(i=e.id,f({},a[i],e)):a[i=e];if(["counter","next","prev","slideshow"].includes(i)&&r.fancybox.items.length<2)return;if("fullscreen"===i){if(!document.fullscreenEnabled||window.fullScreen)return;document.addEventListener("fullscreenchange",r.onFsChange)}("thumbs"!==i||l&&"disabled"!==l.state)&&n&&(t=n.position||"right",(e=o.find(function(e){return e.position===t}))&&e.items.push(n))}()}catch(r){e.e(r)}finally{e.f()}var t=document.createElement("div");t.classList.add("fancybox__toolbar");for(var i=0,n=o;i<n.length;i++){var c=n[i];if(c.items.length){var d=document.createElement("div");d.classList.add("fancybox__toolbar__items"),d.classList.add("fancybox__toolbar__items--".concat(c.position));var u,h=w(c.items);try{for(h.s();!(u=h.n()).done;){var p=u.value;d.appendChild(this.createElement(p))}}catch(r){h.e(r)}finally{h.f()}t.appendChild(d)}}this.fancybox.$carousel.parentNode.insertBefore(t,this.fancybox.$carousel),this.$container=t}},{key:"update",value:function(){var e,t=this.fancybox.getSlide(),i=t.index,n=this.fancybox.items.length,r=t.downloadSrc||("image"!==t.type||t.error?null:t.src),s=w(this.fancybox.$container.querySelectorAll("a.fancybox__button--download"));try{for(s.s();!(e=s.n()).done;){var a=e.value;r?(a.removeAttribute("disabled"),a.removeAttribute("tabindex"),a.setAttribute("href",r),a.setAttribute("download",r),a.setAttribute("target","_blank")):(a.setAttribute("disabled",""),a.setAttribute("tabindex",-1),a.removeAttribute("href"),a.removeAttribute("download"))}}catch(e){s.e(e)}finally{s.f()}var o,l=t.Panzoom,c=l&&l.option("maxScale")>l.option("baseScale"),d=w(this.fancybox.$container.querySelectorAll(".fancybox__button--zoom"));try{for(d.s();!(o=d.n()).done;){var u=o.value;c?u.removeAttribute("disabled"):u.setAttribute("disabled","")}}catch(e){d.e(e)}finally{d.f()}var h,p=w(this.fancybox.$container.querySelectorAll("[data-fancybox-index]"));try{for(p.s();!(h=p.n()).done;)h.value.innerHTML=t.index+1}catch(e){p.e(e)}finally{p.f()}var f,m=w(this.fancybox.$container.querySelectorAll("[data-fancybox-count]"));try{for(m.s();!(f=m.n()).done;)f.value.innerHTML=n}catch(e){m.e(e)}finally{m.f()}if(!this.fancybox.option("infinite")){var g,v=w(this.fancybox.$container.querySelectorAll("[data-fancybox-prev]"));try{for(v.s();!(g=v.n()).done;){var y=g.value;0===i?y.setAttribute("disabled",""):y.removeAttribute("disabled")}}catch(e){v.e(e)}finally{v.f()}var _,b=w(this.fancybox.$container.querySelectorAll("[data-fancybox-next]"));try{for(b.s();!(_=b.n()).done;){var T=_.value;i===n-1?T.setAttribute("disabled",""):T.removeAttribute("disabled")}}catch(e){b.e(e)}finally{b.f()}}}},{key:"cleanup",value:function(){this.Slideshow&&this.Slideshow.isActive()&&this.Slideshow.clearTimer(),this.$container&&this.$container.remove(),this.$container=null}},{key:"attach",value:function(){this.fancybox.on(this.events)}},{key:"detach",value:function(){this.fancybox.off(this.events),this.cleanup()}}]),pe);function pe(e){var i=this;o(this,pe),this.fancybox=e,this.$container=null,this.state="init";for(var t=0,n=["onInit","onPrepare","onDone","onKeydown","onClosing","onChange","onSettle","onRefresh"];t<n.length;t++){var r=n[t];this[r]=this[r].bind(this)}this.events={init:this.onInit,prepare:this.onPrepare,done:this.onDone,keydown:this.onKeydown,closing:this.onClosing,"Carousel.change":this.onChange,"Carousel.settle":this.onSettle,"Carousel.Panzoom.touchStart":function(){return i.onRefresh()},"Image.startAnimation":function(e,t){return i.onRefresh(t)},"Image.afterUpdate":function(e,t){return i.onRefresh(t)}}}function fe(e){o(this,fe),this.fancybox=e,this.active=!1,this.handleVisibilityChange=this.handleVisibilityChange.bind(this)}function I(e){o(this,I),this.fancybox=e;for(var t=0,i=["onChange","onClosing"];t<i.length;t++){var n=i[t];this[n]=this[n].bind(this)}this.events={initCarousel:this.onChange,"Carousel.change":this.onChange,closing:this.onClosing},this.hasCreatedHistory=!1,this.origHash="",this.timer=null}he.defaults=ue;var me,ue={ScrollLock:Y,Thumbs:k,Html:S,Toolbar:he,Image:oe,Hash:ce},ge={startIndex:0,preload:1,infinite:!0,showClass:"fancybox-zoomInUp",hideClass:"fancybox-fadeOut",animated:!0,hideScrollbar:!0,parentEl:null,mainClass:null,autoFocus:!0,trapFocus:!0,placeFocusBack:!0,click:"close",closeButton:"inside",dragToClose:!0,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"next",ArrowDown:"prev",ArrowRight:"next",ArrowLeft:"prev"},template:{closeButton:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="25 25 50 50" tabindex="-1"><circle cx="50" cy="50" r="20"/></svg>',main:null},l10n:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}},O=new Map,ve=0,M=(i(D,g),me=n(D),t(D,[{key:"option",value:function(e){for(var t=this.getSlide(),t=t?t[e]:void 0,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return void 0!==t?"function"==typeof t?t.call.apply(t,[this,this].concat(n)):t:(t=U(s(D.prototype),"option",this)).call.apply(t,[this,e].concat(n))}},{key:"bindHandlers",value:function(){for(var e=0,t=["onMousedown","onKeydown","onClick","onFocus","onCreateSlide","onSettle","onTouchMove","onTouchEnd","onTransform"];e<t.length;e++){var i=t[e];this[i]=this[i].bind(this)}}},{key:"attachEvents",value:function(){document.addEventListener("mousedown",this.onMousedown),document.addEventListener("keydown",this.onKeydown,!0),this.option("trapFocus")&&document.addEventListener("focus",this.onFocus,!0),this.$container.addEventListener("click",this.onClick)}},{key:"detachEvents",value:function(){document.removeEventListener("mousedown",this.onMousedown),document.removeEventListener("keydown",this.onKeydown,!0),document.removeEventListener("focus",this.onFocus,!0),this.$container.removeEventListener("click",this.onClick)}},{key:"initLayout",value:function(){var i=this,e=(this.$root=this.option("parentEl")||document.body,this.option("template.main"));e&&(this.$root.insertAdjacentHTML("beforeend",this.localize(e)),this.$container=this.$root.querySelector(".fancybox__container")),this.$container||(this.$container=document.createElement("div"),this.$root.appendChild(this.$container)),this.$container.onscroll=function(){return i.$container.scrollLeft=0,!1},Object.entries({class:"fancybox__container",role:"dialog",tabIndex:"-1","aria-modal":"true","aria-hidden":"true","aria-label":this.localize("{{MODAL}}")}).forEach(function(e){var t;return(t=i.$container).setAttribute.apply(t,_(e))}),this.option("animated")&&this.$container.classList.add("is-animated"),this.$backdrop=this.$container.querySelector(".fancybox__backdrop"),this.$backdrop||(this.$backdrop=document.createElement("div"),this.$backdrop.classList.add("fancybox__backdrop"),this.$container.appendChild(this.$backdrop)),this.$carousel=this.$container.querySelector(".fancybox__carousel"),this.$carousel||(this.$carousel=document.createElement("div"),this.$carousel.classList.add("fancybox__carousel"),this.$container.appendChild(this.$carousel)),(this.$container.Fancybox=this).id=this.$container.getAttribute("id"),this.id||(this.id=this.options.id||++ve,this.$container.setAttribute("id","fancybox-"+this.id));var t,e=this.option("mainClass");return e&&(t=this.$container.classList).add.apply(t,_(e.split(" "))),document.documentElement.classList.add("with-fancybox"),this.trigger("initLayout"),this}},{key:"setItems",value:function(e){var t,i=[],n=w(e);try{for(n.s();!(t=n.n()).done;){var r,s,a=t.value,o=a.$trigger,l=(o&&(r=o.dataset||{},a.src=r.src||o.getAttribute("href")||a.src,a.type=r.type||a.type,!a.src)&&o instanceof HTMLImageElement&&(a.src=o.currentSrc||a.$trigger.src),a.$thumb),c=(l||!(l=(s=a.$trigger&&a.$trigger.origTarget)?s instanceof HTMLImageElement?s:s.querySelector("img:not([aria-hidden])"):l)&&a.$trigger&&(l=a.$trigger instanceof HTMLImageElement?a.$trigger:a.$trigger.querySelector("img:not([aria-hidden])")),a.$thumb=l||null,a.thumb);(c=!c&&l&&!(c=l.currentSrc||l.src)&&l.dataset?l.dataset.lazySrc||l.dataset.src:c)||"image"!==a.type||(c=a.src),a.thumb=c||null,a.caption=a.caption||"",i.push(a)}}catch(e){n.e(e)}finally{n.f()}this.items=i}},{key:"initCarousel",value:function(){var r=this;return this.Carousel=new E(this.$carousel,f(!0,{},{prefix:"",classNames:{viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"},textSelection:!0,preload:this.option("preload"),friction:.88,slides:this.items,initialPage:this.options.startIndex,slidesPerPage:1,infiniteX:this.option("infinite"),infiniteY:!0,l10n:this.option("l10n"),Dots:!1,Navigation:{classNames:{main:"fancybox__nav",button:"carousel__button",next:"is-next",prev:"is-prev"}},Panzoom:{textSelection:!0,panOnlyZoomed:function(){return r.Carousel&&r.Carousel.pages&&r.Carousel.pages.length<2&&!r.option("dragToClose")},lockAxis:function(){var e;if(r.Carousel)return e="x",r.option("dragToClose")&&(e+="y"),e}},on:{"*":function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return r.trigger.apply(r,["Carousel.".concat(e)].concat(i))},init:function(e){return r.Carousel=e},createSlide:this.onCreateSlide,settle:this.onSettle}},this.option("Carousel"))),this.option("dragToClose")&&this.Carousel.Panzoom.on({touchMove:this.onTouchMove,afterTransform:this.onTransform,touchEnd:this.onTouchEnd}),this.trigger("initCarousel"),this}},{key:"onCreateSlide",value:function(e,t){var i,n,r=t.caption||"";"string"==typeof(r="function"==typeof this.options.caption?this.options.caption.call(this,this,this.Carousel,t):r)&&r.length&&(i=document.createElement("div"),n="fancybox__caption_".concat(this.id,"_").concat(t.index),i.className="fancybox__caption",i.innerHTML=r,i.setAttribute("id",n),t.$caption=t.$el.appendChild(i),t.$el.classList.add("has-caption"),t.$el.setAttribute("aria-labelledby",n))}},{key:"onSettle",value:function(){this.option("autoFocus")&&this.focus()}},{key:"onFocus",value:function(e){this.isTopmost()&&this.focus(e)}},{key:"onClick",value:function(e){if(!e.defaultPrevented){var t=e.composedPath()[0];if(t.matches("[data-fancybox-close]"))e.preventDefault(),D.close(!1,e);else if(t.matches("[data-fancybox-next]"))e.preventDefault(),D.next();else if(t.matches("[data-fancybox-prev]"))e.preventDefault(),D.prev();else{var i=document.activeElement;if(i){if(i.closest("[contenteditable]"))return;t.matches(te)||i.blur()}if(!t.closest(".fancybox__content")&&!getSelection().toString().length&&!1!==this.trigger("click",e))switch(this.option("click")){case"close":this.close();break;case"next":this.next()}}}}},{key:"onTouchMove",value:function(){var e=this.getSlide().Panzoom;return!e||1===e.content.scale}},{key:"onTouchEnd",value:function(e){var t=e.dragOffset.y;150<=Math.abs(t)||35<=Math.abs(t)&&e.dragOffset.time<350?(this.option("hideClass")&&(this.getSlide().hideClass="fancybox-throwOut".concat(e.content.y<0?"Up":"Down")),this.close()):"y"===e.lockAxis&&e.panTo({y:0})}},{key:"onTransform",value:function(e){var t;this.$backdrop&&(t=(t=Math.abs(e.content.y))<1?"":Math.max(.33,Math.min(1,1-t/e.content.fitHeight*1.5)),this.$container.style.setProperty("--fancybox-ts",t?"0s":""),this.$container.style.setProperty("--fancybox-opacity",t))}},{key:"onMousedown",value:function(){"ready"===this.state&&document.body.classList.add("is-using-mouse")}},{key:"onKeydown",value:function(e){var t,i,n,r;this.isTopmost()&&(document.body.classList.remove("is-using-mouse"),t=e.key,!(i=this.option("keyboard"))||e.ctrlKey||e.altKey||e.shiftKey||(n=e.composedPath()[0],r=(r=document.activeElement&&document.activeElement.classList)&&r.contains("carousel__button"),("Escape"===t||r||!e.target.isContentEditable&&-1===["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(n.nodeName))&&!1!==this.trigger("keydown",t,e)&&"function"==typeof this[r=i[t]]&&this[r]()))}},{key:"getSlide",value:function(){var e,t=this.Carousel;return t&&(e=null===t.page?t.option("initialPage"):t.page,(t=t.pages||[]).length)&&t[e]?t[e].slides[0]:null}},{key:"focus",value:function(e){if(!(D.ignoreFocusChange||-1<["init","closing","customClosing","destroy"].indexOf(this.state))){var t=this.$container,i=this.getSlide(),n="done"===i.state?i.$el:null;if(!n||!n.contains(document.activeElement)){e&&e.preventDefault(),D.ignoreFocusChange=!0;for(var r,s=[],a=0,o=Array.from(t.querySelectorAll(te));a<o.length;a++){var l=o[a],c=l.offsetParent,d=n&&n.contains(l),u=!this.Carousel.$viewport.contains(l);c&&(d||u)?(s.push(l),void 0!==l.dataset.origTabindex&&(l.tabIndex=l.dataset.origTabindex,l.removeAttribute("data-orig-tabindex")),(l.hasAttribute("autoFocus")||!r&&d&&!l.classList.contains("carousel__button"))&&(r=l)):(l.dataset.origTabindex=void 0===l.dataset.origTabindex?l.getAttribute("tabindex"):l.dataset.origTabindex,l.tabIndex=-1)}e?-1<s.indexOf(e.target)?this.lastFocus=e.target:this.lastFocus===t?A(s[s.length-1]):A(t):this.option("autoFocus")&&r?A(r):s.indexOf(document.activeElement)<0&&A(t),this.lastFocus=document.activeElement,D.ignoreFocusChange=!1}}}},{key:"hideScrollbar",value:function(){var e,t,i;!P||(e=window.innerWidth-document.documentElement.getBoundingClientRect().width,t="fancybox-style-noscroll",i=document.getElementById(t))||0<e&&((i=document.createElement("style")).id=t,i.type="text/css",i.innerHTML=".compensate-for-scrollbar {padding-right: ".concat(e,"px;}"),document.getElementsByTagName("head")[0].appendChild(i),document.body.classList.add("compensate-for-scrollbar"))}},{key:"revealScrollbar",value:function(){document.body.classList.remove("compensate-for-scrollbar");var e=document.getElementById("fancybox-style-noscroll");e&&e.remove()}},{key:"clearContent",value:function(e){this.Carousel.trigger("removeSlide",e),e.$content&&(e.$content.remove(),e.$content=null),e.$closeButton&&(e.$closeButton.remove(),e.$closeButton=null),e._className&&e.$el.classList.remove(e._className)}},{key:"setContent",value:function(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=e.$el;if(t instanceof HTMLElement?-1<["img","iframe","video","audio"].indexOf(t.nodeName.toLowerCase())?(i=document.createElement("div")).appendChild(t):i=t:(t=document.createRange().createContextualFragment(t),(i=document.createElement("div")).appendChild(t)),(i=e.filter&&!e.error?i.querySelector(e.filter):i)instanceof Element)return e._className="has-".concat(n.suffix||e.type||"unknown"),r.classList.add(e._className),i.classList.add("fancybox__content"),"none"!==i.style.display&&"none"!==getComputedStyle(i).getPropertyValue("display")||(i.style.display=e.display||this.option("defaultDisplay")||"flex"),e.id&&i.setAttribute("id",e.id),e.$content=i,r.prepend(i),this.manageCloseButton(e),"loading"!==e.state&&this.revealContent(e),i;this.setError(e,"{{ELEMENT_NOT_FOUND}}")}},{key:"manageCloseButton",value:function(e){var t,i=this,n=void 0===e.closeButton?this.option("closeButton"):e.closeButton;!n||"top"===n&&this.$closeButton||((t=document.createElement("button")).classList.add("carousel__button","is-close"),t.setAttribute("title",this.options.l10n.CLOSE),t.innerHTML=this.option("template.closeButton"),t.addEventListener("click",function(e){return i.close(e)}),"inside"===n?(e.$closeButton&&e.$closeButton.remove(),e.$closeButton=e.$content.appendChild(t)):this.$closeButton=this.$container.insertBefore(t,this.$container.firstChild))}},{key:"revealContent",value:function(e){var t=this,i=(this.trigger("reveal",e),e.$content.style.visibility="",!1);(i=e.error||"loading"===e.state||null!==this.Carousel.prevPage||e.index!==this.options.startIndex?i:void 0===e.showClass?this.option("showClass"):e.showClass)?(e.state="animating",this.animateCSS(e.$content,i,function(){t.done(e)})):this.done(e)}},{key:"animateCSS",value:function(i,n,r){i&&i.dispatchEvent(new CustomEvent("animationend",{bubbles:!0,cancelable:!0})),i&&n?(i.addEventListener("animationend",function e(t){t.currentTarget===this&&(i.removeEventListener("animationend",e),r&&r(),i.classList.remove(n))}),i.classList.add(n)):"function"==typeof r&&r()}},{key:"done",value:function(e){e.state="done",this.trigger("done",e);var t=this.getSlide();t&&e.index===t.index&&this.option("autoFocus")&&this.focus()}},{key:"setError",value:function(e,t){e.error=t,this.hideLoading(e),this.clearContent(e);var i=document.createElement("div");i.classList.add("fancybox-error"),i.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,i,{suffix:"error"})}},{key:"showLoading",value:function(e){var t=this,i=(e.state="loading",e.$el.classList.add("is-loading"),e.$el.querySelector(".fancybox__spinner"));i||((i=document.createElement("div")).classList.add("fancybox__spinner"),i.innerHTML=this.option("template.spinner"),i.addEventListener("click",function(){t.Carousel.Panzoom.velocity||t.close()}),e.$el.prepend(i))}},{key:"hideLoading",value:function(e){var t=e.$el&&e.$el.querySelector(".fancybox__spinner");t&&(t.remove(),e.$el.classList.remove("is-loading")),"loading"===e.state&&(this.trigger("load",e),e.state="ready")}},{key:"next",value:function(){var e=this.Carousel;e&&1<e.pages.length&&e.slideNext()}},{key:"prev",value:function(){var e=this.Carousel;e&&1<e.pages.length&&e.slidePrev()}},{key:"jumpTo",value:function(){var e;this.Carousel&&(e=this.Carousel).slideTo.apply(e,arguments)}},{key:"isClosing",value:function(){return["closing","customClosing","destroy"].includes(this.state)}},{key:"isTopmost",value:function(){return D.getInstance().id==this.id}},{key:"close",value:function(e){var t,i=this;e&&e.preventDefault(),this.isClosing()||!1===this.trigger("shouldClose",e)||(this.state="closing",this.Carousel.Panzoom.destroy(),this.detachEvents(),this.trigger("closing",e),"destroy"===this.state)||(this.$container.setAttribute("aria-hidden","true"),this.$container.classList.add("is-closing"),t=this.getSlide(),this.Carousel.slides.forEach(function(e){e.$content&&e.index!==t.index&&i.Carousel.trigger("removeSlide",e)}),"closing"===this.state&&(e=void 0===t.hideClass?this.option("hideClass"):t.hideClass,this.animateCSS(t.$content,e,function(){i.destroy()},!0)))}},{key:"destroy",value:function(){var e;"destroy"!==this.state&&(this.state="destroy",this.trigger("destroy"),e=this.option("placeFocusBack")?this.option("triggerTarget",this.getSlide().$trigger):null,this.Carousel.destroy(),this.detachPlugins(),this.Carousel=null,this.options={},this.events={},this.$container.remove(),this.$container=this.$backdrop=this.$carousel=null,e&&A(e),O.delete(this.id),(e=D.getInstance())?e.focus():(document.documentElement.classList.remove("with-fancybox"),document.body.classList.remove("is-using-mouse"),this.revealScrollbar()))}}],[{key:"show",value:function(e){return new D(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})}},{key:"fromEvent",value:function(i){var n,r,s,a,e,t,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!i.defaultPrevented&&!(i.button&&0!==i.button||i.ctrlKey||i.metaKey||i.shiftKey))return s=i.composedPath()[0],(e=(a=s).matches("[data-fancybox-trigger]")||(a=a.closest("[data-fancybox-trigger]"))?(o.triggerTarget=a)&&a.dataset&&a.dataset.fancyboxTrigger:e)&&(e=document.querySelectorAll('[data-fancybox="'.concat(e,'"]')),t=parseInt(a.dataset.fancyboxIndex,10)||0,a=e.length?e[t]:a),Array.from(D.openers.keys()).reverse().some(function(e){r=a||s;var t=!1;try{r instanceof Element&&("string"==typeof e||e instanceof String)&&(t=r.matches(e)||(r=r.closest(e)))}catch(e){}return!!t&&(i.preventDefault(),n=e,!0)}),e=!1,n&&(o.event=i,(o.target=r).origTarget=s,e=D.fromOpener(n,o),t=D.getInstance())&&"ready"===t.state&&i.detail&&document.body.classList.add("is-using-mouse"),e}},{key:"fromOpener",value:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=[],r=i.startIndex||0,s=i.target||null,a=void 0!==(i=f({},i,D.openers.get(e))).groupAll&&i.groupAll,o=void 0===i.groupAttr?"data-fancybox":i.groupAttr,l=o&&s?s.getAttribute("".concat(o)):"";return s&&!l&&!a||(t=i.root||(s?s.getRootNode():document.body),n=[].slice.call(t.querySelectorAll(e))),!(!(n=s&&!a?l?n.filter(function(e){return e.getAttribute("".concat(o))===l}):[s]:n).length||(t=D.getInstance())&&-1<n.indexOf(t.options.$trigger))&&(r=s?n.indexOf(s):r,new D(n=n.map(function(e){for(var t=["false","0","no","null","undefined"],i=["true","1","yes"],n=Object.assign({},e.dataset),r={},s=0,a=Object.entries(n);s<a.length;s++){var o=c(a[s],2),l=o[0],o=o[1];if("fancybox"!==l)if("width"===l||"height"===l)r["_".concat(l)]=o;else if("string"==typeof o||o instanceof String)if(-1<t.indexOf(o))r[l]=!1;else if(-1<i.indexOf(r[l]))r[l]=!0;else try{r[l]=JSON.parse(o)}catch(e){r[l]=o}else r[l]=o}return e instanceof Element&&(r.$trigger=e),r}),f({},i,{startIndex:r,$trigger:s})))}},{key:"bind",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};function i(){document.body.addEventListener("click",D.fromEvent,!1)}P&&(D.openers.size||(/complete|interactive|loaded/.test(document.readyState)?i():document.addEventListener("DOMContentLoaded",i)),D.openers.set(e,t))}},{key:"unbind",value:function(e){D.openers.delete(e),D.openers.size||D.destroy()}},{key:"destroy",value:function(){for(var e;e=D.getInstance();)e.destroy();D.openers=new Map,document.body.removeEventListener("click",D.fromEvent,!1)}},{key:"getInstance",value:function(e){return e?O.get(e):Array.from(O.values()).reverse().find(function(e){return!e.isClosing()&&e})||null}},{key:"close",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length?arguments[1]:void 0;if(e){var i,n=w(O.values());try{for(n.s();!(i=n.n()).done;)i.value.close(t)}catch(e){n.e(e)}finally{n.f()}}else{var r=D.getInstance();r&&r.close(t)}}},{key:"next",value:function(){var e=D.getInstance();e&&e.next()}},{key:"prev",value:function(){var e=D.getInstance();e&&e.prev()}}]),D);function D(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return o(this,D),e=e.map(function(e){return e.width&&(e._width=e.width),e.height&&(e._height=e.height),e}),(t=me.call(this,f(!0,{},ge,t))).bindHandlers(),t.state="init",t.setItems(e),t.attachPlugins(D.Plugins),t.trigger("init"),!0===t.option("hideScrollbar")&&t.hideScrollbar(),t.initLayout(),t.initCarousel(),t.attachEvents(),O.set(t.id,a(t)),t.trigger("prepare"),t.state="ready",t.trigger("ready"),t.$container.setAttribute("aria-hidden","false"),t.option("trapFocus")&&t.focus(),t}M.version="4.0.31",M.defaults=ge,M.openers=new Map,M.Plugins=ue,M.bind("[data-fancybox]");for(var ye=0,_e=Object.entries(M.Plugins||{});ye<_e.length;ye++){var j=c(_e[ye],2),j=(j[0],j[1]);"function"==typeof j.create&&j.create(M)}e.Carousel=E,e.Fancybox=M,e.Panzoom=v}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).videojs=t()}(this,function(){"use strict";for(var j,N={},R=function(e,t){return N[e]=N[e]||[],t&&(N[e]=N[e].concat(t)),N[e]},B=function(e,t){return!((t=R(e).indexOf(t))<=-1||(N[e]=N[e].slice(),N[e].splice(t,1),0))},U={prefixed:!0},F=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],$=F[0],q=0;q<F.length;q++)if(F[q][1]in document){j=F[q];break}if(j){for(var z=0;z<j.length;z++)U[$[z]]=j[z];U.prefixed=j[0]!==$[0]}var W=[],d=function t(i){function n(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o("log",r,t)}var s,a,r="info",o=(s=i,function(e,t,i){var n,r=a.levels[t],t=new RegExp("^("+r+")$");"log"!==e&&i.unshift(e.toUpperCase()+":"),i.unshift(s+":"),W&&(W.push([].concat(i)),n=W.length-1e3,W.splice(0,0<n?n:0)),window.console&&(n=(n=window.console[e])||"debug"!==e?n:window.console.info||window.console.log)&&r&&t.test(e)&&n[Array.isArray(i)?"apply":"call"](window.console,i)});return(a=n).createLogger=function(e){return t(i+": "+e)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},n.level=function(e){if("string"==typeof e){if(!n.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');r=e}return r},(n.history=function(){return W?[].concat(W):[]}).filter=function(t){return(W||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})},n.history.clear=function(){W&&(W.length=0)},n.history.disable=function(){null!==W&&(W.length=0,W=null)},n.history.enable=function(){null===W&&(W=[])},n.error=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return o("error",r,t)},n.warn=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return o("warn",r,t)},n.debug=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return o("debug",r,t)},n}("VIDEOJS"),V=d.createLogger,e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function X(e,t){return e(t={exports:{}},t.exports),t.exports}function G(e){return J(e)?Object.keys(e):[]}var Y=X(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t.apply(this,arguments)}e.exports=t}),K=Object.prototype.toString;function Q(t,i){G(t).forEach(function(e){return i(t[e],e)})}function u(i){for(var e=arguments.length,t=new Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Object.assign?Y.apply(void 0,[i].concat(t)):(t.forEach(function(e){e&&Q(e,function(e,t){i[t]=e})}),i)}function J(e){return!!e&&"object"==typeof e}function Z(e){return J(e)&&"[object Object]"===K.call(e)&&e.constructor===Object}function ee(e,t){if(!e||!t)return"";if("function"!=typeof window.getComputedStyle)return"";var i;try{i=window.getComputedStyle(e)}catch(e){return""}return i?i.getPropertyValue(t)||i[t]:""}var t=window.navigator&&window.navigator.userAgent||"",i=(_=/AppleWebKit\/([\d.]+)/i.exec(t))?parseFloat(_.pop()):null,n=/iPod/i.test(t),r=(b=t.match(/OS (\d+)_/i))&&b[1]?b[1]:null,te=/Android/i.test(t),ie=(w=t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?(ce=w[1]&&parseFloat(w[1]),hi=w[2]&&parseFloat(w[2]),ce&&hi?parseFloat(w[1]+"."+w[2]):ce||null):null,ne=te&&ie<5&&i<537,re=/Firefox/i.test(t),se=/Edg/i.test(t),ae=!se&&(/Chrome/i.test(t)||/CriOS/i.test(t)),oe=(hi=t.match(/(Chrome|CriOS)\/(\d+)/))&&hi[2]?parseFloat(hi[2]):null,le=w=!(w=(w=/MSIE\s(\d+)\.\d/.exec(t))&&parseFloat(w[1]))&&/Trident\/7.0/i.test(t)&&/rv:11.0/.test(t)?11:w,ce=/Safari/i.test(t)&&!ae&&!te&&!se,de=/Windows/i.test(t),ue=Boolean(ve()&&("ontouchstart"in window||window.navigator.maxTouchPoints||window.DocumentTouch&&window.document instanceof window.DocumentTouch)),s=/iPad/i.test(t)||ce&&ue&&!/iPhone/i.test(t),he=/iPhone/i.test(t)&&!s,pe=he||s||n,fe=(ce||pe)&&!ae,t=Object.freeze({__proto__:null,IS_IPOD:n,IOS_VERSION:r,IS_ANDROID:te,ANDROID_VERSION:ie,IS_NATIVE_ANDROID:ne,IS_FIREFOX:re,IS_EDGE:se,IS_CHROME:ae,CHROME_VERSION:oe,IE_VERSION:le,IS_SAFARI:ce,IS_WINDOWS:de,TOUCH_ENABLED:ue,IS_IPAD:s,IS_IPHONE:he,IS_IOS:pe,IS_ANY_SAFARI:fe});function me(e){return"string"==typeof e&&Boolean(e.trim())}function ge(e){if(0<=e.indexOf(" "))throw new Error("class has illegal whitespace characters")}function ve(){return document===window.document}function ye(e){return J(e)&&1===e.nodeType}function _e(){try{return window.parent!==window.self}catch(e){return!0}}function be(i){return function(e,t){return me(e)?(t=ye(t=me(t)?document.querySelector(t):t)?t:document)[i]&&t[i](e):document[i](null)}}function h(e,i,t,n){void 0===e&&(e="div"),void 0===i&&(i={}),void 0===t&&(t={});var r=document.createElement(e);return Object.getOwnPropertyNames(i).forEach(function(e){var t=i[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(d.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+t+"."),r.setAttribute(e,t)):"textContent"===e?Te(r,t):r[e]===t&&"tabIndex"!==e||(r[e]=t)}),Object.getOwnPropertyNames(t).forEach(function(e){r.setAttribute(e,t[e])}),n&&Fe(r,n),r}function Te(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function we(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function xe(e,t){return ge(t),e.classList?e.classList.contains(t):new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}function Se(e,t){return e.classList?e.classList.add(t):xe(e,t)||(e.className=(e.className+" "+t).trim()),e}function ke(e,t){return e?(e.classList?e.classList.remove(t):(ge(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e):(d.warn("removeClass was called with an element that doesn't exist"),null)}function Ee(e,t,i){var n=xe(e,t);if((i="boolean"!=typeof(i="function"==typeof i?i(e,t):i)?!n:i)!==n)return(i?Se:ke)(e,t),e}function Ce(i,n){Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];null==t||!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})}function Ae(e){var t={};if(e&&e.attributes&&0<e.attributes.length)for(var i=e.attributes,n=i.length-1;0<=n;n--){var r=i[n].name,s=i[n].value;"boolean"!=typeof e[r]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")||(s=null!==s),t[r]=s}return t}function Pe(e,t){return e.getAttribute(t)}function Le(e,t,i){e.setAttribute(t,i)}function Ie(e,t){e.removeAttribute(t)}function Oe(){document.body.focus(),document.onselectstart=function(){return!1}}function Me(){document.onselectstart=function(){return!0}}function De(e){var t,i;if(e&&e.getBoundingClientRect&&e.parentNode)return t=e.getBoundingClientRect(),i={},["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(i[e]=t[e])}),i.height||(i.height=parseFloat(ee(e,"height"))),i.width||(i.width=parseFloat(ee(e,"width"))),i}function je(e){if(!e||!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,i=e.offsetHeight,n=0,r=0;e.offsetParent&&e!==document[U.fullscreenElement];)n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:n,top:r,width:t,height:i}}function Ne(e,t){var i={x:0,y:0};if(pe)for(var n=e;n&&"html"!==n.nodeName.toLowerCase();){var r,s=ee(n,"transform");/^matrix/.test(s)?(r=s.slice(7,-1).split(/,\s/).map(Number),i.x+=r[4],i.y+=r[5]):/^matrix3d/.test(s)&&(s=s.slice(9,-1).split(/,\s/).map(Number),i.x+=s[12],i.y+=s[13]),n=n.parentNode}var a={},o=je(t.target),l=je(e),c=l.width,d=l.height,e=t.offsetY-(l.top-o.top),o=t.offsetX-(l.left-o.left);return t.changedTouches&&(o=t.changedTouches[0].pageX-l.left,e=t.changedTouches[0].pageY+l.top,pe)&&(o-=i.x,e-=i.y),a.y=1-Math.max(0,Math.min(1,e/d)),a.x=Math.max(0,Math.min(1,o/c)),a}function Re(e){return J(e)&&3===e.nodeType}function Be(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function Ue(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return ye(e="function"==typeof e?e():e)||Re(e)?e:"string"==typeof e&&/\S/.test(e)?document.createTextNode(e):void 0}).filter(function(e){return e})}function Fe(t,e){return Ue(e).forEach(function(e){return t.appendChild(e)}),t}function $e(e,t){return Fe(Be(e),t)}function He(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}function qe(){if(!1!==ze.options.autoSetup){var e=Array.prototype.slice.call(document.getElementsByTagName("video")),t=Array.prototype.slice.call(document.getElementsByTagName("audio")),i=Array.prototype.slice.call(document.getElementsByTagName("video-js")),n=e.concat(t,i);if(n&&0<n.length)for(var r=0,s=n.length;r<s;r++){var a=n[r];if(!a||!a.getAttribute){Ye(1);break}void 0===a.player&&null!==a.getAttribute("data-setup")&&ze(a)}else Ge||Ye(1)}}var ze,We=be("querySelector"),Ve=be("querySelectorAll"),Xe=Object.freeze({__proto__:null,isReal:ve,isEl:ye,isInFrame:_e,createEl:h,textContent:Te,prependTo:we,hasClass:xe,addClass:Se,removeClass:ke,toggleClass:Ee,setAttributes:Ce,getAttributes:Ae,getAttribute:Pe,setAttribute:Le,removeAttribute:Ie,blockTextSelection:Oe,unblockTextSelection:Me,getBoundingClientRect:De,findPosition:je,getPointerPosition:Ne,isTextNode:Re,emptyEl:Be,normalizeContent:Ue,appendContent:Fe,insertContent:$e,isSingleLeftClick:He,$:We,$$:Ve}),Ge=!1;function Ye(e,t){ve()&&(t&&(ze=t),window.setTimeout(qe,e))}function Ke(){Ge=!0,window.removeEventListener("load",Ke)}function Qe(e){var t=document.createElement("style");return t.className=e,t}function Je(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}ve()&&("complete"===document.readyState?Ke():window.addEventListener("load",Ke));var Ze=3;function et(){this.vdata="vdata"+Math.floor(window.performance&&window.performance.now()||Date.now()),this.data={}}window.WeakMap||((T=et.prototype).set=function(e,t){var i=e[this.vdata]||Ze++;return e[this.vdata]||(e[this.vdata]=i),this.data[i]=t,this},T.get=function(e){var t=e[this.vdata];if(t)return this.data[t];d("We have no data for this element",e)},T.has=function(e){return e[this.vdata]in this.data},T.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},T=et);var tt,it=new(window.WeakMap?WeakMap:T);function nt(e,t){var i;it.has(e)&&(0===(i=it.get(e)).handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length)&&it.delete(e)}function rt(t,i,e,n){e.forEach(function(e){t(i,e,n)})}function st(e){if(!e.fixed_){if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var t,i,n,r=e||window.event;for(t in e={},r)"layerX"===t||"layerY"===t||"keyLocation"===t||"webkitMovementX"===t||"webkitMovementY"===t||"path"===t||"returnValue"===t&&r.preventDefault||(e[t]=r[t]);e.target||(e.target=e.srcElement||document),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=s},e.isPropagationStopped=a,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=s,e.stopPropagation()},e.isImmediatePropagationStopped=a,null!==e.clientX&&void 0!==e.clientX&&(i=document.documentElement,n=document.body,e.pageX=e.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}e.fixed_=!0}return e;function s(){return!0}function a(){return!1}}var at=["touchstart","touchmove"];function ot(a,e,t){if(Array.isArray(e))return rt(ot,a,e,t);it.has(a)||it.set(a,{});var o=it.get(a);o.handlers||(o.handlers={}),o.handlers[e]||(o.handlers[e]=[]),t.guid||(t.guid=Ze++),o.handlers[e].push(t),o.dispatcher||(o.disabled=!1,o.dispatcher=function(e,t){if(!o.disabled){e=st(e);var i=o.handlers[e.type];if(i)for(var n=i.slice(0),r=0,s=n.length;r<s&&!e.isImmediatePropagationStopped();r++)try{n[r].call(a,e,t)}catch(e){d.error(e)}}}),1===o.handlers[e].length&&(a.addEventListener?(t=!1,function(){if("boolean"!=typeof tt){tt=!1;try{var e=Object.defineProperty({},"passive",{get:function(){tt=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}return tt}()&&-1<at.indexOf(e)&&(t={passive:!0}),a.addEventListener(e,o.dispatcher,t)):a.attachEvent&&a.attachEvent("on"+e,o.dispatcher))}function lt(e,t,i){if(it.has(e)){var n=it.get(e);if(n.handlers){if(Array.isArray(t))return rt(lt,e,t,i);var r=function(e,t){n.handlers[t]=[],nt(e,t)};if(void 0!==t){var s=n.handlers[t];if(s)if(i){if(i.guid)for(var a=0;a<s.length;a++)s[a].guid===i.guid&&s.splice(a--,1);nt(e,t)}else r(e,t)}else for(var o in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},o)&&r(e,o)}}}function ct(e,t,i){var n=it.has(e)?it.get(e):{},r=e.parentNode||e.ownerDocument;return"string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=st(t),n.dispatcher&&n.dispatcher.call(e,t,i),r&&!t.isPropagationStopped()&&!0===t.bubbles?ct.call(null,r,t,i):!r&&!t.defaultPrevented&&t.target&&t.target[t.type]&&(it.has(t.target)||it.set(t.target,{}),r=it.get(t.target),t.target[t.type])&&(r.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),r.disabled=!1),!t.defaultPrevented}function dt(e,t,i){if(Array.isArray(t))return rt(dt,e,t,i);function n(){lt(e,t,n),i.apply(this,arguments)}n.guid=i.guid=i.guid||Ze++,ot(e,t,n)}function ut(e,t,i){function n(){lt(e,t,n),i.apply(this,arguments)}n.guid=i.guid=i.guid||Ze++,ot(e,t,n)}function l(e,t,i){return t.guid||(t.guid=Ze++),(e=t.bind(e)).guid=i?i+"_"+t.guid:t.guid,e}function ht(t,i){var n=window.performance.now();return function(){var e=window.performance.now();i<=e-n&&(t.apply(void 0,arguments),n=e)}}function pt(){}var ft,mt=Object.freeze({__proto__:null,fixEvent:st,on:ot,off:lt,trigger:ct,one:dt,any:ut});function gt(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_||(e.constructor&&e.constructor.name?e.constructor.name:typeof e)}function vt(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&e.length}function yt(e,t,i){if(!e||!e.nodeName&&!xt(e))throw new Error("Invalid target for "+gt(t)+"#"+i+"; must be a DOM node or evented object.")}function _t(e,t,i){if(!vt(e))throw new Error("Invalid event type for "+gt(t)+"#"+i+"; must be a non-empty string or array.")}function bt(e,t,i){if("function"!=typeof e)throw new Error("Invalid listener for "+gt(t)+"#"+i+"; must be a function.")}function Tt(e,t,i){var n,r,s=t.length<3||t[0]===e||t[0]===e.eventBusEl_,t=s?(n=e.eventBusEl_,3<=t.length&&t.shift(),r=t[0],t[1]):(n=t[0],r=t[1],t[2]);return yt(n,e,i),_t(r,e,i),bt(t,e,i),{isTargetingSelf:s,target:n,type:r,listener:t=l(e,t)}}function wt(e,t,i,n){yt(e,e,t),e.nodeName?mt[t](e,i,n):e[t](i,n)}pt.prototype.allowedEvents_={},pt.prototype.addEventListener=pt.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},ot(this,e,t),this.addEventListener=i},pt.prototype.removeEventListener=pt.prototype.off=function(e,t){lt(this,e,t)},pt.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},dt(this,e,t),this.addEventListener=i},pt.prototype.any=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},ut(this,e,t),this.addEventListener=i},pt.prototype.dispatchEvent=pt.prototype.trigger=function(e){var t=e.type||e;e=st(e="string"==typeof e?{type:t}:e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),ct(this,e)},pt.prototype.queueTrigger=function(e){var t=this,i=(ft=ft||new Map,e.type||e),n=ft.get(this),r=(n||(n=new Map,ft.set(this,n)),n.get(i));n.delete(i),window.clearTimeout(r),r=window.setTimeout(function(){0===n.size&&(n=null,ft.delete(t)),t.trigger(e)},0),n.set(i,r)};var xt=function(t){return t instanceof pt||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},St={on:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r,s=Tt(this,i,"on"),a=s.isTargetingSelf,o=s.target,l=s.type,c=s.listener;wt(o,"on",l,c),a||((r=function(){return e.off(o,l,c)}).guid=c.guid,(a=function(){return e.off("dispose",r)}).guid=c.guid,wt(this,"on","dispose",r),wt(o,"on","dispose",a))},one:function(){for(var r=this,e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Tt(this,t,"one"),s=n.isTargetingSelf,a=n.target,o=n.type,l=n.listener;s?wt(a,"one",o,l):((s=function e(){r.off(a,o,e);for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];l.apply(null,i)}).guid=l.guid,wt(a,"one",o,s))},any:function(){for(var r=this,e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Tt(this,t,"any"),s=n.isTargetingSelf,a=n.target,o=n.type,l=n.listener;s?wt(a,"any",o,l):((s=function e(){r.off(a,o,e);for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];l.apply(null,i)}).guid=l.guid,wt(a,"any",o,s))},off:function(e,t,i){!e||vt(e)?lt(this.eventBusEl_,e,t):(yt(e,this,"off"),_t(t,this,"off"),bt(i,this,"off"),i=l(this,i),this.off("dispose",i),e.nodeName?(lt(e,t,i),lt(e,"dispose",i)):xt(e)&&(e.off(t,i),e.off("dispose",i)))},trigger:function(e,t){var i;if(yt(this.eventBusEl_,this,"trigger"),!vt(e&&"string"!=typeof e?e.type:e)){if(i="Invalid event type for "+gt(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.",!e)throw new Error(i);(this.log||d).error(i)}return ct(this.eventBusEl_,e,t)}};function kt(e,t){if(t=(t=void 0===t?{}:t).eventBusKey){if(!e[t].nodeName)throw new Error('The eventBusKey "'+t+'" does not refer to an element.');e.eventBusEl_=e[t]}else e.eventBusEl_=h("span",{className:"vjs-event-bus"});u(e,St),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),[e,e.el_,e.eventBusEl_].forEach(function(e){e&&it.has(e)&&it.delete(e)}),window.setTimeout(function(){e.eventBusEl_=null},0)})}var Et={state:{},setState:function(e){var i,n=this;return Q(e="function"==typeof e?e():e,function(e,t){n.state[t]!==e&&((i=i||{})[t]={from:n.state[t],to:e}),n.state[t]=e}),i&&xt(this)&&this.trigger({changes:i,type:"statechanged"}),i}};function Ct(e,t){u(e,Et),e.state=u({},e.state,t),"function"==typeof e.handleStateChanged&&xt(e)&&e.on("statechanged",e.handleStateChanged)}function At(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})}function p(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})}function f(){for(var i={},e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(e){e&&Q(e,function(e,t){Z(e)?(Z(i[t])||(i[t]={}),i[t]=f(i[t],e)):i[t]=e})}),i}var Pt,Lt=window.Map||((Pt=Mt.prototype).has=function(e){return e in this.map_},Pt.delete=function(e){var t=this.has(e);return delete this.map_[e],t},Pt.set=function(e,t){return this.map_[e]=t,this},Pt.forEach=function(e,t){for(var i in this.map_)e.call(t,this.map_[i],i,this)},Mt),It=window.Set||((Pt=Ot.prototype).has=function(e){return e in this.set_},Pt.delete=function(e){var t=this.has(e);return delete this.set_[e],t},Pt.add=function(e){return this.set_[e]=1,this},Pt.forEach=function(e,t){for(var i in this.set_)e.call(t,i,i,this)},Ot),a=X(function(e,t){function i(e){var t;return"number"==typeof(e=e&&"object"==typeof e&&(t=e.which||e.keyCode||e.charCode)?t:e)?o[e]:(t=String(e),(e=(e=n[t.toLowerCase()])||r[t.toLowerCase()])||(1===t.length?t.charCodeAt(0):void 0))}i.isEventKey=function(e,t){if(e&&"object"==typeof e){var i=e.which||e.keyCode||e.charCode;if(null!=i)if("string"==typeof t){if(e=n[t.toLowerCase()])return e===i;if(e=r[t.toLowerCase()])return e===i}else if("number"==typeof t)return t===i;return!1}};for(var n=(t=e.exports=i).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"Ã¢â¡Â§":16,"Ã¢ÅÂ¥":18,"Ã¢ÅÆ":17,"Ã¢ÅË":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91},s=97;s<123;s++)n[String.fromCharCode(s)]=s-32;for(s=48;s<58;s++)n[s-48]=s;for(s=1;s<13;s++)n["f"+s]=s+111;for(s=0;s<10;s++)n["numpad "+s]=s+96;var a,o=t.names=t.title={};for(s in n)o[n[s]]=s;for(a in r)n[a]=r[a]});function Ot(){this.set_={}}function Mt(){this.map_={}}a.code,a.codes,a.aliases,a.names,a.title;(g=o.prototype).dispose=function(e){if(void 0===e&&(e={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;0<=t;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},g.isDisposed=function(){return Boolean(this.isDisposed_)},g.player=function(){return this.player_},g.options=function(e){return e&&(this.options_=f(this.options_,e)),this.options_},g.el=function(){return this.el_},g.createEl=function(e,t,i){return h(e,t,i)},g.localize=function(e,i,t){void 0===t&&(t=e);var n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),s=r&&r[n],n=n&&n.split("-")[0],n=r&&r[n];return s&&s[e]?t=s[e]:n&&n[e]&&(t=n[e]),i?t.replace(/\{(\d+)\}/g,function(e,t){return void 0===(t=i[t-1])?e:t}):t},g.handleLanguagechange=function(){},g.contentEl=function(){return this.contentEl_||this.el_},g.id=function(){return this.id_},g.name=function(){return this.name_},g.children=function(){return this.children_},g.getChildById=function(e){return this.childIndex_[e]},g.getChild=function(e){if(e)return this.childNameIndex_[e]},g.getDescendant=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var t=t.reduce(function(e,t){return e.concat(t)},[]),n=this,r=0;r<t.length;r++)if(!(n=n.getChild(t[r]))||!n.getChild)return;return n},g.addChild=function(e,t,i){if(void 0===t&&(t={}),void 0===i&&(i=this.children_.length),"string"==typeof e){var n=p(e),r=t.componentClass||n,s=(t.name=n,o.getComponent(r));if(!s)throw new Error("Component "+r+" does not exist");if("function"!=typeof s)return null;s=new s(this.player_||this,t)}else s=e;return s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(i,0,s),s.parentComponent_=this,"function"==typeof s.id&&(this.childIndex_[s.id()]=s),(n=n||s.name&&p(s.name()))&&(this.childNameIndex_[n]=s,this.childNameIndex_[At(n)]=s),"function"==typeof s.el&&s.el()&&(n=null,this.children_[i+1]&&(this.children_[i+1].el_?n=this.children_[i+1].el_:ye(this.children_[i+1])&&(n=this.children_[i+1])),this.contentEl().insertBefore(s.el(),n)),s},g.removeChild=function(e){if((e="string"==typeof e?this.getChild(e):e)&&this.children_){for(var t,i=!1,n=this.children_.length-1;0<=n;n--)if(this.children_[n]===e){i=!0,this.children_.splice(n,1);break}i&&(e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[p(e.name())]=null,this.childNameIndex_[At(e.name())]=null,t=e.el())&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}},g.initChildren=function(){var i,t,e,n=this,r=this.options_.children;r&&(i=this.options_,t=o.getComponent("Tech"),(e=Array.isArray(r)?r:Object.keys(r)).concat(Object.keys(this.options_).filter(function(t){return!e.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(e){var t,e="string"==typeof e?r[t=e]||n.options_[t]||{}:(t=e.name,e);return{name:t,opts:e}}).filter(function(e){return(e=o.getComponent(e.opts.componentClass||p(e.name)))&&!t.isTech(e)}).forEach(function(e){var t=e.name,e=e.opts;!1!==(e=void 0!==i[t]?i[t]:e)&&((e=!0===e?{}:e).playerOptions=n.options_.playerOptions,e=n.addChild(t,e))&&(n[t]=e)}))},g.buildCSSClass=function(){return""},g.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},g.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},g.$=function(e,t){return We(e,t||this.contentEl())},g.$$=function(e,t){return Ve(e,t||this.contentEl())},g.hasClass=function(e){return xe(this.el_,e)},g.addClass=function(e){Se(this.el_,e)},g.removeClass=function(e){ke(this.el_,e)},g.toggleClass=function(e,t){Ee(this.el_,e,t)},g.show=function(){this.removeClass("vjs-hidden")},g.hide=function(){this.addClass("vjs-hidden")},g.lockShowing=function(){this.addClass("vjs-lock-showing")},g.unlockShowing=function(){this.removeClass("vjs-lock-showing")},g.getAttribute=function(e){return Pe(this.el_,e)},g.setAttribute=function(e,t){Le(this.el_,e,t)},g.removeAttribute=function(e){Ie(this.el_,e)},g.width=function(e,t){return this.dimension("width",e,t)},g.height=function(e,t){return this.dimension("height",e,t)},g.dimensions=function(e,t){this.width(e,!0),this.height(t)},g.dimension=function(e,t,i){if(void 0===t)return this.el_?-1!==(i=(t=this.el_.style[e]).indexOf("px"))?parseInt(t.slice(0,i),10):parseInt(this.el_["offset"+p(e)],10):0;-1!==(""+(t=null===t||t!=t?0:t)).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",i||this.trigger("componentresize")},g.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");return t=ee(this.el_,e),0!==(t=parseFloat(t))&&!isNaN(t)||(e="offset"+p(e),t=this.el_[e]),t},g.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},g.currentWidth=function(){return this.currentDimension("width")},g.currentHeight=function(){return this.currentDimension("height")},g.focus=function(){this.el_.focus()},g.blur=function(){this.el_.blur()},g.handleKeyDown=function(e){this.player_&&(a.isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))},g.handleKeyPress=function(e){this.handleKeyDown(e)},g.emitTapEvents=function(){var i,t=0,n=null;function e(){i=!1}this.on("touchstart",function(e){1===e.touches.length&&(n={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},t=window.performance.now(),i=!0)}),this.on("touchmove",function(e){var t;(1<e.touches.length||n&&(t=e.touches[0].pageX-n.pageX,e=e.touches[0].pageY-n.pageY,10<Math.sqrt(t*t+e*e)))&&(i=!1)}),this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(n=null)===i&&window.performance.now()-t<200&&(e.preventDefault(),this.trigger("tap"))})},g.enableTouchActivity=function(){var t,i,e;this.player()&&this.player().reportUserActivity&&(t=l(this.player(),this.player().reportUserActivity),this.on("touchstart",function(){t(),this.clearInterval(i),i=this.setInterval(t,250)}),e=function(e){t(),this.clearInterval(i)},this.on("touchmove",t),this.on("touchend",e),this.on("touchcancel",e))},g.setTimeout=function(e,t){var i,n=this;return e=l(this,e),this.clearTimersOnDispose_(),i=window.setTimeout(function(){n.setTimeoutIds_.has(i)&&n.setTimeoutIds_.delete(i),e()},t),this.setTimeoutIds_.add(i),i},g.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),window.clearTimeout(e)),e},g.setInterval=function(e,t){return e=l(this,e),this.clearTimersOnDispose_(),t=window.setInterval(e,t),this.setIntervalIds_.add(t),t},g.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),window.clearInterval(e)),e},g.requestAnimationFrame=function(e){var t,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=l(this,e),t=window.requestAnimationFrame(function(){i.rafIds_.has(t)&&i.rafIds_.delete(t),e()}),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},g.requestNamedAnimationFrame=function(e,t){var i,n=this;if(!this.namedRafs_.has(e))return this.clearTimersOnDispose_(),t=l(this,t),i=this.requestAnimationFrame(function(){t(),n.namedRafs_.has(e)&&n.namedRafs_.delete(e)}),this.namedRafs_.set(e,i),e},g.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},g.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),window.cancelAnimationFrame(e)),e):this.clearTimeout(e)},g.clearTimersOnDispose_=function(){var n=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var t=e[0],i=e[1];n[t].forEach(function(e,t){return n[i](t)})}),n.clearingTimersOnDispose_=!1}))},o.registerComponent=function(e,t){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var i=(n=o.getComponent("Tech"))&&n.isTech(t),n=o===t||o.prototype.isPrototypeOf(t.prototype);if(i||!n)throw s=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+e+'"; '+s+".");if(e=p(e),o.components_||(o.components_={}),s=o.getComponent("Player"),"Player"===e&&s&&s.players){var r=s.players,s=Object.keys(r);if(r&&0<s.length&&s.map(function(e){return r[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return o.components_[e]=t,o.components_[At(e)]=t},o.getComponent=function(e){if(e&&o.components_)return o.components_[e]};var c=o;function o(e,t,i){var n=this;!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=f({},this.options_),t=this.options_=f(this.options_,t),this.id_=t.id||t.el&&t.el.id,this.id_||(e=e&&e.id&&e.id()||"no_player",this.id_=e+"_component_"+Ze++),this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(function(e){return n.addClass(e)}),!1!==t.evented&&(kt(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Ct(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new It,this.setIntervalIds_=new It,this.rafIds_=new It,this.namedRafs_=new Lt,(this.clearingTimersOnDispose_=!1)!==t.initChildren&&this.initChildren(),this.ready(i),!1!==t.reportTouchActivity&&this.enableTouchActivity()}c.prototype.supportsRaf_="function"==typeof window.requestAnimationFrame&&"function"==typeof window.cancelAnimationFrame,c.registerComponent("Component",c);function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Dt(e,t,i,n){var r=i.length-1;if("number"!=typeof n||n<0||r<n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+n+") is non-numeric or out of bounds (0-"+r+").");return i[n][t]}function jt(e){var t=void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:Dt.bind(null,"start",0,e),end:Dt.bind(null,"end",1,e)};return window.Symbol&&window.Symbol.iterator&&(t[window.Symbol.iterator]=function(){return(e||[]).values()}),t}function Nt(e,t){return Array.isArray(e)?jt(e):void 0===e||void 0===t?jt():jt([[e,t]])}function Rt(e,t){var i,n,r=0;if(!t)return 0;e&&e.length||(e=Nt(0,0));for(var s=0;s<e.length;s++)i=e.start(s),r+=(t<(n=e.end(s))?t:n)-i;return r/t}function Bt(e){if(e instanceof Bt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:J(e)&&("number"==typeof e.code&&(this.code=e.code),u(this,e)),this.message||(this.message=Bt.defaultMessages[this.code]||"")}Bt.prototype.code=0,Bt.prototype.message="",Bt.prototype.status=null,Bt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Bt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ut=0;Ut<Bt.errorTypes.length;Ut++)Bt[Bt.errorTypes[Ut]]=Ut,Bt.prototype[Bt.errorTypes[Ut]]=Ut;function Ft(e){return null!=e&&"function"==typeof e.then}function $t(e){Ft(e)&&e.then(null,function(e){})}function Ht(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,t,i){return n[t]&&(e[t]=n[t]),e},{cues:n.cues&&Array.prototype.map.call(n.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})}var qt,zt="vjs-modal-dialog",Wt=(m(Vt,qt=c),(g=Vt.prototype).createEl=function(){return qt.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},g.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,qt.prototype.dispose.call(this)},g.buildCSSClass=function(){return zt+" vjs-hidden "+qt.prototype.buildCSSClass.call(this)},g.label=function(){return this.localize(this.options_.label||"Modal Window")},g.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},g.open=function(){var e;this.opened_||(e=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0)},g.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},g.close=function(){var e;this.opened_&&(e=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary)&&this.dispose()},g.closeable=function(e){var t,i;return"boolean"==typeof e&&(t=this.closeable_=!!e,i=this.getChild("closeButton"),t&&!i&&(e=this.contentEl_,this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(i,"close",this.close_)),!t)&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose()),this.closeable_},g.fill=function(){this.fillWith(this.content())},g.fillWith=function(e){var t=this.contentEl(),i=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),$e(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t),(t=this.getChild("closeButton"))&&i.appendChild(t.el_)},g.empty=function(){this.trigger("beforemodalempty"),Be(this.contentEl()),this.trigger("modalempty")},g.content=function(e){return void 0!==e&&(this.content_=e),this.content_},g.conditionalFocus_=function(){var e=document.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,!t.contains(e)&&t!==e||(this.previouslyActiveEl_=e,this.focus())},g.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},g.handleKeyDown=function(e){if(e.stopPropagation(),a.isEventKey(e,"Escape")&&this.closeable())e.preventDefault(),this.close();else if(a.isEventKey(e,"Tab")){for(var t,i=this.focusableEls_(),n=this.el_.querySelector(":focus"),r=0;r<i.length;r++)if(n===i[r]){t=r;break}document.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(i[i.length-1].focus(),e.preventDefault()):e.shiftKey||t!==i.length-1||(i[0].focus(),e.preventDefault())}},g.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof window.HTMLAnchorElement||e instanceof window.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof window.HTMLInputElement||e instanceof window.HTMLSelectElement||e instanceof window.HTMLTextAreaElement||e instanceof window.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof window.HTMLIFrameElement||e instanceof window.HTMLObjectElement||e instanceof window.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},Vt);function Vt(e,t){var i=qt.call(this,e,t)||this;return i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.close_=function(e){return i.close(e)},i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=h("div",{className:zt+"-content"},{role:"document"}),i.descEl_=h("p",{className:zt+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),Te(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}Wt.prototype.options_={pauseOnOpen:!0,temporary:!0},c.registerComponent("ModalDialog",Wt);m(Kt,Gt=pt),(g=Kt.prototype).addTrack=function(e){var t=this,i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.tracks_[i]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},xt(e)&&e.addEventListener("labelchange",e.labelchange_)},g.removeTrack=function(e){for(var t,i=0,n=this.length;i<n;i++)if(this[i]===e){(t=this[i]).off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},g.getTrackById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t};var Xt,Gt,Yt=Kt;function Kt(e){var t;void 0===e&&(e=[]),(t=Gt.call(this)||this).tracks_=[],Object.defineProperty(y(t),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<e.length;i++)t.addTrack(e[i]);return t}for(Xt in Yt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Yt.prototype.allowedEvents_)Yt.prototype["on"+Xt]=null;function Qt(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)}function Jt(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].selected=!1)}function Zt(e){var t=["protocol","hostname","port","pathname","search","hash","host"],i=document.createElement("a");i.href=e;for(var n={},r=0;r<t.length;r++)n[t[r]]=i[t[r]];return"http:"===n.protocol&&(n.host=n.host.replace(/:80$/,"")),"https:"===n.protocol&&(n.host=n.host.replace(/:443$/,"")),n.protocol||(n.protocol=window.location.protocol),n.host||(n.host=window.location.host),n}function ei(e){var t;return e.match(/^https?:\/\//)||((t=document.createElement("a")).href=e,e=t.href),e}function ti(e){return"string"==typeof e&&(e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e))?e.pop().toLowerCase():""}function ii(e,t){return void 0===t&&(t=window.location),(":"===(e=Zt(e)).protocol?t:e).protocol+e.host!==t.protocol+t.host}m(Ti,ai=Yt),(g=Ti.prototype).addTrack=function(e){var t=this;e.enabled&&Qt(this,e),ai.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){t.changing_||(t.changing_=!0,Qt(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},g.removeTrack=function(e){ai.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)};var ni,ri,si,ai,g=Ti,v=(m(bi,si=Yt),(v=bi.prototype).addTrack=function(e){var t=this;e.selected&&Jt(this,e),si.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){t.changing_||(t.changing_=!0,Jt(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},v.removeTrack=function(e){si.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},bi),_=(m(_i,ri=Yt),(O=_i.prototype).addTrack=function(e){var t=this;ri.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return t.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return t.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},O.removeTrack=function(e){ri.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_)&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_)},_i),b=((O=yi.prototype).addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},O.getTrackElementByTrack_=function(e){for(var t,i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t},O.removeTrackElement_=function(e){for(var t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},yi),oi=((O=vi.prototype).setCues_=function(e){var t=this.length||0,i=0,n=e.length;function r(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}if(this.cues_=e,this.length_=e.length,t<n)for(i=t;i<n;i++)r.call(this,i)},O.getCueById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},vi),li={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},ci={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},di={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},ui={disabled:"disabled",hidden:"hidden",showing:"showing"},i=(m(gi,ni=pt),gi),hi=Object.freeze({__proto__:null,parseUrl:Zt,getAbsoluteURL:ei,getFileExtension:ti,isCrossOrigin:ii}),pi=w="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},fi=function(e){var t;return!!e&&("[object Function]"===(t=mi.call(e))||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt))},mi=Object.prototype.toString;function gi(e){void 0===e&&(e={});var t,i=ni.call(this)||this,n={id:e.id||"vjs_track_"+Ze++,kind:e.kind||"",language:e.language||""},r=e.label||"";for(t in n)!function(e){Object.defineProperty(y(i),e,{get:function(){return n[e]},set:function(){}})}(t);return Object.defineProperty(y(i),"label",{get:function(){return r},set:function(e){e!==r&&(r=e,this.trigger("labelchange"))}}),i}function vi(e){vi.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function(){return this.length_}})}function yi(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}function _i(){return ri.apply(this,arguments)||this}function bi(e){for(var t,i=(e=void 0===e?[]:e).length-1;0<=i;i--)if(e[i].selected){Jt(e,e[i]);break}return(t=si.call(this,e)||this).changing_=!1,Object.defineProperty(y(t),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),t}function Ti(e){for(var t,i=(e=void 0===e?[]:e).length-1;0<=i;i--)if(e[i].enabled){Qt(e,e[i]);break}return(t=ai.call(this,e)||this).changing_=!1,t}ki.httpHandler=function(r,s){return void 0===s&&(s=!1),function(e,t,i){if(e)r(e);else if(400<=t.statusCode&&t.statusCode<=599){if(e=i,s)if(pi.TextDecoder){t=(n=void 0===(n=t.headers&&t.headers["content-type"])?"":n).toLowerCase().split(";").reduce(function(e,t){var t=(i=t.split("="))[0],i=i[1];return"charset"===t.trim()?i.trim():e},"utf-8");try{e=new TextDecoder(t).decode(i)}catch(e){}}else e=String.fromCharCode.apply(null,new Uint8Array(i));r({cause:e})}else r(null,i);var n}};var wi=function(e){var n={};return e&&e.trim().split("\n").forEach(function(e){var t=e.indexOf(":"),i=e.slice(0,t).trim().toLowerCase(),t=e.slice(t+1).trim();void 0===n[i]?n[i]=t:Array.isArray(n[i])?n[i].push(t):n[i]=[n[i],t]}),n},xi=ki,n=ki;function Si(e,t,i){var n=e;return fi(t)?(i=t,"string"==typeof e&&(n={uri:e})):n=Y({},t,{uri:e}),n.callback=i,n}function ki(e,t,i){return Ei(t=Si(e,t,i))}function Ei(n){if(void 0===n.callback)throw new Error("callback argument missing");function r(e,t,i){s||(s=!0,n.callback(e,t,i))}var s=!1;function t(e){return clearTimeout(o),(e=e instanceof Error?e:new Error(""+(e||"Unknown XMLHttpRequest Error"))).statusCode=0,r(e,m)}function e(){var e,t,i;if(!a)return clearTimeout(o),e=n.useXDR&&void 0===l.status?200:1223===l.status?204:l.status,t=m,i=null,0!==e?(t={body:function(){var e=void 0,e=l.response||l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(l);if(f)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:e,method:d,headers:{},url:c,rawRequest:l},l.getAllResponseHeaders&&(t.headers=wi(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),r(i,t,t.body)}var i,a,o,l=n.xhr||null,c=(l=l||new(n.cors||n.useXDR?ki.XDomainRequest:ki.XMLHttpRequest)).url=n.uri||n.url,d=l.method=n.method||"GET",u=n.body||n.data,h=l.headers=n.headers||{},p=!!n.sync,f=!1,m={body:void 0,headers:{},statusCode:0,method:d,url:c,rawRequest:l};if("json"in n&&!1!==n.json&&(f=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==d)&&"HEAD"!==d&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),u=JSON.stringify(!0===n.json?u:n.json)),l.onreadystatechange=function(){4===l.readyState&&setTimeout(e,0)},l.onload=e,l.onerror=t,l.onprogress=function(){},l.onabort=function(){a=!0},l.ontimeout=t,l.open(d,c,!p,n.username,n.password),p||(l.withCredentials=!!n.withCredentials),!p&&0<n.timeout&&(o=setTimeout(function(){var e;a||(a=!0,l.abort("timeout"),(e=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",t(e))},n.timeout)),l.setRequestHeader)for(i in h)h.hasOwnProperty(i)&&l.setRequestHeader(i,h[i]);else if(n.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(l.responseType=n.responseType),"beforeSend"in n&&"function"==typeof n.beforeSend&&n.beforeSend(l),l.send(u||null),l}ki.XMLHttpRequest=pi.XMLHttpRequest||function(){},ki.XDomainRequest="withCredentials"in new ki.XMLHttpRequest?ki.XMLHttpRequest:pi.XDomainRequest;for(var Ci=["get","put","post","patch","head","delete"],Ai=0;Ai<Ci.length;Ai++)!function(n){ki["delete"===n?"del":n]=function(e,t,i){return(t=Si(e,t,i)).method=n.toUpperCase(),Ei(t)}}(Ci[Ai]);function Pi(e,t){var i=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()),n=[];i.oncue=function(e){t.addCue(e)},i.onparsingerror=function(e){n.push(e)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(e),0<n.length&&(window.console&&window.console.groupCollapsed&&window.console.groupCollapsed("Text Track parsing errors for "+t.src),n.forEach(function(e){return d.error(e)}),window.console)&&window.console.groupEnd&&window.console.groupEnd(),i.flush()}function Li(e,n){var t={uri:e};(e=ii(e))&&(t.cors=e),(e="use-credentials"===n.tech_.crossOrigin())&&(t.withCredentials=e),xi(t,l(this,function(e,t,i){return e?d.error(e,t):(n.loaded_=!0,void("function"!=typeof window.WebVTT?n.tech_&&n.tech_.any(["vttjsloaded","vttjserror"],function(e){return"vttjserror"!==e.type?Pi(i,n):void d.error("vttjs failed to load, stopping trying to process "+n.src)}):Pi(i,n)))}))}xi.default=n;m(Ni,Ii=i),(O=Ni.prototype).startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)},O.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0)},O.addCue=function(e){var t=e;if(window.vttjs&&!(e instanceof window.vttjs.VTTCue)){for(var i in t=new window.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}for(var n=this.tech_.textTracks(),r=0;r<n.length;r++)n[r]!==this&&n[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},O.removeCue=function(e){for(var t=this.cues_.length;t--;){var i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}};var Ii,Oi,Mi,Di,ji=Ni;function Ni(e){var t,i,n,r,a,o;if((e=void 0===e?{}:e).tech)return e=f(e,{kind:di[e.kind]||"subtitles",language:e.language||e.srclang||""}),i=ui[e.mode]||"disabled",n=e.default,"metadata"!==e.kind&&"chapters"!==e.kind||(i="hidden"),(t=Ii.call(this,e)||this).tech_=e.tech,t.cues_=[],t.activeCues_=[],t.preload_=!1!==t.tech_.preloadTextTracks,r=new oi(t.cues_),a=new oi(t.activeCues_),o=!1,t.timeupdateHandler=l(y(t),function(){this.tech_.isDisposed()||(this.tech_.isReady_&&(this.activeCues=this.activeCues,o)&&(this.trigger("cuechange"),o=!1),this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}),t.tech_.one("dispose",function(){t.stopTracking()}),"disabled"!==i&&t.startTracking(),Object.defineProperties(y(t),{default:{get:function(){return n},set:function(){}},mode:{get:function(){return i},set:function(e){ui[e]&&i!==e&&(i=e,this.preload_||"disabled"===i||0!==this.cues.length||Li(this.src,this),this.stopTracking(),"disabled"!==i&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?r:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0!==this.cues.length){for(var e=this.tech_.currentTime(),t=[],i=0,n=this.cues.length;i<n;i++){var r=this.cues[i];(r.startTime<=e&&r.endTime>=e||r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e)&&t.push(r)}if(o=!1,t.length!==this.activeCues_.length)o=!0;else for(var s=0;s<t.length;s++)-1===this.activeCues_.indexOf(t[s])&&(o=!0);this.activeCues_=t,a.setCues_(this.activeCues_)}return a},set:function(){}}}),e.src?(t.src=e.src,t.preload_||(t.loaded_=!0),(t.preload_||"subtitles"!==e.kind&&"captions"!==e.kind)&&Li(t.src,y(t))):t.loaded_=!0,t;throw new Error("A tech was not provided.")}function Ri(e){void 0===e&&(e={});var t,i=Oi.call(this)||this,n=new ji(e);return i.kind=n.kind,i.src=n.src,i.srclang=n.language,i.label=n.label,i.default=n.default,Object.defineProperties(y(i),{readyState:{get:function(){return t}},track:{get:function(){return n}}}),t=0,n.addEventListener("loadeddata",function(){t=2,i.trigger({type:"load",target:y(i)})}),i}function Bi(e){var t=f(e=void 0===e?{}:e,{kind:li[e.kind]||""}),e=Mi.call(this,t)||this,i=!1;return Object.defineProperty(y(e),"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),t.selected&&(e.selected=t.selected),e}function Ui(e){var t=f(e=void 0===e?{}:e,{kind:ci[e.kind]||""}),e=Di.call(this,t)||this,i=!1;return Object.defineProperty(y(e),"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),t.enabled&&(e.enabled=t.enabled),e.loaded_=!0,e}ji.prototype.allowedEvents_={cuechange:"cuechange"},m(Ui,Di=i),r=Ui,m(Bi,Mi=i),ce=Bi,m(Ri,Oi=pt),(s=Ri).prototype.allowedEvents_={load:"load"},s.NONE=0,s.LOADING=1,s.LOADED=2,s.ERROR=3;var Fi={audio:{ListClass:g,TrackClass:r,capitalName:"Audio"},video:{ListClass:v,TrackClass:ce,capitalName:"Video"},text:{ListClass:_,TrackClass:ji,capitalName:"Text"}},$i=(Object.keys(Fi).forEach(function(e){Fi[e].getterName=e+"Tracks",Fi[e].privateName=e+"Tracks_"}),{remoteText:{ListClass:_,TrackClass:ji,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:b,TrackClass:s,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}}),Hi=Y({},Fi,$i),T=($i.names=Object.keys($i),Fi.names=Object.keys(Fi),Hi.names=[].concat($i.names).concat(Fi.names),void 0!==e?e:"undefined"!=typeof window?window:{}),qi="undefined"!=typeof document?document:(qi=T["__GLOBAL_DOCUMENT_CACHE@4"])||(T["__GLOBAL_DOCUMENT_CACHE@4"]={}),w=qi,zi=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return Wi.prototype=e,new Wi};function Wi(){}function Vi(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Xi(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}return(e=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/))?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null}function Gi(){this.values=zi(null)}function Yi(e,t,i,n){var r,s,a=n?e.split(n):[e];for(r in a)"string"==typeof a[r]&&2===(s=a[r].split(i)).length&&t(s[0],s[1])}((Vi.prototype=zi(Error.prototype)).constructor=Vi).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Gi.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var Ki=w.createElement&&w.createElement("textarea"),Qi={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Ji={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Zi={v:"title",lang:"lang"},en={rt:"ruby"};function tn(e,t){for(var i,n,r,s,a,o,l,c=e.document.createElement("div"),d=c,u=[];null!==(l=void 0,l=t?(l=(l=t.match(/^([^<]*)(<[^>]*>?)?/))[1]||l[2],t=t.substr(l.length),l):null);)"<"!==l[0]?d.appendChild(e.document.createTextNode((r=l,Ki.innerHTML=r,r=Ki.textContent,Ki.textContent="",r))):"/"!==l[1]?(r=Xi(l.substr(1,l.length-2)))?(i=e.document.createProcessingInstruction("timestamp",r),d.appendChild(i)):(n=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(s=n[1],a=n[3],o=void 0,o=Qi[s],i=o?(o=e.document.createElement(o),(s=Zi[s])&&a&&(o[s]=a.trim()),o):null)&&(s=d,en[(a=i).localName]&&en[a.localName]!==s.localName||(n[2]&&((r=n[2].split(".")).forEach(function(e){var t=/^bg_/.test(e),e=t?e.slice(3):e;Ji.hasOwnProperty(e)&&(e=Ji[e],i.style[t?"background-color":"color"]=e)}),i.className=r.join(" ")),u.push(n[1]),d.appendChild(i),d=i)):u.length&&u[u.length-1]===l.substr(2).replace(">","")&&(u.pop(),d=d.parentNode);return c}var nn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function rn(){}function sn(e,t,i){rn.call(this),this.cue=t,this.cueDiv=tn(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"},r=(this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:function(e){var t=[],i="";if(e&&e.childNodes)for(s(t,e);i=function e(t){var i,n,r;return t&&t.length?(n=(i=t.pop()).textContent||i.innerText)?(r=n.match(/^.*(\n|\r)/))?r[t.length=0]:n:"ruby"===i.tagName?e(t):i.childNodes?(s(t,i),e(t)):void 0:null}(t);)for(var n=0;n<i.length;n++)if(function(e){for(var t=0;t<nn.length;t++){var i=nn[t];if(e>=i[0]&&e<=i[1])return 1}}(i.charCodeAt(n)))return"rtl";return"ltr";function s(e,t){for(var i=t.childNodes.length-1;0<=i;i--)e.push(t.childNodes[i])}}(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv),0);switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function an(e){var t,i,n,r;e.div&&(t=e.div.offsetHeight,i=e.div.offsetWidth,n=e.div.offsetTop,r=(r=(r=e.div.childNodes)&&r[0])&&r.getClientRects&&r.getClientRects(),e=e.div.getBoundingClientRect(),r=r?Math.max(r[0]&&r[0].height||0,e.height/r.length):0),this.left=e.left,this.right=e.right,this.top=e.top||n,this.height=e.height||t,this.bottom=e.bottom||n+(e.height||t),this.width=e.width||i,this.lineHeight=void 0!==r?r:e.lineHeight}function on(){}rn.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},rn.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(sn.prototype=zi(rn.prototype)).constructor=sn,an.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},an.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},an.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},an.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},an.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},an.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},an.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},an.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i}},on.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},on.convertCueToDOMTree=function(e,t){return e&&t?tn(e,t):null},on.processCues=function(e,t,i){if(!e||!t||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var n=e.document.createElement("div");if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin="1.5%",i.appendChild(n),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1}(t))for(var r,s,a=[],o=an.getSimpleBoxPosition(n),l={font:Math.round(.05*o.height*100)/100+"px sans-serif"},c=0;c<t.length;c++){s=t[c],r=new sn(e,s,l),n.appendChild(r.div),w=T=b=_=y=v=g=m=f=d=p=h=u=void 0;var d,u=r,h=o,p=a,f=new an(u),m=u.cue,g=function(){if("number"==typeof m.line&&(m.snapToLines||0<=m.line&&m.line<=100))return m.line;if(!m.track||!m.track.textTrackList||!m.track.textTrackList.mediaElement)return-1;for(var e=m.track,t=e.textTrackList,i=0,n=0;n<t.length&&t[n]!==e;n++)"showing"===t[n].mode&&i++;return-1*++i}(),v=[];if(m.snapToLines){switch(m.vertical){case"":v=["+y","-y"],d="height";break;case"rl":v=["+x","-x"],d="width";break;case"lr":v=["-x","+x"],d="width"}var y=f.lineHeight,_=y*Math.round(g),b=h[d]+y,T=v[0];Math.abs(_)>b&&(_=_<0?-1:1,_*=Math.ceil(b/y)*y),g<0&&(_+=""===m.vertical?h.height:h.width,v=v.reverse()),f.move(T,_)}else{var w=f.lineHeight/h.height*100;switch(m.lineAlign){case"center":g-=w/2;break;case"end":g-=w}switch(m.vertical){case"":u.applyStyles({top:u.formatStyle(g,"%")});break;case"rl":u.applyStyles({left:u.formatStyle(g,"%")});break;case"lr":u.applyStyles({right:u.formatStyle(g,"%")})}v=["+y","-x","+x","-y"],f=new an(u)}f=function(e,t){for(var i,n=new an(e),r=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(h,t[s])||e.within(h)&&e.overlapsAny(p);)e.move(t[s]);if(e.within(h))return e;var a=e.intersectPercentage(h);a<r&&(i=new an(e),r=a),e=new an(n)}return i||n}(f,v),u.move(f.toCSSCompatValues(h)),s.displayState=r.div,a.push(an.getSimpleBoxPosition(r))}else for(var x=0;x<t.length;x++)n.appendChild(t[x].displayState)},(on.Parser=function(e,t,i){i||(i=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof Vi))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t,n=this;function i(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),i}e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var r,s=(r=i()).match(/^WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new Vi(Vi.Errors.BadSignature);n.state="HEADER"}for(var a=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(a?a=!1:r=i(),n.state){case"HEADER":/:/.test(r)?(t=r).match(/X-TIMESTAMP-MAP/)?Yi(t,function(e,t){var i;"X-TIMESTAMP-MAP"===e&&(i=new Gi,Yi(t,function(e,t){switch(e){case"MPEGT":i.integer(e+"S",t);break;case"LOCA":i.set(e+"L",Xi(t))}},/[^\d]:/,/,/),n.ontimestampmap)&&n.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")})},/=/):Yi(t,function(e,t){var r;"Region"===e&&(r=new Gi,Yi(t,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var i,n=t.split(",");2===n.length&&((i=new Gi).percent("x",n[0]),i.percent("y",n[1]),i.has("x")&&i.has("y"))&&(r.set(e+"X",i.get("x")),r.set(e+"Y",i.get("y")));break;case"scroll":r.alt(e,t,["up"])}},/=/,/\s/),r.has("id"))&&((t=new(n.vttjs.VTTRegion||n.window.VTTRegion)).width=r.get("width",100),t.lines=r.get("lines",3),t.regionAnchorX=r.get("regionanchorX",0),t.regionAnchorY=r.get("regionanchorY",100),t.viewportAnchorX=r.get("viewportanchorX",0),t.viewportAnchorY=r.get("viewportanchorY",100),t.scroll=r.get("scroll",""),n.onregion&&n.onregion(t),n.regionList.push({id:r.get("id"),region:t}))},/:/):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}if(n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":try{!function(t,e,s){var i=t;function n(){var e=Xi(t);if(null===e)throw new Vi(Vi.Errors.BadTimeStamp,"Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function r(){t=t.replace(/^\s+/,"")}if(r(),e.startTime=n(),r(),"--\x3e"!==t.substr(0,3))throw new Vi(Vi.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.substr(3),r(),e.endTime=n(),r();var a=t,o=new Gi;Yi(a,function(e,t){switch(e){case"region":for(var i=s.length-1;0<=i;i--)if(s[i].id===t){o.set(e,s[i].region);break}break;case"vertical":o.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),r=n[0];o.integer(e,r),o.percent(e,r)&&o.set("snapToLines",!1),o.alt(e,r,["auto"]),2===n.length&&o.alt("lineAlign",n[1],["start","center","end"]);break;case"position":n=t.split(","),o.percent(e,n[0]),2===n.length&&o.alt("positionAlign",n[1],["start","center","end"]);break;case"size":o.percent(e,t);break;case"align":o.alt(e,t,["start","center","end","left","right"])}},/:/,/\s/),e.region=o.get("region",null),e.vertical=o.get("vertical","");try{e.line=o.get("line","auto")}catch(a){}e.lineAlign=o.get("lineAlign","start"),e.snapToLines=o.get("snapToLines",!0),e.size=o.get("size",100);try{e.align=o.get("align","center")}catch(a){e.align=o.get("align","middle")}try{e.position=o.get("position","auto")}catch(a){e.position=o.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},e.align)}e.positionAlign=o.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},e.align)}(r,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("--\x3e");if(!r||o&&(a=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Vi(Vi.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var ln=on,cn={"":1,lr:1,rl:1},dn={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function un(e){return"string"==typeof e&&!!dn[e.toLowerCase()]&&e.toLowerCase()}function hn(e,t,i){this.hasBeenReset=!1;var n="",r=!1,s=e,a=t,o=i,l=null,c="",d=!0,u="auto",h="start",p="auto",f="auto",m=100,g="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(e){n=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");a=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(e){if(!1===(e="string"==typeof e&&!!cn[e.toLowerCase()]&&e.toLowerCase()))throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");c=e,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return d},set:function(e){d=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");u=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){(e=un(e))&&(h=e,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){(e=un(e))&&(f=e,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){if(!(e=un(e)))throw new SyntaxError("align: an invalid or illegal alignment string was specified.");g=e,this.hasBeenReset=!0}}}),this.displayState=void 0}hn.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var pn=hn,fn={"":!0,up:!0};function mn(e){return"number"==typeof e&&0<=e&&e<=100}function gn(){var t=100,i=3,n=0,r=100,s=0,a=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!mn(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");i=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!mn(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!mn(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!mn(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return s},set:function(e){if(!mn(e))throw new Error("ViewportAnchorX must be between 0 and 100.");s=e}},scroll:{enumerable:!0,get:function(){return o},set:function(e){!1!==(e="string"==typeof e&&!!fn[e.toLowerCase()]&&e.toLowerCase())&&(o=e)}}})}var vn,yn=X(function(e){e=e.exports={WebVTT:ln,VTTCue:pn,VTTRegion:gn},pi.vttjs=e,pi.WebVTT=e.WebVTT;var t=e.VTTCue,i=e.VTTRegion,n=pi.VTTCue,r=pi.VTTRegion;e.shim=function(){pi.VTTCue=t,pi.VTTRegion=i},e.restore=function(){pi.VTTCue=n,pi.VTTRegion=r},pi.VTTCue||e.shim()}),x=(yn.WebVTT,yn.VTTCue,yn.VTTRegion,m(S,vn=c),(O=S.prototype).triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},O.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},O.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},O.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(l(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},O.onDurationChange=function(e){this.duration_=this.duration()},O.buffered=function(){return Nt(0,0)},O.bufferedPercent=function(){return Rt(this.buffered(),this.duration_)},O.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},O.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},O.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},O.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},O.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},O.dispose=function(){this.clearTracks(Fi.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),vn.prototype.dispose.call(this)},O.clearTracks=function(e){var r=this;(e=[].concat(e)).forEach(function(e){for(var t=r[e+"Tracks"]()||[],i=t.length;i--;){var n=t[i];"text"===e&&r.removeRemoteTextTrack(n),t.removeTrack(n)}})},O.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var i=e[t];this.removeRemoteTextTrack(i)}},O.reset=function(){},O.crossOrigin=function(){},O.setCrossOrigin=function(){},O.error=function(e){return void 0!==e&&(this.error_=new Bt(e),this.trigger("error")),this.error_},O.played=function(){return this.hasStarted_?Nt(0,0):Nt()},O.play=function(){},O.setScrubbing=function(){},O.scrubbing=function(){},O.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},O.initTrackListeners=function(){var r=this;Fi.names.forEach(function(e){function t(){r.trigger(e+"trackchange")}var i=Fi[e],n=r[i.getterName]();n.addEventListener("removetrack",t),n.addEventListener("addtrack",t),r.on("dispose",function(){n.removeEventListener("removetrack",t),n.removeEventListener("addtrack",t)})})},O.addWebVttScript_=function(){var e,t=this;window.WebVTT||(document.body.contains(this.el())?!this.options_["vtt.js"]&&Z(yn)&&0<Object.keys(yn).length?this.trigger("vttjsloaded"):((e=document.createElement("script")).src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),window.WebVTT=!0,this.el().parentNode.appendChild(e)):this.ready(this.addWebVttScript_))},O.emulateTextTracks=function(){function t(e){return n.addTrack(e.track)}function i(e){return n.removeTrack(e.track)}var e=this,n=this.textTracks(),r=this.remoteTextTracks();function s(){return e.trigger("texttrackchange")}function a(){s();for(var e=0;e<n.length;e++){var t=n[e];t.removeEventListener("cuechange",s),"showing"===t.mode&&t.addEventListener("cuechange",s)}}r.on("addtrack",t),r.on("removetrack",i),this.addWebVttScript_(),a(),n.addEventListener("change",a),n.addEventListener("addtrack",a),n.addEventListener("removetrack",a),this.on("dispose",function(){r.off("addtrack",t),r.off("removetrack",i),n.removeEventListener("change",a),n.removeEventListener("addtrack",a),n.removeEventListener("removetrack",a);for(var e=0;e<n.length;e++)n[e].removeEventListener("cuechange",s)})},O.addTextTrack=function(e,t,i){if(e)return e=e,t=t,i=i,void 0===r&&(r={}),s=(n=this).textTracks(),r.kind=e,t&&(r.label=t),i&&(r.language=i),r.tech=n,r=new Hi.text.TrackClass(r),s.addTrack(r),r;throw new Error("TextTrack kind is required but was not provided");var n,r,s},O.createRemoteTextTrack=function(e){return e=f(e,{tech:this}),new $i.remoteTextEl.TrackClass(e)},O.addRemoteTextTrack=function(e,t){var i=this,n=this.createRemoteTextTrack(e=void 0===e?{}:e);return!0!==t&&!1!==t&&(d.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==t&&this.ready(function(){return i.autoRemoteTextTracks_.addTrack(n.track)}),n},O.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},O.getVideoPlaybackQuality=function(){return{}},O.requestPictureInPicture=function(){var e=this.options_.Promise||window.Promise;if(e)return e.reject()},O.disablePictureInPicture=function(){return!0},O.setDisablePictureInPicture=function(){},O.requestVideoFrameCallback=function(e){var t=this,i=Ze++;return this.paused()?(this.queuedHanders_.add(i),this.one("playing",function(){t.queuedHanders_.has(i)&&(t.queuedHanders_.delete(i),e())})):this.requestNamedAnimationFrame(i,e),i},O.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},O.setPoster=function(){},O.playsinline=function(){},O.setPlaysinline=function(){},O.overrideNativeAudioTracks=function(){},O.overrideNativeVideoTracks=function(){},O.canPlayType=function(){return""},S.canPlayType=function(){return""},S.canPlaySource=function(e,t){return S.canPlayType(e.type)},S.isTech=function(e){return e.prototype instanceof S||e instanceof S||e===S},S.registerTech=function(e,t){if(S.techs_||(S.techs_={}),!S.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!S.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(S.canPlaySource)return e=p(e),S.techs_[e]=t,S.techs_[At(e)]=t,"Tech"!==e&&S.defaultTechOrder_.push(e),t;throw new Error("Techs must have a static canPlaySource method on them")},S.getTech=function(e){if(e)return S.techs_&&S.techs_[e]?S.techs_[e]:(e=p(e),window&&window.videojs&&window.videojs[e]?(d.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),window.videojs[e]):void 0)},S);function S(t,e){var i;return void 0===e&&(e=function(){}),(t=void 0===t?{}:t).reportTouchActivity=!1,(i=vn.call(this,null,t,e)||this).onDurationChange_=function(e){return i.onDurationChange(e)},i.trackProgress_=function(e){return i.trackProgress(e)},i.trackCurrentTime_=function(e){return i.trackCurrentTime(e)},i.stopTrackingCurrentTime_=function(e){return i.stopTrackingCurrentTime(e)},i.disposeSourceHandler_=function(e){return i.disposeSourceHandler(e)},i.queuedHanders_=new Set,i.hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),Hi.names.forEach(function(e){e=Hi[e],t&&t[e.getterName]&&(i[e.privateName]=t[e.getterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.preloadTextTracks=!1!==t.preloadTextTracks,i.autoRemoteTextTracks_=new Hi.text.ListClass,i.initTrackListeners(),t.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}Hi.names.forEach(function(e){var t=Hi[e];x.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),x.prototype.featuresVolumeControl=!0,x.prototype.featuresMuteControl=!0,x.prototype.featuresFullscreenResize=!1,x.prototype.featuresPlaybackRate=!1,x.prototype.featuresProgressEvents=!1,x.prototype.featuresSourceset=!1,x.prototype.featuresTimeupdateEvents=!1,x.prototype.featuresNativeTextTracks=!1,x.prototype.featuresVideoFrameCallback=!1,x.withSourceHandlers=function(r){r.registerSourceHandler=function(e,t){var i=(i=r.sourceHandlers)||(r.sourceHandlers=[]);void 0===t&&(t=i.length),i.splice(t,0,e)},r.canPlayType=function(e){for(var t,i=r.sourceHandlers||[],n=0;n<i.length;n++)if(t=i[n].canPlayType(e))return t;return""},r.selectSourceHandler=function(e,t){for(var i=r.sourceHandlers||[],n=0;n<i.length;n++)if(i[n].canHandleSource(e,t))return i[n];return null},r.canPlaySource=function(e,t){var i=r.selectSourceHandler(e,t);return i?i.canHandleSource(e,t):""},["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(e){var t=r.selectSourceHandler(e,this.options_);t||(r.nativeSourceHandler?t=r.nativeSourceHandler:d.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),t!==r.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=t.handleSource(e,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},c.registerComponent("Tech",x),x.registerTech("Tech",x),x.defaultTechOrder_=[];var _n={},bn={},Tn={};function wn(e,t,i){e.setTimeout(function(){return function i(n,e,r,s,a,o){void 0===n&&(n={}),void 0===a&&(a=[]),void 0===o&&(o=!1);var t=e=void 0===e?[]:e,e=t[0],l=t.slice(1);if("string"==typeof e)i(n,_n[e],r,s,a,o);else if(e){var c=function(e,t){var i=bn[e.id()],n=null;if(null==i)n=t(e),bn[e.id()]=[[t,n]];else{for(var r=0;r<i.length;r++){var s=(a=i[r])[0],a=a[1];s===t&&(n=a)}null===n&&(n=t(e),i.push([t,n]))}return n}(s,e);if(!c.setSource)return a.push(c),i(n,l,r,s,a,o);c.setSource(u({},n),function(e,t){return e?i(n,l,r,s,a,o):(a.push(c),void i(t,n.type===t.type?l:_n[t.type],r,s,a,o))})}else l.length?i(n,l,r,s,a,o):o?r(n,a):i(n,_n["*"],r,s,a,!0)}(t,_n[t.type],i,e)},1)}function xn(e,t,i,n){void 0===n&&(n=null);for(var r="call"+p(i),r=(n=(r=e.reduce(Cn(r),n))===Tn)?null:t[i](r),s=e,a=i,o=r,l=n,c=s.length-1;0<=c;c--){var d=s[c];d[a]&&d[a](l,o)}return r}var Sn={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},kn={setCurrentTime:1,setMuted:1,setVolume:1},En={play:1,pause:1};function Cn(i){return function(e,t){return e===Tn?Tn:t[i]?t[i](e):e}}function An(e){return e=ti(e=void 0===e?"":e),On[e.toLowerCase()]||""}var Pn,Ln,In,On={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};function Mn(e){var t;return e.type||(t=An(e.src))&&(e.type=t),e}function Dn(e,t,i){var n=f({createEl:!1},t),i=Pn.call(this,e,n,i)||this;if(t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(var r=0,s=t.playerOptions.techOrder;r<s.length;r++){var a=p(s[r]),o=x.getTech(a);if((o=a?o:c.getComponent(a))&&o.isSupported()){e.loadTech_(a);break}}return i}function jn(e,t){var i=Ln.call(this,e,t)||this;return i.options_.controlText&&i.controlText(i.options_.controlText),i.handleMouseOver_=function(e){return i.handleMouseOver(e)},i.handleMouseOut_=function(e){return i.handleMouseOut(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.emitTapEvents(),i.enable(),i}function Nn(e,t){var i=In.call(this,e,t)||this;return i.update(),i.update_=function(e){return i.update(e)},e.on("posterchange",i.update_),i}m(Dn,Pn=c),c.registerComponent("MediaLoader",n=Dn),m(jn,Ln=c),(O=jn.prototype).createEl=function(e,t,i){return void 0===e&&(e="div"),void 0===t&&(t={}),void 0===i&&(i={}),t=u({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&d.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),i=u({role:"button"},i),this.tabIndex_=t.tabIndex,(i=h(e,t,i)).appendChild(h("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i},O.dispose=function(){this.controlTextEl_=null,Ln.prototype.dispose.call(this)},O.createControlTextEl=function(e){return this.controlTextEl_=h("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},O.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var i=this.localize(e);this.controlText_=e,Te(this.controlTextEl_,i),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",i)},O.buildCSSClass=function(){return"vjs-control vjs-button "+Ln.prototype.buildCSSClass.call(this)},O.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},O.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},O.handleLanguagechange=function(){this.controlText(this.controlText_)},O.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},O.handleKeyDown=function(e){a.isEventKey(e,"Space")||a.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):Ln.prototype.handleKeyDown.call(this,e)},i=jn,c.registerComponent("ClickableComponent",i),c.registerComponent("PosterImage",(m(Nn,In=i),(O=Nn.prototype).dispose=function(){this.player().off("posterchange",this.update_),In.prototype.dispose.call(this)},O.createEl=function(){return h("div",{className:"vjs-poster",tabIndex:-1})},O.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},O.setSrc=function(e){this.el_.style.backgroundImage=e?'url("'+e+'")':""},O.handleClick=function(e){var t;this.player_.controls()&&(t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,!this.player_.tech(!0)||(le||se)&&t||this.player_.tech(!0).focus(),this.player_.paused()?$t(this.player_.play()):this.player_.pause())},Nn));var Rn,Bn,Un="#222",Fn={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function $n(e,t){var i;if(4===e.length)i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");i=e.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function Hn(e,t,i){try{e.style[t]=i}catch(e){}}function qn(){return Rn.apply(this,arguments)||this}function zn(i,e,t){function n(e){return r.updateDisplay(e)}var r=Bn.call(this,i,e,t)||this;return i.on("loadstart",function(e){return r.toggleDisplay(e)}),i.on("texttrackchange",n),i.on("loadedmetadata",function(e){return r.preselectTrack(e)}),i.ready(l(y(r),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)this.hide();else{i.on("fullscreenchange",n),i.on("playerresize",n),window.addEventListener("orientationchange",n),i.on("dispose",function(){return window.removeEventListener("orientationchange",n)});for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}})),r}c.registerComponent("TextTrackDisplay",(m(zn,Bn=c),(O=zn.prototype).preselectTrack=function(){for(var e,t,i,n={captions:1,subtitles:1},r=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,a=0;a<r.length;a++){var o=r[a];s&&s.enabled&&s.language&&s.language===o.language&&o.kind in n?i=o.kind!==s.kind&&i||o:s&&!s.enabled?t=e=i=null:o.default&&("descriptions"!==o.kind||e?o.kind in n&&!t&&(t=o):e=o)}i?i.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},O.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},O.createEl=function(){return Bn.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},O.clearDisplay=function(){"function"==typeof window.WebVTT&&window.WebVTT.processCues(window,[],this.el_)},O.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var i=[],n=0;n<e.length;++n){var r=e[n];"showing"===r.mode&&i.push(r)}this.updateForTrack(i)}else{for(var s=null,a=null,o=e.length;o--;){var l=e[o];"showing"===l.mode&&("descriptions"===l.kind?s=l:a=l)}a?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):s&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(s))}},O.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),i=e.activeCues,n=i.length;n--;){var r,s=i[n];s&&(r=s.displayState,t.color&&(r.firstChild.style.color=t.color),t.textOpacity&&Hn(r.firstChild,"color",$n(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(r.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Hn(r.firstChild,"backgroundColor",$n(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Hn(r,"backgroundColor",$n(t.windowColor,t.windowOpacity)):r.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?r.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Un:"raised"===t.edgeStyle?r.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Un:"depressed"===t.edgeStyle?r.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Un:"uniform"===t.edgeStyle&&(r.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Un)),t.fontPercent&&1!==t.fontPercent&&(s=window.parseFloat(r.style.fontSize),r.style.fontSize=s*t.fontPercent+"px",r.style.height="auto",r.style.top="auto"),t.fontFamily)&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?r.firstChild.style.fontVariant="small-caps":r.firstChild.style.fontFamily=Fn[t.fontFamily])}},O.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof window.WebVTT&&!e.every(function(e){return!e.activeCues})){for(var t=[],i=0;i<e.length;++i)for(var n=e[i],r=0;r<n.activeCues.length;++r)t.push(n.activeCues[r]);window.WebVTT.processCues(window,t,this.el_);for(var s=0;s<e.length;++s){for(var a=e[s],o=0;o<a.activeCues.length;++o){var l=a.activeCues[o].displayState;Se(l,"vjs-text-track-cue"),Se(l,"vjs-text-track-cue-"+(a.language||s)),a.language&&Le(l,"lang",a.language)}this.player_.textTrackSettings&&this.updateDisplayState(a)}}},zn)),c.registerComponent("LoadingSpinner",(m(qn,Rn=c),qn.prototype.createEl=function(){var e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),e=h("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])});return(t=Rn.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})).appendChild(e),t},qn));m(Kn,Wn=i),(O=Kn.prototype).createEl=function(e,t,i){return void 0===t&&(t={}),void 0===i&&(i={}),(i=h("button",t=u({className:this.buildCSSClass()},t),i=u({type:"button"},i))).appendChild(h("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i},O.addChild=function(e,t){void 0===t&&(t={});var i=this.constructor.name;return d.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),c.prototype.addChild.call(this,e,t)},O.enable=function(){Wn.prototype.enable.call(this),this.el_.removeAttribute("disabled")},O.disable=function(){Wn.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},O.handleKeyDown=function(e){a.isEventKey(e,"Space")||a.isEventKey(e,"Enter")?e.stopPropagation():Wn.prototype.handleKeyDown.call(this,e)};var Wn,Vn,Xn,Gn,Yn=Kn;function Kn(){return Wn.apply(this,arguments)||this}function Qn(e,t){var i=Vn.call(this,e,t)||this;return i.mouseused_=!1,i.on("mousedown",function(e){return i.handleMouseDown(e)}),i}function Jn(e,t){return(e=Xn.call(this,e,t)||this).controlText(t&&t.controlText||e.localize("Close")),e}function Zn(e,t){var i=Gn.call(this,e,t=void 0===t?{}:t)||this;return t.replay=void 0===t.replay||t.replay,i.on(e,"play",function(e){return i.handlePlay(e)}),i.on(e,"pause",function(e){return i.handlePause(e)}),t.replay&&i.on(e,"ended",function(e){return i.handleEnded(e)}),i}function er(e,t){e=e<0?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600),s=Math.floor(t/60%60),t=Math.floor(t/3600);return(r=0<(r=isNaN(e)||e===1/0?n=i="-":r)||0<t?r+":":"")+(n=((r||10<=s)&&n<10?"0"+n:n)+":")+(i<10?"0"+i:i)}c.registerComponent("Button",Yn),m(Qn,Vn=Yn),(O=Qn.prototype).buildCSSClass=function(){return"vjs-big-play-button"},O.handleClick=function(e){var t,i,n=this.player_.play();this.mouseused_&&e.clientX&&e.clientY?(t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,$t(n),!this.player_.tech(!0)||(le||se)&&t||this.player_.tech(!0).focus()):(i=(t=this.player_.getChild("controlBar"))&&t.getChild("playToggle"))?(t=function(){return i.focus()},Ft(n)?n.then(t,function(){}):this.setTimeout(t,1)):this.player_.tech(!0).focus()},O.handleKeyDown=function(e){this.mouseused_=!1,Vn.prototype.handleKeyDown.call(this,e)},O.handleMouseDown=function(e){this.mouseused_=!0},(g=Qn).prototype.controlText_="Play Video",c.registerComponent("BigPlayButton",g),c.registerComponent("CloseButton",(m(Jn,Xn=Yn),(O=Jn.prototype).buildCSSClass=function(){return"vjs-close-button "+Xn.prototype.buildCSSClass.call(this)},O.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},O.handleKeyDown=function(e){a.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):Xn.prototype.handleKeyDown.call(this,e)},Jn)),m(Zn,Gn=Yn),(O=Zn.prototype).buildCSSClass=function(){return"vjs-play-control "+Gn.prototype.buildCSSClass.call(this)},O.handleClick=function(e){this.player_.paused()?$t(this.player_.play()):this.player_.pause()},O.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},O.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},O.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},O.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(e){return t.handleSeeked(e)})},(v=Zn).prototype.controlText_="Play",c.registerComponent("PlayToggle",v);var tr,ir,nr,rr,sr,ar,or,lr,cr,dr,ur,hr,pr,fr,mr,gr,vr,yr,_r,br,Tr,wr,xr,Sr=er;function kr(e,t){return Sr(e,t=void 0===t?e:t)}function Er(e,t){var i=tr.call(this,e,t)||this;return i.on(e,["timeupdate","ended"],function(e){return i.updateContent(e)}),i.updateTextNode_(),i}function Cr(){return ir.apply(this,arguments)||this}function Ar(e,t){var i=nr.call(this,e,t)||this,t=function(e){return i.updateContent(e)};return i.on(e,"durationchange",t),i.on(e,"loadstart",t),i.on(e,"loadedmetadata",t),i}function Pr(){return rr.apply(this,arguments)||this}function Lr(e,t){var i=sr.call(this,e,t)||this;return i.on(e,"durationchange",function(e){return i.updateContent(e)}),i}function Ir(e,t){var i=ar.call(this,e,t)||this;return i.updateShowing(),i.on(i.player(),"durationchange",function(e){return i.updateShowing(e)}),i}function Or(e,t){var i=or.call(this,e,t)||this;return i.updateLiveEdgeStatus(),i.player_.liveTracker&&(i.updateLiveEdgeStatusHandler_=function(e){return i.updateLiveEdgeStatus(e)},i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatusHandler_)),i}function Mr(e,t,i){return e=Number(e),Math.min(i,Math.max(t,isNaN(e)?t:e))}function Dr(e,t){var i=lr.call(this,e,t)||this;return i.handleMouseDown_=function(e){return i.handleMouseDown(e)},i.handleMouseUp_=function(e){return i.handleMouseUp(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleMouseMove_=function(e){return i.handleMouseMove(e)},i.update_=function(e){return i.update(e)},i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}function jr(e,t){return Mr(e/t*100,0,100).toFixed(2)+"%"}function Nr(e,t){return(t=cr.call(this,e,t)||this).update=ht(l(y(t),t.update),30),t}function Rr(e,t){var i=dr.call(this,e,t)||this;return i.partEls_=[],i.on(e,"progress",function(e){return i.update(e)}),i}function Br(e,t){return(t=ur.call(this,e,t)||this).update=ht(l(y(t),t.update),30),t}function Ur(e,t){return(t=hr.call(this,e,t)||this).update=ht(l(y(t),t.update),30),t}function Fr(e,t){return(t=pr.call(this,e,t)||this).setEventHandlers_(),t}function $r(e,t){var i=fr.call(this,e,t)||this;return i.handleMouseMove=ht(l(y(i),i.handleMouseMove),30),i.throttledHandleMouseSeek=ht(l(y(i),i.handleMouseSeek),30),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.handleMouseDownHandler_=function(e){return i.handleMouseDown(e)},i.enable(),i}function Hr(e,t){var i=mr.call(this,e,t)||this;return i.on(e,["enterpictureinpicture","leavepictureinpicture"],function(e){return i.handlePictureInPictureChange(e)}),i.on(e,["disablepictureinpicturechanged","loadedmetadata"],function(e){return i.handlePictureInPictureEnabledChange(e)}),i.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){"audio"===e.currentType().substring(0,5)||e.audioPosterMode()||e.audioOnlyMode()?(e.isInPictureInPicture()&&e.exitPictureInPicture(),i.hide()):i.show()}),i.disable(),i}function qr(e,t){var i=gr.call(this,e,t)||this;return i.on(e,"fullscreenchange",function(e){return i.handleFullscreenChange(e)}),!1===document[e.fsApi_.fullscreenEnabled]&&i.disable(),i}function zr(e,t){return(t=vr.call(this,e,t)||this).update=ht(l(y(t),t.update),30),t}function Wr(){return yr.apply(this,arguments)||this}function Vr(e,t){return(t=_r.call(this,e,t)||this).update=ht(l(y(t),t.update),30),t}function Xr(e,t){var i=br.call(this,e,t)||this;return i.on("slideractive",function(e){return i.updateLastVolume_(e)}),i.on(e,"volumechange",function(e){return i.updateARIAAttributes(e)}),e.ready(function(){return i.updateARIAAttributes()}),i}function Gr(e,t){var i,n,r;return(t=void 0===t?{}:t).vertical=t.vertical||!1,void 0!==t.volumeBar&&!Z(t.volumeBar)||(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),i=Tr.call(this,e,t)||this,n=y(i),(r=e).tech_&&!r.tech_.featuresVolumeControl&&n.addClass("vjs-hidden"),n.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")}),i.throttledHandleMouseMove=ht(l(y(i),i.handleMouseMove),30),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.on("mousedown",function(e){return i.handleMouseDown(e)}),i.on("touchstart",function(e){return i.handleMouseDown(e)}),i.on("mousemove",function(e){return i.handleMouseMove(e)}),i.on(i.volumeBar,["focus","slideractive"],function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")}),i.on(i.volumeBar,["blur","sliderinactive"],function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")}),i}function Yr(e,t){var i,n=wr.call(this,e,t)||this,r=y(n);return(i=e).tech_&&!i.tech_.featuresMuteControl&&r.addClass("vjs-hidden"),r.on(i,"loadstart",function(){i.tech_.featuresMuteControl?r.removeClass("vjs-hidden"):r.addClass("vjs-hidden")}),n.on(e,["loadstart","volumechange"],function(e){return n.update(e)}),n}function Kr(e,t){var i;return void 0!==(t=void 0===t?{}:t).inline?t.inline=t.inline:t.inline=!0,void 0!==t.volumeControl&&!Z(t.volumeControl)||(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),(i=xr.call(this,e,t)||this).handleKeyPressHandler_=function(e){return i.handleKeyPress(e)},i.on(e,["loadstart"],function(e){return i.volumePanelState_(e)}),i.on(i.muteToggle,"keyup",function(e){return i.handleKeyPress(e)}),i.on(i.volumeControl,"keyup",function(e){return i.handleVolumeControlKeyUp(e)}),i.on("keydown",function(e){return i.handleKeyPress(e)}),i.on("mouseover",function(e){return i.handleMouseOver(e)}),i.on("mouseout",function(e){return i.handleMouseOut(e)}),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}m(Er,tr=c),(O=Er.prototype).createEl=function(){var e=this.buildCSSClass(),t=tr.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control"}),i=h("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"Ã "},{role:"presentation"});return t.appendChild(i),this.contentEl_=h("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),t.appendChild(this.contentEl_),t},O.dispose=function(){this.contentEl_=null,this.textNode_=null,tr.prototype.dispose.call(this)},O.updateTextNode_=function(e){var t=this;e=kr(e=void 0===e?0:e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){var e;t.contentEl_&&((e=t.textNode_)&&t.contentEl_.firstChild!==e&&(e=null,d.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=document.createTextNode(t.formattedTime_),t.textNode_)&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_))}))},O.updateContent=function(e){},(_=Er).prototype.labelText_="Time",_.prototype.controlText_="Time",c.registerComponent("TimeDisplay",_),m(Cr,ir=_),(O=Cr.prototype).buildCSSClass=function(){return"vjs-current-time"},O.updateContent=function(e){var t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateTextNode_(t)},(b=Cr).prototype.labelText_="Current Time",b.prototype.controlText_="Current Time",c.registerComponent("CurrentTimeDisplay",b),m(Ar,nr=_),(O=Ar.prototype).buildCSSClass=function(){return"vjs-duration"},O.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},(s=Ar).prototype.labelText_="Duration",s.prototype.controlText_="Duration",c.registerComponent("DurationDisplay",s),c.registerComponent("TimeDivider",(m(Pr,rr=c),Pr.prototype.createEl=function(){var e=rr.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=rr.prototype.createEl.call(this,"div"),i=rr.prototype.createEl.call(this,"span",{textContent:"/"});return t.appendChild(i),e.appendChild(t),e},Pr)),m(Lr,sr=_),(O=Lr.prototype).buildCSSClass=function(){return"vjs-remaining-time"},O.createEl=function(){var e=sr.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&e.insertBefore(h("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},O.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},(e=Lr).prototype.labelText_="Remaining Time",e.prototype.controlText_="Remaining Time",c.registerComponent("RemainingTimeDisplay",e),c.registerComponent("LiveDisplay",(m(Ir,ar=c),(O=Ir.prototype).createEl=function(){var e=ar.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=h("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(h("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"Ã "})),this.contentEl_.appendChild(document.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e},O.dispose=function(){this.contentEl_=null,ar.prototype.dispose.call(this)},O.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},Ir)),m(Or,or=Yn),(O=Or.prototype).createEl=function(){var e=or.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=h("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},O.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},O.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},O.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,or.prototype.dispose.call(this)},(T=Or).prototype.controlText_="Seek to live, currently playing live",c.registerComponent("SeekToLive",T),m(Dr,lr=c),(O=Dr.prototype).enabled=function(){return this.enabled_},O.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},O.disable=function(){var e;this.enabled()&&(e=this.bar.el_.ownerDocument,this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1)},O.createEl=function(e,t,i){return void 0===i&&(i={}),(t=void 0===t?{}:t).className=t.className+" vjs-slider",t=u({tabIndex:0},t),i=u({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),lr.prototype.createEl.call(this,e,t,i)},O.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||ae||e.preventDefault(),Oe(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},O.handleMouseMove=function(e){},O.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;Me(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},O.update=function(){var t,i=this;if(this.el_&&this.bar)return(t=this.getProgress())!==this.progress_&&(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",function(){var e=i.vertical()?"height":"width";i.bar.el().style[e]=(100*t).toFixed(2)+"%"})),t},O.getProgress=function(){return Number(Mr(this.getPercent(),0,1).toFixed(4))},O.calculateDistance=function(e){return e=Ne(this.el_,e),this.vertical()?e.y:e.x},O.handleKeyDown=function(e){a.isEventKey(e,"Left")||a.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):a.isEventKey(e,"Right")||a.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):lr.prototype.handleKeyDown.call(this,e)},O.handleClick=function(e){e.stopPropagation(),e.preventDefault()},O.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},qi=Dr,c.registerComponent("Slider",qi),c.registerComponent("LoadProgressBar",(m(Rr,dr=c),(O=Rr.prototype).createEl=function(){var e=dr.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),t=h("span",{className:"vjs-control-text"}),i=h("span",{textContent:this.localize("Loaded")}),n=document.createTextNode(": ");return this.percentageEl_=h("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(i),t.appendChild(n),t.appendChild(this.percentageEl_),e},O.dispose=function(){this.partEls_=null,this.percentageEl_=null,dr.prototype.dispose.call(this)},O.update=function(e){var c=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var e=c.player_.liveTracker,t=c.player_.buffered(),e=e&&e.isLive()?e.seekableEnd():c.player_.duration(),i=c.player_.bufferedEnd(),n=c.partEls_,e=jr(i,e);c.percent_!==e&&(c.el_.style.width=e,Te(c.percentageEl_,e),c.percent_=e);for(var r=0;r<t.length;r++){var s=t.start(r),a=t.end(r),o=n[r];o||(o=c.el_.appendChild(h()),n[r]=o),o.dataset.start===s&&o.dataset.end===a||(o.dataset.start=s,o.dataset.end=a,o.style.left=jr(s,i),o.style.width=jr(a-s,i))}for(var l=n.length;l>t.length;l--)c.el_.removeChild(n[l-1]);n.length=t.length})},Rr)),c.registerComponent("TimeTooltip",(m(Nr,cr=c),(O=Nr.prototype).createEl=function(){return cr.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},O.update=function(e,t,i){var n=je(this.el_),r=De(this.player_.el()),s=e.width*t;r&&n&&(t=e.left-r.left+s,r=e.width-s+(r.right-e.right),t<(e=n.width/2)?e+=e-t:r<e&&(e=r),e<0?e=0:e>n.width&&(e=n.width),e=Math.round(e),this.el_.style.right="-"+e+"px",this.write(i))},O.write=function(e){Te(this.el_,e)},O.updateTime=function(n,r,s,a){var o=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var e,t,i=o.player_.duration(),i=o.player_.liveTracker&&o.player_.liveTracker.isLive()?((t=(e=o.player_.liveTracker.liveWindow())-r*e)<1?"":"-")+kr(t,e):kr(s,i);o.update(n,r,i),a&&a()})},Nr)),m(Br,ur=c),(O=Br.prototype).createEl=function(){return ur.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},O.update=function(e,t){var i,n=this.getChild("timeTooltip");n&&(i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),n.updateTime(e,t,i))},(w=Br).prototype.options_={children:[]},pe||te||w.prototype.options_.children.push("timeTooltip"),c.registerComponent("PlayProgressBar",w),m(Ur,hr=c),(O=Ur.prototype).createEl=function(){return hr.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},O.update=function(e,t){var i=this,n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,function(){i.el_.style.left=e.width*t+"px"})},(n=Ur).prototype.options_={children:["timeTooltip"]},c.registerComponent("MouseTimeDisplay",n),m(Fr,pr=qi),(O=Fr.prototype).setEventHandlers_=function(){var t=this;this.update_=l(this,this.update),this.update=ht(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(e){return t.enableInterval_(e)},this.disableIntervalHandler_=function(e){return t.disableInterval_(e)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document&&"visibilityState"in document&&this.on(document,"visibilitychange",this.toggleVisibility_)},O.toggleVisibility_=function(e){"hidden"===document.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},O.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},O.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},O.createEl=function(){return pr.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},O.update=function(e){var n,r=this;if("hidden"!==document.visibilityState)return n=pr.prototype.update.call(this),this.requestNamedAnimationFrame("SeekBar#update",function(){var e=r.player_.ended()?r.player_.duration():r.getCurrentTime_(),t=r.player_.liveTracker,i=r.player_.duration();t&&t.isLive()&&(i=r.player_.liveTracker.liveCurrentTime()),r.percent_!==n&&(r.el_.setAttribute("aria-valuenow",(100*n).toFixed(2)),r.percent_=n),r.currentTime_===e&&r.duration_===i||(r.el_.setAttribute("aria-valuetext",r.localize("progress bar timing: currentTime={1} duration={2}",[kr(e,i),kr(i,i)],"{1} of {2}")),r.currentTime_=e,r.duration_=i),r.bar&&r.bar.update(De(r.el()),r.getProgress())}),n},O.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},O.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},O.getPercent=function(){var e,t=this.getCurrentTime_(),i=this.player_.liveTracker;return i&&i.isLive()?(e=(t-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},O.handleMouseDown=function(e){He(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),pr.prototype.handleMouseDown.call(this,e))},O.handleMouseMove=function(e,t){if(void 0===t&&(t=!1),He(e)){t||this.player_.scrubbing()||this.player_.scrubbing(!0);var i=this.calculateDistance(e),n=this.player_.liveTracker;if(n&&n.isLive()){if(.99<=i)return void n.seekToLiveEdge();var r,t=n.seekableStart();if((r=(r=(e=n.liveCurrentTime())<=(r=t+i*n.liveWindow())?e:r)<=t?t+.1:r)===1/0)return}else(r=i*this.player_.duration())===this.player_.duration()&&(r-=.1);this.userSeek_(r)}},O.enable=function(){pr.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},O.disable=function(){pr.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},O.handleMouseUp=function(e){pr.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?$t(this.player_.play()):this.update_()},O.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},O.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},O.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},O.handleKeyDown=function(e){var t,i=this.player_.liveTracker;a.isEventKey(e,"Space")||a.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.handleAction(e)):a.isEventKey(e,"Home")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(0)):a.isEventKey(e,"End")?(e.preventDefault(),e.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration())):/^[0-9]$/.test(a(e))?(e.preventDefault(),e.stopPropagation(),t=10*(a.codes[a(e)]-a.codes[0])/100,i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*t):this.userSeek_(this.player_.duration()*t)):a.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):a.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):pr.prototype.handleKeyDown.call(this,e)},O.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document&&"visibilityState"in document&&this.off(document,"visibilitychange",this.toggleVisibility_),pr.prototype.dispose.call(this)},(g=Fr).prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},pe||te||g.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),c.registerComponent("SeekBar",g),m($r,fr=c),(O=$r.prototype).createEl=function(){return fr.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},O.handleMouseMove=function(e){var t,i,n,r,s=this.getChild("seekBar");s&&(t=s.getChild("playProgressBar"),i=s.getChild("mouseTimeDisplay"),t||i)&&(r=je(n=s.el()),e=Mr(e=Ne(n,e).x,0,1),i&&i.update(r,e),t)&&t.update(r,s.getProgress())},O.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},O.enabled=function(){return this.enabled_},O.disable=function(){var e;this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())&&(e=this.getChild("seekBar"),this.player_.scrubbing(!1),e.videoWasPlaying)&&$t(this.player_.play())},O.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},O.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},O.handleMouseDown=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},O.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},(v=$r).prototype.options_={children:["seekBar"]},c.registerComponent("ProgressControl",v),m(Hr,mr=Yn),(O=Hr.prototype).buildCSSClass=function(){return"vjs-picture-in-picture-control "+mr.prototype.buildCSSClass.call(this)},O.handlePictureInPictureEnabledChange=function(){document.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},O.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},O.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},(b=Hr).prototype.controlText_="Picture-in-Picture",c.registerComponent("PictureInPictureToggle",b),m(qr,gr=Yn),(O=qr.prototype).buildCSSClass=function(){return"vjs-fullscreen-control "+gr.prototype.buildCSSClass.call(this)},O.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},O.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},(s=qr).prototype.controlText_="Fullscreen",c.registerComponent("FullscreenToggle",s),c.registerComponent("VolumeLevel",(m(Wr,yr=c),Wr.prototype.createEl=function(){var e=yr.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return e.appendChild(yr.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),e},Wr)),c.registerComponent("VolumeLevelTooltip",(m(zr,vr=c),(O=zr.prototype).createEl=function(){return vr.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},O.update=function(e,t,i,n){if(!i){var r=De(this.el_),s=De(this.player_.el()),i=e.width*t;if(!s||!r)return;t=e.left-s.left+i,s=e.width-i+(s.right-e.right),t<(e=r.width/2)?e+=e-t:s<e&&(e=s),e<0?e=0:e>r.width&&(e=r.width),this.el_.style.right="-"+e+"px"}this.write(n+"%")},O.write=function(e){Te(this.el_,e)},O.updateVolume=function(e,t,i,n,r){var s=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){s.update(e,t,i,n.toFixed(0)),r&&r()})},zr)),m(Vr,_r=c),(O=Vr.prototype).createEl=function(){return _r.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},O.update=function(e,t,i){var n=this,r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,i,r,function(){i?n.el_.style.bottom=e.height*t+"px":n.el_.style.left=e.width*t+"px"})},(_=Vr).prototype.options_={children:["volumeLevelTooltip"]},c.registerComponent("MouseVolumeLevelDisplay",_),m(Xr,br=qi),(O=Xr.prototype).createEl=function(){return br.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},O.handleMouseDown=function(e){He(e)&&br.prototype.handleMouseDown.call(this,e)},O.handleMouseMove=function(e){var t,i,n,r=this.getChild("mouseVolumeLevelDisplay");r&&(t=De(n=this.el()),i=this.vertical(),n=Ne(n,e),n=Mr(i?n.y:n.x,0,1),r.update(t,n,i)),He(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},O.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},O.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},O.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},O.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},O.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},O.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},O.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},(e=Xr).prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},pe||te||e.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),e.prototype.playerEvent="volumechange",c.registerComponent("VolumeBar",e),m(Gr,Tr=c),(O=Gr.prototype).createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),Tr.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},O.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},O.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},O.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},(T=Gr).prototype.options_={children:["volumeBar"]},c.registerComponent("VolumeControl",T),m(Yr,wr=Yn),(O=Yr.prototype).buildCSSClass=function(){return"vjs-mute-control "+wr.prototype.buildCSSClass.call(this)},O.handleClick=function(e){var t=this.player_.volume(),i=this.player_.lastVolume_();0===t?(this.player_.volume(i<.1?.1:i),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},O.update=function(e){this.updateIcon_(),this.updateControlText_()},O.updateIcon_=function(){var e=this.player_.volume(),t=3;pe&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var i=0;i<4;i++)ke(this.el_,"vjs-vol-"+i);Se(this.el_,"vjs-vol-"+t)},O.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},(w=Yr).prototype.controlText_="Mute",c.registerComponent("MuteToggle",w),m(Kr,xr=c),(O=Kr.prototype).sliderActive_=function(){this.addClass("vjs-slider-active")},O.sliderInactive_=function(){this.removeClass("vjs-slider-active")},O.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},O.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),xr.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},O.dispose=function(){this.handleMouseOut(),xr.prototype.dispose.call(this)},O.handleVolumeControlKeyUp=function(e){a.isEventKey(e,"Esc")&&this.muteToggle.focus()},O.handleMouseOver=function(e){this.addClass("vjs-hover"),ot(document,"keyup",this.handleKeyPressHandler_)},O.handleMouseOut=function(e){this.removeClass("vjs-hover"),lt(document,"keyup",this.handleKeyPressHandler_)},O.handleKeyPress=function(e){a.isEventKey(e,"Esc")&&this.handleMouseOut()},(n=Kr).prototype.options_={children:["muteToggle","volumeControl"]},c.registerComponent("VolumePanel",n);m(ts,Qr=c),(O=ts.prototype).addEventListenerForItem=function(e){e instanceof c&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},O.removeEventListenerForItem=function(e){e instanceof c&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},O.removeChild=function(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),Qr.prototype.removeChild.call(this,e)},O.addItem=function(e){(e=this.addChild(e))&&this.addEventListenerForItem(e)},O.createEl=function(){var e=this.options_.contentElType||"ul";return this.contentEl_=h(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu"),(e=Qr.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"})).appendChild(this.contentEl_),ot(e,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),e},O.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,Qr.prototype.dispose.call(this)},O.handleBlur=function(e){var t=e.relatedTarget||document.activeElement;this.children().some(function(e){return e.el()===t})||(e=this.menuButton_)&&e.buttonPressed_&&t!==e.el().firstChild&&e.unpressButton()},O.handleTapClick=function(t){var e;this.menuButton_&&(this.menuButton_.unpressButton(),e=this.children(),Array.isArray(e))&&(e=e.filter(function(e){return e.el()===t.target})[0])&&"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus()},O.handleKeyDown=function(e){a.isEventKey(e,"Left")||a.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(a.isEventKey(e,"Right")||a.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},O.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},O.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},O.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())};var Qr,Jr,Zr,es=ts;function ts(e,t){var i=Qr.call(this,e,t)||this;return t&&(i.menuButton_=t.menuButton),i.focusedChild_=-1,i.on("keydown",function(e){return i.handleKeyDown(e)}),i.boundHandleBlur_=function(e){return i.handleBlur(e)},i.boundHandleTapClick_=function(e){return i.handleTapClick(e)},i}function is(e,t){var i;return(i=Jr.call(this,e,t=void 0===t?{}:t)||this).menuButton_=new Yn(e,t),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true"),t=Yn.prototype.buildCSSClass(),i.menuButton_.el_.className=i.buildCSSClass()+" "+t,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0,t=function(e){return i.handleClick(e)},i.handleMenuKeyUp_=function(e){return i.handleMenuKeyUp(e)},i.on(i.menuButton_,"tap",t),i.on(i.menuButton_,"click",t),i.on(i.menuButton_,"keydown",function(e){return i.handleKeyDown(e)}),i.on(i.menuButton_,"mouseenter",function(){i.addClass("vjs-hover"),i.menu.show(),ot(document,"keyup",i.handleMenuKeyUp_)}),i.on("mouseleave",function(e){return i.handleMouseLeave(e)}),i.on("keydown",function(e){return i.handleSubmenuKeyDown(e)}),i}function ns(e,t){var i,n=t.tracks;return(t=Zr.call(this,e,t)||this).items.length<=1&&t.hide(),n?(i=l(y(t),t.update),n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),n.addEventListener("labelchange",i),t.player_.on("ready",i),t.player_.on("dispose",function(){n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i),n.removeEventListener("labelchange",i)}),t):y(t)}c.registerComponent("Menu",es),m(is,Jr=c),(O=is.prototype).update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},O.createMenu=function(){var e,t=new es(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title&&(e=h("li",{className:"vjs-menu-title",textContent:p(this.options_.title),tabIndex:-1}),e=new c(this.player_,{el:e}),t.addItem(e)),this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)t.addItem(this.items[i]);return t},O.createItems=function(){},O.createEl=function(){return Jr.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},O.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+Yn.prototype.buildCSSClass()+" "+Jr.prototype.buildCSSClass.call(this)},O.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+Jr.prototype.buildCSSClass.call(this)},O.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},O.dispose=function(){this.handleMouseLeave(),Jr.prototype.dispose.call(this)},O.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},O.handleMouseLeave=function(e){this.removeClass("vjs-hover"),lt(document,"keyup",this.handleMenuKeyUp_)},O.focus=function(){this.menuButton_.focus()},O.blur=function(){this.menuButton_.blur()},O.handleKeyDown=function(e){a.isEventKey(e,"Esc")||a.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),a.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):!a.isEventKey(e,"Up")&&!a.isEventKey(e,"Down")||this.buttonPressed_||(e.preventDefault(),this.pressButton())},O.handleMenuKeyUp=function(e){(a.isEventKey(e,"Esc")||a.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},O.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},O.handleSubmenuKeyDown=function(e){(a.isEventKey(e,"Esc")||a.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),a.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},O.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),pe&&_e()||this.menu.focus())},O.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},O.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},O.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},g=is,c.registerComponent("MenuButton",g),m(ns,Zr=g),v=ns,c.registerComponent("TrackButton",v);var rs,ss=["Tab","Esc","Up","Down","Right","Left"],b=(m(as,rs=i),(O=as.prototype).createEl=function(e,t,i){return this.nonIconControl=!0,(i=rs.prototype.createEl.call(this,"li",u({className:"vjs-menu-item",tabIndex:-1},t),i)).replaceChild(h("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),i.querySelector(".vjs-icon-placeholder")),i},O.handleKeyDown=function(t){ss.some(function(e){return a.isEventKey(t,e)})||rs.prototype.handleKeyDown.call(this,t)},O.handleClick=function(e){this.selected(!0)},O.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},as);function as(e,t){return(e=rs.call(this,e,t)||this).selectable=t.selectable,e.isSelected_=t.selected||!1,e.multiSelectable=t.multiSelectable,e.selected(e.isSelected_),e.selectable?e.multiSelectable?e.el_.setAttribute("role","menuitemcheckbox"):e.el_.setAttribute("role","menuitemradio"):e.el_.setAttribute("role","menuitem"),e}c.registerComponent("MenuItem",b);m(cs,os=b),(O=cs.prototype).handleClick=function(e){var t=this.track,i=this.player_.textTracks();if(os.prototype.handleClick.call(this,e),i)for(var n=0;n<i.length;n++){var r=i[n];-1!==this.kinds.indexOf(r.kind)&&(r===t?"showing"!==r.mode&&(r.mode="showing"):"disabled"!==r.mode&&(r.mode="disabled"))}},O.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},O.handleSelectedLanguageChange=function(e){var t;"showing"!==this.track.mode||(t=this.player_.cache_.selectedLanguage)&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind})},O.dispose=function(){this.track=null,os.prototype.dispose.call(this)};var os,ls=cs;function cs(e,t){var n,i,r=t.track,s=e.textTracks();function a(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(y(n),t)}function o(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleSelectedLanguageChange.apply(y(n),t)}return t.label=r.label||r.language||"Unknown",t.selected="showing"===r.mode,(n=os.call(this,e,t)||this).track=r,n.kinds=(t.kinds||[t.kind||n.track.kind]).filter(Boolean),e.on(["loadstart","texttrackchange"],a),s.addEventListener("change",a),s.addEventListener("selectedlanguagechange",o),n.on("dispose",function(){e.off(["loadstart","texttrackchange"],a),s.removeEventListener("change",a),s.removeEventListener("selectedlanguagechange",o)}),void 0===s.onchange&&n.on(["tap","click"],function(){if("object"!=typeof window.Event)try{i=new window.Event("change")}catch(e){}i||(i=document.createEvent("Event")).initEvent("change",!0,!0),s.dispatchEvent(i)}),n.handleTracksChange(),n}c.registerComponent("TextTrackMenuItem",ls);m(ps,ds=ls),(O=ps.prototype).handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var s=t[n];if(-1<this.options_.kinds.indexOf(s.kind)&&"showing"===s.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},O.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var s=t[n];if(-1<["captions","descriptions","subtitles"].indexOf(s.kind)&&"showing"===s.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})};var ds,us,hs=ps;function ps(e,t){return t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,ds.call(this,e,t)||this}function fs(e,t){return(t=void 0===t?{}:t).tracks=e.textTracks(),us.call(this,e,t)||this}c.registerComponent("OffTextTrackMenuItem",hs),m(fs,us=v),fs.prototype.createItems=function(e,t){void 0===t&&(t=ls),this.label_&&(i=this.label_+" off"),(e=void 0===e?[]:e).push(new hs(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var i,n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<n.length;r++){var s,a=n[r];-1<this.kinds_.indexOf(a.kind)&&((s=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1})).addClass("vjs-"+a.kind+"-menu-item"),e.push(s))}return e},s=fs,c.registerComponent("TextTrackButton",s);m(bs,ms=b),bs.prototype.handleClick=function(e){ms.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)};var ms,gs,vs,ys,_s=bs;function bs(e,t){var i=t.track,n=t.cue,r=e.currentTime();return t.selectable=!0,t.multiSelectable=!1,t.label=n.text,t.selected=n.startTime<=r&&r<n.endTime,(t=ms.call(this,e,t)||this).track=i,t.cue=n,t}function Ts(e,t,i){var n=gs.call(this,e,t,i)||this;return n.selectCurrentItem_=function(){n.items.forEach(function(e){e.selected(n.track_.activeCues[0]===e.cue)})},n}function ws(e,t,i){var i=vs.call(this,e,t,i)||this,n=e.textTracks(),r=l(y(i),i.handleTracksChange);return n.addEventListener("change",r),i.on("dispose",function(){n.removeEventListener("change",r)}),i}function xs(e,t,i){return ys.call(this,e,t,i)||this}c.registerComponent("ChaptersTrackMenuItem",_s),m(Ts,gs=s),(O=Ts.prototype).buildCSSClass=function(){return"vjs-chapters-button "+gs.prototype.buildCSSClass.call(this)},O.buildWrapperCSSClass=function(){return"vjs-chapters-button "+gs.prototype.buildWrapperCSSClass.call(this)},O.update=function(e){e&&e.track&&"chapters"!==e.track.kind||((e=this.findChaptersTrack())!==this.track_?(this.setTrack(e),gs.prototype.update.call(this)):(!this.items||e&&e.cues&&e.cues.length!==this.items.length)&&gs.prototype.update.call(this))},O.setTrack=function(e){var t;this.track_!==e&&(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_&&((t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null),this.track_=e,this.track_)&&(this.track_.mode="hidden",(e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&e.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_))},O.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var i=e[t];if(i.kind===this.kind_)return i}},O.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(p(this.kind_))},O.createMenu=function(){return this.options_.title=this.getMenuCaption(),gs.prototype.createMenu.call(this)},O.createItems=function(){var e=[];if(this.track_){var t=this.track_.cues;if(t)for(var i=0,n=t.length;i<n;i++){var r=t[i],r=new _s(this.player_,{track:this.track_,cue:r});e.push(r)}}return e},(_=Ts).prototype.kind_="chapters",_.prototype.controlText_="Chapters",c.registerComponent("ChaptersButton",_),m(ws,vs=s),(O=ws.prototype).handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!1,n=0,r=t.length;n<r;n++){var s=t[n];if(s.kind!==this.kind_&&"showing"===s.mode){i=!0;break}}i?this.disable():this.enable()},O.buildCSSClass=function(){return"vjs-descriptions-button "+vs.prototype.buildCSSClass.call(this)},O.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+vs.prototype.buildWrapperCSSClass.call(this)},(qi=ws).prototype.kind_="descriptions",qi.prototype.controlText_="Descriptions",c.registerComponent("DescriptionsButton",qi),m(xs,ys=s),(O=xs.prototype).buildCSSClass=function(){return"vjs-subtitles-button "+ys.prototype.buildCSSClass.call(this)},O.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+ys.prototype.buildWrapperCSSClass.call(this)},(e=xs).prototype.kind_="subtitles",e.prototype.controlText_="Subtitles",c.registerComponent("SubtitlesButton",e);m(Cs,Ss=ls),Cs.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()};var Ss,ks,Es=Cs;function Cs(e,t){return t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",(e=Ss.call(this,e,t)||this).addClass("vjs-texttrack-settings"),e.controlText(", opens "+t.kind+" settings dialog"),e}function As(e,t,i){return ks.call(this,e,t,i)||this}c.registerComponent("CaptionSettingsMenuItem",Es),m(As,ks=s),(O=As.prototype).buildCSSClass=function(){return"vjs-captions-button "+ks.prototype.buildCSSClass.call(this)},O.buildWrapperCSSClass=function(){return"vjs-captions-button "+ks.prototype.buildWrapperCSSClass.call(this)},O.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Es(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),ks.prototype.createItems.call(this,e)},(T=As).prototype.kind_="captions",T.prototype.controlText_="Captions",c.registerComponent("CaptionsButton",T);m(Os,Ps=ls),Os.prototype.createEl=function(e,t,i){return i=(t=Ps.prototype.createEl.call(this,e,t,i)).querySelector(".vjs-menu-item-text"),"captions"===this.options_.track.kind&&(i.appendChild(h("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(h("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),t};var Ps,Ls,Is=Os;function Os(){return Ps.apply(this,arguments)||this}function Ms(e,t){return(t=Ls.call(this,e,t=void 0===t?{}:t)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(t.player_.language_)&&(t.label_="captions"),t.menuButton_.controlText(p(t.label_)),t}c.registerComponent("SubsCapsMenuItem",Is),m(Ms,Ls=s),(O=Ms.prototype).buildCSSClass=function(){return"vjs-subs-caps-button "+Ls.prototype.buildCSSClass.call(this)},O.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+Ls.prototype.buildWrapperCSSClass.call(this)},O.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Es(this.player_,{kind:this.label_})),this.hideThreshold_+=1),Ls.prototype.createItems.call(this,e,Is)},(w=Ms).prototype.kinds_=["captions","subtitles"],w.prototype.controlText_="Subtitles",c.registerComponent("SubsCapsButton",w);m(Rs,Ds=b),(O=Rs.prototype).createEl=function(e,t,i){return i=(t=Ds.prototype.createEl.call(this,e,t,i)).querySelector(".vjs-menu-item-text"),"main-desc"===this.options_.track.kind&&(i.appendChild(h("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(h("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),t},O.handleClick=function(e){if(Ds.prototype.handleClick.call(this,e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var t=this.player_.audioTracks(),i=0;i<t.length;i++){var n=t[i];n!==this.track&&(n.enabled=n===this.track)}},O.handleTracksChange=function(e){this.selected(this.track.enabled)};var Ds,js,Ns=Rs;function Rs(e,t){var n,i=t.track,r=e.audioTracks();function s(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(y(n),t)}return t.label=i.label||i.language||"Unknown",t.selected=i.enabled,(n=Ds.call(this,e,t)||this).track=i,n.addClass("vjs-"+i.kind+"-menu-item"),r.addEventListener("change",s),n.on("dispose",function(){r.removeEventListener("change",s)}),n}function Bs(e,t){return(t=void 0===t?{}:t).tracks=e.audioTracks(),js.call(this,e,t)||this}c.registerComponent("AudioTrackMenuItem",Ns),m(Bs,js=v),(O=Bs.prototype).buildCSSClass=function(){return"vjs-audio-button "+js.prototype.buildCSSClass.call(this)},O.buildWrapperCSSClass=function(){return"vjs-audio-button "+js.prototype.buildWrapperCSSClass.call(this)},O.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),i=0;i<t.length;i++){var n=t[i];e.push(new Ns(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e},(n=Bs).prototype.controlText_="Audio Track",c.registerComponent("AudioTrackButton",n);m(Vs,Us=b),(O=Vs.prototype).handleClick=function(e){Us.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},O.update=function(e){this.selected(this.player().playbackRate()===this.rate)};var Us,Fs,$s,Hs,qs,zs,Ws=Vs;function Vs(e,t){var i,n=t.rate,r=parseFloat(n,10);return t.label=n,t.selected=r===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,(i=Us.call(this,e,t)||this).label=n,i.rate=r,i.on(e,"ratechange",function(e){return i.update(e)}),i}function Xs(e,t){var i=Fs.call(this,e,t)||this;return i.menuButton_.el_.setAttribute("aria-describedby",i.labelElId_),i.updateVisibility(),i.updateLabel(),i.on(e,"loadstart",function(e){return i.updateVisibility(e)}),i.on(e,"ratechange",function(e){return i.updateLabel(e)}),i.on(e,"playbackrateschange",function(e){return i.handlePlaybackRateschange(e)}),i}function Gs(){return $s.apply(this,arguments)||this}function Ys(){return Hs.apply(this,arguments)||this}function Ks(){return qs.apply(this,arguments)||this}function Qs(e,t){var i=zs.call(this,e,t)||this;return i.on(e,"error",function(e){return i.open(e)}),i}Ws.prototype.contentElType="button",c.registerComponent("PlaybackRateMenuItem",Ws),m(Xs,Fs=g),(O=Xs.prototype).createEl=function(){var e=Fs.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=h("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e},O.dispose=function(){this.labelEl_=null,Fs.prototype.dispose.call(this)},O.buildCSSClass=function(){return"vjs-playback-rate "+Fs.prototype.buildCSSClass.call(this)},O.buildWrapperCSSClass=function(){return"vjs-playback-rate "+Fs.prototype.buildWrapperCSSClass.call(this)},O.createItems=function(){for(var e=this.playbackRates(),t=[],i=e.length-1;0<=i;i--)t.push(new Ws(this.player(),{rate:e[i]+"x"}));return t},O.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},O.handleClick=function(e){var t=this.player().playbackRate(),i=this.playbackRates(),t=(i.indexOf(t)+1)%i.length;this.player().playbackRate(i[t])},O.handlePlaybackRateschange=function(e){this.update()},O.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},O.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},O.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},O.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},(i=Xs).prototype.controlText_="Playback Rate",c.registerComponent("PlaybackRateMenuButton",i),m(Gs,$s=c),(O=Gs.prototype).buildCSSClass=function(){return"vjs-spacer "+$s.prototype.buildCSSClass.call(this)},O.createEl=function(e,t,i){return void 0===e&&(e="div"),void 0===i&&(i={}),(t=void 0===t?{}:t).className||(t.className=this.buildCSSClass()),$s.prototype.createEl.call(this,e,t,i)},_=Gs,c.registerComponent("Spacer",_),c.registerComponent("CustomControlSpacer",(m(Ys,Hs=_),(O=Ys.prototype).buildCSSClass=function(){return"vjs-custom-control-spacer "+Hs.prototype.buildCSSClass.call(this)},O.createEl=function(){return Hs.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"Ã "})},Ys)),m(Ks,qs=c),Ks.prototype.createEl=function(){return qs.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},(qi=Ks).prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in document&&qi.prototype.options_.children.splice(qi.prototype.options_.children.length-1,0,"pictureInPictureToggle"),c.registerComponent("ControlBar",qi),m(Qs,zs=Wt),(O=Qs.prototype).buildCSSClass=function(){return"vjs-error-display "+zs.prototype.buildCSSClass.call(this)},O.content=function(){var e=this.player().error();return e?this.localize(e.message):""},(e=Qs).prototype.options_=Y({},Wt.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),c.registerComponent("ErrorDisplay",e);var Js,Zs,ea="vjs-text-track-settings",ta={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[T=["#000","Black"],g=["#FFF","White"],b=["#F00","Red"],v=["#0F0","Green"],s=["#00F","Blue"],i=["#FF0","Yellow"],n=["#F0F","Magenta"],w=["#0FF","Cyan"]]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[_=["1","Opaque"],qi=["0.5","Semi-Transparent"],e=["0","Transparent"]]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[g,T,b,v,s,i,n,w]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[_,qi]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[e,qi,_]}};function ia(e,t){if((e=t?t(e):e)&&"none"!==e)return e}function na(e,t){var i,n,r,s,a,o,l=t.ResizeObserver||window.ResizeObserver,c=f({createEl:!(l=null!==t.ResizeObserver&&l),reportTouchActivity:!1},t);return(i=Js.call(this,e,c)||this).ResizeObserver=t.ResizeObserver||window.ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=(n=function(){i.resizeHandler()},s=!(r=100),void 0===(a=y(i))&&(a=window),d.cancel=function(){a.clearTimeout(o),o=null},d),l?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(e.el())):(i.loadListener_=function(){var e,t;i.el_&&i.el_.contentWindow&&(e=i.debouncedHandler_,t=i.unloadListener_=function(){lt(this,"resize",e),lt(this,"unload",t),t=null},ot(i.el_.contentWindow,"unload",t),ot(i.el_.contentWindow,"resize",e))},i.one("load",i.loadListener_)),i;function d(){var e=this,t=arguments,i=function(){i=o=null,s||n.apply(e,t)};!o&&s&&n.apply(e,t),a.clearTimeout(o),o=a.setTimeout(i,r)}}function ra(e,t){var i;return t.temporary=!1,(i=Zs.call(this,e,t)||this).updateDisplay=i.updateDisplay.bind(y(i)),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=h("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===t.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.close()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),Q(ta,function(e){i.on(i.$(e.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}ta.windowColor.options=ta.backgroundColor.options,c.registerComponent("TextTrackSettings",(m(ra,Zs=Wt),(O=ra.prototype).dispose=function(){this.endDialog=null,Zs.prototype.dispose.call(this)},O.createElSelect_=function(e,t,i){var n=this;void 0===t&&(t=""),void 0===i&&(i="label");var r=(e=ta[e]).id.replace("%s",this.id_),s=[t,r].join(" ").trim();return["<"+i+' id="'+r+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(e.label),"</"+i+">",'<select aria-labelledby="'+s+'">'].concat(e.options.map(function(e){var t=r+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+t+'">',n.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},O.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},O.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},O.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},O.createElColors_=function(){return h("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},O.createElFont_=function(){return h("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},O.createElControls_=function(){var e=this.localize("restore all settings to the default values");return h("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},O.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},O.label=function(){return this.localize("Caption Settings Dialog")},O.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},O.buildCSSClass=function(){return Zs.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},O.getValues=function(){var i,r=this,n=function(e,t,i){var n=r.$(t.selector);return t=t.parser,void 0!==(t=ia(n.options[n.options.selectedIndex].value,t))&&(e[i]=t),e},e={};return G(i=ta).reduce(function(e,t){return n(e,i[t],t)},e)},O.setValues=function(a){var o=this;Q(ta,function(e,t){var i=o.$(e.selector),n=a[t],r=e.parser;if(n)for(var s=0;s<i.options.length;s++)if(ia(i.options[s].value,r)===n){i.selectedIndex=s;break}})},O.setDefaults=function(){var i=this;Q(ta,function(e){var t=e.hasOwnProperty("default")?e.default:0;i.$(e.selector).selectedIndex=t})},O.restoreSettings=function(){var e;try{e=JSON.parse(window.localStorage.getItem(ea))}catch(e){d.warn(e)}e&&this.setValues(e)},O.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?window.localStorage.setItem(ea,JSON.stringify(e)):window.localStorage.removeItem(ea)}catch(e){d.warn(e)}}},O.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},O.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=(t=this.player_.controlBar)&&t.subsCapsButton,t=t&&t.captionsButton;e?e.focus():t&&t.focus()},ra)),c.registerComponent("ResizeManager",(m(na,Js=c),(g=na.prototype).createEl=function(){return Js.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},g.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},g.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,Js.prototype.dispose.call(this)},na));var sa,aa={trackingThreshold:20,liveTolerance:15};function oa(e,t){var t=f(aa,t,{createEl:!1}),i=sa.call(this,e,t)||this;return i.handleVisibilityChange_=function(e){return i.handleVisibilityChange(e)},i.trackLiveHandler_=function(){return i.trackLive_()},i.handlePlay_=function(e){return i.handlePlay(e)},i.handleFirstTimeupdate_=function(e){return i.handleFirstTimeupdate(e)},i.handleSeeked_=function(e){return i.handleSeeked(e)},i.seekToLiveEdge_=function(e){return i.seekToLiveEdge(e)},i.reset_(),i.on(i.player_,"durationchange",function(e){return i.handleDurationchange(e)}),i.on(i.player_,"canplay",function(){return i.toggleTracking()}),le&&"hidden"in document&&"visibilityState"in document&&i.on(document,"visibilitychange",i.handleVisibilityChange_),i}function la(e){if((n=e.el()).hasAttribute("src"))return e.triggerSourceset(n.src),1;var t=e.$$("source"),i=[],n="";if(t.length){for(var r=0;r<t.length;r++){var s=t[r].src;s&&-1===i.indexOf(s)&&i.push(s)}return i.length&&(e.triggerSourceset(n=1===i.length?i[0]:n),1)}}function ca(e,t){for(var i={},n=0;n<e.length&&!((i=Object.getOwnPropertyDescriptor(e[n],t))&&i.set&&i.get);n++);return i.enumerable=!0,i.configurable=!0,i}function da(s){var t,e,i,a=s.el();a.resetSourceWatch_||(t={},e=ca([s.el(),window.HTMLMediaElement.prototype,window.Element.prototype,fa],"innerHTML"),i=function(r){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=r.apply(a,t);return la(s),n}},["append","appendChild","insertAdjacentHTML"].forEach(function(e){a[e]&&(t[e]=a[e],a[e]=i(t[e]))}),Object.defineProperty(a,"innerHTML",f(e,{set:i(e.set)})),a.resetSourceWatch_=function(){a.resetSourceWatch_=null,Object.keys(t).forEach(function(e){a[e]=t[e]}),Object.defineProperty(a,"innerHTML",e)},s.one("sourceset",a.resetSourceWatch_))}function ua(t,i,n,e){function r(e){return Object.defineProperty(t,i,{value:e,enumerable:!0,writable:!0})}var s={configurable:!0,enumerable:!0,get:function(){var e=n();return r(e),e}};return(e=void 0===e||e)&&(s.set=r),Object.defineProperty(t,i,s)}c.registerComponent("LiveTracker",(m(oa,sa=c),(b=oa.prototype).handleVisibilityChange=function(){this.player_.duration()===1/0&&(document.hidden?this.stopTracking():this.startTracking())},b.trackLive_=function(){var e,t=this.player_.seekable();t&&t.length&&(e=Number(window.performance.now().toFixed(4)),t=-1===this.lastTime_?0:(e-this.lastTime_)/1e3,this.lastTime_=e,this.pastSeekEnd_=this.pastSeekEnd()+t,e=this.liveCurrentTime(),t=this.player_.currentTime(),t=this.player_.paused()||this.seekedBehindLive_||Math.abs(e-t)>this.options_.liveTolerance,(t=!(!this.timeupdateSeen_||e===1/0)&&t)!==this.behindLiveEdge_)&&(this.behindLiveEdge_=t,this.trigger("liveedgechange"))},b.handleDurationchange=function(){this.toggleTracking()},b.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},b.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},b.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},b.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&2<e,this.nextSeekedFromUser_=!1,this.trackLive_()},b.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},b.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},b.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},b.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},b.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0},b.seekableStart=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0},b.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},b.isLive=function(){return this.isTracking()},b.atLiveEdge=function(){return!this.behindLiveEdge()},b.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},b.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},b.behindLiveEdge=function(){return this.behindLiveEdge_},b.isTracking=function(){return"number"==typeof this.trackingInterval_},b.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},b.dispose=function(){this.off(document,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),sa.prototype.dispose.call(this)},oa));var ha,pa,fa=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=document.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var i=document.createDocumentFragment();t.childNodes.length;)i.appendChild(t.childNodes[0]);return this.innerText="",window.Element.prototype.appendChild.call(this,i),this.innerHTML}}),ma=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?ei(window.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return window.Element.prototype.setAttribute.call(this,"src",e),e}}),k=(m(ga,pa=x),(v=ga.prototype).dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),ga.disposeMediaElement(this.el_),this.options_=null,pa.prototype.dispose.call(this)},v.setupSourcesetHandling_=function(){var i,n,t,r,s;(i=this).featuresSourceset&&!(n=i.el()).resetSourceset_&&(t=ca([i.el(),window.HTMLMediaElement.prototype,ma],"src"),r=n.setAttribute,s=n.load,Object.defineProperty(n,"src",f(t,{set:function(e){return e=t.set.call(n,e),i.triggerSourceset(n.src),e}})),n.setAttribute=function(e,t){return t=r.call(n,e,t),/src/i.test(e)&&i.triggerSourceset(n.src),t},n.load=function(){var e=s.call(n);return la(i)||(i.triggerSourceset(""),da(i)),e},n.currentSrc?i.triggerSourceset(n.currentSrc):la(i)||da(i),n.resetSourceset_=function(){n.resetSourceset_=null,n.load=s,n.setAttribute=r,Object.defineProperty(n,"src",t),n.resetSourceWatch_&&n.resetSourceWatch_()})},v.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){i=[];for(var e=0;e<n.length;e++){var t=n[e];"metadata"===t.kind&&i.push({track:t,storedMode:t.mode})}}var i,n=this.textTracks();function r(){for(var e=0;e<i.length;e++){var t=i[e];"disabled"===t.track.mode&&t.track.mode!==t.storedMode&&(t.track.mode=t.storedMode)}n.removeEventListener("change",r)}e(),n.addEventListener("change",e),this.on("dispose",function(){return n.removeEventListener("change",e)}),this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",e),n.removeEventListener("change",r),n.addEventListener("change",r)}),this.on("webkitendfullscreen",function(){n.removeEventListener("change",e),n.addEventListener("change",e),n.removeEventListener("change",r)})},v.overrideNative_=function(e,t){var i,n=this;t===this["featuresNative"+e+"Tracks"]&&(this[(i=e.toLowerCase())+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_"]).forEach(function(e){n.el()[i+"Tracks"].removeEventListener(e,n[i+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[i+"TracksListeners_"]=null,this.proxyNativeTracksForType_(i))},v.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},v.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},v.proxyNativeTracksForType_=function(i){var e,t,n=this,r=Fi[i],s=this.el()[r.getterName],a=this[r.getterName]();this["featuresNative"+r.capitalName+"Tracks"]&&s&&s.addEventListener&&(t=function(){for(var e=[],t=0;t<a.length;t++){for(var i=!1,n=0;n<s.length;n++)if(s[n]===a[t]){i=!0;break}i||e.push(a[t])}for(;e.length;)a.removeTrack(e.shift())},this[r.getterName+"Listeners_"]=e={change:function(e){var t={type:"change",target:a,currentTarget:a,srcElement:a};a.trigger(t),"text"===i&&n[$i.remoteText.getterName]().trigger(t)},addtrack:function(e){a.addTrack(e.track)},removetrack:function(e){a.removeTrack(e.track)}},Object.keys(e).forEach(function(t){var i=e[t];s.addEventListener(t,i),n.on("dispose",function(e){return s.removeEventListener(t,i)})}),this.on("loadstart",t),this.on("dispose",function(e){return n.off("loadstart",t)}))},v.proxyNativeTracks_=function(){var t=this;Fi.names.forEach(function(e){t.proxyNativeTracksForType_(e)})},v.createEl=function(){var e,t=this.options_.tag;t&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(t?(e=t.cloneNode(!0),t.parentNode&&t.parentNode.insertBefore(e,t),ga.disposeMediaElement(t),t=e):(t=document.createElement("video"),e=f({},this.options_.tag&&Ae(this.options_.tag)),ue&&!0===this.options_.nativeControlsForTouch||delete e.controls,Ce(t,u(e,{id:this.options_.techId,class:"vjs-tech"}))),t.playerId=this.options_.playerId),void 0!==this.options_.preload&&Le(t,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);for(var i=["loop","muted","playsinline","autoplay"],n=0;n<i.length;n++){var r=i[n],s=this.options_[r];void 0!==s&&(s?Le(t,r,r):Ie(t,r),t[r]=s)}return t},v.handleLateInit_=function(e){var t,i,n,r;0!==e.networkState&&3!==e.networkState&&(0===e.readyState?(t=!1,this.on("loadstart",i=function(){t=!0}),this.on("loadedmetadata",n=function(){t||this.trigger("loadstart")}),this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",n),t||this.trigger("loadstart")})):((r=["loadstart"]).push("loadedmetadata"),2<=e.readyState&&r.push("loadeddata"),3<=e.readyState&&r.push("canplay"),4<=e.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})))},v.setScrubbing=function(e){this.isScrubbing_=e},v.scrubbing=function(){return this.isScrubbing_},v.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&fe?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){d(e,"Video is not ready. (Video.js)")}},v.duration=function(){var t=this;return this.el_.duration===1/0&&te&&ae&&0===this.el_.currentTime?(this.on("timeupdate",function e(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN):this.el_.duration||NaN},v.width=function(){return this.el_.offsetWidth},v.height=function(){return this.el_.offsetHeight},v.proxyWebkitFullscreen_=function(){var e,t,i=this;"webkitDisplayingFullscreen"in this.el_&&(e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},this.on("webkitbeginfullscreen",t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))}),this.on("dispose",function(){i.off("webkitbeginfullscreen",t),i.off("webkitendfullscreen",e)}))},v.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=window.navigator&&window.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},v.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)$t(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},v.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},v.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},v.requestVideoFrameCallback=function(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):pa.prototype.requestVideoFrameCallback.call(this,e)},v.cancelVideoFrameCallback=function(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):pa.prototype.cancelVideoFrameCallback.call(this,e)},v.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},v.reset=function(){ga.resetMediaElement(this.el_)},v.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},v.setControls=function(e){this.el_.controls=!!e},v.addTextTrack=function(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):pa.prototype.addTextTrack.call(this,e,t,i)},v.createRemoteTextTrack=function(e){var t;return this.featuresNativeTextTracks?(t=document.createElement("track"),e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t):pa.prototype.createRemoteTextTrack.call(this,e)},v.addRemoteTextTrack=function(e,t){return t=pa.prototype.addRemoteTextTrack.call(this,e,t),this.featuresNativeTextTracks&&this.el().appendChild(t),t},v.removeRemoteTextTrack=function(e){if(pa.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),i=t.length;i--;)e!==t[i]&&e!==t[i].track||this.el().removeChild(t[i])},v.getVideoPlaybackQuality=function(){var e;return"function"==typeof this.el().getVideoPlaybackQuality?this.el().getVideoPlaybackQuality():(e={},void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),window.performance&&"function"==typeof window.performance.now?e.creationTime=window.performance.now():window.performance&&window.performance.timing&&"number"==typeof window.performance.timing.navigationStart&&(e.creationTime=window.Date.now()-window.performance.timing.navigationStart),e)},ga);function ga(e,t){var i=pa.call(this,e,t)||this,t=e.source,n=!1;if(i.featuresVideoFrameCallback=i.featuresVideoFrameCallback&&"VIDEO"===i.el_.tagName,t&&(i.el_.currentSrc!==t.src||e.tag&&3===e.tag.initNetworkState_)?i.setSource(t):i.handleLateInit_(i.el_),e.enableSourceset&&i.setupSourcesetHandling_(),i.isScrubbing_=!1,i.el_.hasChildNodes()){for(var r=i.el_.childNodes,s=r.length,a=[];s--;){var o=r[s];"track"===o.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(o),i.remoteTextTracks().addTrack(o.track),i.textTracks().addTrack(o.track),n||i.el_.hasAttribute("crossorigin")||!ii(o.src)||(n=!0)):a.push(o))}for(var l=0;l<a.length;l++)i.el_.removeChild(a[l])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&n&&d.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(ue||he||ne)&&!0===e.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}ua(k,"TEST_VID",function(){var e,t;if(ve())return e=document.createElement("video"),(t=document.createElement("track")).kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}),k.isSupported=function(){try{k.TEST_VID.volume=.5}catch(e){return!1}return!(!k.TEST_VID||!k.TEST_VID.canPlayType)},k.canPlayType=function(e){return k.TEST_VID.canPlayType(e)},k.canPlaySource=function(e,t){return k.canPlayType(e.type)},k.canControlVolume=function(){try{var e=k.TEST_VID.volume,t=(k.TEST_VID.volume=e/2+.1,e!==k.TEST_VID.volume);return t&&pe?(window.setTimeout(function(){k&&k.prototype&&(k.prototype.featuresVolumeControl=e!==k.TEST_VID.volume)}),!1):t}catch(e){return!1}},k.canMuteVolume=function(){try{var e=k.TEST_VID.muted;return k.TEST_VID.muted=!e,k.TEST_VID.muted?Le(k.TEST_VID,"muted","muted"):Ie(k.TEST_VID,"muted"),e!==k.TEST_VID.muted}catch(e){return!1}},k.canControlPlaybackRate=function(){if(te&&ae&&oe<58)return!1;try{var e=k.TEST_VID.playbackRate;return k.TEST_VID.playbackRate=e/2+.1,e!==k.TEST_VID.playbackRate}catch(e){return!1}},k.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(document.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(document.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(document.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(document.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},k.supportsNativeTextTracks=function(){return fe||pe&&ae},k.supportsNativeVideoTracks=function(){return!(!k.TEST_VID||!k.TEST_VID.videoTracks)},k.supportsNativeAudioTracks=function(){return!(!k.TEST_VID||!k.TEST_VID.audioTracks)},k.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(e){var t=e[0],i=e[1];ua(k.prototype,t,function(){return k[i]()},!0)}),k.prototype.featuresVolumeControl=k.canControlVolume(),k.prototype.movingMediaElementInDOM=!pe,k.prototype.featuresFullscreenResize=!0,k.prototype.featuresProgressEvents=!0,k.prototype.featuresTimeupdateEvents=!0,k.prototype.featuresVideoFrameCallback=!(!k.TEST_VID||!k.TEST_VID.requestVideoFrameCallback),k.patchCanPlayType=function(){4<=ie&&!re&&!ae&&(ha=k.TEST_VID&&k.TEST_VID.constructor.prototype.canPlayType,k.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":ha.call(this,e)})},k.unpatchCanPlayType=function(){var e=k.TEST_VID.constructor.prototype.canPlayType;return ha&&(k.TEST_VID.constructor.prototype.canPlayType=ha),e},k.patchCanPlayType(),k.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);if(e.removeAttribute("src"),"function"==typeof e.load)try{e.load()}catch(e){}}},k.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),i=t.length;i--;)e.removeChild(t[i]);if(e.removeAttribute("src"),"function"==typeof e.load)try{e.load()}catch(e){}}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){k.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){k.prototype["set"+p(t)]=function(e){(this.el_[t]=e)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){k.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){k.prototype["set"+p(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(e){k.prototype[e]=function(){return this.el_[e]()}}),x.withSourceHandlers(k),k.nativeSourceHandler={},k.nativeSourceHandler.canPlayType=function(e){try{return k.TEST_VID.canPlayType(e)}catch(e){return""}},k.nativeSourceHandler.canHandleSource=function(e,t){return e.type?k.nativeSourceHandler.canPlayType(e.type):e.src?(e=ti(e.src),k.nativeSourceHandler.canPlayType("video/"+e)):""},k.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},k.nativeSourceHandler.dispose=function(){},k.registerSourceHandler(k.nativeSourceHandler),x.registerTech("Html5",k);var va,ya=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],_a={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},ba=["tiny","xsmall","small","medium","large","xlarge","huge"],Ta={},wa=(ba.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Ta[e]="vjs-layout-"+t}),{tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0}),E=(m(xa,va=c),(s=xa.prototype).dispose=function(){var t=this;this.trigger("dispose"),this.off("dispose"),lt(document,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),lt(document,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),xa.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),bn[this.id()]=null,Hi.names.forEach(function(e){e=Hi[e],(e=t[e.getterName]())&&e.off&&e.off()}),va.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},s.createEl=function(){var t,i=this.tag,e=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),n="video-js"===this.tag.tagName.toLowerCase();e?t=this.el_=i.parentNode:n||(t=this.el_=va.prototype.createEl.call(this,"div"));var r,s,a=Ae(i);if(n){for(t=this.el_=i,i=this.tag=document.createElement("video");t.children.length;)i.appendChild(t.firstChild);xe(t,"video-js")||Se(t,"video-js"),t.appendChild(i),e=this.playerElIngest_=t,Object.keys(t).forEach(function(e){try{i[e]=t[e]}catch(e){}})}i.setAttribute("tabindex","-1"),a.tabindex="-1",(le||ae&&de)&&(i.setAttribute("role","application"),a.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach(function(e){n&&"class"===e||t.setAttribute(e,a[e]),n&&i.setAttribute(e,a[e])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",(i.player=t.player=this).addClass("vjs-paused"),!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&(this.styleEl_=Qe("vjs-styles-dimensions"),r=We(".vjs-styles-defaults"),(s=We("head")).insertBefore(this.styleEl_,r?r.nextSibling:s.firstChild)),this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var o=i.getElementsByTagName("a"),l=0;l<o.length;l++){var c=o.item(l);Se(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!e&&i.parentNode.insertBefore(t,i),we(i,t),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t},s.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):d.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},s.width=function(e){return this.dimension("width",e)},s.height=function(e){return this.dimension("height",e)},s.dimension=function(e,t){var i,n=e+"_";if(void 0===t)return this[n]||0;""===t||"auto"===t?(this[n]=void 0,this.updateStyleEl_()):(i=parseFloat(t),isNaN(i)?d.error('Improper value "'+t+'" supplied for for '+e):(this[n]=i,this.updateStyleEl_()))},s.fluid=function(e){var t,i=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,xt(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),t=function(){i.on(["playerreset","resize"],i.boundUpdateStyleEl_)},xt(e=this)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},s.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},s.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},s.updateStyleEl_=function(){var e,t,i,n;!0!==window.VIDEOJS_NO_DYNAMIC_STYLE?(n=(i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"))[1]/i[0],e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/n:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*n,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),Je(this.styleEl_,"\n      ."+i+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+i+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*n+"%;\n      }\n    ")):(t="number"==typeof this.width_?this.width_:this.options_.width,i="number"==typeof this.height_?this.height_:this.options_.height,(n=this.tech_&&this.tech_.el())&&(0<=t&&(n.width=t),0<=i)&&(n.height=i))},s.loadTech_=function(e,t){var i,n=this,r=(this.tech_&&this.unloadTech_(),p(e)),s=e.charAt(0).toLowerCase()+e.slice(1),a=("Html5"!==r&&this.tag&&(x.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1,this.autoplay()),o={source:t,autoplay:!("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+s+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};if(Hi.names.forEach(function(e){e=Hi[e],o[e.getterName]=n[e.privateName]}),u(o,this.options_[r]),u(o,this.options_[s]),u(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(o.startTime=this.cache_.currentTime),!(e=x.getTech(e)))throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new e(o),this.tech_.ready(l(this,this.handleTechReady_),!0),a=this.textTracksJson_||[],i=this.tech_,a.forEach(function(e){var t=i.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return t.addCue(e)})}),i.textTracks(),ya.forEach(function(t){n.on(n.tech_,t,function(e){return n["handleTech"+p(t)+"_"](e)})}),Object.keys(_a).forEach(function(t){n.on(n.tech_,t,function(e){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+_a[t]+"_"].bind(n),event:e}):n["handleTech"+_a[t]+"_"](e)})}),this.on(this.tech_,"loadstart",function(e){return n.handleTechLoadStart_(e)}),this.on(this.tech_,"sourceset",function(e){return n.handleTechSourceset_(e)}),this.on(this.tech_,"waiting",function(e){return n.handleTechWaiting_(e)}),this.on(this.tech_,"ended",function(e){return n.handleTechEnded_(e)}),this.on(this.tech_,"seeking",function(e){return n.handleTechSeeking_(e)}),this.on(this.tech_,"play",function(e){return n.handleTechPlay_(e)}),this.on(this.tech_,"firstplay",function(e){return n.handleTechFirstPlay_(e)}),this.on(this.tech_,"pause",function(e){return n.handleTechPause_(e)}),this.on(this.tech_,"durationchange",function(e){return n.handleTechDurationChange_(e)}),this.on(this.tech_,"fullscreenchange",function(e,t){return n.handleTechFullscreenChange_(e,t)}),this.on(this.tech_,"fullscreenerror",function(e,t){return n.handleTechFullscreenError_(e,t)}),this.on(this.tech_,"enterpictureinpicture",function(e){return n.handleTechEnterPictureInPicture_(e)}),this.on(this.tech_,"leavepictureinpicture",function(e){return n.handleTechLeavePictureInPicture_(e)}),this.on(this.tech_,"error",function(e){return n.handleTechError_(e)}),this.on(this.tech_,"posterchange",function(e){return n.handleTechPosterChange_(e)}),this.on(this.tech_,"textdata",function(e){return n.handleTechTextData_(e)}),this.on(this.tech_,"ratechange",function(e){return n.handleTechRateChange_(e)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||we(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},s.unloadTech_=function(){var e,t,i,n=this;Hi.names.forEach(function(e){e=Hi[e],n[e.privateName]=n[e.getterName]()}),this.textTracksJson_=(e=this.tech_,t=e.$$("track"),i=Array.prototype.map.call(t,function(e){return e.track}),Array.prototype.map.call(t,function(e){var t=Ht(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===i.indexOf(e)}).map(Ht))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},s.tech=function(e){return void 0===e&&d.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},s.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},s.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},s.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},s.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},s.manualAutoplay_=function(e){var n=this;if(this.tech_&&"string"==typeof e){var t,i=function(){var e=n.muted();function t(){n.muted(e)}n.muted(!0),n.playTerminatedQueue_.push(t);var i=n.play();if(Ft(i))return i.catch(function(e){throw t(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(e||""))})};if("any"!==e||this.muted()?t="muted"!==e||this.muted()?this.play():i():Ft(t=this.play())&&(t=t.catch(i)),Ft(t))return t.then(function(){n.trigger({type:"autoplay-success",autoplay:e})}).catch(function(){n.trigger({type:"autoplay-failure",autoplay:e})})}},s.updateSourceCaches_=function(e){var t=e=void 0===e?"":e,i="";"string"!=typeof t&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(e){return e.src===t});if(i.length)return i[0].type;for(var n=e.$$("source"),r=0;r<n.length;r++){var s=n[r];if(s.type&&s.src&&s.src===t)return s.type}return An(t)}(this,t)),this.cache_.source=f({},e,{src:t,type:i});for(var i=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),n=[],r=this.$$("source"),s=[],a=0;a<r.length;a++){var o=Ae(r[a]);n.push(o),o.src&&o.src===t&&s.push(o.src)}s.length&&!i.length?this.cache_.sources=n:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},s.handleTechSourceset_=function(e){var t,i,n,r=this;this.changingSrc_||(t=function(e){return r.updateSourceCaches_(e)},i=this.currentSource().src,n=e.src,(t=i&&!/^blob:/.test(i)&&/^blob:/.test(n)&&(!this.lastSource_||this.lastSource_.tech!==n&&this.lastSource_.player!==i)?function(){}:t)(n),e.src)||this.tech_.any(["sourceset","loadstart"],function(e){"sourceset"!==e.type&&(e=r.techGet("currentSrc"),r.lastSource_.tech=e,r.updateSourceCaches_(e))}),this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},s.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},s.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},s.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},s.handleTechWaiting_=function(){var t=this,i=(this.addClass("vjs-waiting"),this.trigger("waiting"),this.currentTime());this.on("timeupdate",function e(){i!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",e))})},s.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},s.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},s.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},s.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},s.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},s.handleTechFirstPlay_=function(){this.options_.starttime&&(d.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},s.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},s.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},s.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},s.handleTechClick_=function(e){!this.controls_||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?$t(this.play()):this.pause())},s.handleTechDoubleClick_=function(t){!this.controls_||Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(t.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())},s.handleTechTap_=function(){this.userActive(!this.userActive())},s.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},s.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},s.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},s.handleStageClick_=function(){this.reportUserActivity()},s.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},s.documentFullscreenChange_=function(e){var t=e.target.player;t&&t!==this||(e=this.el(),!(t=document[this.fsApi_.fullscreenElement]===e)&&e.matches?t=e.matches(":"+this.fsApi_.fullscreen):!t&&e.msMatchesSelector&&(t=e.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(t))},s.handleTechFullscreenChange_=function(e,t){var i=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){i.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))},s.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},s.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},s.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},s.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},s.handleTechError_=function(){var e=this.tech_.error();this.error(e)},s.handleTechTextData_=function(){this.trigger("textdata",1<arguments.length?arguments[1]:null)},s.getCache=function(){return this.cache_},s.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},s.techCall_=function(i,n){this.ready(function(){if(i in kn)return e=this.middleware_,(t=this.tech_)[t=i](e.reduce(Cn(t),n));if(i in En)return xn(this.middleware_,this.tech_,i,n);var e,t;try{this.tech_&&this.tech_[i](n)}catch(e){throw d(e),e}},!0)},s.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Sn)return t=this.middleware_,i=this.tech_,t.reduceRight(Cn(e),i[e]());if(e in En)return xn(this.middleware_,this.tech_,e);var t,i;try{return this.tech_[e]()}catch(t){throw void 0===this.tech_[e]?d("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t):"TypeError"===t.name?(d("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1):d(t),t}}},s.play=function(){var t=this,e=this.options_.Promise||window.Promise;return e?new e(function(e){t.play_(e)}):this.play_()},s.play_=function(e){var t=this;this.playCallbacks_.push(e=void 0===e?$t:e),e=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),this.isReady_&&e?null===(e=this.techGet_("play"))?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(e):(this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),e||!fe&&!pe||this.load())},s.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},s.runPlayCallbacks_=function(t){var e=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],e.forEach(function(e){e(t)})},s.pause=function(){this.techCall_("pause")},s.paused=function(){return!1!==this.techGet_("paused")},s.played=function(){return this.techGet_("played")||Nt(0,0)},s.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},s.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},s.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},s.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=(e=parseFloat(e))<0?1/0:e)!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},s.remainingTime=function(){return this.duration()-this.currentTime()},s.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},s.buffered=function(){var e;return(e=this.techGet_("buffered"))&&e.length?e:Nt(0,0)},s.bufferedPercent=function(){return Rt(this.buffered(),this.duration())},s.bufferedEnd=function(){var e=this.buffered(),t=this.duration();return t<(e=e.end(e.length-1))?t:e},s.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},s.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},s.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},s.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},s.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},s.isFullscreen=function(e){if(void 0===e)return this.isFullscreen_;var t=this.isFullscreen_;this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_()},s.requestFullscreen=function(a){var o,e=this.options_.Promise||window.Promise;return e?(o=this,new e(function(e,i){function n(){o.off("fullscreenerror",r),o.off("fullscreenchange",t)}function t(){n(),e()}function r(e,t){n(),i(t)}o.one("fullscreenchange",t),o.one("fullscreenerror",r);var s=o.requestFullscreenHelper_(a);s&&(s.then(n,n),s.then(e,i))})):this.requestFullscreenHelper_()},s.requestFullscreenHelper_=function(e){var t,i=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen)return(t=this.el_[this.fsApi_.requestFullscreen](t))&&t.then(function(){return i.isFullscreen(!0)},function(){return i.isFullscreen(!1)}),t;this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},s.exitFullscreen=function(){var a,e=this.options_.Promise||window.Promise;return e?(a=this,new e(function(e,i){function n(){a.off("fullscreenerror",r),a.off("fullscreenchange",t)}function t(){n(),e()}function r(e,t){n(),i(t)}a.one("fullscreenchange",t),a.one("fullscreenerror",r);var s=a.exitFullscreenHelper_();s&&(s.then(n,n),s.then(e,i))})):this.exitFullscreenHelper_()},s.exitFullscreenHelper_=function(){var e,t=this;if(this.fsApi_.requestFullscreen)return(e=document[this.fsApi_.exitFullscreen]())&&$t(e.then(function(){return t.isFullscreen(!1)})),e;this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},s.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,ot(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow="hidden",Se(document.body,"vjs-full-window"),this.trigger("enterFullWindow")},s.fullWindowOnEscKey=function(e){a.isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},s.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,lt(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow=this.docOrigOverflow,ke(document.body,"vjs-full-window"),this.trigger("exitFullWindow")},s.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},s.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},s.requestPictureInPicture=function(){if("pictureInPictureEnabled"in document&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},s.exitPictureInPicture=function(){if("pictureInPictureEnabled"in document)return document.exitPictureInPicture()},s.handleKeyDown=function(e){var t,i,n=this.options_.userActions;n&&n.hotkeys&&(t=this.el_.ownerDocument.activeElement,i=t.tagName.toLowerCase(),t.isContentEditable||("input"===i?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1!==["textarea"].indexOf(i))||("function"==typeof n.hotkeys?n.hotkeys.call(this,e):this.handleHotkeys(e)))},s.handleHotkeys=function(e){var t=(n=this.options_.userActions?this.options_.userActions.hotkeys:{}).fullscreenKey,i=void 0===(i=n.muteKey)?function(e){return a.isEventKey(e,"m")}:i,n=void 0===(n=n.playPauseKey)?function(e){return a.isEventKey(e,"k")||a.isEventKey(e,"Space")}:n;(void 0===t?function(e){return a.isEventKey(e,"f")}:t).call(this,e)?(e.preventDefault(),e.stopPropagation(),t=c.getComponent("FullscreenToggle"),!1!==document[this.fsApi_.fullscreenEnabled]&&t.prototype.handleClick.call(this,e)):i.call(this,e)?(e.preventDefault(),e.stopPropagation(),c.getComponent("MuteToggle").prototype.handleClick.call(this,e)):n.call(this,e)&&(e.preventDefault(),e.stopPropagation(),c.getComponent("PlayToggle").prototype.handleClick.call(this,e))},s.canPlayType=function(e){for(var t=0,i=this.options_.techOrder;t<i.length;t++){var n=i[t],r=x.getTech(n);if(r=r||c.getComponent(n)){if(r.isSupported()&&(r=r.canPlayType(e)))return r}else d.error('The "'+n+'" tech is undefined. Skipped browser support check for that tech.')}return""},s.selectSource=function(e){function t(e,i,n){var r;return e.some(function(t){return i.some(function(e){if(r=n(t,e))return!0})}),r}var i,n=this,r=this.options_.techOrder.map(function(e){return[e,x.getTech(e)]}).filter(function(e){var t=e[0];return(e=e[1])?e.isSupported():(d.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),s=function(e,t){var i=e[0];if(e[1].canPlaySource(t,n.options_[i.toLowerCase()]))return{source:t,tech:i}};return(this.options_.sourceOrder?t(e,r,(i=s,function(e,t){return i(t,e)})):t(r,e,s))||!1},s.handleSrc_=function(e,n){var r=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var t,i,s=function t(e){var i;return Array.isArray(e)?(i=[],e.forEach(function(e){e=t(e),Array.isArray(e)?i=i.concat(e):J(e)&&i.push(e)}),i):"string"==typeof e&&e.trim()?[Mn({src:e})]:J(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Mn(e)]:[]}(e);s.length?(this.changingSrc_=!0,n||(this.cache_.sources=s),this.updateSourceCaches_(s[0]),wn(this,s[0],function(e,t){var i;return r.middleware_=t,n||(r.cache_.sources=s),r.updateSourceCaches_(e),r.src_(e)?1<s.length?r.handleSrc_(s.slice(1)):(r.changingSrc_=!1,r.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void r.triggerReady()):(i=r.tech_,void t.forEach(function(e){return e.setTech&&e.setTech(i)}))}),this.options_.retryOnError&&1<s.length&&(i=function(){r.off("error",t)},this.one("error",t=function(){r.error(null),r.handleSrc_(s.slice(1),!0)}),this.one("playing",i),this.resetRetryOnError_=function(){r.off("error",t),r.off("playing",i)})):this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},s.src=function(e){return this.handleSrc_(e,!1)},s.src_=function(e){var t,i,n=this,r=this.selectSource([e]);return!r||(t=r.tech,i=this.techName_,p(t)!==p(i)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready(function(){n.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1)},s.load=function(){this.techCall_("load")},s.reset=function(){var e=this,t=this.options_.Promise||window.Promise;this.paused()||!t?this.doReset_():$t(this.play().then(function(){return e.doReset_()}))},s.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),xt(this)&&this.trigger("playerreset")},s.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},s.resetProgressBar_=function(){this.currentTime(0);var e=(t=this.controlBar||{}).durationDisplay,t=t.remainingTimeDisplay;e&&e.updateContent(),t&&t.updateContent()},s.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},s.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},s.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},s.currentSource=function(){return this.cache_.source||{}},s.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},s.currentType=function(){return this.currentSource()&&this.currentSource().type||""},s.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},s.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},s.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},s.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},s.poster=function(e){if(void 0===e)return this.poster_;(e=e||"")!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},s.handleTechPosterChange_=function(){var e;(!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster&&(e=this.tech_.poster()||"")!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))},s.controls=function(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},s.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},s.error=function(t){var e,i=this;if(void 0===t)return this.error_||null;R("beforeerror").forEach(function(e){J(e=e(i,t))&&!Array.isArray(e)||"string"==typeof e||"number"==typeof e||null===e?t=e:i.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&t&&4===t.code?(this.options_.suppressNotSupportedError=!(e=function(){this.error(t)}),this.any(["click","touchstart"],e),this.one("loadstart",function(){this.off(["click","touchstart"],e)})):null===t?(this.error_=t,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new Bt(t),this.addClass("vjs-error"),d.error("(CODE:"+this.error_.code+" "+Bt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),R("error").forEach(function(e){return e(i,i.error_)}))},s.reportUserActivity=function(e){this.userActivity_=!0},s.userActive=function(e){if(void 0===e)return this.userActive_;(e=!!e)!==this.userActive_&&(this.userActive_=e,this.userActive_?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")))},s.listenForUserActivity_=function(){var t,i,n,r,s=l(this,this.reportUserActivity),e=function(e){s(),this.clearInterval(t)};this.on("mousedown",function(){s(),this.clearInterval(t),t=this.setInterval(s,250)}),this.on("mousemove",function(e){e.screenX===i&&e.screenY===n||(i=e.screenX,n=e.screenY,s())}),this.on("mouseup",e),this.on("mouseleave",e),!(e=this.getChild("controlBar"))||pe||te||(e.on("mouseenter",function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),e.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",s),this.on("keyup",s),this.setInterval(function(){var e;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(r),(e=this.options_.inactivityTimeout)<=0||(r=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e)))},250)},s.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},s.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},s.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},s.enableAudioOnlyUI_=function(){var t=this,e=(this.addClass("vjs-audio-only-mode"),this.children()),i=this.getChild("ControlBar"),n=i&&i.currentHeight();e.forEach(function(e){e!==i&&e.el_&&!e.hasClass("vjs-hidden")&&(e.hide(),t.audioOnlyCache_.hiddenChildren.push(e))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(n),this.trigger("audioonlymodechange")},s.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(e){return e.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},s.audioOnlyMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var i,n=this.options_.Promise||window.Promise;if(n)return e?(i=[],this.isInPictureInPicture()&&i.push(this.exitPictureInPicture()),this.isFullscreen()&&i.push(this.exitFullscreen()),this.audioPosterMode()&&i.push(this.audioPosterMode(!1)),n.all(i).then(function(){return t.enableAudioOnlyUI_()})):n.resolve().then(function(){return t.disableAudioOnlyUI_()});e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},s.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},s.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},s.audioPosterMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var i=this.options_.Promise||window.Promise;return i?e?(this.audioOnlyMode()?this.audioOnlyMode(!1):i.resolve()).then(function(){t.enablePosterModeUI_()}):i.resolve().then(function(){t.disablePosterModeUI_()}):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},s.addTextTrack=function(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)},s.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},s.removeRemoteTextTrack=function(e){e=(e=void 0===e?{}:e).track||e;if(this.tech_)return this.tech_.removeRemoteTextTrack(e)},s.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},s.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},s.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},s.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),xt(this))&&this.trigger("languagechange")},s.languages=function(){return f(xa.prototype.options_.languages,this.languages_)},s.toJSON=function(){var e=f(this.options_),t=e.tracks;e.tracks=[];for(var i=0;i<t.length;i++){var n=t[i];(n=f(n)).player=void 0,e.tracks[i]=n}return e},s.createModal=function(e,t){var i=this,n=((t=t||{}).content=e||"",new Wt(this,t));return this.addChild(n),n.on("dispose",function(){i.removeChild(n)}),n.open(),n},s.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),i=0;i<ba.length;i++){var n=ba[i];if(t<=this.breakpoints_[n]){if(e===n)return;e&&this.removeClass(Ta[e]),this.addClass(Ta[n]),this.breakpoint_=n;break}}},s.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},s.breakpoints=function(e){return void 0!==e&&(this.breakpoint_="",this.breakpoints_=u({},wa,e),this.updateCurrentBreakpoint_()),u(this.breakpoints_)},s.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},s.currentBreakpoint=function(){return this.breakpoint_},s.currentBreakpointClass=function(){return Ta[this.breakpoint_]||""},s.loadMedia=function(e,t){var i,n,r,s=this;e&&"object"==typeof e&&(this.reset(),this.cache_.media=f(e),i=(r=this.cache_.media).artwork,n=r.poster,e=r.src,r=r.textTracks,!i&&n&&(this.cache_.media.artwork=[{src:n,type:An(n)}]),e&&this.src(e),n&&this.poster(n),Array.isArray(r)&&r.forEach(function(e){return s.addRemoteTextTrack(e,!1)}),this.ready(t))},s.getMedia=function(){var e,t;return this.cache_.media?f(this.cache_.media):(e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})},e&&(t.poster=e,t.artwork=[{src:t.poster,type:An(t.poster)}]),t)},xa.getTagSettings=function(e){var t,i={sources:[],tracks:[]},n=Ae(e),r=n["data-setup"];if(xe(e,"vjs-fill")&&(n.fill=!0),xe(e,"vjs-fluid")&&(n.fluid=!0),null!==r&&(r=(t=function(e,t){var i,n=null;try{i=JSON.parse(e,t)}catch(e){n=e}return[n,i]}(r||"{}"))[0],t=t[1],r&&d.error(r),u(n,t)),u(i,n),e.hasChildNodes())for(var s=e.childNodes,a=0,o=s.length;a<o;a++){var l=s[a],c=l.nodeName.toLowerCase();"source"===c?i.sources.push(Ae(l)):"track"===c&&i.tracks.push(Ae(l))}return i},s.flexNotSupported_=function(){var e=document.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},s.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},s.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every(function(e){return"number"==typeof e})&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},xa);function xa(e,t,i){var n,r;if(e.id=e.id||t.id||"vjs_video_"+Ze++,(t=u(xa.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var s=e.closest("[lang]");s&&s.getAttribute&&(t.language=s.getAttribute("lang"))}else for(var a=e;a&&1===a.nodeType;){if(Ae(a).hasOwnProperty("lang")){t.language=a.getAttribute("lang");break}a=a.parentNode}if((n=va.call(this,null,t,i)||this).boundDocumentFullscreenChange_=function(e){return n.documentFullscreenChange_(e)},n.boundFullWindowOnEscKey_=function(e){return n.fullWindowOnEscKey(e)},n.boundUpdateStyleEl_=function(e){return n.updateStyleEl_(e)},n.boundApplyInitTime_=function(e){return n.applyInitTime_(e)},n.boundUpdateCurrentBreakpoint_=function(e){return n.updateCurrentBreakpoint_(e)},n.boundHandleTechClick_=function(e){return n.handleTechClick_(e)},n.boundHandleTechDoubleClick_=function(e){return n.handleTechDoubleClick_(e)},n.boundHandleTechTouchStart_=function(e){return n.handleTechTouchStart_(e)},n.boundHandleTechTouchMove_=function(e){return n.handleTechTouchMove_(e)},n.boundHandleTechTouchEnd_=function(e){return n.handleTechTouchEnd_(e)},n.boundHandleTechTap_=function(e){return n.handleTechTap_(e)},n.isFullscreen_=!1,n.log=V(n.id_),n.fsApi_=U,n.isPosterFromTech_=!1,n.queuedCallbacks_=[],n.isReady_=!1,n.hasStarted_=!1,n.userActive_=!1,n.debugEnabled_=!1,n.audioOnlyMode_=!1,n.audioPosterMode_=!1,n.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},n.options_&&n.options_.techOrder&&n.options_.techOrder.length)return n.tag=e,n.tagAttributes=e&&Ae(e),n.language(n.options_.language),t.languages?(r={},Object.getOwnPropertyNames(t.languages).forEach(function(e){r[e.toLowerCase()]=t.languages[e]}),n.languages_=r):n.languages_=xa.prototype.options_.languages,n.resetCache_(),n.poster_=t.poster||"",n.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),n.changingSrc_=!1,n.playCallbacks_=[],n.playTerminatedQueue_=[],e.hasAttribute("autoplay")?n.autoplay(!0):n.autoplay(n.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(function(e){if("function"!=typeof n[e])throw new Error('plugin "'+e+'" does not exist')}),n.scrubbing_=!1,n.el_=n.createEl(),kt(y(n),{eventBusKey:"el_"}),n.fsApi_.requestFullscreen&&(ot(document,n.fsApi_.fullscreenchange,n.boundDocumentFullscreenChange_),n.on(n.fsApi_.fullscreenchange,n.boundDocumentFullscreenChange_)),n.fluid_&&n.on(["playerreset","resize"],n.boundUpdateStyleEl_),i=f(n.options_),t.plugins&&Object.keys(t.plugins).forEach(function(e){n[e](t.plugins[e])}),t.debug&&n.debug(!0),n.options_.playerOptions=i,n.middleware_=[],n.playbackRates(t.playbackRates),n.initChildren(),n.isAudio("audio"===e.nodeName.toLowerCase()),n.controls()?n.addClass("vjs-controls-enabled"):n.addClass("vjs-controls-disabled"),n.el_.setAttribute("role","region"),n.isAudio()?n.el_.setAttribute("aria-label",n.localize("Audio Player")):n.el_.setAttribute("aria-label",n.localize("Video Player")),n.isAudio()&&n.addClass("vjs-audio"),n.flexNotSupported_()&&n.addClass("vjs-no-flex"),ue&&n.addClass("vjs-touch-enabled"),pe||n.addClass("vjs-workinghover"),xa.players[n.id_]=y(n),e="7.20.2".split(".")[0],n.addClass("vjs-v"+e),n.userActive(!0),n.reportUserActivity(),n.one("play",function(e){return n.listenForUserActivity_(e)}),n.on("stageclick",function(e){return n.handleStageClick_(e)}),n.on("keydown",function(e){return n.handleKeyDown(e)}),n.on("languagechange",function(e){return n.handleLanguagechange(e)}),n.breakpoints(n.options_.breakpoints),n.responsive(n.options_.responsive),n.on("ready",function(){n.audioPosterMode(n.options_.audioPosterMode),n.audioOnlyMode(n.options_.audioOnlyMode)}),n;throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?")}Hi.names.forEach(function(e){var t=Hi[e];E.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),E.prototype.crossorigin=E.prototype.crossOrigin,E.players={},_=window.navigator,E.prototype.options_={techOrder:x.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:_&&(_.languages&&_.languages[0]||_.userLanguage||_.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){E.prototype[e]=function(){return this.techGet_(e)}}),ya.forEach(function(e){E.prototype["handleTech"+p(e)+"_"]=function(){return this.trigger(e)}}),c.registerComponent("Player",E);var Sa=X(function(i){function n(e,t){return i.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}i.exports=n});function ka(e){return Ma.hasOwnProperty(e)}function Ea(e){return ka(e)?Ma[e]:void 0}function Ca(e,t,i){e.trigger(i=(i?"before":"")+"pluginsetup",t),e.trigger(i+":"+t.name,t)}function Aa(r,s){return s.prototype.name=r,function(){Ca(this,{name:r,plugin:s,instance:null},!0);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=La(s,[this].concat(t));return this[r]=function(){return n},Ca(this,n.getEventHash()),n}}function Pa(e,t){e[Oa]=e[Oa]||{},e[Oa][t]=!0}var La=X(function(n){function r(e,t,i){return function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?n.exports=r=Reflect.construct:n.exports=r=function(e,t,i){var n=[null];return n.push.apply(n,t),n=new(Function.bind.apply(e,n)),i&&Sa(n,i.prototype),n},r.apply(null,arguments)}n.exports=r}),Ia="plugin",Oa="activePlugins_",Ma={},Da=((i=ja.prototype).version=function(){return this.constructor.VERSION},i.getEventHash=function(e){return(e=void 0===e?{}:e).name=this.name,e.plugin=this.constructor,e.instance=this,e},i.trigger=function(e,t){return ct(this.eventBusEl_,e,this.getEventHash(t=void 0===t?{}:t))},i.handleStateChanged=function(e){},i.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Oa][e]=!1,this.player=this.state=null,t[e]=Aa(e,Ma[e])},ja.isBasic=function(e){return"function"==typeof(e="string"==typeof e?Ea(e):e)&&!ja.prototype.isPrototypeOf(e.prototype)},ja.registerPlugin=function(e,t){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+typeof e+".");if(ka(e))d.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(E.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+typeof t+".");return Ma[e]=t,e!==Ia&&(ja.isBasic(t)?E.prototype[e]=(n=e,r=t,Object.keys(r).forEach(function(e){i[e]=r[e]}),i):E.prototype[e]=Aa(e,t)),t;function i(){Ca(this,{name:n,plugin:r,instance:null},!0);var e=r.apply(this,arguments);return Pa(this,n),Ca(this,{name:n,plugin:r,instance:e}),e}var n,r},ja.deregisterPlugin=function(e){if(e===Ia)throw new Error("Cannot de-register base plugin.");ka(e)&&(delete Ma[e],delete E.prototype[e])},ja.getPlugins=function(e){var i;return(e=void 0===e?Object.keys(Ma):e).forEach(function(e){var t=Ea(e);t&&((i=i||{})[e]=t)}),i},ja.getPluginVersion=function(e){return(e=Ea(e))&&e.VERSION||""},ja);function ja(e){if(this.constructor===ja)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),kt(this),delete this.trigger,Ct(this,this.constructor.defaultState),Pa(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}Da.getPlugin=Ea,Da.BASE_PLUGIN_NAME=Ia,Da.registerPlugin(Ia,Da),E.prototype.usingPlugin=function(e){return!!this[Oa]&&!0===this[Oa][e]},E.prototype.hasPlugin=function(e){return!!ka(e)};function Na(e){return 0===e.indexOf("#")?e.slice(1):e}function H(e,t,i){if(r=H.getPlayer(e))t&&d.warn('Player "'+e+'" is already initialised. Options will not be applied.'),i&&r.ready(i);else{var n="string"==typeof e?We("#"+Na(e)):e;if(!ye(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");n.ownerDocument.defaultView&&n.ownerDocument.body.contains(n)||d.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(n.parentNode&&n.parentNode.hasAttribute("data-vjs-player")?n.parentNode:n).cloneNode(!0)),R("beforesetup").forEach(function(e){J(e=e(n,f(t)))&&!Array.isArray(e)?t=f(t,e):d.error("please return an object in beforesetup hooks")});var r=new(c.getComponent("Player"))(n,t,i);R("setup").forEach(function(e){return e(r)})}return r}function Ra(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=window.location&&window.location.href||"");var i="function"==typeof window.URL,n=/^\/\//.test(e),r=!window.location&&!/\/\//i.test(e);return i?e=new window.URL(e,window.location||Ua):/\/\//i.test(e)||(e=Ba.buildAbsoluteURL(window.location&&window.location.href||"",e)),i?(i=new URL(t,e),r?i.href.slice(Ua.length):n?i.href.slice(i.protocol.length):i.href):Ba.buildAbsoluteURL(e,t)}H.hooks_=N,H.hooks=R,H.hook=function(e,t){R(e,t)},H.hookOnce=function(i,e){R(i,[].concat(e).map(function(t){return function e(){return B(i,e),t.apply(void 0,arguments)}}))},H.removeHook=B,!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&ve()&&!(ml=We(".vjs-styles-defaults"))&&(ml=Qe("vjs-styles-defaults"),(_=We("head"))&&_.insertBefore(ml,_.firstChild),Je(ml,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")),Ye(1,H),H.VERSION="7.20.2",H.options=E.prototype.options_,H.getPlayers=function(){return E.players},H.getPlayer=function(e){var t=E.players;if("string"==typeof e){var i=Na(e),n=t[i];if(n)return n;i=We("#"+i)}else i=e;if(ye(i)&&(e=i.player,i=i.playerId,e||t[i]))return e||t[i]},H.getAllPlayers=function(){return Object.keys(E.players).map(function(e){return E.players[e]}).filter(Boolean)},H.players=E.players,H.getComponent=c.getComponent,H.registerComponent=function(e,t){x.isTech(t)&&d.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),c.registerComponent.call(c,e,t)},H.getTech=x.getTech,H.registerTech=x.registerTech,H.use=function(e,t){_n[e]=_n[e]||[],_n[e].push(t)},Object.defineProperty(H,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(H.middleware,"TERMINATOR",{value:Tn,writeable:!1,enumerable:!0}),H.browser=t,H.TOUCH_ENABLED=ue,H.extend=function(e,t){var i,n=function(){e.apply(this,arguments)},r={},t=("object"==typeof(t=void 0===t?{}:t)?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),r=t):"function"==typeof t&&(n=t),n),s=e;if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");for(i in t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),s&&Sa(t,s),e&&(n.super_=e),r)r.hasOwnProperty(i)&&(n.prototype[i]=r[i]);return n},H.mergeOptions=f,H.bind=l,H.registerPlugin=Da.registerPlugin,H.deregisterPlugin=Da.deregisterPlugin,H.plugin=function(e,t){return d.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Da.registerPlugin(e,t)},H.getPlugins=Da.getPlugins,H.getPlugin=Da.getPlugin,H.getPluginVersion=Da.getPluginVersion,H.addLanguage=function(e,t){var i;return e=(""+e).toLowerCase(),H.options.languages=f(H.options.languages,((i={})[e]=t,i)),H.options.languages[e]},H.log=d,H.createLogger=V,H.createTimeRange=H.createTimeRanges=Nt,H.formatTime=kr,H.setFormatTime=function(e){Sr=e},H.resetFormatTime=function(){Sr=er},H.parseUrl=Zt,H.isCrossOrigin=ii,H.EventTarget=pt,H.on=ot,H.one=dt,H.off=lt,H.trigger=ct,H.xhr=xi,H.TextTrack=ji,H.AudioTrack=r,H.VideoTrack=ce,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){H[e]=function(){return d.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),Xe[e].apply(null,arguments)}}),H.computedStyle=ee,H.dom=Xe,H.url=hi,H.defineLazyProperty=ua,H.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Ba=X(function(e,t){var i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,s=/^([^\/?#]*)([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=a.parseURL(e);if(n)return n.path=a.normalizePath(n.path),a.buildURLFromParts(n);throw new Error("Error trying to parse base URL.")}if(!(n=a.parseURL(t)))throw new Error("Error trying to parse relative URL.");if(n.scheme)return i.alwaysNormalize?(n.path=a.normalizePath(n.path),a.buildURLFromParts(n)):t;if(!(t=a.parseURL(e)))throw new Error("Error trying to parse base URL.");!t.netLoc&&t.path&&"/"!==t.path[0]&&(r=s.exec(t.path),t.netLoc=r[1],t.path=r[2]),t.netLoc&&!t.path&&(t.path="/");var r,e={scheme:t.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};return n.netLoc||(e.netLoc=t.netLoc,"/"!==n.path[0]&&(n.path?(r=(r=t.path).substring(0,r.lastIndexOf("/")+1)+n.path,e.path=a.normalizePath(r)):(e.path=t.path,n.params||(e.params=t.params,n.query)||(e.query=t.query)))),null===e.path&&(e.path=i.alwaysNormalize?a.normalizePath(n.path):n.path),a.buildURLFromParts(e)},parseURL:function(e){return(e=i.exec(e))?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=a}),Ua="http://example.com";(n=$a.prototype).on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},n.off=function(e,t){return!!this.listeners[e]&&(t=this.listeners[e].indexOf(t),this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(t,1),-1<t)},n.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=t.length,a=0;a<s;++a)t[a].apply(this,r)},n.dispose=function(){this.listeners={}},n.pipe=function(t){this.on("data",function(e){t.push(e)})};var Fa=function(e){return window.atob?window.atob(e):Buffer.from(e,"base64").toString("binary")};function $a(){this.listeners={}}function Ha(e){for(var t=Fa(e),i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i}function qa(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),e={};return t[1]&&(e.length=parseInt(t[1],10)),t[2]&&(e.offset=parseInt(t[2],10)),e}function za(e){for(var t,i=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=i.length;r--;)""!==i[r]&&((t=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n}function Wa(t){var i={};return Object.keys(t).forEach(function(e){i[e.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})]=t[e]}),i}function Va(e){var t,i,n,r,s=e.serverControl,a=e.targetDuration,o=e.partTargetDuration;s&&(t="#EXT-X-SERVER-CONTROL",i="holdBack",n="partHoldBack",r=a&&3*a,e=o&&2*o,a&&!s.hasOwnProperty(i)&&(s[i]=r,this.trigger("info",{message:t+" defaulting HOLD-BACK to targetDuration * 3 ("+r+")."})),r&&s[i]<r&&(this.trigger("warn",{message:t+" clamping HOLD-BACK ("+s[i]+") to targetDuration * 3 ("+r+")"}),s[i]=r),o&&!s.hasOwnProperty(n)&&(s[n]=3*o,this.trigger("info",{message:t+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+s[n]+")."})),o)&&s[n]<e&&(this.trigger("warn",{message:t+" clamping PART-HOLD-BACK ("+s[n]+") to partTargetDuration * 2 ("+e+")."}),s[n]=e)}function Xa(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,i){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})}function Ga(e){var e=(e=void 0===e?"":e).split(","),s=[];return e.forEach(function(n){var r;n=n.trim(),uo.forEach(function(e){var t,i=co[e].exec(n.toLowerCase());!i||i.length<=1||(r=e,t=n.substring(0,i[1].length),i=n.replace(t,""),s.push({type:t,details:i,mediaType:e}))}),r||s.push({type:n,details:"",mediaType:"unknown"})}),s}function Ya(e){return co.audio.test((e=void 0===e?"":e).trim().toLowerCase())}function Ka(e){var t,i,n;if(e&&"string"==typeof e)return i="video",1===(t=e.toLowerCase().split(",").map(function(e){return Xa(e.trim())})).length&&Ya(t[0])?i="audio":1===t.length&&(n=t[0],co.text.test((n=void 0===n?"":n).trim().toLowerCase()))&&(i="application"),n="mp4",t.every(function(e){return co.mp4.test(e)})?n="mp4":t.every(function(e){return co.webm.test(e)})?n="webm":t.every(function(e){return co.ogg.test(e)})&&(n="ogg"),i+"/"+n+';codecs="'+e+'"'}function Qa(e){return void 0===e&&(e=""),window.MediaSource&&window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported(Ka(e))}function Ja(e){return(e=void 0===e?"":e).toLowerCase().split(",").every(function(e){e=e.trim();for(var t=0;t<ho.length;t++)if(co["muxer"+ho[t]].test(e))return!0;return!1})}function Za(e){return fo.test(e)?"hls":mo.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null}function eo(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer}function C(e){return e instanceof Uint8Array?e:(Array.isArray(e)||go(e)||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))}function to(e,t){if("string"!=typeof(e="string"!=typeof e&&e&&"function"==typeof e.toString?e.toString():e))return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}function A(i,e,t){var n=void 0===t?{}:t,r=void 0===(t=n.offset)?0:t,s=void 0===(n=n.mask)?[]:n;return i=C(i),n=(e=C(e)).every||Array.prototype.every,e.length&&i.length-r>=e.length&&n.call(e,function(e,t){return e===(s[t]?s[t]&i[r+t]:i[r+t])})}m(bo,ro=ml=$a),bo.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)};var io,no,ro,so=bo,ao=String.fromCharCode(9),oo=(m(_o,no=ml),(w=_o.prototype).push=function(i){var r,s,a=this;0!==(i=i.trim()).length&&("#"===i[0]?this.tagMappers.reduce(function(e,t){return(t=t(i))===i?e:e.concat([t])},[i]).forEach(function(e){for(var t,i,n=0;n<a.customParsers.length;n++)if(a.customParsers[n].call(a,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),r=/^#EXTM3U/.exec(e))a.trigger("data",{type:"tag",tagType:"m3u"});else if(r=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))s={type:"tag",tagType:"inf"},r[1]&&(s.duration=parseFloat(r[1])),r[2]&&(s.title=r[2]),a.trigger("data",s);else if(r=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))s={type:"tag",tagType:"targetduration"},r[1]&&(s.duration=parseInt(r[1],10)),a.trigger("data",s);else if(r=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))s={type:"tag",tagType:"version"},r[1]&&(s.version=parseInt(r[1],10)),a.trigger("data",s);else if(r=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))s={type:"tag",tagType:"media-sequence"},r[1]&&(s.number=parseInt(r[1],10)),a.trigger("data",s);else if(r=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))s={type:"tag",tagType:"discontinuity-sequence"},r[1]&&(s.number=parseInt(r[1],10)),a.trigger("data",s);else if(r=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))s={type:"tag",tagType:"playlist-type"},r[1]&&(s.playlistType=r[1]),a.trigger("data",s);else if(r=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(e))s=Y(qa(r[1]),{type:"tag",tagType:"byterange"}),a.trigger("data",s);else if(r=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))s={type:"tag",tagType:"allow-cache"},r[1]&&(s.allowed=!/NO/.test(r[1])),a.trigger("data",s);else if(r=/^#EXT-X-MAP:?(.*)$/.exec(e))s={type:"tag",tagType:"map"},r[1]&&((t=za(r[1])).URI&&(s.uri=t.URI),t.BYTERANGE)&&(s.byterange=qa(t.BYTERANGE)),a.trigger("data",s);else if(r=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e))s={type:"tag",tagType:"stream-inf"},r[1]&&(s.attributes=za(r[1]),s.attributes.RESOLUTION&&(i={},(t=s.attributes.RESOLUTION.split("x"))[0]&&(i.width=parseInt(t[0],10)),t[1]&&(i.height=parseInt(t[1],10)),s.attributes.RESOLUTION=i),s.attributes.BANDWIDTH&&(s.attributes.BANDWIDTH=parseInt(s.attributes.BANDWIDTH,10)),s.attributes["PROGRAM-ID"])&&(s.attributes["PROGRAM-ID"]=parseInt(s.attributes["PROGRAM-ID"],10)),a.trigger("data",s);else if(r=/^#EXT-X-MEDIA:?(.*)$/.exec(e))s={type:"tag",tagType:"media"},r[1]&&(s.attributes=za(r[1])),a.trigger("data",s);else if(r=/^#EXT-X-ENDLIST/.exec(e))a.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(r=/^#EXT-X-DISCONTINUITY/.exec(e)))return(r=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))?(s={type:"tag",tagType:"program-date-time"},r[1]&&(s.dateTimeString=r[1],s.dateTimeObject=new Date(r[1])),void a.trigger("data",s)):(r=/^#EXT-X-KEY:?(.*)$/.exec(e))?(s={type:"tag",tagType:"key"},r[1]&&(s.attributes=za(r[1]),s.attributes.IV)&&("0x"===s.attributes.IV.substring(0,2).toLowerCase()&&(s.attributes.IV=s.attributes.IV.substring(2)),s.attributes.IV=s.attributes.IV.match(/.{8}/g),s.attributes.IV[0]=parseInt(s.attributes.IV[0],16),s.attributes.IV[1]=parseInt(s.attributes.IV[1],16),s.attributes.IV[2]=parseInt(s.attributes.IV[2],16),s.attributes.IV[3]=parseInt(s.attributes.IV[3],16),s.attributes.IV=new Uint32Array(s.attributes.IV)),void a.trigger("data",s)):(r=/^#EXT-X-START:?(.*)$/.exec(e))?(s={type:"tag",tagType:"start"},r[1]&&(s.attributes=za(r[1]),s.attributes["TIME-OFFSET"]=parseFloat(s.attributes["TIME-OFFSET"]),s.attributes.PRECISE=/YES/.test(s.attributes.PRECISE)),void a.trigger("data",s)):(r=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))?(s={type:"tag",tagType:"cue-out-cont"},r[1]?s.data=r[1]:s.data="",void a.trigger("data",s)):(r=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))?(s={type:"tag",tagType:"cue-out"},r[1]?s.data=r[1]:s.data="",void a.trigger("data",s)):(r=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))?(s={type:"tag",tagType:"cue-in"},r[1]?s.data=r[1]:s.data="",void a.trigger("data",s)):(r=/^#EXT-X-SKIP:(.*)$/.exec(e))&&r[1]?((s={type:"tag",tagType:"skip"}).attributes=za(r[1]),s.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(s.attributes["SKIPPED-SEGMENTS"]=parseInt(s.attributes["SKIPPED-SEGMENTS"],10)),s.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(s.attributes["RECENTLY-REMOVED-DATERANGES"]=s.attributes["RECENTLY-REMOVED-DATERANGES"].split(ao)),void a.trigger("data",s)):(r=/^#EXT-X-PART:(.*)$/.exec(e))&&r[1]?((s={type:"tag",tagType:"part"}).attributes=za(r[1]),["DURATION"].forEach(function(e){s.attributes.hasOwnProperty(e)&&(s.attributes[e]=parseFloat(s.attributes[e]))}),["INDEPENDENT","GAP"].forEach(function(e){s.attributes.hasOwnProperty(e)&&(s.attributes[e]=/YES/.test(s.attributes[e]))}),s.attributes.hasOwnProperty("BYTERANGE")&&(s.attributes.byterange=qa(s.attributes.BYTERANGE)),void a.trigger("data",s)):(r=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&r[1]?((s={type:"tag",tagType:"server-control"}).attributes=za(r[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(e){s.attributes.hasOwnProperty(e)&&(s.attributes[e]=parseFloat(s.attributes[e]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(e){s.attributes.hasOwnProperty(e)&&(s.attributes[e]=/YES/.test(s.attributes[e]))}),void a.trigger("data",s)):(r=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&r[1]?((s={type:"tag",tagType:"part-inf"}).attributes=za(r[1]),["PART-TARGET"].forEach(function(e){s.attributes.hasOwnProperty(e)&&(s.attributes[e]=parseFloat(s.attributes[e]))}),void a.trigger("data",s)):(r=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&r[1]?((s={type:"tag",tagType:"preload-hint"}).attributes=za(r[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(e){var t;s.attributes.hasOwnProperty(e)&&(s.attributes[e]=parseInt(s.attributes[e],10),t="BYTERANGE-LENGTH"===e?"length":"offset",s.attributes.byterange=s.attributes.byterange||{},s.attributes.byterange[t]=s.attributes[e],delete s.attributes[e])}),void a.trigger("data",s)):(r=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&r[1]?((s={type:"tag",tagType:"rendition-report"}).attributes=za(r[1]),["LAST-MSN","LAST-PART"].forEach(function(e){s.attributes.hasOwnProperty(e)&&(s.attributes[e]=parseInt(s.attributes[e],10))}),void a.trigger("data",s)):void a.trigger("data",{type:"tag",data:e.slice(4)});a.trigger("data",{type:"tag",tagType:"discontinuity"})}else a.trigger("data",{type:"comment",text:e.slice(1)})}):this.trigger("data",{type:"uri",uri:i}))},w.addParser=function(e){var t=this,i=e.expression,n=e.customType,r=e.dataParser,s=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push(function(e){if(i.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:n,segment:s}),!0})},w.addTagMapper=function(e){var t=e.expression,i=e.map;this.tagMappers.push(function(e){return t.test(e)?i(e):e})},_o),lo=(m(yo,io=ml),(e=yo.prototype).warnOnMissingAttributes_=function(e,t,i){var n=[];i.forEach(function(e){t.hasOwnProperty(e)||n.push(e)}),n.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+n.join(", ")})},e.push=function(e){this.lineStream.push(e)},e.end=function(){this.lineStream.push("\n"),this.trigger("end")},e.addParser=function(e){this.parseStream.addParser(e)},e.addTagMapper=function(e){this.parseStream.addTagMapper(e)},yo),co={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},uo=["video","audio","text"],ho=["Video","Audio","Text"],po="mp4a.40.2",fo=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,mo=/^application\/dash\+xml/i,go=eo,P=window.BigInt||Number,vo=[P("0x1"),P("0x100"),P("0x10000"),P("0x1000000"),P("0x100000000"),P("0x10000000000"),P("0x1000000000000"),P("0x100000000000000"),P("0x10000000000000000")];function yo(){var e=io.call(this)||this;e.lineStream=new so,e.parseStream=new oo,e.lineStream.pipe(e.parseStream);var n,r,s=y(e),o=[],l={},c=!1,d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u=0,h=(e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},0),p=0;return e.on("end",function(){l.uri||!l.parts&&!l.preloadHints||(!l.map&&n&&(l.map=n),!l.key&&r&&(l.key=r),l.timeline||"number"!=typeof u||(l.timeline=u),e.manifest.preloadSegment=l)}),e.parseStream.on("data",function(a){var t,i;({tag:function(){({version:function(){a.version&&(this.manifest.version=a.version)},"allow-cache":function(){this.manifest.allowCache=a.allowed,"allowed"in a||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in a&&((l.byterange=e).length=a.length,"offset"in a||(a.offset=h)),"offset"in a&&((l.byterange=e).offset=a.offset),h=e.offset+e.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<a.duration&&(l.duration=a.duration),0===a.duration&&(l.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(a.attributes)if("NONE"!==a.attributes.METHOD)if(a.attributes.URI)if("com.apple.streamingkeydelivery"===a.attributes.KEYFORMAT)this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:a.attributes};else{if("com.microsoft.playready"!==a.attributes.KEYFORMAT)return"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===a.attributes.KEYFORMAT?-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(a.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===a.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==a.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):a.attributes.KEYID&&"0x"===a.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:a.attributes.KEYFORMAT,keyId:a.attributes.KEYID.substring(2)},pssh:Ha(a.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"})):(a.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:a.attributes.METHOD||"AES-128",uri:a.attributes.URI},void(void 0!==a.attributes.IV&&(r.iv=a.attributes.IV)));this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:a.attributes.URI}}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(a.number)?this.manifest.mediaSequence=a.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+a.number})},"discontinuity-sequence":function(){isFinite(a.number)?(this.manifest.discontinuitySequence=a.number,u=a.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+a.number})},"playlist-type":function(){/VOD|EVENT/.test(a.playlistType)?this.manifest.playlistType=a.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+a.playlist})},map:function(){n={},a.uri&&(n.uri=a.uri),a.byterange&&(n.byterange=a.byterange),r&&(n.key=r)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||d,a.attributes?(l.attributes||(l.attributes={}),Y(l.attributes,a.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){var e;this.manifest.mediaGroups=this.manifest.mediaGroups||d,a.attributes&&a.attributes.TYPE&&a.attributes["GROUP-ID"]&&a.attributes.NAME?((e=this.manifest.mediaGroups[a.attributes.TYPE])[a.attributes["GROUP-ID"]]=e[a.attributes["GROUP-ID"]]||{},t=e[a.attributes["GROUP-ID"]],(i={default:/yes/i.test(a.attributes.DEFAULT)}).default?i.autoselect=!0:i.autoselect=/yes/i.test(a.attributes.AUTOSELECT),a.attributes.LANGUAGE&&(i.language=a.attributes.LANGUAGE),a.attributes.URI&&(i.uri=a.attributes.URI),a.attributes["INSTREAM-ID"]&&(i.instreamId=a.attributes["INSTREAM-ID"]),a.attributes.CHARACTERISTICS&&(i.characteristics=a.attributes.CHARACTERISTICS),a.attributes.FORCED&&(i.forced=/yes/i.test(a.attributes.FORCED)),t[a.attributes.NAME]=i):this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){u+=1,l.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=a.dateTimeString,this.manifest.dateTimeObject=a.dateTimeObject),l.dateTimeString=a.dateTimeString,l.dateTimeObject=a.dateTimeObject},targetduration:function(){!isFinite(a.duration)||a.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+a.duration}):(this.manifest.targetDuration=a.duration,Va.call(this,this.manifest))},start:function(){a.attributes&&!isNaN(a.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:a.attributes["TIME-OFFSET"],precise:a.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){l.cueOut=a.data},"cue-out-cont":function(){l.cueOutCont=a.data},"cue-in":function(){l.cueIn=a.data},skip:function(){this.manifest.skip=Wa(a.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",a.attributes,["SKIPPED-SEGMENTS"])},part:function(){var i=this,e=(c=!0,this.manifest.segments.length),t=Wa(a.attributes),t=(l.parts=l.parts||[],l.parts.push(t),t.byterange&&(t.byterange.hasOwnProperty("offset")||(t.byterange.offset=p),p=t.byterange.offset+t.byterange.length),l.parts.length-1);this.warnOnMissingAttributes_("#EXT-X-PART #"+t+" for segment #"+e,a.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(e,t){e.hasOwnProperty("lastPart")||i.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+t+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var e=this.manifest.serverControl=Wa(a.attributes);e.hasOwnProperty("canBlockReload")||(e.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Va.call(this,this.manifest),e.canSkipDateranges&&!e.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var e=this.manifest.segments.length,t=Wa(a.attributes),i=t.type&&"PART"===t.type,n=(l.preloadHints=l.preloadHints||[],l.preloadHints.push(t),!t.byterange||t.byterange.hasOwnProperty("offset")||(t.byterange.offset=i?p:0,i&&(p=t.byterange.offset+t.byterange.length)),l.preloadHints.length-1);if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+n+" for segment #"+e,a.attributes,["TYPE","URI"]),t.type)for(var r=0;r<l.preloadHints.length-1;r++){var s=l.preloadHints[r];s.type&&s.type===t.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+n+" for segment #"+e+" has the same TYPE "+t.type+" as preload hint #"+r})}},"rendition-report":function(){var e=Wa(a.attributes),t=(this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(e),this.manifest.renditionReports.length-1),e=["LAST-MSN","URI"];c&&e.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+t,a.attributes,e)},"part-inf":function(){this.manifest.partInf=Wa(a.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",a.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Va.call(this,this.manifest)}}[a.tagType]||function(){}).call(s)},uri:function(){l.uri=a.uri,o.push(l),!this.manifest.targetDuration||"duration"in l||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),l.duration=this.manifest.targetDuration),r&&(l.key=r),l.timeline=u,n&&(l.map=n),p=0,l={}},comment:function(){},custom:function(){a.segment?(l.custom=l.custom||{},l.custom[a.customType]=a.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[a.customType]=a.data)}})[a.type].call(s)}),e}function _o(){var e=no.call(this)||this;return e.customParsers=[],e.tagMappers=[],e}function bo(){var e=ro.call(this)||this;return e.buffer="",e}function To(e,t){return(t=void 0===t?Object:t)&&"function"==typeof t.freeze?t.freeze(e):e}var wo=To({HTML:"text/html",isHTML:function(e){return e===wo.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),xo=To({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===xo.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"}),So={freeze:To,MIME_TYPE:wo,NAMESPACE:xo},ko=So.NAMESPACE;function Eo(e){return""!==e}function Co(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function Ao(e){return e?(e=e?e.split(/[\t\n\f\r ]+/).filter(Eo):[],Object.keys(e.reduce(Co,{}))):[]}function Po(e,t){for(var i in e)t[i]=e[i]}function Lo(e,t){var i,n=e.prototype;n instanceof t||((i=function(){}).prototype=t.prototype,Po(n,i=new i),e.prototype=n=i),n.constructor!=e&&(n.constructor=e)}(t={}).ELEMENT_NODE=1,t.ATTRIBUTE_NODE=2,t.TEXT_NODE=3,t.CDATA_SECTION_NODE=4,t.ENTITY_REFERENCE_NODE=5,t.ENTITY_NODE=6,t.PROCESSING_INSTRUCTION_NODE=7,t.COMMENT_NODE=8,t.DOCUMENT_NODE=9,t.DOCUMENT_TYPE_NODE=10,t.DOCUMENT_FRAGMENT_NODE=11;t.NOTATION_NODE=12;var Io,L={};function Oo(e,t){var i;return t instanceof Error?i=t:(i=this,Error.call(this,L[e]),this.message=L[e],Error.captureStackTrace&&Error.captureStackTrace(this,Oo)),i.code=e,t&&(this.message=this.message+": "+t),i}function Mo(){}function Do(e,t){this._node=e,this._refresh=t,jo(this)}function jo(e){var t,i=e._node._inc||e._node.ownerDocument._inc;e._inc!=i&&(t=e._refresh(e._node),hl(e,"length",t.length),Po(t,e),e._inc=i)}function No(){}function Ro(e,t){for(var i=e.length;i--;)if(e[i]===t)return i}function Bo(e,t,i,n){n?t[Ro(t,n)]=i:t[t.length++]=i,e&&(t=(i.ownerElement=e).ownerDocument)&&(n&&Wo(t,e,n),t&&t._inc++,i.namespaceURI===ko.XMLNS)&&(e._nsMap[i.prefix?i.localName:""]=i.value)}function Uo(e,t,i){var n=Ro(t,i);if(!(0<=n))throw Oo(8,new Error(e.tagName+"@"+i));for(var r,s=t.length-1;n<s;)t[n]=t[++n];t.length=s,e&&(r=e.ownerDocument)&&(Wo(r,e,i),i.ownerElement=null)}function Fo(){}function $o(){}function Ho(e){return("<"==e?"&lt;":">"==e&&"&gt;")||("&"==e?"&amp;":'"'==e&&"&quot;")||"&#"+e.charCodeAt()+";"}function qo(e,t){if(t(e))return 1;if(e=e.firstChild)do{if(qo(e,t))return 1}while(e=e.nextSibling)}function zo(){}function Wo(e,t,i){e&&e._inc++,i.namespaceURI===ko.XMLNS&&delete t._nsMap[i.prefix?i.localName:""]}function Vo(e,t,i){if(e&&e._inc){e._inc++;var n=t.childNodes;if(i)n[n.length++]=i;else{for(var r=t.firstChild,s=0;r;)r=(n[s++]=r).nextSibling;n.length=s}}}function Xo(e,t){var i=t.previousSibling,n=t.nextSibling;return i?i.nextSibling=n:e.firstChild=n,n?n.previousSibling=i:e.lastChild=i,Vo(e.ownerDocument,e),t}function Go(e,t,i){var n=t.parentNode;if(n&&n.removeChild(t),11===t.nodeType){var r=t.firstChild;if(null==r)return t;var s=t.lastChild}else r=s=t;for(n=i?i.previousSibling:e.lastChild,r.previousSibling=n,s.nextSibling=i,n?n.nextSibling=r:e.firstChild=r,null==i?e.lastChild=s:i.previousSibling=s;r.parentNode=e,r!==s&&(r=r.nextSibling););return Vo(e.ownerDocument||e,e),11==t.nodeType&&(t.firstChild=t.lastChild=null),t}function Yo(){this._nsMap={}}function Ko(){}function Qo(){}function Jo(){}function Zo(){}function el(){}function tl(){}function il(){}function nl(){}function rl(){}function sl(){}function al(){}function ol(){}function ll(e,t){var i,n=[],r=9==this.nodeType&&this.documentElement||this,s=r.prefix,a=r.namespaceURI;return ul(this,n,e,t,i=a&&null==s&&null==r.lookupPrefix(a)?[{namespace:a,prefix:null}]:i),n.join("")}function cl(e,t,i){var n=e.prefix||"",r=e.namespaceURI;if(r&&("xml"!==n||r!==ko.XML)&&r!==ko.XMLNS){for(var s=i.length;s--;){var a=i[s];if(a.prefix===n)return a.namespace!==r}return 1}}function dl(e,t,i){e.push(" ",t,'="',i.replace(/[<&"]/g,Ho),'"')}function ul(e,t,i,n,r){if(r=r||[],n){if(!(e=n(e)))return;if("string"==typeof e)return t.push(e)}switch(e.nodeType){case 1:var s=e.attributes,a=s.length,o=e.firstChild,l=e.tagName,c=l;if(!(i=ko.isHTML(e.namespaceURI)||i)&&!e.prefix&&e.namespaceURI){for(var d,u=0;u<s.length;u++)if("xmlns"===s.item(u).name){d=s.item(u).value;break}if(!d)for(var h=r.length-1;0<=h;h--)if(""===(p=r[h]).prefix&&p.namespace===e.namespaceURI){d=p.namespace;break}if(d!==e.namespaceURI)for(var p,h=r.length-1;0<=h;h--)if((p=r[h]).namespace===e.namespaceURI){p.prefix&&(c=p.prefix+":"+l);break}}t.push("<",c);for(var f=0;f<a;f++)"xmlns"==(m=s.item(f)).prefix?r.push({prefix:m.localName,namespace:m.value}):"xmlns"==m.nodeName&&r.push({prefix:"",namespace:m.value});for(var m,g,v,f=0;f<a;f++)cl(m=s.item(f),0,r)&&(dl(t,(g=m.prefix||"")?"xmlns:"+g:"xmlns",v=m.namespaceURI),r.push({prefix:g,namespace:v})),ul(m,t,i,n,r);if(l===c&&cl(e,0,r)&&(dl(t,(g=e.prefix||"")?"xmlns:"+g:"xmlns",v=e.namespaceURI),r.push({prefix:g,namespace:v})),o||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),i&&/^script$/i.test(l))for(;o;)o.data?t.push(o.data):ul(o,t,i,n,r.slice()),o=o.nextSibling;else for(;o;)ul(o,t,i,n,r.slice()),o=o.nextSibling;t.push("</",c,">")}else t.push("/>");return;case 9:case 11:for(o=e.firstChild;o;)ul(o,t,i,n,r.slice()),o=o.nextSibling;return;case 2:return dl(t,e.name,e.value);case 3:return t.push(e.data.replace(/[<&]/g,Ho).replace(/]]>/g,"]]&gt;"));case 4:return t.push("<![CDATA[",e.data,"]]>");case 8:return t.push("\x3c!--",e.data,"--\x3e");case 10:var y=e.publicId,_=e.systemId;return t.push("<!DOCTYPE ",e.name),y?(t.push(" PUBLIC ",y),_&&"."!=_&&t.push(" ",_),t.push(">")):_&&"."!=_?t.push(" SYSTEM ",_,">"):((_=e.internalSubset)&&t.push(" [",_,"]"),t.push(">"));case 7:return t.push("<?",e.target," ",e.data,"?>");case 5:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function hl(e,t,i){e[t]=i}(r={}).INDEX_SIZE_ERR=(L[1]="Index size error",1),r.DOMSTRING_SIZE_ERR=(L[2]="DOMString size error",2),r.HIERARCHY_REQUEST_ERR=(L[3]="Hierarchy request error",3),r.WRONG_DOCUMENT_ERR=(L[4]="Wrong document",4),r.INVALID_CHARACTER_ERR=(L[5]="Invalid character",5),r.NO_DATA_ALLOWED_ERR=(L[6]="No data allowed",6),r.NO_MODIFICATION_ALLOWED_ERR=(L[7]="No modification allowed",7),r.NOT_FOUND_ERR=(L[8]="Not found",8),r.NOT_SUPPORTED_ERR=(L[9]="Not supported",9),r.INUSE_ATTRIBUTE_ERR=(L[10]="Attribute in use",10),r.INVALID_STATE_ERR=(L[11]="Invalid state",11),r.SYNTAX_ERR=(L[12]="Syntax error",12),r.INVALID_MODIFICATION_ERR=(L[13]="Invalid modification",13),r.NAMESPACE_ERR=(L[14]="Invalid namespace",14),r.INVALID_ACCESS_ERR=(L[15]="Invalid access",15),Oo.prototype=Error.prototype,Po(r,Oo),Mo.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var i=[],n=0;n<this.length;n++)ul(this[n],i,e,t);return i.join("")}},Do.prototype.item=function(e){return jo(this),this[e]},Lo(Do,Mo),No.prototype={length:0,item:Mo.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var i=this[t];if(i.nodeName==e)return i}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new Oo(10);return t=this.getNamedItem(e.nodeName),Bo(this._ownerElement,this,e,t),t},setNamedItemNS:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new Oo(10);return t=this.getNamedItemNS(e.namespaceURI,e.localName),Bo(this._ownerElement,this,e,t),t},removeNamedItem:function(e){return e=this.getNamedItem(e),Uo(this._ownerElement,this,e),e},removeNamedItemNS:function(e,t){return t=this.getNamedItemNS(e,t),Uo(this._ownerElement,this,t),t},getNamedItemNS:function(e,t){for(var i=this.length;i--;){var n=this[i];if(n.localName==t&&n.namespaceURI==e)return n}return null}},Fo.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,i){var n=new zo;return n.implementation=this,n.childNodes=new Mo,n.doctype=i||null,i&&n.appendChild(i),t&&(t=n.createElementNS(e,t),n.appendChild(t)),n},createDocumentType:function(e,t,i){var n=new tl;return n.name=e,n.nodeName=e,n.publicId=t||"",n.systemId=i||"",n}},$o.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return Go(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return Xo(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,i,n){var r,s=new i.constructor;for(r in i){var a=i[r];"object"!=typeof a&&a!=s[r]&&(s[r]=a)}switch(i.childNodes&&(s.childNodes=new Mo),s.ownerDocument=t,s.nodeType){case 1:var o=i.attributes,l=s.attributes=new No,c=o.length;l._ownerElement=s;for(var d=0;d<c;d++)s.setAttributeNode(e(t,o.item(d),!0));break;case 2:n=!0}if(n)for(var u=i.firstChild;u;)s.appendChild(e(t,u,n)),u=u.nextSibling;return s}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&3==t.nodeType&&3==e.nodeType?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e){for(var t=this;t;){var i=t._nsMap;if(i)for(var n in i)if(i[n]==e)return n;t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var i=t._nsMap;if(i&&e in i)return i[e];t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},Po(t,$o),Po(t,$o.prototype),zo.prototype={nodeName:"#document",nodeType:9,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(11!=e.nodeType)null==this.documentElement&&1==e.nodeType&&(this.documentElement=e),Go(this,e,t),e.ownerDocument=this;else for(var i=e.firstChild;i;){var n=i.nextSibling;this.insertBefore(i,t),i=n}return e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),Xo(this,e)},importNode:function(e,t){return function e(t,i,n){var r;switch(i.nodeType){case 1:(r=i.cloneNode(!1)).ownerDocument=t;case 11:break;case 2:n=!0}if((r=r||i.cloneNode(!1)).ownerDocument=t,r.parentNode=null,n)for(var s=i.firstChild;s;)r.appendChild(e(t,s,n)),s=s.nextSibling;return r}(this,e,t)},getElementById:function(t){var i=null;return qo(this.documentElement,function(e){if(1==e.nodeType&&e.getAttribute("id")==t)return i=e,!0}),i},getElementsByClassName:function(a){var o=Ao(a);return new Do(this,function(r){var s=[];return 0<o.length&&qo(r.documentElement,function(e){var t,i,n;e!==r&&1===e.nodeType&&(t=e.getAttribute("class"))&&((i=a===t)||(t=Ao(t),i=o.every((n=t,function(e){return n&&-1!==n.indexOf(e)}))),i)&&s.push(e)}),s})},createElement:function(e){var t=new Yo;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new Mo,(t.attributes=new No)._ownerElement=t},createDocumentFragment:function(){var e=new sl;return e.ownerDocument=this,e.childNodes=new Mo,e},createTextNode:function(e){var t=new Jo;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Zo;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new el;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var i=new al;return i.ownerDocument=this,i.tagName=i.target=e,i.nodeValue=i.data=t,i},createAttribute:function(e){var t=new Ko;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new rl;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var i=new Yo,n=t.split(":"),r=i.attributes=new No;return i.childNodes=new Mo,i.ownerDocument=this,i.nodeName=t,i.tagName=t,i.namespaceURI=e,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,r._ownerElement=i},createAttributeNS:function(e,t){var i=new Ko,n=t.split(":");return i.ownerDocument=this,i.nodeName=t,i.name=t,i.namespaceURI=e,i.specified=!0,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,i}},Lo(zo,$o),zo.prototype.getElementsByTagName=(Yo.prototype={nodeType:1,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){return(e=this.getAttributeNode(e))&&e.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){(e=this.ownerDocument.createAttribute(e)).value=e.nodeValue=""+t,this.setAttributeNode(e)},removeAttribute:function(e){(e=this.getAttributeNode(e))&&this.removeAttributeNode(e)},appendChild:function(e){return 11===e.nodeType?this.insertBefore(e,null):(t=this,(i=(e=e).parentNode)&&(n=t.lastChild,i.removeChild(e),n=t.lastChild),n=t.lastChild,e.parentNode=t,e.previousSibling=n,e.nextSibling=null,n?n.nextSibling=e:t.firstChild=e,t.lastChild=e,Vo(t.ownerDocument,t,e),e);var t,i,n},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){(t=this.getAttributeNodeNS(e,t))&&this.removeAttributeNode(t)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){return(t=this.getAttributeNodeNS(e,t))&&t.value||""},setAttributeNS:function(e,t,i){(t=this.ownerDocument.createAttributeNS(e,t)).value=t.nodeValue=""+i,this.setAttributeNode(t)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(n){return new Do(this,function(t){var i=[];return qo(t,function(e){e===t||1!=e.nodeType||"*"!==n&&e.tagName!=n||i.push(e)}),i})},getElementsByTagNameNS:function(n,r){return new Do(this,function(t){var i=[];return qo(t,function(e){e===t||1!==e.nodeType||"*"!==n&&e.namespaceURI!==n||"*"!==r&&e.localName!=r||i.push(e)}),i})}}).getElementsByTagName,zo.prototype.getElementsByTagNameNS=Yo.prototype.getElementsByTagNameNS,Lo(Yo,$o),Ko.prototype.nodeType=2,Lo(Ko,$o),Qo.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(L[3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,i){var n=this.data.substring(0,e),t=this.data.substring(e+t);this.nodeValue=this.data=i=n+i+t,this.length=i.length}},Lo(Qo,$o),Jo.prototype={nodeName:"#text",nodeType:3,splitText:function(e){var t=(i=this.data).substring(e),i=i.substring(0,e);return this.data=this.nodeValue=i,this.length=i.length,t=this.ownerDocument.createTextNode(t),this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling),t}},Lo(Jo,Qo),Zo.prototype={nodeName:"#comment",nodeType:8},Lo(Zo,Qo),el.prototype={nodeName:"#cdata-section",nodeType:4},Lo(el,Qo),tl.prototype.nodeType=10,Lo(tl,$o),il.prototype.nodeType=12,Lo(il,$o),nl.prototype.nodeType=6,Lo(nl,$o),rl.prototype.nodeType=5,Lo(rl,$o),sl.prototype.nodeName="#document-fragment",sl.prototype.nodeType=11,Lo(sl,$o),al.prototype.nodeType=7,Lo(al,$o),ol.prototype.serializeToString=function(e,t,i){return ll.call(e,t,i)},$o.prototype.toString=ll;try{Object.defineProperty&&(Io=function e(t){switch(t.nodeType){case 1:case 11:var i=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&i.push(e(t)),t=t.nextSibling;return i.join("");default:return t.nodeValue}},Object.defineProperty(Do.prototype,"length",{get:function(){return jo(this),this.$$length}}),Object.defineProperty($o.prototype,"textContent",{get:function(){return Io(this)},set:function(e){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),hl=function(e,t,i){e["$$"+t]=i})}catch(j){}var ce={DocumentType:tl,DOMException:Oo,DOMImplementation:Fo,Element:Yo,Node:$o,NodeList:Mo,XMLSerializer:ol},pl=X(function(e,t){var i=So.freeze;t.XML_ENTITIES=i({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=i({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"Ãâ¬",Aacute:"ÃÂ",Acirc:"Ãâ",Atilde:"ÃÆ",Auml:"Ãâ",Aring:"Ãâ¦",AElig:"Ãâ ",Ccedil:"Ãâ¡",Egrave:"ÃË",Eacute:"Ãâ°",Ecirc:"ÃÅ ",Euml:"Ãâ¹",Igrave:"ÃÅ",Iacute:"ÃÂ",Icirc:"ÃÅ½",Iuml:"ÃÂ",ETH:"ÃÂ",Ntilde:"Ãâ",Ograve:"Ãâ",Oacute:"Ãâ",Ocirc:"Ãâ",Otilde:"Ãâ¢",Ouml:"Ãâ",Oslash:"ÃË",Ugrave:"Ãâ¢",Uacute:"ÃÅ¡",Ucirc:"Ãâº",Uuml:"ÃÅ",Yacute:"ÃÂ",THORN:"ÃÅ¾",szlig:"ÃÅ¸",agrave:"Ã ",aacute:"ÃÂ¡",acirc:"ÃÂ¢",atilde:"ÃÂ£",auml:"ÃÂ¤",aring:"ÃÂ¥",aelig:"ÃÂ¦",ccedil:"ÃÂ§",egrave:"ÃÂ¨",eacute:"ÃÂ©",ecirc:"ÃÂª",euml:"ÃÂ«",igrave:"ÃÂ¬",iacute:"ÃÂ­",icirc:"ÃÂ®",iuml:"ÃÂ¯",eth:"ÃÂ°",ntilde:"ÃÂ±",ograve:"ÃÂ²",oacute:"ÃÂ³",ocirc:"ÃÂ´",otilde:"ÃÂµ",ouml:"ÃÂ¶",oslash:"ÃÂ¸",ugrave:"ÃÂ¹",uacute:"ÃÂº",ucirc:"ÃÂ»",uuml:"ÃÂ¼",yacute:"ÃÂ½",thorn:"ÃÂ¾",yuml:"ÃÂ¿",nbsp:"Ã ",iexcl:"ÃÂ¡",cent:"ÃÂ¢",pound:"ÃÂ£",curren:"ÃÂ¤",yen:"ÃÂ¥",brvbar:"ÃÂ¦",sect:"ÃÂ§",uml:"ÃÂ¨",copy:"ÃÂ©",ordf:"ÃÂª",laquo:"ÃÂ«",not:"ÃÂ¬",shy:"ÃÂ­ÃÂ­",reg:"ÃÂ®",macr:"ÃÂ¯",deg:"ÃÂ°",plusmn:"ÃÂ±",sup2:"ÃÂ²",sup3:"ÃÂ³",acute:"ÃÂ´",micro:"ÃÂµ",para:"ÃÂ¶",middot:"ÃÂ·",cedil:"ÃÂ¸",sup1:"ÃÂ¹",ordm:"ÃÂº",raquo:"ÃÂ»",frac14:"ÃÂ¼",frac12:"ÃÂ½",frac34:"ÃÂ¾",iquest:"ÃÂ¿",times:"Ãâ",divide:"ÃÂ·",forall:"Ã¢Ëâ¬",part:"Ã¢Ëâ",exist:"Ã¢ËÆ",empty:"Ã¢Ëâ¦",nabla:"Ã¢Ëâ¡",isin:"Ã¢ËË",notin:"Ã¢Ëâ°",ni:"Ã¢Ëâ¹",prod:"Ã¢ËÂ",sum:"Ã¢Ëâ",minus:"Ã¢Ëâ",lowast:"Ã¢Ëâ",radic:"Ã¢ËÅ¡",prop:"Ã¢ËÂ",infin:"Ã¢ËÅ¾",ang:"Ã¢Ë ",and:"Ã¢ËÂ§",or:"Ã¢ËÂ¨",cap:"Ã¢ËÂ©",cup:"Ã¢ËÂª",int:"Ã¢ËÂ«",there4:"Ã¢ËÂ´",sim:"Ã¢ËÂ¼",cong:"Ã¢â°â¦",asymp:"Ã¢â°Ë",ne:"Ã¢â° ",equiv:"Ã¢â°Â¡",le:"Ã¢â°Â¤",ge:"Ã¢â°Â¥",sub:"Ã¢Å â",sup:"Ã¢Å Æ",nsub:"Ã¢Å â",sube:"Ã¢Å â ",supe:"Ã¢Å â¡",oplus:"Ã¢Å â¢",otimes:"Ã¢Å â",perp:"Ã¢Å Â¥",sdot:"Ã¢â¹â¦",Alpha:"Ãâ",Beta:"Ãâ",Gamma:"Ãâ",Delta:"Ãâ",Epsilon:"Ãâ¢",Zeta:"Ãâ",Eta:"Ãâ",Theta:"ÃË",Iota:"Ãâ¢",Kappa:"ÃÅ¡",Lambda:"Ãâº",Mu:"ÃÅ",Nu:"ÃÂ",Xi:"ÃÅ¾",Omicron:"ÃÅ¸",Pi:"Ã ",Rho:"ÃÂ¡",Sigma:"ÃÂ£",Tau:"ÃÂ¤",Upsilon:"ÃÂ¥",Phi:"ÃÂ¦",Chi:"ÃÂ§",Psi:"ÃÂ¨",Omega:"ÃÂ©",alpha:"ÃÂ±",beta:"ÃÂ²",gamma:"ÃÂ³",delta:"ÃÂ´",epsilon:"ÃÂµ",zeta:"ÃÂ¶",eta:"ÃÂ·",theta:"ÃÂ¸",iota:"ÃÂ¹",kappa:"ÃÂº",lambda:"ÃÂ»",mu:"ÃÂ¼",nu:"ÃÂ½",xi:"ÃÂ¾",omicron:"ÃÂ¿",pi:"Ãâ¬",rho:"ÃÂ",sigmaf:"Ãâ",sigma:"ÃÆ",tau:"Ãâ",upsilon:"Ãâ¦",phi:"Ãâ ",chi:"Ãâ¡",psi:"ÃË",omega:"Ãâ°",thetasym:"Ãâ",upsih:"Ãâ",piv:"Ãâ",OElig:"Ãâ",oelig:"Ãâ",Scaron:"Ã ",scaron:"ÃÂ¡",Yuml:"ÃÂ¸",fnof:"Ãâ",circ:"Ãâ ",tilde:"ÃÅ",ensp:"Ã¢â¬â",emsp:"Ã¢â¬Æ",thinsp:"Ã¢â¬â°",zwnj:"Ã¢â¬Å",zwj:"Ã¢â¬Â",lrm:"Ã¢â¬Å½",rlm:"Ã¢â¬Â",ndash:"Ã¢â¬â",mdash:"Ã¢â¬â",lsquo:"Ã¢â¬Ë",rsquo:"Ã¢â¬â¢",sbquo:"Ã¢â¬Å¡",ldquo:"Ã¢â¬Å",rdquo:"Ã¢â¬Â",bdquo:"Ã¢â¬Å¾",dagger:"Ã¢â¬ ",Dagger:"Ã¢â¬Â¡",bull:"Ã¢â¬Â¢",hellip:"Ã¢â¬Â¦",permil:"Ã¢â¬Â°",prime:"Ã¢â¬Â²",Prime:"Ã¢â¬Â³",lsaquo:"Ã¢â¬Â¹",rsaquo:"Ã¢â¬Âº",oline:"Ã¢â¬Â¾",euro:"Ã¢âÂ¬",trade:"Ã¢âÂ¢",larr:"Ã¢â Â",uarr:"Ã¢â â",rarr:"Ã¢â â",darr:"Ã¢â â",harr:"Ã¢â â",crarr:"Ã¢â Âµ",lceil:"Ã¢ÅË",rceil:"Ã¢Åâ°",lfloor:"Ã¢ÅÅ ",rfloor:"Ã¢Åâ¹",loz:"Ã¢âÅ ",spades:"Ã¢â¢ ",clubs:"Ã¢â¢Â£",hearts:"Ã¢â¢Â¥",diams:"Ã¢â¢Â¦"}),t.entityMap=t.HTML_ENTITIES}),fl=(pl.XML_ENTITIES,pl.HTML_ENTITIES,pl.entityMap,So.NAMESPACE),hi=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ml=new RegExp("[\\-\\.0-9"+hi.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),gl=new RegExp("^"+hi.source+ml.source+"*(?::"+hi.source+ml.source+"*)?$");function vl(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,vl)}function yl(){}function _l(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function bl(e,t,i){for(var n=e.tagName,r=null,s=e.length;s--;){var a=e[s],o=a.qName,l=a.value,o=0<(d=o.indexOf(":"))?(c=a.prefix=o.slice(0,d),u=o.slice(d+1),"xmlns"===c&&u):(c=null,"xmlns"===(u=o)&&"");a.localName=u,!1!==o&&(null==r&&(r={},Tl(i,i={})),i[o]=r[o]=l,a.uri=fl.XMLNS,t.startPrefixMapping(o,l))}for(var c,s=e.length;s--;)(c=(a=e[s]).prefix)&&("xml"===c&&(a.uri=fl.XML),"xmlns"!==c)&&(a.uri=i[c||""]);var d,u=0<(d=n.indexOf(":"))?(c=e.prefix=n.slice(0,d),e.localName=n.slice(d+1)):(c=null,e.localName=n),h=e.uri=i[c||""];if(t.startElement(h,u,n,e),!e.closed)return e.currentNSMap=i,e.localNSMap=r,1;if(t.endElement(h,u,n),r)for(c in r)t.endPrefixMapping(c)}function Tl(e,t){for(var i in e)t[i]=e[i]}function wl(){this.attributeNames={}}(vl.prototype=new Error).name=vl.name,yl.prototype={parse:function(e,t,i){var n=this.domBuilder;n.startDocument(),Tl(t,t={}),function(i,e,n,r,s){function a(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?65535<(t=parseInt(t.substr(1).replace("x","0x")))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):String.fromCharCode(t):(s.error("entity not found:"+e),e)}function t(e){var t;C<e&&(t=i.substring(C,e).replace(/&#?\w+;/g,a),k&&o(C),r.characters(t,0,e-C),C=e)}function o(e,t){for(;S<=e&&(t=N.exec(i));)x=t.index,S=x+t[0].length,k.lineNumber++;k.columnNumber=e-x+1}for(var l,c,d,u,h,p,f,m,g,v,y,_,b,T,w,x=0,S=0,N=/.*(?:\r\n?|\n)|.*$/g,k=r.locator,E=[{currentNSMap:e}],R={},C=0;;){try{var B,A,P=i.indexOf("<",C);if(P<0)return i.substr(C).match(/^\s*$/)||(A=(B=r.doc).createTextNode(i.substr(C)),B.appendChild(A),r.currentElement=A);switch(C<P&&t(P),i.charAt(P+1)){case"/":var L=i.indexOf(">",P+3),I=i.substring(P+2,L).replace(/[ \t\n\r]+$/g,""),O=E.pop(),U=(L<0?(I=i.substring(P+2).replace(/[\s<].*/,""),s.error("end tag name: "+I+" is not complete:"+O.tagName),L=P+1+I.length):I.match(/\s</)&&(I=I.replace(/[\s<].*/,""),s.error("end tag name: "+I+" maybe not complete"),L=P+1+I.length),O.localNSMap),F=O.tagName==I;if(F||O.tagName&&O.tagName.toLowerCase()==I.toLowerCase()){if(r.endElement(O.uri,O.localName,I),U)for(var $ in U)r.endPrefixMapping($);F||s.fatalError("end tag name: "+I+" is not match the current start tagName:"+O.tagName)}else E.push(O);L++;break;case"?":k&&o(P),b=P,T=r,w=void 0,L=(w=(_=i).indexOf("?>",b))&&(b=_.substring(b,w).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(b[0].length,T.processingInstruction(b[1],b[2]),w+2):-1;break;case"!":k&&o(P),f=P,m=r,g=s,y=v=void 0,L="-"===(p=i).charAt(f+2)?"-"!==p.charAt(f+3)?-1:f<(v=p.indexOf("--\x3e",f+4))?(m.comment(p,f+4,v-f-4),v+3):(g.error("Unclosed comment"),-1):"CDATA["==p.substr(f+3,6)?(v=p.indexOf("]]>",f+9),m.startCDATA(),m.characters(p,f+9,v-f-9),m.endCDATA(),v+3):1<(g=(y=function(e,t){var i,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=t,r.exec(e);i=r.exec(e);)if(n.push(i),i[1])return n}(p,f)).length)&&/!doctype/i.test(y[0][0])?(v=y[1][0],f=p=!1,3<g&&(/^public$/i.test(y[2][0])?(p=y[3][0],f=4<g&&y[4][0]):/^system$/i.test(y[2][0])&&(f=y[3][0])),g=y[g-1],m.startDTD(v,p,f),m.endDTD(),g.index+g[0].length):-1;break;default:k&&o(P);var M=new wl,D=E[E.length-1].currentNSMap,L=function(e,t,n,i,r,s){function a(e,t,i){n.attributeNames.hasOwnProperty(e)&&s.fatalError("Attribute "+e+" redefined"),n.addValue(e,t,i)}for(var o,l=++t,c=0;;){var d=e.charAt(l);switch(d){case"=":if(1===c)o=e.slice(t,l);else if(2!==c)throw new Error("attribute equal must after attrName");c=3;break;case"'":case'"':if(3===c||1===c){if(1===c&&(s.warning('attribute value must after "="'),o=e.slice(t,l)),!(0<(l=e.indexOf(d,t=l+1))))throw new Error("attribute value no end '"+d+"' match");a(o,u=e.slice(t,l).replace(/&#?\w+;/g,r),t-1)}else{if(4!=c)throw new Error('attribute value must after "="');a(o,u=e.slice(t,l).replace(/&#?\w+;/g,r),t),s.warning('attribute "'+o+'" missed start quot('+d+")!!"),t=l+1}c=5;break;case"/":switch(c){case 0:n.setTagName(e.slice(t,l));case 5:case 6:case 7:c=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),0==c&&n.setTagName(e.slice(t,l)),l;case">":switch(c){case 0:n.setTagName(e.slice(t,l));case 5:case 6:case 7:break;case 4:case 1:"/"===(u=e.slice(t,l)).slice(-1)&&(n.closed=!0,u=u.slice(0,-1));case 2:2===c&&(u=o),4==c?(s.warning('attribute "'+u+'" missed quot(")!'),a(o,u.replace(/&#?\w+;/g,r),t)):(fl.isHTML(i[""])&&u.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),a(u,u,t));break;case 3:throw new Error("attribute value missed!!")}return l;case"Ãâ¬":d=" ";default:if(d<=" ")switch(c){case 0:n.setTagName(e.slice(t,l)),c=6;break;case 1:o=e.slice(t,l),c=2;break;case 4:var u=e.slice(t,l).replace(/&#?\w+;/g,r);s.warning('attribute "'+u+'" missed quot(")!!'),a(o,u,t);case 5:c=6}else switch(c){case 2:n.tagName,fl.isHTML(i[""])&&o.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,t),t=l,c=1;break;case 5:s.warning('attribute space is required"'+o+'"!!');case 6:c=1,t=l;break;case 3:c=4,t=l;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}(i,P,M,D,a,s),H=M.length;if(!M.closed&&(l=i,c=L,d=M.tagName,h=void 0,null==(h=(u=R)[d])&&((h=l.lastIndexOf("</"+d+">"))<c&&(h=l.lastIndexOf("</"+d)),u[d]=h),h<c)&&(M.closed=!0,n.nbsp||s.warning("unclosed xml attribute")),k&&H){for(var q=_l(k,{}),j=0;j<H;j++){var z=M[j];o(z.offset),z.locator=_l(k,{})}r.locator=q,bl(M,r,D)&&E.push(M),r.locator=k}else bl(M,r,D)&&E.push(M);fl.isHTML(M.uri)&&!M.closed?L=function(e,t,i,n,r){if(/^(?:script|textarea)$/i.test(i)){var s=e.indexOf("</"+i+">",t),e=e.substring(t+1,s);if(/[&<]/.test(e))return/^script$/i.test(i)||(e=e.replace(/&#?\w+;/g,n)),r.characters(e,0,e.length),s}return t+1}(i,L,M.tagName,a,r):L++}}catch(e){if(e instanceof vl)throw e;s.error("element parse error: "+e),L=-1}C<L?C=L:t(Math.max(P,C)+1)}}(e,t,i,n,this.errorHandler),n.endDocument()}},wl.prototype={setTagName:function(e){if(!gl.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,i){if(!gl.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:i}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};var r={XMLReader:yl,ParseError:vl},xl=ce.DOMImplementation,Sl=So.NAMESPACE,kl=r.ParseError,El=r.XMLReader;function Cl(e){this.options=e||{locator:{}}}function Al(){this.cdata=!1}function Pl(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function Ll(e,t,i){return"string"==typeof e?e.substr(t,i):e.length>=t+i||t?new java.lang.String(e,t,i)+"":e}function Il(e,t){(e.currentElement||e.doc).appendChild(t)}function Ol(e){return e&&"object"==typeof e}function Ml(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce(function(t,i){return"object"==typeof i&&Object.keys(i).forEach(function(e){Array.isArray(t[e])&&Array.isArray(i[e])?t[e]=t[e].concat(i[e]):Ol(t[e])&&Ol(i[e])?t[e]=Ml(t[e],i[e]):t[e]=i[e]}),t},{})}function Dl(t){return Object.keys(t).map(function(e){return t[e]})}function jl(e){return e.reduce(function(e,t){return e.concat(t)},[])}function Nl(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t}function Rl(e,t){for(var i=0;i<e.length;i++)if(t(e[i]))return i;return-1}function Bl(e){var t=e.baseUrl,i=void 0===(n=e.source)?"":n,n=void 0===(n=e.range)?"":n,e=void 0===(e=e.indexRange)?"":e,i={uri:i,resolvedUri:Ra((void 0===t?"":t)||"",i)};return(n||e)&&(n=(n||e).split("-"),e=window.BigInt?window.BigInt(n[0]):parseInt(n[0],10),n=window.BigInt?window.BigInt(n[1]):parseInt(n[1],10),e<Number.MAX_SAFE_INTEGER&&"bigint"==typeof e&&(e=Number(e)),"bigint"==typeof(n="bigint"==typeof(n=n<Number.MAX_SAFE_INTEGER&&"bigint"==typeof n?Number(n):n)||"bigint"==typeof e?window.BigInt(n)-window.BigInt(e)+window.BigInt(1):n-e+1)&&n<Number.MAX_SAFE_INTEGER&&(n=Number(n)),i.byterange={length:n,offset:e}),i}function Ul(e){return e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e}function Fl(e){var s,t=e.type,i=e.duration,n=e.timescale,r=void 0===n?1:n,a=e.periodDuration,o=e.sourceDuration,e=function(e,t){for(var i=[],n=e;n<t;n++)i.push(n);return i}((n=kc[t](e)).start,n.end).map((s=e,function(e){var t=s.duration,i=s.timescale,n=s.periodStart,r=s.startNumber;return{number:(void 0===r?1:r)+e,duration:t/(void 0===i?1:i),timeline:n,time:e*t}}));return"static"===t&&(e[t=e.length-1].duration=("number"==typeof a?a:o)-i/r*t),e}function $l(e){var t=e.baseUrl,i=void 0===(l=e.initialization)?{}:l,n=e.sourceDuration,r=void 0===(o=e.indexRange)?"":o,s=e.periodStart,a=e.presentationTime,o=void 0===(l=e.number)?0:l,l=e.duration;if(t)return i=Bl({baseUrl:t,source:i.sourceURL,range:i.range}),(r=Bl({baseUrl:t,source:t,indexRange:r})).map=i,l?(e=Fl(e)).length&&(r.duration=e[0].duration,r.timeline=e[0].timeline):n&&(r.duration=n,r.timeline=s),r.presentationTime=a||s,r.number=o,[r];throw new Error(xc)}function Hl(e,t,i){for(var n=e.sidx.map||null,r=e.sidx.duration,s=e.timeline||0,a=(a=e.sidx.byterange).offset+a.length,o=t.timescale,l=t.references.filter(function(e){return 1!==e.referenceType}),c=[],d=e.endList?"static":"dynamic",u=e.sidx.timeline,h=u,p=e.mediaSequence||0,f="bigint"==typeof t.firstOffset?window.BigInt(a)+t.firstOffset:a+t.firstOffset,m=0;m<l.length;m++){var g=(y=t.references[m]).referencedSize,v=y.subsegmentDuration,y=void 0,y=$l({baseUrl:i,timescale:o,timeline:s,periodStart:u,presentationTime:h,number:p,duration:v,sourceDuration:r,indexRange:f+"-"+(y="bigint"==typeof f?f+window.BigInt(g)-window.BigInt(1):f+g-1),type:d})[0];n&&(y.map=n),c.push(y),f+="bigint"==typeof f?window.BigInt(g):g,h+=v/o,p++}e.segments=c}function ql(e){return i=function(e){return e.timeline},Dl(e.reduce(function(t,e){return e.forEach(function(e){t[i(e)]=e}),t},{})).sort(function(e,t){return e.timeline>t.timeline?1:-1});var i}function zl(e){var r=[],n=e,s=function(e,t,i,n){r=r.concat(e.playlists||[])};return Ec.forEach(function(e){for(var t in n.mediaGroups[e])for(var i in n.mediaGroups[e][t]){i=n.mediaGroups[e][t][i];s(i)}}),r}function Wl(e){var i=e.playlist,e=e.mediaSequence;i.mediaSequence=e,i.segments.forEach(function(e,t){e.number=i.mediaSequence+t})}function Vl(e){return e&&e.uri+"-"+(e="bigint"==typeof(t=e.byterange).offset||"bigint"==typeof t.length?window.BigInt(t.offset)+window.BigInt(t.length)-window.BigInt(1):t.offset+t.length-1,t.offset)+"-"+e;var t}function Xl(e){return Dl(e.reduce(function(e,t){var i,n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),(i=e[n].segments).push.apply(i,t.segments)),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):(e[n]=t,e[n].attributes.timelineStarts=[]),e[n].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e},{})).map(function(e){var t;return e.discontinuityStarts=(t=e.segments||[],t.reduce(function(e,t,i){return t.discontinuity&&e.push(i),e},[])),e})}function Gl(e,t){var i=Vl(e.sidx);return(i=i&&t[i]&&t[i].sidx)&&Hl(e,i,e.sidx.resolvedUri),e}function Yl(e){var t=e.attributes,i=e.segments,n=e.sidx,r=e.discontinuityStarts,i={attributes:((e={NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth})["PROGRAM-ID"]=1,e),uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:"",targetDuration:t.duration,discontinuityStarts:r,timelineStarts:t.timelineStarts,segments:i};return t.contentProtection&&(i.contentProtection=t.contentProtection),n&&(i.sidx=n),i}function Kl(e){return"video/mp4"===(e=e.attributes).mimeType||"video/webm"===e.mimeType||"video"===e.contentType}function Ql(e){return"audio/mp4"===(e=e.attributes).mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType}function Jl(e){return"text/vtt"===(e=e.attributes).mimeType||"text"===e.contentType}function Zl(i){return i?Object.keys(i).reduce(function(e,t){return t=i[t],e.concat(t.playlists)},[]):[]}function ec(e){var t=e.dashPlaylists,i=e.locations,n=void 0===(d=e.sidxMapping)?{}:d,r=e.previousManifest;if(!t.length)return{};var s=(u=t[0].attributes).sourceDuration,a=u.type,o=u.suggestedPresentationDelay,l=u.minimumUpdatePeriod,c=Xl(t.filter(Kl)).map(Yl),d=Xl(t.filter(Ql)),e=Xl(t.filter(Jl)),u=t.map(function(e){return e.attributes.captionServices}).filter(Boolean),s={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:((t={AUDIO:{},VIDEO:{}})["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:s,playlists:function(e,t){if(void 0===t&&(t={}),Object.keys(t).length)for(var i in e)e[i]=Gl(e[i],t);return e}(c,n)};0<=l&&(s.minimumUpdatePeriod=1e3*l),i&&(s.locations=i),"dynamic"===a&&(s.suggestedPresentationDelay=o);var h,p,f,m,g,v,y,o=0===s.playlists.length,o=d.length?(void 0===(f=n)&&(f={}),void 0===(m=o)&&(m=!1),t=(t=d).reduce(function(e,t){var i=t.attributes.role&&t.attributes.role.value||"",n=t.attributes.lang||"",r=t.attributes.label||"main";e[r=n&&!t.attributes.label?t.attributes.lang+(i?" ("+i+")":""):r]||(e[r]={language:n,autoselect:!0,default:"main"===i,playlists:[],uri:""});var s,a,o,l,c,d,u=Gl((a=m,o=(s=t).attributes,u=t.segments,l=t.sidx,c=t.mediaSequence,d=t.discontinuitySequence,n=t.discontinuityStarts,u={attributes:((s={NAME:o.id,BANDWIDTH:o.bandwidth,CODECS:o.codecs})["PROGRAM-ID"]=1,s),uri:"",endList:"static"===o.type,timeline:o.periodStart,resolvedUri:"",targetDuration:o.duration,discontinuitySequence:d,discontinuityStarts:n,timelineStarts:o.timelineStarts,mediaSequence:c,segments:u},o.contentProtection&&(u.contentProtection=o.contentProtection),l&&(u.sidx=l),a&&(u.attributes.AUDIO="audio",u.attributes.SUBTITLES="subs"),u),f);return e[r].playlists.push(u),void 0===g&&"main"===i&&((g=t).default=!0),e},{}),g||(t[Object.keys(t)[0]].default=!0),t):null,n=e.length?(void 0===(h=n)&&(h={}),e.reduce(function(e,t){var i,n,r,s,a=t.attributes.lang||"text";return e[a]||(e[a]={language:a,default:!1,autoselect:!1,playlists:[],uri:""}),e[a].playlists.push(Gl((t=(a=t).attributes,i=a.segments,n=a.mediaSequence,r=a.discontinuityStarts,s=a.discontinuitySequence,void 0===i&&(i=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration),a={NAME:t.id,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1},t.codecs&&(a.CODECS=t.codecs),{attributes:a,uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:r,discontinuitySequence:s,mediaSequence:n,segments:i}),h)),e},{})):null,c=(e=c.concat(Zl(o),Zl(n))).map(function(e){return e.timelineStarts});return s.timelineStarts=ql(c),p=s.timelineStarts,e.forEach(function(t){t.mediaSequence=0,t.discontinuitySequence=Rl(p,function(e){return e.timeline===t.timeline}),t.segments&&t.segments.forEach(function(e,t){e.number=t})}),o&&(s.mediaGroups.AUDIO.audio=o),n&&(s.mediaGroups.SUBTITLES.subs=n),u.length&&(s.mediaGroups["CLOSED-CAPTIONS"].cc=u.reduce(function(n,e){return e&&e.forEach(function(e){var t=e.channel,i=e.language;n[i]={autoselect:!1,default:!1,instreamId:t,language:i},e.hasOwnProperty("aspectRatio")&&(n[i].aspectRatio=e.aspectRatio),e.hasOwnProperty("easyReader")&&(n[i].easyReader=e.easyReader),e.hasOwnProperty("3D")&&(n[i]["3D"]=e["3D"])}),n},{})),r?(i=(l={oldManifest:r,newManifest:s}).oldManifest,a=l.newManifest,d=i.playlists.concat(zl(i)),l=a.playlists.concat(zl(a)),a.timelineStarts=ql([i.timelineStarts,a.timelineStarts]),d={oldPlaylists:d,newPlaylists:l,timelineStarts:a.timelineStarts},v=d.oldPlaylists,y=d.timelineStarts,(l=d.newPlaylists).forEach(function(t){t.discontinuitySequence=Rl(y,function(e){return e.timeline===t.timeline});var i,e,n=function(e,t){for(var i=0;i<e.length;i++)if(e[i].attributes.NAME===t)return e[i];return null}(v,t.attributes.NAME);n&&!t.sidx&&(i=t.segments[0],-1===(e=Rl(n.segments,function(e){return Math.abs(e.presentationTime-i.presentationTime)<1/60}))?(Wl({playlist:t,mediaSequence:n.mediaSequence+n.segments.length}),t.segments[0].discontinuity=!0,t.discontinuityStarts.unshift(0),(!n.segments.length&&t.timeline>n.timeline||n.segments.length&&t.timeline>n.segments[n.segments.length-1].timeline)&&t.discontinuitySequence--):(n.segments[e].discontinuity&&!i.discontinuity&&(i.discontinuity=!0,t.discontinuityStarts.unshift(0),t.discontinuitySequence--),Wl({playlist:t,mediaSequence:n.segments[e].number})))}),a):s}function tc(e,t){for(var i,n,r,s,a=e.type,o=e.minimumUpdatePeriod,l=void 0===o?0:o,c=void 0===(o=e.media)?"":o,d=e.sourceDuration,u=void 0===(o=e.timescale)?1:o,h=void 0===(o=e.startNumber)?1:o,p=e.periodStart,f=[],m=-1,g=0;g<t.length;g++){var v=t[g],y=v.d,_=v.r||0,b=v.t||0;m<0&&(m=b),b&&m<b&&(m=b);for(var T,w=_<0?(T=g+1)===t.length?"dynamic"===a&&0<l&&0<c.indexOf("$Number$")?(i=m,0,w=e.NOW,n=e.clientOffset,r=e.availabilityStartTime,s=e.timescale,v=e.periodStart,b=e.minimumUpdatePeriod,Math.ceil((((w+n)/1e3+(void 0===b?0:b)-(r+(void 0===v?0:v)))*(void 0===s?1:s)-i)/y)):(d*u-m)/y:(t[T].t-m)/y:_+1,x=h+f.length+w,S=h+f.length;S<x;)f.push({number:S,duration:y/u,time:m,timeline:p}),m+=y,S++}return f}function ic(e,t){return e.replace(Cc,(r=t,function(e,t,i,n){return"$$"===e?"$":void 0===r[t]||(e=""+r[t],"RepresentationID"===t)||(n=i?parseInt(n,10):1)<=e.length?e:new Array(n-e.length+1).join("0")+e}));var r}function nc(r,e){var s={RepresentationID:r.id,Bandwidth:r.bandwidth||0},t=void 0===(t=r.initialization)?{sourceURL:"",range:""}:t,a=Bl({baseUrl:r.baseUrl,source:ic(t.sourceURL,s),range:t.range}),t=e;return((e=r).duration||t?e.duration?Fl(e):tc(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]).map(function(e){s.Number=e.number,s.Time=e.time;var t=ic(r.media||"",s),i=r.timescale||1,n=r.presentationTimeOffset||0,i=r.periodStart+(e.time-n)/i;return{uri:t,timeline:e.timeline,duration:e.duration,resolvedUri:Ra(r.baseUrl||"",t),map:a,number:e.number,presentationTime:i}})}function rc(r,e){var t=r.duration,i=void 0===(i=r.segmentUrls)?[]:i,s=r.periodStart;if(!t&&!e||t&&e)throw new Error(Sc);var n,a=i.map(function(e){return i=e,t=Bl({baseUrl:e=r.baseUrl,source:(t=void 0===(t=r.initialization)?{}:t).sourceURL,range:t.range}),(i=Bl({baseUrl:e,source:i.media,range:i.mediaRange})).map=t,i;var t,i});return t&&(n=Fl(r)),(n=e?tc(r,e):n).map(function(e,t){var i,n;if(a[t])return i=a[t],n=r.timescale||1,t=r.presentationTimeOffset||0,i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i.presentationTime=s+(e.time-t)/n,i}).filter(function(e){return e})}function sc(e){var t,i,n=e.attributes,r=e.segmentInfo,s=(r.template?(i=nc,t=Ml(n,r.template)):r.base?(i=$l,t=Ml(n,r.base)):r.list&&(i=rc,t=Ml(n,r.list)),{attributes:n});return i&&(e=i(t,r.segmentTimeline),t.duration?(n=t.duration,i=t.timescale,t.duration=n/(void 0===i?1:i)):e.length?t.duration=e.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):t.duration=0,s.attributes=t,s.segments=e,r.base)&&t.indexRange&&(s.sidx=e[0],s.segments=[]),s}function I(e,t){return Nl(e.childNodes).filter(function(e){return e.tagName===t})}function ac(e){return e.textContent.trim()}function oc(e){var t,i,n,r,s;return(r=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e))?(t=(s=r.slice(1))[0],i=s[1],n=s[2],e=s[3],r=s[4],s=s[5],31536e3*parseFloat(t||0)+2592e3*parseFloat(i||0)+86400*parseFloat(n||0)+3600*parseFloat(e||0)+60*parseFloat(r||0)+parseFloat(s||0)):0}function lc(e){return e&&e.attributes?Nl(e.attributes).reduce(function(e,t){var i=Ac[t.name]||Ac.DEFAULT;return e[t.name]=i(t.value),e},{}):{}}function cc(e,i){return i.length?jl(e.map(function(t){return i.map(function(e){return Ra(t,ac(e))})})):e}function dc(e){var t=I(e,"SegmentTemplate")[0],i=I(e,"SegmentList")[0],n=i&&I(i,"SegmentURL").map(function(e){return Ml({tag:"SegmentURL"},lc(e))}),r=I(e,"SegmentBase")[0],e=(s=i||t)&&I(s,"SegmentTimeline")[0],s=(s=i||r||t)&&I(s,"Initialization")[0],a=((t=t&&lc(t))&&s?t.initialization=s&&lc(s):t&&t.initialization&&(t.initialization={sourceURL:t.initialization}),{template:t,segmentTimeline:e&&I(e,"S").map(lc),list:i&&Ml(lc(i),{segmentUrls:n,initialization:lc(s)}),base:r&&Ml(lc(r),{initialization:lc(s)})});return Object.keys(a).forEach(function(e){a[e]||delete a[e]}),a}function uc(e,t){var i=t=void 0===t?{}:t,n=void 0===(s=i.manifestUri)?"":s,t=void 0===(r=i.NOW)?Date.now():r,r=void 0===(s=i.clientOffset)?0:s;if(!(i=I(e,"Period")).length)throw new Error(bc);var s=I(e,"Location"),a=lc(e),e=cc([n],I(e,"BaseURL"));a.type=a.type||"static",a.sourceDuration=a.mediaPresentationDuration||0,a.NOW=t,a.clientOffset=r,s.length&&(a.locations=s.map(ac));var o,u,l=[];return i.forEach(function(e,t){var i,n=lc(e),r=l[t-1];n.start=(r=(i={attributes:n,priorPeriodAttributes:r?r.attributes:null,mpdType:a.type}).priorPeriodAttributes,"number"==typeof(t=i.attributes).start?t.start:r&&"number"==typeof r.start&&"number"==typeof r.duration?r.start+r.duration:r||"static"!==i.mpdType?null:0),l.push({node:e,attributes:n})}),{locations:a.locations,representationInfo:jl(l.map((o=a,u=e,function(e,t){var l,c,d,i=cc(u,I(e.node,"BaseURL")),n=Ml(o,{periodStart:e.attributes.start}),r=("number"==typeof e.attributes.duration&&(n.periodDuration=e.attributes.duration),I(e.node,"AdaptationSet")),e=dc(e.node);return jl(r.map((l=n,c=i,d=e,function(e){var t=lc(e),i=cc(c,I(e,"BaseURL")),n={role:lc(n=I(e,"Role")[0])},t=Ml(l,t,n),r=((n="urn:scte:dash:cc:cea-608:2015"===(n=lc(n=I(e,"Accessibility")[0])).schemeIdUri?("string"!=typeof n.value?[]:n.value.split(";")).map(function(e){var t,i,n;return/^CC\d=/.test(n=e)?(i=(t=e.split("="))[0],n=t[1]):/^CC\d$/.test(e)&&(i=e),{channel:i,language:n}}):"urn:scte:dash:cc:cea-708:2015"===n.schemeIdUri?("string"!=typeof n.value?[]:n.value.split(";")).map(function(e){var t,i,n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};return/=/.test(e)?(t=(i=e.split("="))[0],i=void 0===(i=i[1])?"":i,n.channel=t,n.language=e,i.split(",").forEach(function(e){var e=(t=e.split(":"))[0],t=t[1];"lang"===e?n.language=t:"er"===e?n.easyReader=Number(t):"war"===e?n.aspectRatio=Number(t):"3D"===e&&(n["3D"]=Number(t))})):n.language=e,n.channel&&(n.channel="SERVICE"+n.channel),n}):void 0)&&(t=Ml(t,{captionServices:n})),(n=I(e,"Label")[0])&&n.childNodes.length&&(t=Ml(t,{label:r=n.childNodes[0].nodeValue.trim()})),I(e,"ContentProtection").reduce(function(e,t){var i=lc(t),n=(i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase()),Pc[i.schemeIdUri]);return n&&(e[n]={attributes:i},t=I(t,"cenc:pssh")[0])&&(t=ac(t),e[n].pssh=t&&Ha(t)),e},{}));Object.keys(r).length&&(t=Ml(t,{contentProtection:r}));var s,a,o,r=dc(e),e=I(e,"Representation"),r=Ml(d,r);return jl(e.map((s=t,a=i,o=r,function(e){var t=I(e,"BaseURL"),t=cc(a,t),i=Ml(s,lc(e)),n=dc(e);return t.map(function(e){return{segmentInfo:Ml(o,n),attributes:Ml(i,{baseUrl:e})}})})))})))})))}}function hc(e){if(""===e)throw new Error(Tc);var t,i,n=new _c;try{i=(t=n.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(e){}if(!i||0<i.getElementsByTagName("parsererror").length)throw new Error(wc);return i}function pc(e,t){return void 0===t&&(t=0),(e=C(e)).length-t<10||!A(e,Oc,{offset:t})?t:pc(e,t+=(void 0===(i=t)&&(i=0),n=(e=C(e))[i+5],i=e[i+6]<<21|e[i+7]<<14|e[i+8]<<7|e[i+9],(16&n)>>4?20+i:10+i));var i,n}function fc(e){return"string"==typeof e?to(e):e}function mc(e,t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var r,s,a=function(e){for(var t=1,i=0;i<Dc.length&&!(e&Dc[i]);i++)t++;return t}(e[t]),o=e.subarray(t,t+a);return i&&((o=Array.prototype.slice.call(e,t,t+a))[0]^=Dc[a-1]),{length:a,value:(r=o,i=void 0!==(i=(e=i={signed:n}).signed)&&i,s=void 0!==(e=e.le)&&e,e=((r=C(r))[e=s?"reduce":"reduceRight"]||Array.prototype[e]).call(r,function(e,t,i){return i=s?i:Math.abs(i+1-r.length),e+P(t)*vo[i]},P(0)),i&&(i=vo[r.length]/P(2)-P(1))<(e=P(e))&&(e=(e=e-i-i)-P(2)),Number(e)),bytes:o}}function gc(e){{if("string"==typeof e)return e.match(/.{1,2}/g).map(gc);if("number"!=typeof e)return e;for(var t=e,i=void 0,n=void 0!==(i=(void 0===i?{}:i).le)&&i,r=(i=t=P(t="bigint"!=typeof t&&"number"!=typeof t||"number"==typeof t&&t!=t?0:t),Math.ceil(i.toString(2).length/8)),s=new Uint8Array(new ArrayBuffer(r)),a=0;a<r;a++){var o=n?a:Math.abs(a+1-s.length);s[o]=Number(t/vo[a]&P(255)),t<0&&(s[o]=Math.abs(~s[o]),s[o]-=0===a?1:2)}return s}}function vc(e,t){var i=t,n=(t=Array.isArray(i)?i.map(gc):[gc(i)],e=C(e),[]);if(t.length)for(var r=0;r<e.length;){var s=mc(e,r,!1),a=mc(e,r+s.length),o=r+s.length+a.length,l=(127===a.value&&(a.value=function e(t,i,n){var r;return n>=i.length?i.length:(r=mc(i,n,!1),A(t.bytes,r.bytes)?n:e(t,i,n+(t=mc(i,n+r.length)).length+t.value+r.length))}(s,e,o),a.value!==e.length)&&(a.value-=o),o+a.value>e.length?e.length:o+a.value),l=e.subarray(o,l);A(t[0],s.bytes)&&(1===t.length?n.push(l):n=n.concat(vc(l,t.slice(1)))),r+=s.length+a.length+l.length}return n}function yc(e,t,i,n){void 0===n&&(n=1/0),e=C(e),i=[].concat(i);for(var r,s=0,a=0;s<e.length&&(a<n||r);){var o=void 0;if(A(e.subarray(s),jc)?o=4:A(e.subarray(s),Nc)&&(o=3),o){if(a++,r){var l=e.subarray(r,s);for(var c=[],d=1;d<l.length-2;)A(l.subarray(d,d+3),Rc)&&(c.push(d+2),d++),d++;if(0===c.length)return l;for(var u=l.length-c.length,h=new Uint8Array(u),p=0,d=0;d<u;p++,d++)p===c[0]&&(p++,c.shift()),h[d]=l[p];return h;return}var f=void 0;"h264"===t?f=31&e[s+o]:"h265"===t&&(f=e[s+o]>>1&63),-1!==i.indexOf(f)&&(r=s+o),s+=o+("h264"===t?1:2)}else s++}return e.subarray(0,0)}Cl.prototype.parseFromString=function(e,t){var i=this.options,n=new El,a=i.domBuilder||new Al,r=i.errorHandler,s=i.locator,o=i.xmlns||{},l=/\/x?html?$/.test(t),t=l?pl.HTML_ENTITIES:pl.XML_ENTITIES;return s&&a.setDocumentLocator(s),n.errorHandler=function(n,r){if(!n){if(a instanceof Al)return a;n=a}var e={},s=n instanceof Function;function t(t){var i=n[t];!i&&s&&(i=2==n.length?function(e){n(t,e)}:n),e[t]=i?function(e){i("[xmldom "+t+"]\t"+e+function(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}(r))}:function(){}}return r=r||{},t("warning"),t("error"),t("fatalError"),e}(r,s),n.domBuilder=i.domBuilder||a,l&&(o[""]=Sl.HTML),o.xml=o.xml||Sl.XML,e&&"string"==typeof e?n.parse(e,o,t):n.errorHandler.error("invalid doc source"),a.doc},Al.prototype={startDocument:function(){this.doc=(new xl).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,i,n){var r=this.doc,s=r.createElementNS(e,i||t),a=n.length;Il(this,s),this.currentElement=s,this.locator&&Pl(this.locator,s);for(var o=0;o<a;o++){var e=n.getURI(o),l=n.getValue(o),i=n.getQName(o),c=r.createAttributeNS(e,i);this.locator&&Pl(n.getLocator(o),c),c.value=c.nodeValue=l,s.setAttributeNode(c)}},endElement:function(e,t,i){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){t=this.doc.createProcessingInstruction(e,t),this.locator&&Pl(this.locator,t),Il(this,t)},ignorableWhitespace:function(e,t,i){},characters:function(e,t,i){var n;(e=Ll.apply(this,arguments))&&(n=this.cdata?this.doc.createCDATASection(e):this.doc.createTextNode(e),this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator)&&Pl(this.locator,n)},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,i){e=Ll.apply(this,arguments),e=this.doc.createComment(e),this.locator&&Pl(this.locator,e),Il(this,e)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,i){var n=this.doc.implementation;n&&n.createDocumentType&&(i=n.createDocumentType(e,t,i),this.locator&&Pl(this.locator,i),Il(this,i),this.doc.doctype=i)},warning:function(e){},error:function(e){},fatalError:function(e){throw new kl(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){Al.prototype[e]=function(){return null}});var _c=Cl,bc="INVALID_NUMBER_OF_PERIOD",Tc="DASH_EMPTY_MANIFEST",wc="DASH_INVALID_XML",xc="NO_BASE_URL",Sc="SEGMENT_TIME_UNSPECIFIED",kc={static:function(e){var t=e.duration,i=void 0===(r=e.timescale)?1:r,n=e.sourceDuration,r=e.periodDuration,i=t/i;return"number"==typeof(e=Ul(e.endNumber))?{start:0,end:e}:"number"==typeof r?{start:0,end:r/i}:{start:0,end:n/i}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=void 0===(l=e.timescale)?1:l,s=e.duration,a=void 0===(o=e.periodStart)?0:o,o=void 0===(l=e.minimumUpdatePeriod)?0:l,l=void 0===(l=e.timeShiftBufferDepth)?1/0:l,e=Ul(e.endNumber),i=(t+i)/1e3,a=n+a,o=Math.ceil((i+o-a)*r/s),l=Math.floor((i-a-l)*r/s),s=Math.floor((i-a)*r/s);return{start:Math.max(0,l),end:"number"==typeof e?e:Math.min(o,s)}}},Ec=["AUDIO","SUBTITLES"],Cc=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Ac={mediaPresentationDuration:oc,availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),Date.parse(e)/1e3},minimumUpdatePeriod:oc,suggestedPresentationDelay:oc,type:function(e){return e},timeShiftBufferDepth:oc,start:oc,width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?oc(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Pc={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Lc=Math.pow(2,32),Ic=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return t.getBigUint64?(e=t.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(e):e:t.getUint32(0)*Lc+t.getUint32(4)},Oc=C([73,68,51]),Mc={EBML:C([26,69,223,163]),DocType:C([66,130]),Segment:C([24,83,128,103]),SegmentInfo:C([21,73,169,102]),Tracks:C([22,84,174,107]),Track:C([174]),TrackNumber:C([215]),DefaultDuration:C([35,227,131]),TrackEntry:C([174]),TrackType:C([131]),FlagDefault:C([136]),CodecID:C([134]),CodecPrivate:C([99,162]),VideoTrack:C([224]),AudioTrack:C([225]),Cluster:C([31,67,182,117]),Timestamp:C([231]),TimestampScale:C([42,215,177]),BlockGroup:C([160]),BlockDuration:C([155]),Block:C([161]),SimpleBlock:C([163])},Dc=[128,64,32,16,8,4,2,1],jc=C([0,0,0,1]),Nc=C([0,0,1]),Rc=C([0,0,3]),Bc={webm:C([119,101,98,109]),matroska:C([109,97,116,114,111,115,107,97]),flac:C([102,76,97,67]),ogg:C([79,103,103,83]),ac3:C([11,119]),riff:C([82,73,70,70]),avi:C([65,86,73]),wav:C([87,65,86,69]),"3gp":C([102,116,121,112,51,103]),mp4:C([102,116,121,112]),fmp4:C([115,116,121,112]),mov:C([102,116,121,112,113,116]),moov:C([109,111,111,118]),moof:C([109,111,111,102])},Uc={aac:function(e){return A(e,[255,16],{offset:pc(e),mask:[255,22]})},mp3:function(e){return A(e,[255,2],{offset:pc(e),mask:[255,6]})},webm:function(e){return A(e=vc(e,[Mc.EBML,Mc.DocType])[0],Bc.webm)},mkv:function(e){return A(e=vc(e,[Mc.EBML,Mc.DocType])[0],Bc.matroska)},mp4:function(e){return!Uc["3gp"](e)&&!Uc.mov(e)&&(!(!A(e,Bc.mp4,{offset:4})&&!A(e,Bc.fmp4,{offset:4}))||!(!A(e,Bc.moof,{offset:4})&&!A(e,Bc.moov,{offset:4}))||void 0)},mov:function(e){return A(e,Bc.mov,{offset:4})},"3gp":function(e){return A(e,Bc["3gp"],{offset:4})},ac3:function(e){var t=pc(e);return A(e,Bc.ac3,{offset:t})},ts:function(e){if(e.length<189&&1<=e.length)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=pc(e);return A(e,Bc.flac,{offset:t})},ogg:function(e){return A(e,Bc.ogg)},avi:function(e){return A(e,Bc.riff)&&A(e,Bc.avi,{offset:8})},wav:function(e){return A(e,Bc.riff)&&A(e,Bc.wav,{offset:8})},h264:function(e){return yc(e,"h264",7,3).length},h265:function(e){return yc(e,"h265",[32,33],3).length}},Fc=Object.keys(Uc).filter(function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e}).concat(["ts","h264","h265"]);function $c(e){e=C(e);for(var t=0;t<Fc.length;t++){var i=Fc[t];if(pu[i](e))return i}return""}function Hc(e,t,i){return e&&i&&i.responseURL&&t!==i.responseURL?i.responseURL:t}function qc(e){return H.log.debug?H.log.debug.bind(H,"VHS:",e+" >"):function(){}}function zc(e,t){var i,n=[];if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return H.createTimeRanges(n)}function Wc(e,i){return zc(e,function(e,t){return e-.1<=i&&i<=t+.1})}function Vc(e,t){return zc(e,function(e){return t<=e-mu})}function Xc(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")}function Gc(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}function Yc(e){if(e&&e.length&&e.end)return e.end(e.length-1)}function Kc(e,t){var i=0;if(e&&e.length)for(var n=0;n<e.length;n++){var r=e.start(n),s=e.end(n);s<t||(i+=r<t&&t<=s?s-t:s-r)}return i}function Qc(t,e){var i;return e.preload?(i=0,(e.parts||[]).forEach(function(e){i+=e.duration}),(e.preloadHints||[]).forEach(function(e){"PART"===e.type&&(i+=t.partTargetDuration)}),i):e.duration}function Jc(e){return(e.segments||[]).reduce(function(i,n,r){return n.parts?n.parts.forEach(function(e,t){i.push({duration:e.duration,segmentIndex:r,partIndex:t,part:e,segment:n})}):i.push({duration:n.duration,segmentIndex:r,partIndex:null,segment:n,part:null}),i},[])}function Zc(e){return(e=e.segments&&e.segments.length&&e.segments[e.segments.length-1])&&e.parts||[]}function ed(e){var t=e.preloadSegment;if(t)return e=t.parts,(t=(t.preloadHints||[]).reduce(function(e,t){return e+("PART"===t.type?1:0)},0))+(e&&e.length?e.length:0)}function td(e,t){return t.endList?0:e&&e.suggestedPresentationDelay?e.suggestedPresentationDelay:(e=0<Zc(t).length)&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:e&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0}function id(e,r,t){var i;return(r=void 0===r?e.mediaSequence+e.segments.length:r)<e.mediaSequence?0:(i=function(e){var t=0,i=r-e.mediaSequence,n=e.segments[i];if(n){if(void 0!==n.start)return{result:n.start,precise:!0};if(void 0!==n.end)return{result:n.end-n.duration,precise:!0}}for(;i--;){if(void 0!==(n=e.segments[i]).end)return{result:t+n.end,precise:!0};if(t+=Qc(e,n),void 0!==n.start)return{result:t+n.start,precise:!0}}return{result:t,precise:!1}}(e)).precise?i.result:(r=function(e){for(var t,i=0,n=r-e.mediaSequence;n<e.segments.length;n++){if(void 0!==(t=e.segments[n]).start)return{result:t.start-i,precise:!0};if(i+=Qc(e,t),void 0!==t.end)return{result:t.end-i,precise:!0}}return{result:-1,precise:!1}}(e)).precise?r.result:i.result+t}function nd(e,t,i){if(!e)return 0;if("number"!=typeof i&&(i=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return window.Infinity}return id(e,t,i)}function rd(e){var t=e.defaultDuration,i=e.durationList,n=e.startIndex,r=e.endIndex,s=0;if(r<n&&(n=(e=[r,n])[0],r=e[1]),n<0){for(var a=n;a<Math.min(0,r);a++)s+=t;n=0}for(var o=n;o<r;o++)s+=i[o].duration;return s}function sd(e,t,i,n){return e&&e.segments?e.endList?nd(e):null===t?null:(t=id(e,e.mediaSequence+e.segments.length,t=t||0),i&&(t-=n="number"==typeof n?n:td(null,e)),Math.max(0,t)):null}function ad(e){return e.excludeUntil&&e.excludeUntil>Date.now()}function od(e){return e.excludeUntil&&e.excludeUntil===1/0}function ld(e){var t=ad(e);return!e.disabled&&!t}function cd(e,t){return t.attributes&&t.attributes[e]}function dd(e,t){var i;return 1===e.playlists.length||(i=t.attributes.BANDWIDTH||Number.MAX_VALUE,0===e.playlists.filter(function(e){return!!ld(e)&&(e.attributes.BANDWIDTH||0)<i}).length)}function ud(e,t){return!(!e&&!t||!e&&t||e&&!t||e!==t&&(!e.id||!t.id||e.id!==t.id)&&(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&&(!e.uri||!t.uri||e.uri!==t.uri))}function hd(e,t){var i,n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},r=!1;for(i in n){for(var s in n[i])if(r=t(n[i][s]))break;if(r)break}return!!r}function pd(i){if(!i||!i.playlists||!i.playlists.length)return hd(i,function(e){return e.playlists&&e.playlists.length||e.uri});for(var e=0;e<i.playlists.length;e++){var t=function(e){var t=i.playlists[e];return(e=t.attributes&&t.attributes.CODECS)&&e.split(",").every(Ya)||hd(i,function(e){return ud(t,e)})?"continue":{v:!1}}(e);if("continue"!==t&&"object"==typeof t)return t.v}return!0}function fd(e,t){return e+"-"+t}function md(r,s){r.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(e){if(r.mediaGroups[e])for(var t in r.mediaGroups[e])for(var i in r.mediaGroups[e][t]){var n=r.mediaGroups[e][t][i];s(n,e,t,i)}})}function gd(e){var t=e.playlist,i=e.uri,e=e.id;t.id=e,t.playlistErrors_=0,i&&(t.uri=i),t.attributes=t.attributes||{}}function vd(o,e){o.uri=e;for(var t=0;t<o.playlists.length;t++)o.playlists[t].uri||(o.playlists[t].uri="placeholder-uri-"+t);for(var i,l=pd(o),n=(md(o,function(e,t,i,n){var r="placeholder-uri-"+t+"-"+i+"-"+n;if(!e.playlists||!e.playlists.length){if(l&&"AUDIO"===t&&!e.uri)for(var s=0;s<o.playlists.length;s++){var a=o.playlists[s];if(a.attributes&&a.attributes.AUDIO&&a.attributes.AUDIO===i)return}e.playlists=[Y({},e)]}e.playlists.forEach(function(e,t){var i=t+"-"+r;e.uri?e.resolvedUri=e.resolvedUri||fu(o.uri,e.uri):(e.uri=0===t?r:i,e.resolvedUri=e.uri),e.id=e.id||i,e.attributes=e.attributes||{},o.playlists[e.id]=e,o.playlists[e.uri]=e})}),o),r=n.playlists.length;r--;){var s=n.playlists[r];gd({playlist:s,id:r+"-"+s.uri}),s.resolvedUri=fu(n.uri,s.uri),n.playlists[s.id]=s,(n.playlists[s.uri]=s).attributes.BANDWIDTH||yu.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}md(i=o,function(e){e.uri&&(e.resolvedUri=fu(i.uri,e.uri))})}function yd(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=fu(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=fu(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=fu(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=fu(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(e){e.resolvedUri||(e.resolvedUri=fu(t,e.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(e){e.resolvedUri||(e.resolvedUri=fu(t,e.uri))})}function _d(e){var t=e.segments||[],i=e.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints)for(var n=0;n<i.preloadHints.length;n++)if("MAP"===i.preloadHints[n].type)return t;i.duration=e.targetDuration,i.preload=!0,t.push(i)}return t}function bd(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment}function Td(e,s,t){void 0===t&&(t=bd);var i=_u(e,{}),n=i.playlists[s.id];if(!n)return null;if(t(n,s))return null;s.segments=_d(s);var a=_u(n,s);if(a.preloadSegment&&!s.preloadSegment&&delete a.preloadSegment,n.segments){if(s.skip){s.segments=s.segments||[];for(var r=0;r<s.skip.skippedSegments;r++)s.segments.unshift({skipped:!0})}a.segments=function(e,t,i){var n=e.slice(),r=t.slice();i=i||0;for(var s,a=[],o=0;o<r.length;o++){var l=n[o+i],c=r[o];l?(s=l.map||s,a.push(function(e,t){if(!e)return t;var i=_u(e,t);if(e.preloadHints&&!t.preloadHints&&delete i.preloadHints,e.parts&&!t.parts)delete i.parts;else if(e.parts&&t.parts)for(var n=0;n<t.parts.length;n++)e.parts&&e.parts[n]&&(i.parts[n]=_u(e.parts[n],t.parts[n]));return!e.skipped&&t.skipped&&(i.skipped=!1),e.preload&&!t.preload&&(i.preload=!1),i}(l,c))):(s&&!c.map&&(c.map=s),a.push(c))}return a}(n.segments,s.segments,s.mediaSequence-n.mediaSequence)}a.segments.forEach(function(e){yd(e,a.resolvedUri)});for(var o=0;o<i.playlists.length;o++)i.playlists[o].id===s.id&&(i.playlists[o]=a);return i.playlists[s.id]=a,i.playlists[s.uri]=a,md(e,function(e,t,i,n){if(e.playlists)for(var r=0;r<e.playlists.length;r++)s.id===e.playlists[r].id&&(e.playlists[r]=a)}),i}function wd(e,t){var i=e.segments||[],n=(i=(n=i[i.length-1])&&n.parts&&n.parts[n.parts.length-1])&&i.duration||n&&n.duration;return t&&n?1e3*n:500*(e.partTargetDuration||e.targetDuration||10)}function xd(e,t,i,n){var r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),i.headers&&(e.responseHeaders=i.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),n(t=t||e.aborted||200===i.statusCode||206===i.statusCode||0===i.statusCode?t:new Error("XHR Failed with a response of: "+(e&&(r||e.responseText))),e)}function Sd(){function s(e,i){e=wu({timeout:45e3},e);var t=s.beforeRequest||H.Vhs.xhr.beforeRequest,n=(t&&"function"==typeof t&&(t=t(e))&&(e=t),(!0===H.Vhs.xhr.original?Tu:H.Vhs.xhr)(e,function(e,t){return xd(n,e,t,i)})),r=n.abort;return n.abort=function(){return n.aborted=!0,r.apply(n,arguments)},n.uri=e.uri,n.requestTime=Date.now(),n}return s.original=!0,s}function kd(e){var t,i={};return e.byterange&&(i.Range="bytes="+(e=(t=e.byterange).offset)+"-"+("bigint"==typeof t.offset||"bigint"==typeof t.length?window.BigInt(t.offset)+window.BigInt(t.length)-window.BigInt(1):t.offset+t.length-1)),i}function Ed(e,t){return e=e.toString(16),"00".substring(0,2-e.length)+e+(t%2?" ":"")}function Cd(e){return 32<=e&&e<126?String.fromCharCode(e):"."}function Ad(i){var n={};return Object.keys(i).forEach(function(e){var t=i[e];eo(t)?n[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:n[e]=t}),n}function Pd(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")}function Ld(e){return e.resolvedUri}function Id(e){for(var t=Array.prototype.slice.call(e),i="",n=0;n<t.length/16;n++)i+=t.slice(16*n,16*n+16).map(Ed).join("")+" "+t.slice(16*n,16*n+16).map(Cd).join("")+"\n";return i}function Od(e,t){if(4===e.readyState)return t()}function Md(e,t){if(!bd(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(e.segments||t.segments)for(var i=0;i<e.segments.length;i++){var n=e.segments[i],r=t.segments[i];if(n.uri!==r.uri)return!1;if(n.byterange||r.byterange){if(n=n.byterange,r=r.byterange,n&&!r||!n&&r)return!1;if(n.offset!==r.offset||n.length!==r.length)return!1}}return!0}function Dd(e,t){var i,n={};for(i in e){var r=e[i].sidx;if(r){var s=Vl(r);if(!t[s])break;var a=t[s].sidxInfo;(Boolean(!a.map&&!r.map)||Boolean(a.map&&r.map&&a.map.byterange.offset===r.map.byterange.offset&&a.map.byterange.length===r.map.byterange.length))&&a.uri===r.uri&&a.byterange.offset===r.byterange.offset&&a.byterange.length===r.byterange.length&&(n[s]=t[s])}}return n}function jd(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e}function Nd(u){var h=u.transmuxer,e=u.bytes,t=u.audioAppendStart,i=u.gopsToAlignWith,n=u.remux,p=u.onData,f=u.onTrackInfo,m=u.onAudioTimingInfo,g=u.onVideoTimingInfo,v=u.onVideoSegmentTimingInfo,y=u.onAudioSegmentTimingInfo,_=u.onId3,b=u.onCaptions,T=u.onDone,w=u.onEndedTimeline,x=u.onTransmuxerLog,r=u.isEndOfTimeline,S={buffer:[]},k=r;h.onmessage=function(e){var t,i,n,r,s,a,o,l,c,d;h.currentTransmux!==u||("data"===e.data.action&&(i=S,n=p,r=(d=(t=e).data.segment).type,s=d.initSegment,a=d.captions,o=d.captionStreams,l=d.metadata,c=d.videoFrameDtsTime,d=d.videoFramePtsTime,i.buffer.push({captions:a,captionStreams:o,metadata:l}),t=t.data.segment.boxes||{data:t.data.segment.data},s={type:r,data:new Uint8Array(t.data,t.data.byteOffset,t.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)},void 0!==c&&(s.videoFrameDtsTime=c),void 0!==d&&(s.videoFramePtsTime=d),n(s)),"trackinfo"===e.data.action&&f(e.data.trackInfo),"gopInfo"===e.data.action&&(S.gopInfo=e.data.gopInfo),"audioTimingInfo"===e.data.action&&m(e.data.audioTimingInfo),"videoTimingInfo"===e.data.action&&g(e.data.videoTimingInfo),"videoSegmentTimingInfo"===e.data.action&&v(e.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===e.data.action&&y(e.data.audioSegmentTimingInfo),"id3Frame"===e.data.action&&_([e.data.id3Frame],e.data.id3Frame.dispatchType),"caption"===e.data.action&&b(e.data.caption),"endedtimeline"===e.data.action&&(k=!1,w()),"log"===e.data.action&&x(e.data.log),"transmuxed"!==e.data.type)||k||(h.onmessage=null,e=(i={transmuxedData:S,callback:T}).transmuxedData,i=i.callback,e.buffer=[],i(e),lu(h))},t&&h.postMessage({action:"setAudioAppendStart",appendStart:t}),Array.isArray(i)&&h.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),void 0!==n&&h.postMessage({action:"setRemux",remux:n}),e.byteLength&&(i=e instanceof ArrayBuffer?e:e.buffer,n=e instanceof ArrayBuffer?0:e.byteOffset,h.postMessage({action:"push",data:i,byteOffset:n,byteLength:e.byteLength},[i])),r&&h.postMessage({action:"endTimeline"}),h.postMessage({action:"flush"})}function Rd(e,t){e.postMessage({action:t}),lu(e)}function Bd(i){var e,n=i.transmuxer,r=i.endAction||i.action,s=i.callback,t=Y({},i,{endAction:null,transmuxer:null,callback:null});n.addEventListener("message",function e(t){t.data.action===r&&(n.removeEventListener("message",e),t.data.data&&(t.data.data=new Uint8Array(t.data.data,i.byteOffset||0,i.byteLength||t.data.data.byteLength),i.data)&&(i.data=t.data.data),s(t.data))}),i.data?(e=i.data instanceof ArrayBuffer,t.byteOffset=e?0:i.data.byteOffset,t.byteLength=i.data.byteLength,e=[e?i.data:i.data.buffer],n.postMessage(t,e)):n.postMessage(t)}function Ud(e){e.forEach(function(e){e.abort()})}function Fd(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Cu,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Au,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Eu,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:Eu,xhr:t}:null}function $d(s,a,o){return function(e,t){var i=t.response;if(e=Fd(e,t))return o(e,s);if(16!==i.byteLength)return o({status:t.status,message:"Invalid HLS key at URL: "+t.uri,code:Eu,xhr:t},s);for(var i=new DataView(i),n=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]),r=0;r<a.length;r++)a[r].bytes=n;return o(null,s)}}function Hd(i,n){var e,t=$c(i.map.bytes);if("mp4"!==t)return e=i.map.resolvedUri||i.map.uri,n({internal:!0,message:"Found unsupported "+(t||"unknown")+" container for initialization segment at URL: "+e,code:Eu});Bd({action:"probeMp4Tracks",data:i.map.bytes,transmuxer:i.transmuxer,callback:function(e){var t=e.tracks,e=e.data;return i.map.bytes=e,t.forEach(function(e){i.map.tracks=i.map.tracks||{},i.map.tracks[e.type]||"number"==typeof(i.map.tracks[e.type]=e).id&&e.timescale&&(i.map.timescales=i.map.timescales||{},i.map.timescales[e.id]=e.timescale)}),n(null)}})}function qd(e){var i=e.segment,t=e.bytes,n=e.trackInfoFn,r=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,a=e.audioSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,c=e.isEndOfTimeline,d=e.endedTimelineFn,u=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,e=i.map&&i.map.tracks||{},f=Boolean(e.audio&&e.video),m=r.bind(null,i,"audio","start"),g=r.bind(null,i,"audio","end"),v=r.bind(null,i,"video","start"),y=r.bind(null,i,"video","end");Bd({action:"probeTs",transmuxer:i.transmuxer,data:t,baseStartTime:i.baseStartTime,callback:function(e){i.bytes=t=e.data,(e=e.result)&&(n(i,{hasAudio:e.hasAudio,hasVideo:e.hasVideo,isMuxed:f}),n=null,e.hasAudio&&!f&&m(e.audioStart),e.hasVideo&&v(e.videoStart),v=m=null);e={bytes:t,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,remux:f,onData:function(e){e.type="combined"===e.type?"video":e.type,u(i,e)},onTrackInfo:function(e){n&&(f&&(e.isMuxed=!0),n(i,e))},onAudioTimingInfo:function(e){m&&void 0!==e.start&&(m(e.start),m=null),g&&void 0!==e.end&&g(e.end)},onVideoTimingInfo:function(e){v&&void 0!==e.start&&(v(e.start),v=null),y&&void 0!==e.end&&y(e.end)},onVideoSegmentTimingInfo:function(e){s(e)},onAudioSegmentTimingInfo:function(e){a(e)},onId3:function(e,t){o(i,e,t)},onCaptions:function(e){l(i,[e])},isEndOfTimeline:c,onEndedTimeline:function(){d()},onTransmuxerLog:p,onDone:function(e){h&&(e.type="combined"===e.type?"video":e.type,h(null,i,e))}};e.transmuxer.currentTransmux?e.transmuxer.transmuxQueue.push(e):Nd(e.transmuxer.currentTransmux=e)}})}function zd(e){var i=e.segment,n=e.bytes,t=e.trackInfoFn,r=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,a=e.audioSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,c=e.isEndOfTimeline,d=e.endedTimelineFn,u=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,f=new Uint8Array(n);if(0<function e(t,i,n){void 0===n&&(n=!1),r=i,i=Array.isArray(r)?r.map(fc):[fc(r)],t=C(t);var r,s=[];if(i.length)for(var a=0;a<t.length;){var o=(t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3])>>>0,l=t.subarray(a+4,a+8);if(0==o)break;var c=a+o;if(c>t.length){if(n)break;c=t.length}o=t.subarray(a+8,c),A(l,i[0])&&(1===i.length?s.push(o):s.push.apply(s,e(o,i.slice(1),n))),a=c}return s}(f,["moof"]).length){i.isFmp4=!0;var m=i.map.tracks,g={isFmp4:!0,hasVideo:!!m.video,hasAudio:!!m.audio},v=(m.audio&&m.audio.codec&&"enca"!==m.audio.codec&&(g.audioCodec=m.audio.codec),m.video&&m.video.codec&&"encv"!==m.video.codec&&(g.videoCodec=m.video.codec),m.video&&m.audio&&(g.isMuxed=!0),t(i,g),function(e){u(i,{data:f,type:g.hasAudio&&!g.isMuxed?"audio":"video"}),e&&e.length&&l(i,e),h(null,i,{})});Bd({action:"probeMp4StartTime",timescales:i.map.timescales,data:f,transmuxer:i.transmuxer,callback:function(e){var t=e.data,e=e.startTime;n=t.buffer,i.bytes=f=t,g.hasAudio&&!g.isMuxed&&r(i,"audio","start",e),g.hasVideo&&r(i,"video","start",e),m.video&&t.byteLength&&i.transmuxer?Bd({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:i.transmuxer,data:f,timescales:i.map.timescales,trackIds:[m.video.id],callback:function(e){n=e.data.buffer,i.bytes=f=e.data,e.logs.forEach(function(e){p(H.mergeOptions(e,{stream:"mp4CaptionParser"}))}),v(e.captions)}}):v()}})}else if(i.transmuxer){if(void 0===i.container&&(i.container=$c(f)),"ts"!==i.container&&"aac"!==i.container)return t(i,{hasAudio:!1,hasVideo:!1}),h(null,i,{});qd({segment:i,bytes:n,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:d,dataFn:u,doneFn:h,onTransmuxerLog:p})}else h(null,i,{})}function Wd(e,i){var n=e.id,t=e.key,r=e.encryptedBytes,s=e.decryptionWorker,e=function e(t){t.data.source===n&&(s.removeEventListener("message",e),t=t.data.decrypted,i(new Uint8Array(t.bytes,t.byteOffset,t.byteLength)))};s.addEventListener("message",e),e=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),s.postMessage(Ad({source:n,encrypted:r,key:e,iv:t.iv}),[r.buffer,e.buffer])}function Vd(e){var t,i,n,r,m,g,v,y,_,b,T,w,x,S,k,E,s,a,o,l,c,d,u,h=e.xhr,p=e.xhrOptions,f=e.decryptionWorker,C=e.segment,N=e.abortFn,R=e.progressFn,A=e.trackInfoFn,P=e.timingInfoFn,L=e.videoSegmentTimingInfoFn,I=e.audioSegmentTimingInfoFn,O=e.id3Fn,M=e.captionsFn,B=e.isEndOfTimeline,U=e.endedTimelineFn,F=e.dataFn,D=e.doneFn,e=e.onTransmuxerLog,j=[],D=(r=(f={activeXhrs:j,decryptionWorker:f,trackInfoFn:A,timingInfoFn:P,videoSegmentTimingInfoFn:L,audioSegmentTimingInfoFn:I,id3Fn:O,captionsFn:M,isEndOfTimeline:B,endedTimelineFn:U,dataFn:F,doneFn:D,onTransmuxerLog:e}).activeXhrs,m=f.decryptionWorker,g=f.trackInfoFn,v=f.timingInfoFn,y=f.videoSegmentTimingInfoFn,_=f.audioSegmentTimingInfoFn,b=f.id3Fn,T=f.captionsFn,w=f.isEndOfTimeline,x=f.endedTimelineFn,S=f.dataFn,k=f.doneFn,E=f.onTransmuxerLog,s=0,a=!1,function(e,f){if(!a){if(e)return a=!0,Ud(r),k(e,f);if((s+=1)===r.length){var t=function(){var e,t,i,n,r,s,a,o,l,c,d,u,h,p;f.encryptedBytes?(t=(e={decryptionWorker:m,segment:f,trackInfoFn:g,timingInfoFn:v,videoSegmentTimingInfoFn:y,audioSegmentTimingInfoFn:_,id3Fn:b,captionsFn:T,isEndOfTimeline:w,endedTimelineFn:x,dataFn:S,doneFn:k,onTransmuxerLog:E}).decryptionWorker,i=e.segment,n=e.trackInfoFn,r=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,a=e.audioSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,c=e.isEndOfTimeline,d=e.endedTimelineFn,u=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,Wd({id:i.requestId,key:i.key,encryptedBytes:i.encryptedBytes,decryptionWorker:t},function(e){i.bytes=e,zd({segment:i,bytes:i.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:d,dataFn:u,doneFn:h,onTransmuxerLog:p})})):zd({segment:f,bytes:f.bytes,trackInfoFn:g,timingInfoFn:v,videoSegmentTimingInfoFn:y,audioSegmentTimingInfoFn:_,id3Fn:b,captionsFn:T,isEndOfTimeline:w,endedTimelineFn:x,dataFn:S,doneFn:k,onTransmuxerLog:E})};if(f.endOfAllRequests=Date.now(),f.map&&f.map.encryptedBytes&&!f.map.bytes)return Wd({decryptionWorker:m,id:f.requestId+"-init",encryptedBytes:f.map.encryptedBytes,key:f.map.key},function(e){f.map.bytes=e,Hd(f,function(e){return e?(Ud(r),k(e,f)):void t()})});t()}}}),$=(C.key&&!C.key.bytes&&(e=[C.key],C.map&&!C.map.bytes&&C.map.key&&C.map.key.resolvedUri===C.key.resolvedUri&&e.push(C.map.key),e=h(H.mergeOptions(p,{uri:C.key.resolvedUri,responseType:"arraybuffer"}),$d(C,e,D)),j.push(e)),C.map&&!C.map.bytes&&(!C.map.key||C.key&&C.key.resolvedUri===C.map.key.resolvedUri||(t=h(H.mergeOptions(p,{uri:C.map.key.resolvedUri,responseType:"arraybuffer"}),$d(C,[C.map.key],D)),j.push(t)),t=h(H.mergeOptions(p,{uri:C.map.resolvedUri,responseType:"arraybuffer",headers:kd(C.map)}),(i=(t={segment:C,finishProcessingFn:D}).segment,n=t.finishProcessingFn,function(e,t){return(e=Fd(e,t))?n(e,i):(e=new Uint8Array(t.response),i.map.key?(i.map.encryptedBytes=e,n(null,i)):(i.map.bytes=e,void Hd(i,function(e){return e?(e.xhr=t,e.status=t.status,n(e,i)):void n(null,i)})))})),j.push(t)),(p=h(p=H.mergeOptions(p,{uri:C.part&&C.part.resolvedUri||C.resolvedUri,responseType:"arraybuffer",headers:kd(C)}),(f={segment:C,finishProcessingFn:D,responseType:p.responseType},c=f.segment,d=f.finishProcessingFn,u=f.responseType,function(e,t){return(e=Fd(e,t))?d(e,c):(e="arraybuffer"!==u&&t.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t.buffer}(t.responseText.substring(c.lastReachedChar||0)):t.response,c.stats={bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0},c.key?c.encryptedBytes=new Uint8Array(e):c.bytes=new Uint8Array(e),d(null,c))}))).addEventListener("progress",(o=(e={segment:C,progressFn:R,trackInfoFn:A,timingInfoFn:P,videoSegmentTimingInfoFn:L,audioSegmentTimingInfoFn:I,id3Fn:O,captionsFn:M,isEndOfTimeline:B,endedTimelineFn:U,dataFn:F}).segment,l=e.progressFn,e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(e){var t,i=e.target;if(!i.aborted)return o.stats=H.mergeOptions(o.stats,(i=(t=e).target,(i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-i.requestTime||0}).bytesReceived=t.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i)),!o.stats.firstBytesReceivedAt&&o.stats.bytesReceived&&(o.stats.firstBytesReceivedAt=Date.now()),l(e,o)})),j.push(p),{});return j.forEach(function(e){var t,i;e.addEventListener("loadend",(t=(e={loadendState:$,abortFn:N}).loadendState,i=e.abortFn,function(e){e.target.aborted&&i&&!t.calledAbortFn&&(i(),t.calledAbortFn=!0)}))}),function(){return Ud(j)}}function Xd(e,t){return t=t.attributes||{},e&&e.mediaGroups&&e.mediaGroups.AUDIO&&t.AUDIO&&e.mediaGroups.AUDIO[t.AUDIO]}function Gd(e){var n={};return e.forEach(function(e){var t=e.mediaType,i=e.type,e=e.details;n[t]=n[t]||[],n[t].push(Xa(""+i+e))}),Object.keys(n).forEach(function(e){return 1<n[e].length?(Pu("multiple "+e+" codecs found as attributes: "+n[e].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(n[e]=null)):void(n[e]=n[e][0])}),n}function Yd(e){var t=0;return e.audio&&t++,e.video&&t++,t}function Kd(n,r){var e=r.attributes||{},t=Gd(function(e){if((e=r.attributes||{}).CODECS)return Ga(e.CODECS)}()||[]);return Xd(n,r)&&!t.audio&&!function(e){if(!Xd(n,r))return 1;var t,e=r.attributes||{},i=n.mediaGroups.AUDIO[e.AUDIO];for(t in i)if(!i[t].uri&&!i[t].playlists)return 1}()&&(e=Gd(function(e,t){if(e.mediaGroups.AUDIO&&t){var i,n=e.mediaGroups.AUDIO[t];if(n)for(i in n){var r=n[i];if(r.default&&r.playlists)return Ga(r.playlists[0].attributes.CODECS)}}return null}(n,e.AUDIO)||[])).audio&&(t.audio=e.audio),t}function Qd(e){var t;if(e&&e.playlist)return t=e.playlist,JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}function Jd(e,t){return(e=e&&window.getComputedStyle(e))?e[t]:""}function Zd(e,n){var r=e.slice();e.sort(function(e,t){var i=n(e,t);return 0===i?r.indexOf(e)-r.indexOf(t):i})}function eu(e,t){var i,n;return(i=(i=e.attributes.BANDWIDTH||i)||window.Number.MAX_VALUE)-((n=t.attributes.BANDWIDTH||n)||window.Number.MAX_VALUE)}function tu(e,t,i,n,r,s){if(e){var a,o={bandwidth:t,width:i,height:n,limitRenditionByPlayerDimensions:r},l=e.playlists,c=(vu.isAudioOnly(e)&&(l=s.getAudioTrackPlaylists_(),o.audioOnly=!0),l.map(function(e){var t=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,i=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes&&e.attributes.BANDWIDTH||window.Number.MAX_VALUE,width:t,height:i,playlist:e}})),d=(Zd(c,function(e,t){return e.bandwidth-t.bandwidth}),(c=c.filter(function(e){return!vu.isIncompatible(e.playlist)})).filter(function(e){return vu.isEnabled(e.playlist)})),u=(e=(d=d.length?d:c.filter(function(e){return!vu.isDisabled(e.playlist)})).filter(function(e){return e.bandwidth*M.BANDWIDTH_VARIANCE<t}))[e.length-1],l=e.filter(function(e){return e.bandwidth===u.bandwidth})[0];if(!1===r)return(a=l||d[0]||c[0])&&a.playlist?(r=l?"bandwidthBestRep":"sortedPlaylistReps",d[0]&&(r="enabledPlaylistReps"),Lu("choosing "+Qd(a)+" using "+r+" with options",o),a.playlist):(Lu("could not choose a playlist with options",o),null);Zd(a=e.filter(function(e){return e.width&&e.height}),function(e,t){return e.width-t.width});var h,p,f,u=(e=a.filter(function(e){return e.width===i&&e.height===n}))[e.length-1],m=((e=e.filter(function(e){return e.bandwidth===u.bandwidth})[0])||(p=(h=a.filter(function(e){return e.width>i||e.height>n})).filter(function(e){return e.width===h[0].width&&e.height===h[0].height}),u=p[p.length-1],p=p.filter(function(e){return e.bandwidth===u.bandwidth})[0]),s.experimentalLeastPixelDiffSelector&&(Zd(m=a.map(function(e){return e.pixelDiff=Math.abs(e.width-i)+Math.abs(e.height-n),e}),function(e,t){return e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff}),f=m[0]),f||p||e||l||d[0]||c[0]);return m&&m.playlist?(c="sortedPlaylistReps",f?c="leastPixelDiffRep":p?c="resolutionPlusOneRep":e?c="resolutionBestRep":l?c="bandwidthBestRep":d[0]&&(c="enabledPlaylistReps"),Lu("choosing "+Qd(m)+" using "+c+" with options",o),m.playlist):(Lu("could not choose a playlist with options",o),null)}}function iu(e,t,i){var n,r;if(i&&i.cues)for(n=i.cues.length;n--;)(r=i.cues[n]).startTime>=e&&r.endTime<=t&&i.removeCue(r)}function nu(e){return"number"==typeof e&&isFinite(e)}function ru(e){var t=e.startOfSegment,i=e.duration,n=e.segment,r=e.part,s=e.playlist,a=s.mediaSequence,o=s.id,l=s.segments,c=e.mediaIndex,d=e.partIndex,u=e.timeline,h=(void 0===l?[]:l).length-1,p="mediaIndex/partIndex increment";return e.getMediaInfoForTime?p="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(p="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(p+=" with independent "+e.independent),l=e.segment.uri?"segment":"pre-segment",e=(s="number"==typeof d)?ed({preloadSegment:n})-1:0,l+" ["+(a+c)+"/"+(a+h)+"]"+(s?" part ["+d+"/"+e+"]":"")+" segment start/end ["+n.start+" => "+n.end+"]"+(s?" part start/end ["+r.start+" => "+r.end+"]":"")+" startOfSegment ["+t+"] duration ["+i+"] timeline ["+u+"] selected by ["+p+"] playlist ["+o+"]"}function su(e){return e+"TimingInfo"}function au(e){var t=e.timelineChangeController,i=e.currentTimeline,n=e.segmentTimeline,r=e.loaderType,e=e.audioDisabled;return!(i===n||("audio"===r?(i=t.lastTimelineChange({type:"main"}))&&i.to===n:"main"!==r||!e||(t=t.pendingTimelineChange({type:"audio"}))&&t.to===n))}function ou(e){var t=e.segmentDuration,e=e.maxDuration;return!!t&&Math.round(t)>e+mu}Fc.forEach(function(e){var t=Uc[e];Uc[e]=function(e){return t(C(e))}});function lu(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():Nd(e.currentTransmux))}function cu(e){var t="reset";e.currentTransmux?e.transmuxQueue.push(Rd.bind(null,e,t)):(e.currentTransmux=t,Rd(e,t))}var du,uu,hu,O,pu=Uc,fu=Ra,mu=1/30,gu=H.createTimeRange,vu={liveEdgeDelay:td,duration:nd,seekable:function(e,t,i){var n=t||0;return null===(i=sd(e,t,!0,i))?gu():gu(n,i)},getMediaInfoForTime:function(e){for(var t=e.playlist,i=e.currentTime,n=e.startingSegmentIndex,r=e.startingPartIndex,s=e.startTime,a=e.experimentalExactManifestTimings,o=i-s,l=Jc(t),c=0,d=0;d<l.length;d++){var u=l[d];if(n===u.segmentIndex&&("number"!=typeof r||"number"!=typeof u.partIndex||r===u.partIndex)){c=d;break}}if(o<0){if(0<c)for(var h=c-1;0<=h;h--){var p=l[h];if(o+=p.duration,a){if(o<0)continue}else if(o+mu<=0)continue;return{partIndex:p.partIndex,segmentIndex:p.segmentIndex,startTime:s-rd({defaultDuration:t.targetDuration,durationList:l,startIndex:c,endIndex:h})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:i}}if(c<0){for(var f=c;f<0;f++)if((o-=t.targetDuration)<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:i};c=0}for(var m=c;m<l.length;m++){var g=l[m];if(o-=g.duration,a){if(0<o)continue}else if(0<=o-mu)continue;return{partIndex:g.partIndex,segmentIndex:g.segmentIndex,startTime:s+rd({defaultDuration:t.targetDuration,durationList:l,startIndex:c,endIndex:m})}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:i}},isEnabled:ld,isDisabled:function(e){return e.disabled},isBlacklisted:ad,isIncompatible:od,playlistEnd:sd,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:cd,estimateSegmentRequestTime:function(e,t,i,n){return cd("BANDWIDTH",i)?(e*i.attributes.BANDWIDTH-8*(n=void 0===n?0:n))/t:NaN},isLowestEnabledRendition:dd,isAudioOnly:pd,playlistMatch:ud,segmentDurationWithParts:Qc},yu=H.log,_u=H.mergeOptions,bu=(m(Du,hu=t=H.EventTarget),(O=Du.prototype).handleMediaupdatetimeout_=function(){var e,t,i,n,r,s,a,o,l=this;"HAVE_METADATA"===this.state&&(i=this.media(),e=fu(this.master.uri,i.uri),this.experimentalLLHLS&&(t=e,!(i=i).endList&&i.serverControl&&(o={},i.serverControl.canBlockReload&&(s=i.preloadSegment,n=i.mediaSequence+i.segments.length,s&&(r=s.parts||[],-1<(s=ed(i)-1)&&s!=r.length-1&&(o._HLS_part=s),-1<s||r.length)&&n--,o._HLS_msn=n),i.serverControl&&i.serverControl.canSkipUntil&&(o._HLS_skip=i.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(o).length)&&(a=new window.URL(t),["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(e){o.hasOwnProperty(e)&&a.searchParams.set(e,o[e])}),t=a.toString()),e=t),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:e,withCredentials:this.withCredentials},function(e,t){if(l.request)return e?l.playlistRequestError(l.request,l.media(),"HAVE_METADATA"):void l.haveMetadata({playlistString:l.request.responseText,url:l.media().uri,id:l.media().id})}))},O.playlistRequestError=function(e,t,i){var n=t.uri,t=t.id;this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+n+".",responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")},O.parseManifest_=function(e){var t,i,n,r,s,a,o,l,c=this,d=e.url;return e={onwarn:function(e){return e=e.message,c.logger_("m3u8-parser warn for "+d+": "+e)},oninfo:function(e){return e=e.message,c.logger_("m3u8-parser info for "+d+": "+e)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS},t=e.onwarn,i=e.oninfo,n=e.manifestString,r=void 0===(s=e.customTagParsers)?[]:s,s=void 0===(s=e.customTagMappers)?[]:s,e=e.experimentalLLHLS,a=new lo,t&&a.on("warn",t),i&&a.on("info",i),r.forEach(function(e){return a.addParser(e)}),s.forEach(function(e){return a.addTagMapper(e)}),a.push(n),a.end(),o=a.manifest,e||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(e){o.hasOwnProperty(e)&&delete o[e]}),o.segments&&o.segments.forEach(function(t){["parts","preloadHints"].forEach(function(e){t.hasOwnProperty(e)&&delete t[e]})})),o.targetDuration||(l=10,o.segments&&o.segments.length&&(l=o.segments.reduce(function(e,t){return Math.max(e,t.duration)},0)),t&&t("manifest has no targetDuration defaulting to "+l),o.targetDuration=l),(l=Zc(o)).length&&!o.partTargetDuration&&(l=l.reduce(function(e,t){return Math.max(e,t.duration)},0),t&&(t("manifest has no partTargetDuration defaulting to "+l),yu.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=l),o},O.haveMetadata=function(e){var t=e.playlistString,i=e.playlistObject,n=e.url,e=e.id;this.request=null,this.state="HAVE_METADATA",(t=i||this.parseManifest_({url:n,manifestString:t})).lastRequest=Date.now(),gd({playlist:t,uri:n,id:e}),n=Td(this.master,t),this.targetDuration=t.partTargetDuration||t.targetDuration,this.pendingMedia_=null,n?(this.master=n,this.media_=this.master.playlists[e]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(wd(this.media(),!!n)),this.trigger("loadedplaylist")},O.dispose=function(){this.trigger("dispose"),this.stopRequest(),window.clearTimeout(this.mediaUpdateTimeout),window.clearTimeout(this.finalRenditionTimeout),this.off()},O.stopRequest=function(){var e;this.request&&(e=this.request,this.request=null,e.onreadystatechange=null,e.abort())},O.media=function(i,e){var n=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(window.clearTimeout(this.finalRenditionTimeout),e){var t=(i.partTargetDuration||i.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,i,!1),t)}else{var r=this.state,e=!this.media_||i.id!==this.media_.id;if((t=this.master.playlists[i.id])&&t.endList||i.endList&&i.segments.length)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,e&&(this.trigger("mediachanging"),"HAVE_MASTER"===r?this.trigger("loadedmetadata"):this.trigger("mediachange"));else if(this.updateMediaUpdateTimeout_(wd(i,!0)),e){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=i,this.request=this.vhs_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(e,t){if(n.request){if(i.lastRequest=Date.now(),i.resolvedUri=Hc(n.handleManifestRedirects,i.resolvedUri,t),e)return n.playlistRequestError(n.request,i,r);n.haveMetadata({playlistString:t.responseText,url:i.uri,id:i.id}),"HAVE_MASTER"===r?n.trigger("loadedmetadata"):n.trigger("mediachange")}})}}},O.pause=function(){this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},O.load=function(e){var t=this,i=(this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media());e?(e=i?(i.partTargetDuration||i.targetDuration)/2*1e3:5e3,this.mediaUpdateTimeout=window.setTimeout(function(){t.mediaUpdateTimeout=null,t.load()},e)):this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},O.updateMediaUpdateTimeout_=function(e){var t=this;this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=window.setTimeout(function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)},e))},O.start=function(){var i=this;this.started=!0,"object"==typeof this.src?(this.src.uri||(this.src.uri=window.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){i.setupInitialPlaylist(i.src)},0)):this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(e,t){if(i.request){if(i.request=null,e)return i.error={status:t.status,message:"HLS playlist request error at URL: "+i.src+".",responseText:t.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");i.src=Hc(i.handleManifestRedirects,i.src,t),t=i.parseManifest_({manifestString:t.responseText,url:i.src}),i.setupInitialPlaylist(t)}})},O.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},O.setupInitialPlaylist=function(e){var t,i,n,r;this.state="HAVE_MASTER",e.playlists?(this.master=e,vd(this.master,this.srcUri()),e.playlists.forEach(function(t){t.segments=_d(t),t.segments.forEach(function(e){yd(e,t.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0])):(r=this.srcUri()||window.location.href,this.master=(i=fd(0,t=r),(n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:window.location.href,resolvedUri:window.location.href,playlists:[{uri:t,id:i,resolvedUri:t,attributes:{}}]}).playlists[i]=n.playlists[0],n.playlists[t]=n.playlists[0],n),this.haveMetadata({playlistObject:e,url:r,id:this.master.playlists[0].id}),this.trigger("loadedmetadata"))},Du),Tu=H.xhr,wu=H.mergeOptions,hi=Object.freeze({__proto__:null,createTransferableMessage:Ad,initSegmentId:Pd,segmentKeyId:Ld,hexDump:Id,tagDump:function(e){return Id(e=e.bytes)},textRanges:function(e){for(var t,i,n="",r=0;r<e.length;r++)n+=(i=r,(t=e).start(i)+"-"+t.end(i)+" ");return n}}),ml=H.EventTarget,xu=H.mergeOptions,Su=(m(Mu,uu=ml),(g=Mu.prototype).requestErrored_=function(e,t,i){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,i&&(this.state=i),this.trigger("error"),!0):void 0)},g.addSidxSegments_=function(s,n,r){var a,o,e,l,c,d,u,i,h=this,p=s.sidx&&Vl(s.sidx);function f(e,t,i,n){return t.abort(),u=!0,l(e,t,i,n)}function m(e,t){var i;if(!u)return e?f(e,t,"",d):(i=t.responseText.substring(d&&d.byteLength||0,t.responseText.length),d=function(){for(var e,t,i,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(r=r.filter(function(e){return e&&(e.byteLength||e.length)&&"string"!=typeof e})).length<=1?C(r[0]):(e=r.reduce(function(e,t,i){return e+(t.byteLength||t.length)},0),t=new Uint8Array(e),i=0,r.forEach(function(e){e=C(e),t.set(e,i),i+=e.byteLength}),t)}(d,to(i,!0)),c=c||pc(d),d.length<10||c&&d.length<c+2||"ts"===(i=$c(d))&&d.length<188||!i&&d.length<376?Od(t,function(){return f(e,t,"",d)}):f(null,t,i,d))}s.sidx&&p&&!this.masterPlaylistLoader_.sidxMapping_[p]?(a=Hc(this.handleManifestRedirects,s.sidx.resolvedUri),o=function(e,t){if(!h.requestErrored_(e,t,n)){var i,e=h.masterPlaylistLoader_.sidxMapping_;try{i=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},n=12,r=(0===i.version?(i.earliestPresentationTime=t.getUint32(n),i.firstOffset=t.getUint32(n+4),n+=8):(i.earliestPresentationTime=Ic(e.subarray(n)),i.firstOffset=Ic(e.subarray(n+8)),n+=16),t.getUint16(n+=2));for(n+=2;0<r;n+=12,r--)i.references.push({referenceType:(128&e[n])>>>7,referencedSize:2147483647&t.getUint32(n),subsegmentDuration:t.getUint32(n+4),startsWithSap:!!(128&e[n+8]),sapType:(112&e[n+8])>>>4,sapDeltaTime:268435455&t.getUint32(n+8)});return i}(C(t.response).subarray(8))}catch(e){return void h.requestErrored_(e,t,n)}return e[p]={sidxInfo:s.sidx,sidx:i},Hl(s,i,s.sidx.resolvedUri),r(!0)}},this.request=(e=this.vhs_.xhr,l=function(e,t,i,n){var r;return e?o(e,t):i&&"mp4"===i?(i=(r=s.sidx.byterange).offset,r=r.length,n.length>=r+i?o(e,{response:n.subarray(i,i+r),status:t.status,uri:t.uri}):void(h.request=h.vhs_.xhr({uri:a,responseType:"arraybuffer",headers:kd({byterange:s.sidx.byterange})},o))):o({status:t.status,message:"Unsupported "+(i||"unknown")+" container type for sidx segment at URL: "+a,response:"",playlist:s,internal:!0,blacklistDuration:1/0,code:2},t)},u=!(d=[]),i=e({uri:a,beforeSend:function(t){t.overrideMimeType("text/plain; charset=x-user-defined"),t.addEventListener("progress",function(e){return e.total,e.loaded,xd(t,null,{statusCode:t.status},m)})}},function(e,t){return xd(i,e,t,m)}))):this.mediaRequest_=window.setTimeout(function(){return r(!1)},0)},g.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},window.clearTimeout(this.minimumUpdatePeriodTimeout_),window.clearTimeout(this.mediaRequest_),window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},g.hasPendingRequest=function(){return this.request||this.mediaRequest_},g.stopRequest=function(){var e;this.request&&(e=this.request,this.request=null,e.onreadystatechange=null,e.abort())},g.media=function(t){var i=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof t){if(!this.masterPlaylistLoader_.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.masterPlaylistLoader_.master.playlists[t]}var e=!this.media_||t.id!==this.media_.id;e&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList?(this.state="HAVE_METADATA",this.media_=t,e&&(this.trigger("mediachanging"),this.trigger("mediachange"))):e&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,n,function(e){i.haveMetadata({startingState:n,playlist:t})}))},g.haveMetadata=function(e){var t=e.startingState,e=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[e.id]=e,this.mediaRequest_=null,this.refreshMedia_(e.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},g.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(window.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},g.load=function(e){var t=this,i=(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.media());e?(e=i?i.targetDuration/2*1e3:5e3,this.mediaUpdateTimeout=window.setTimeout(function(){return t.load()},e)):this.started?i&&!i.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},g.start=function(){var i=this;this.started=!0,this.isMaster_?this.requestMaster_(function(e,t){i.haveMaster_(),i.hasPendingRequest()||i.media_||i.media(i.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=window.setTimeout(function(){return i.haveMaster_()},0)},g.requestMaster_=function(n){var r=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(e,t){var i;if(!r.requestErrored_(e,t))return i=t.responseText!==r.masterPlaylistLoader_.masterXml_,r.masterPlaylistLoader_.masterXml_=t.responseText,t.responseHeaders&&t.responseHeaders.date?r.masterLoaded_=Date.parse(t.responseHeaders.date):r.masterLoaded_=Date.now(),r.masterPlaylistLoader_.srcUrl=Hc(r.handleManifestRedirects,r.masterPlaylistLoader_.srcUrl,t),i?(r.handleMaster_(),void r.syncClientServerClock_(function(){return n(t,i)})):n(t,i);"HAVE_NOTHING"===r.state&&(r.started=!1)})},g.syncClientServerClock_=function(i){var n=this,r=function(e){var t=void 0;if(!(t=I(hc(e),"UTCTiming")[0]))return null;var i=lc(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return i}(this.masterPlaylistLoader_.masterXml_);return null===r?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),i()):"DIRECT"===r.method?(this.masterPlaylistLoader_.clientOffset_=r.value-Date.now(),i()):void(this.request=this.vhs_.xhr({uri:fu(this.masterPlaylistLoader_.srcUrl,r.value),method:r.method,withCredentials:this.withCredentials},function(e,t){if(n.request){if(e)return n.masterPlaylistLoader_.clientOffset_=n.masterLoaded_-Date.now(),i();t="HEAD"===r.method?t.responseHeaders&&t.responseHeaders.date?Date.parse(t.responseHeaders.date):n.masterLoaded_:Date.parse(t.responseText),n.masterPlaylistLoader_.clientOffset_=t-Date.now(),i()}}))},g.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},g.handleMaster_=function(){this.mediaRequest_=null;var e,t,i=this.masterPlaylistLoader_.master,n=(r={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:i},t=r.masterXml,void 0===(e={manifestUri:n=r.srcUrl,clientOffset:r.clientOffset,sidxMapping:r.sidxMapping,previousManifest:r=r.previousManifest})&&(e={}),t=uc(hc(t),e),vd(r=ec({dashPlaylists:t.representationInfo.map(sc),locations:t.locations,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest}),n),r),r=(i&&(n=function(e,t,i){for(var s=!0,a=xu(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),n=0;n<t.playlists.length;n++){var r,o=t.playlists[n];o.sidx&&(r=Vl(o.sidx),i)&&i[r]&&i[r].sidx&&Hl(o,i[r].sidx,o.sidx.resolvedUri),(o=Td(a,o,Md))&&(a=o,s=!1)}return md(t,function(e,t,i,n){var r;e.playlists&&e.playlists.length&&(r=e.playlists[0].id,e=Td(a,e.playlists[0],Md))&&((a=e).mediaGroups[t][i][n].playlists[0]=a.playlists[r],s=!1)}),(s=t.minimumUpdatePeriod===e.minimumUpdatePeriod&&s)?null:a}(i,n,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=n||i,this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0]);return r&&r!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=r),(!i||n&&n.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(n)},g.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_,t=(e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(window.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null),e.master&&e.master.minimumUpdatePeriod);0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},g.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=window.setTimeout(function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)},g.refreshXml_=function(){var i=this;this.requestMaster_(function(e,t){var r,s;t&&(i.media_&&(i.media_=i.masterPlaylistLoader_.master.playlists[i.media_.id]),i.masterPlaylistLoader_.sidxMapping_=(t=i.masterPlaylistLoader_.master,r=i.masterPlaylistLoader_.sidxMapping_,s=Dd(t.playlists,r),md(t,function(e,t,i,n){e.playlists&&e.playlists.length&&(e=e.playlists,s=xu(s,Dd(e,r)))}),s),i.addSidxSegments_(i.media(),i.state,function(e){i.refreshMedia_(i.media().id)}))})},g.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var i=this.masterPlaylistLoader_.master.playlists,n=!this.media_||this.media_!==i[e];n?this.media_=i[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function e(){t.media().endList||(t.mediaUpdateTimeout=window.setTimeout(function(){t.trigger("mediaupdatetimeout"),e()},wd(t.media(),Boolean(n))))}(),this.trigger("loadedplaylist")},Mu),M={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},ku=(r=function(n){return function(){var e=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch(e){var i=new BlobBuilder;return i.append(t),URL.createObjectURL(i.getBlob())}}(n),t=jd(new Worker(e)),i=(t.objURL=e,t.terminate);return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),i.call(this)},t}})((ce=function(e){return"var browserWorkerPolyFill = "+jd.toString()+";\nbrowserWorkerPolyFill(self);\n"+e})((t=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)})(function(){(x=function(){this.init=function(){var s={};this.on=function(e,t){s[e]||(s[e]=[]),s[e]=s[e].concat(t)},this.off=function(e,t){return!!s[e]&&(t=s[e].indexOf(t),s[e]=s[e].slice(),s[e].splice(t,1),-1<t)},this.trigger=function(e){var t,i,n,r=s[e];if(r)if(2===arguments.length)for(i=r.length,t=0;t<i;++t)r[t].call(this,arguments[1]);else{for(n=[],t=arguments.length,t=1;t<arguments.length;++t)n.push(arguments[t]);for(i=r.length,t=0;t<i;++t)r[t].apply(this,n)}},this.dispose=function(){s={}}}}).prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t},x.prototype.push=function(e){this.trigger("data",e)},x.prototype.flush=function(e){this.trigger("done",e)},x.prototype.partialFlush=function(e){this.trigger("partialdone",e)},x.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},x.prototype.reset=function(e){this.trigger("reset",e)};var l,D,R,B,U,F,$,H,t,q,z,W,e=x,V=Math.pow(2,32),X={getUint64:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return t.getBigUint64?(e=t.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(e):e:t.getUint32(0)*V+t.getUint32(4)},MAX_UINT32:V},G=X.MAX_UINT32;if(l={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(var i in l)l.hasOwnProperty(i)&&(l[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]);D=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),B=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),R=new Uint8Array([0,0,0,1]),De=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),T=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),U={video:De,audio:T},H=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),$=new Uint8Array([0,0,0,0,0,0,0,0]),t=new Uint8Array([0,0,0,0,0,0,0,0]),q=t,z=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),W=t,F=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}function h(e){for(var t=[];e--;)t.push(0);return t}function Y(e){return c(l.mdat,e)}function K(e){return e/9e4}function Q(e,t,i){return K(i?e:e-t)}function J(e,t,i,n){var r,s,a,o,l,c,d=0,u=0;if(t.length&&(s=Ie(e.baseMediaDecodeTime,e.samplerate),r=Math.ceil(m/(e.samplerate/1024)),i&&n&&(s=s-Math.max(i,n),u=(d=Math.floor(s/r))*r),!(d<1||m/2<u))){for(te||(i={96e3:[p,[227,64],h(154),[56]],88200:[p,[231],h(170),[56]],64e3:[p,[248,192],h(240),[56]],48e3:[p,[255,192],h(268),[55,148,128],h(54),[112]],44100:[p,[255,192],h(268),[55,163,128],h(84),[112]],32e3:[p,[255,192],h(268),[55,234],h(226),[112]],24e3:[p,[255,192],h(268),[55,255,128],h(268),[111,112],h(126),[224]],16e3:[p,[255,192],h(268),[55,255,128],h(268),[111,255],h(269),[223,108],h(195),[1,192]],12e3:[Ce,h(268),[3,127,248],h(268),[6,255,240],h(268),[13,255,224],h(268),[27,253,128],h(259),[56]],11025:[Ce,h(268),[3,127,248],h(268),[6,255,240],h(268),[13,255,224],h(268),[27,255,192],h(268),[55,175,128],h(108),[112]],8e3:[Ce,h(268),[3,121,16],h(47),[7]]},c=i,te=Object.keys(c).reduce(function(e,t){return e[t]=new Uint8Array(c[t].reduce(function(e,t){return e.concat(t)},[])),e},{})),a=(a=te[e.samplerate])||t[0].data,o=0;o<d;o++)l=t[0],t.splice(0,0,{data:a,dts:l.dts-r,pts:l.pts-r});return e.baseMediaDecodeTime-=Math.floor(Oe(u,e.samplerate)),u}}function f(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts}function Z(e,t){var i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),t=e.timelineStartInfo.baseMediaDecodeTime,t+=i,t=Math.max(0,t),"audio"===e.type&&(t*=e.samplerate/Me,t=Math.floor(t)),t}function ee(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))}var te,c=function(e){for(var t,i=[],n=0,r=1;r<arguments.length;r++)i.push(arguments[r]);for(r=i.length;r--;)n+=i[r].byteLength;for(t=new Uint8Array(n+8),new DataView(t.buffer,t.byteOffset,t.byteLength).setUint32(0,t.byteLength),t.set(e,4),r=0,n=8;r<i.length;r++)t.set(i[r],n),n+=i[r].byteLength;return t},ie=function(){return c(l.dinf,c(l.dref,H))},ne=function(e){return c(l.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},re=function(e){return c(l.hdlr,U[e])},se=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),c(l.mdhd,t)},ae=function(e){return c(l.mdia,se(e),re(e.type),le(e))},oe=function(e){return c(l.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},le=function(e){return c(l.minf,"video"===e.type?c(l.vmhd,F):c(l.smhd,$),ie(),pe(e))},ce=function(e){for(var t=e.length,i=[];t--;)i[t]=_e(e[t]);return c.apply(null,[l.moov,ue(4294967295)].concat(i).concat(de(e)))},de=function(e){for(var t=e.length,i=[];t--;)i[t]=be(e[t]);return c.apply(null,[l.mvex].concat(i))},ue=function(e){return e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]),c(l.mvhd,e)},he=function(e){for(var t,i=e.samples||[],n=new Uint8Array(4+i.length),r=0;r<i.length;r++)t=i[r].flags,n[r+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return c(l.sdtp,n)},pe=function(e){return c(l.stbl,fe(e),c(l.stts,W),c(l.stsc,q),c(l.stsz,z),c(l.stco,t))},fe=function(e){return c(l.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===e.type?me:ge)(e))},me=function(e){for(var t,i,n=e.sps||[],r=e.pps||[],s=[],a=[],o=0;o<n.length;o++)s.push((65280&n[o].byteLength)>>>8),s.push(255&n[o].byteLength),s=s.concat(Array.prototype.slice.call(n[o]));for(o=0;o<r.length;o++)a.push((65280&r[o].byteLength)>>>8),a.push(255&r[o].byteLength),a=a.concat(Array.prototype.slice.call(r[o]));return t=[l.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c(l.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length],s,[r.length],a))),c(l.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio&&(i=e.sarRatio[0],e=e.sarRatio[1],t.push(c(l.pasp,new Uint8Array([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])))),c.apply(null,t)},ge=function(e){return c(l.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),ne(e))},ve=function(e){return e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]),c(l.tkhd,e)},ye=function(e){var t,i=c(l.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),n=Math.floor(e.baseMediaDecodeTime/G),r=Math.floor(e.baseMediaDecodeTime%G),n=c(l.tfdt,new Uint8Array([1,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r]));return"audio"===e.type?(t=Se(e,92),c(l.traf,i,n,t)):(r=he(e),t=Se(e,r.length+92),c(l.traf,i,n,t,r))},_e=function(e){return e.duration=e.duration||4294967295,c(l.trak,ve(e),ae(e))},be=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),c(l.trex,t)},Te=function(e,t){var i=0,n=0,r=0,s=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset)&&(s=8),[0,0,i|n|r|s,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},we=function(e,t){var i,n,r,s,a=e.samples||[];for(t+=20+16*a.length,t=Te(a,t),(n=new Uint8Array(t.length+16*a.length)).set(t),i=t.length,s=0;s<a.length;s++)r=a[s],n[i++]=(4278190080&r.duration)>>>24,n[i++]=(16711680&r.duration)>>>16,n[i++]=(65280&r.duration)>>>8,n[i++]=255&r.duration,n[i++]=(4278190080&r.size)>>>24,n[i++]=(16711680&r.size)>>>16,n[i++]=(65280&r.size)>>>8,n[i++]=255&r.size,n[i++]=r.flags.isLeading<<2|r.flags.dependsOn,n[i++]=r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,n[i++]=61440&r.flags.degradationPriority,n[i++]=15&r.flags.degradationPriority,n[i++]=(4278190080&r.compositionTimeOffset)>>>24,n[i++]=(16711680&r.compositionTimeOffset)>>>16,n[i++]=(65280&r.compositionTimeOffset)>>>8,n[i++]=255&r.compositionTimeOffset;return c(l.trun,n)},xe=function(e,t){var i,n,r,s,a=e.samples||[];for(t+=20+8*a.length,t=Te(a,t),(i=new Uint8Array(t.length+8*a.length)).set(t),n=t.length,s=0;s<a.length;s++)r=a[s],i[n++]=(4278190080&r.duration)>>>24,i[n++]=(16711680&r.duration)>>>16,i[n++]=(65280&r.duration)>>>8,i[n++]=255&r.duration,i[n++]=(4278190080&r.size)>>>24,i[n++]=(16711680&r.size)>>>16,i[n++]=(65280&r.size)>>>8,i[n++]=255&r.size;return c(l.trun,i)},Se=function(e,t){return("audio"===e.type?xe:we)(e,t)},ke=function(){return c(l.ftyp,D,R,D,B)},Ee=function(e,t){for(var i=[],n=t.length;n--;)i[n]=ye(t[n]);return c.apply(null,[l.moof,oe(e)].concat(i))},p=[33,16,5,32,164,27],Ce=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Ae=function(e){return 9e4*e},Pe=function(e,t){return e/t},m=9e4,Le=Ae,n=K,Ie=function(e,t){return Ae(Pe(e,t))},Oe=function(e,t){return e/9e4*t},Me=m,De=function(e){for(var t=e.byteLength,i=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return e;for(var r=t-i.length,s=new Uint8Array(r),a=0,n=0;n<r;a++,n++)a===i[0]&&(a++,i.shift()),s[n]=e[a];return s};function o(e){return 32<=e&&e<=127||160<=e&&e<=255}function r(e){this.windowNum=e,this.reset()}((T=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!=typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new g(0,0),new g(0,1),new g(1,0),new g(1,1)],this.parse708captions_&&(this.cc708Stream_=new a({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))}).prototype=new e).push=function(e){var t;"sei_rbsp"===e.nalUnitType&&(t=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!i.payload&&4===n){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);break}i.payload=void 0}t+=r,r=n=0}return i}(e.escapedRBSP)).payload&&4===t.payloadType&&(t=181!==(t=t).payload[0]||49!=(t.payload[1]<<8|t.payload[2])||"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])||3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1))&&(e.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:e.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(t=function(e,t){var i,n,r,s,a=[];if(64&t[0])for(n=31&t[0],i=0;i<n;i++)s={type:3&t[2+(r=3*i)],pts:e},4&t[2+r]&&(s.ccData=t[3+r]<<8|t[4+r],a.push(s));return a}(e.pts,t),this.captionPackets_=this.captionPackets_.concat(t),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts))},T.prototype.flushCCStreams=function(t){this.ccStreams_.forEach(function(e){return"flush"===t?e.flush():e.partialFlush()},this)},T.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},T.prototype.flush=function(){return this.flushStream("flush")},T.prototype.partialFlush=function(){return this.flushStream("partialFlush")},T.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},T.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},T.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},T.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},T.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},T.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var je={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600};function s(e,t,i){this.serviceNum=e,this.text="",this.currentWindow=new r(-1),this.windows=[],this.stream=i,"string"==typeof t&&this.createTextDecoder(t)}r.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},r.prototype.getText=function(){return this.rows.join("\n")},r.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},r.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),0<this.rows.length&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},r.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},r.prototype.addText=function(e){this.rows[this.rowIdx]+=e},r.prototype.backspace=function(){var e;this.isEmpty()||(e=this.rows[this.rowIdx],this.rows[this.rowIdx]=e.substr(0,e.length-1))},s.prototype.init=function(e,t){this.startPts=e;for(var i=0;i<8;i++)this.windows[i]=new r(i),"function"==typeof t&&(this.windows[i].beforeRowOverflow=t)},s.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},s.prototype.createTextDecoder=function(t){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(t)}catch(e){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+t+" encoding. "+e})}};var a=function e(t){t=t||{},e.prototype.init.call(this);var i,n=this,r=t.captionServices||{},s={};Object.keys(r).forEach(function(e){i=r[e],/^SERVICE/.test(e)&&(s[e]=i.encoding)}),this.serviceEncodings=s,this.current708Packet=null,this.services={},this.push=function(e){3!==e.type&&null!==n.current708Packet||n.new708Packet(),n.add708Bytes(e)}};function d(e){return null===e?"":(e=Ne[e]||e,String.fromCharCode(e))}function u(){for(var e=[],t=15;t--;)e.push("");return e}a.prototype=new e,a.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},a.prototype.add708Bytes=function(e){var t=(i=e.ccData)>>>8,i=255&i;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(t),this.current708Packet.data.push(i)},a.prototype.push708Packet=function(){var e,t=this.current708Packet,i=t.data,n=null,r=0,s=i[r++];for(t.seq=s>>6,t.sizeCode=63&s;r<i.length;r++)e=31&(s=i[r++]),7==(n=s>>5)&&0<e&&(n=i[r++]),this.pushServiceBlock(n,r,e),0<e&&(r+=e-1)},a.prototype.pushServiceBlock=function(e,t,i){for(var n,r=t,s=this.current708Packet.data,a=(a=this.services[e])||this.initService(e,r);r<t+i&&r<s.length;r++)o(n=s[r])?r=this.handleText(r,a):24===n?r=this.multiByteCharacter(r,a):16===n?r=this.extendedCommands(r,a):128<=n&&n<=135?r=this.setCurrentWindow(r,a):152<=n&&n<=159?r=this.defineWindow(r,a):136===n?r=this.clearWindows(r,a):140===n?r=this.deleteWindows(r,a):137===n?r=this.displayWindows(r,a):138===n?r=this.hideWindows(r,a):139===n?r=this.toggleWindows(r,a):151===n?r=this.setWindowAttributes(r,a):144===n?r=this.setPenAttributes(r,a):145===n?r=this.setPenColor(r,a):146===n?r=this.setPenLocation(r,a):143===n?a=this.reset(r,a):8===n?a.currentWindow.backspace():12===n?a.currentWindow.clearText():13===n?a.currentWindow.pendingNewLine=!0:14===n?a.currentWindow.clearText():141===n&&r++},a.prototype.extendedCommands=function(e,t){return o(this.current708Packet.data[++e])?this.handleText(e,t,{isExtended:!0}):e},a.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},a.prototype.initService=function(t,e){var i,n="SERVICE"+t,r=this;return n in this.serviceEncodings&&(i=this.serviceEncodings[n]),this.services[t]=new s(t,i,r),this.services[t].init(this.getPts(e),function(e){r.flushDisplayed(e,r.services[t])}),this.services[t]},a.prototype.handleText=function(e,t,i){var n,r=i&&i.isExtended,s=i&&i.isMultiByte,a=r?4096:0,o=(l=this.current708Packet.data)[e],i=l[e+1],l=t.currentWindow,c=t.textDecoder_&&!r?(s?(n=[o,i],e++):n=[o],t.textDecoder_.decode(new Uint8Array(n))):(c=je[o|=a]||o,4096&o&&o===c?"":String.fromCharCode(c));return l.pendingNewLine&&!l.isEmpty()&&l.newLine(this.getPts(e)),l.pendingNewLine=!1,l.addText(c),e},a.prototype.multiByteCharacter=function(e,t){var i=(n=this.current708Packet.data)[e+1],n=n[e+2];return o(i)&&o(n)?this.handleText(++e,t,{isMultiByte:!0}):e},a.prototype.setCurrentWindow=function(e,t){var i=this.current708Packet.data[e];return t.setCurrentWindow(7&i),e},a.prototype.defineWindow=function(e,t){var i=this.current708Packet.data,n=i[e];return t.setCurrentWindow(7&n),t=t.currentWindow,n=i[++e],t.visible=(32&n)>>5,t.rowLock=(16&n)>>4,t.columnLock=(8&n)>>3,t.priority=7&n,n=i[++e],t.relativePositioning=(128&n)>>7,t.anchorVertical=127&n,n=i[++e],t.anchorHorizontal=n,n=i[++e],t.anchorPoint=(240&n)>>4,t.rowCount=15&n,n=i[++e],t.columnCount=63&n,n=i[++e],t.windowStyle=(56&n)>>3,t.penStyle=7&n,t.virtualRowCount=t.rowCount+1,e},a.prototype.setWindowAttributes=function(e,t){var i=this.current708Packet.data,t=(i[e],t.currentWindow.winAttr),n=i[++e];return t.fillOpacity=(192&n)>>6,t.fillRed=(48&n)>>4,t.fillGreen=(12&n)>>2,t.fillBlue=3&n,n=i[++e],t.borderType=(192&n)>>6,t.borderRed=(48&n)>>4,t.borderGreen=(12&n)>>2,t.borderBlue=3&n,n=i[++e],t.borderType+=(128&n)>>5,t.wordWrap=(64&n)>>6,t.printDirection=(48&n)>>4,t.scrollDirection=(12&n)>>2,t.justify=3&n,n=i[++e],t.effectSpeed=(240&n)>>4,t.effectDirection=(12&n)>>2,t.displayEffect=3&n,e},a.prototype.flushDisplayed=function(e,t){for(var i=[],n=0;n<8;n++)t.windows[n].visible&&!t.windows[n].isEmpty()&&i.push(t.windows[n].getText());t.endPts=e,t.text=i.join("\n\n"),this.pushCaption(t),t.startPts=e},a.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},a.prototype.displayWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible=1);return e},a.prototype.hideWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible=0);return e},a.prototype.toggleWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible^=1);return e},a.prototype.clearWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&t.windows[r].clearText();return e},a.prototype.deleteWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&t.windows[r].reset();return e},a.prototype.setPenAttributes=function(e,t){var i=this.current708Packet.data,t=(i[e],t.currentWindow.penAttr),n=i[++e];return t.textTag=(240&n)>>4,t.offset=(12&n)>>2,t.penSize=3&n,n=i[++e],t.italics=(128&n)>>7,t.underline=(64&n)>>6,t.edgeType=(56&n)>>3,t.fontStyle=7&n,e},a.prototype.setPenColor=function(e,t){var i=this.current708Packet.data,t=(i[e],t.currentWindow.penColor),n=i[++e];return t.fgOpacity=(192&n)>>6,t.fgRed=(48&n)>>4,t.fgGreen=(12&n)>>2,t.fgBlue=3&n,n=i[++e],t.bgOpacity=(192&n)>>6,t.bgRed=(48&n)>>4,t.bgGreen=(12&n)>>2,t.bgBlue=3&n,n=i[++e],t.edgeRed=(48&n)>>4,t.edgeGreen=(12&n)>>2,t.edgeBlue=3&n,e},a.prototype.setPenLocation=function(e,t){var i=this.current708Packet.data,n=(i[e],t.currentWindow.penLoc);return t.currentWindow.pendingNewLine=!0,t=i[++e],n.row=15&t,t=i[++e],n.column=63&t,e},a.prototype.reset=function(e,t){var i=this.getPts(e);return this.flushDisplayed(i,t),this.initService(t.serviceNum,e)};var Ne={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Re=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],g=function e(t,i){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,r,s=32639&e.ccData;s!==this.lastControlCode_?(4096==(61440&s)?this.lastControlCode_=s:s!==this.PADDING_&&(this.lastControlCode_=null),t=s>>>8,i=255&s,s!==this.PADDING_&&(s===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":s===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),r=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=r,this.startPts_=e.pts):s===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(e.pts)):s===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(e.pts)):s===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(e.pts)):s===this.CARRIAGE_RETURN_?(this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts):s===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):s===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(e.pts),this.displayed_=u()):s===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=u():s===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=u()),this.mode_="paintOn",this.startPts_=e.pts):this.isSpecialCharacter(t,i)?(n=d((t=(3&t)<<8)|i),this[this.mode_](e.pts,n),this.column_++):this.isExtCharacter(t,i)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),n=d((t=(3&t)<<8)|i),this[this.mode_](e.pts,n),this.column_++):this.isMidRowCode(t,i)?(this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"])):this.isOffsetControlCode(t,i)?this.column_+=3&i:this.isPAC(t,i)?(r=Re.indexOf(7968&s),"rollUp"===this.mode_&&(r-this.rollUpRows_+1<0&&(r=this.rollUpRows_-1),this.setRollUp(e.pts,r)),r!==this.row_&&(this.clearFormatting(e.pts),this.row_=r),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&s)&&(this.column_=4*((14&s)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])):this.isNormalChar(t)&&(0===i&&(i=null),n=d(t),n+=d(i),this[this.mode_](e.pts,n),this.column_+=n.length))):this.lastControlCode_=null}};function Be(e,t){var i=1;for(t<e&&(i=-1);4294967296<Math.abs(t-e);)e+=8589934592*i;return e}g.prototype=new e,g.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e,t){try{return e.trim()}catch(e){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},g.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=u(),this.nonDisplayed_=u(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},g.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},g.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},g.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},g.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},g.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},g.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},g.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},g.prototype.isNormalChar=function(e){return 32<=e&&e<=127},g.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=u(),this.displayed_=u()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},g.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t),t=t.reduce(function(e,t){return e+"<"+t+">"},""),this[this.mode_](e,t)},g.prototype.clearFormatting=function(e){var t;this.formatting_.length&&(t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},""),this.formatting_=[],this[this.mode_](e,t))},g.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=i+=t},g.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];this.displayed_[this.row_]=i+=t},g.prototype.shiftRowsUp_=function(){for(var e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},g.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];this.displayed_[this.row_]=i+=t};var v={CaptionStream:T,Cea608Stream:g,Cea708Stream:a},j={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};function Ue(e,t,i){for(var n="",r=t;r<i;r++)n+="%"+("00"+e[r].toString(16)).slice(-2);return n}function y(e,t,i){return decodeURIComponent(Ue(e,t,i))}function _(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}(x=function e(t){var i,n;e.prototype.init.call(this),this.type_=t||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=Be(e.dts,n),e.pts=Be(e.pts,n),i=e.dts,this.trigger("data",e))},this.flush=function(){n=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){i=n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}}).prototype=new e;function Fe(e){var t,i={descriptor:e&&e.descriptor},l=0,c=[],d=0;if(Fe.prototype.init.call(this),this.dispatchType=j.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(t=0;t<i.descriptor.length;t++)this.dispatchType+=("00"+i.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,i,n,r,s,a,o;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(d=0,c.length=0),0===c.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(c.push(e),d+=e.data.byteLength,1===c.length&&(l=_(e.data.subarray(6,10)),l+=10),!(d<l)){for(t={data:new Uint8Array(l),frames:[],pts:c[0].pts,dts:c[0].dts},r=0;r<l;)t.data.set(c[0].data.subarray(0,l-r),r),r+=c[0].data.byteLength,d-=c[0].data.byteLength,c.shift();i=10,64&t.data[5]&&(i=(i+=4)+_(t.data.subarray(10,14)),l-=_(t.data.subarray(16,20)));do{if((n=_(t.data.subarray(i+4,i+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."})}while((o={id:String.fromCharCode(t.data[i],t.data[i+1],t.data[i+2],t.data[i+3]),data:t.data.subarray(i+10,i+n+10)}).key=o.id,$e[o.id]&&($e[o.id](o),"com.apple.streaming.transportStreamTimestamp"===o.owner)&&(a=(a=(1&(s=o.data)[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2)*4+(3&s[7]),o.timeStamp=a,void 0===t.pts&&void 0===t.dts&&(t.pts=o.timeStamp,t.dts=o.timeStamp),this.trigger("timestamp",o)),t.frames.push(o),(i=i+10+n)<l);this.trigger("data",t)}}}var b=x,T=Be,$e={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=y(e.data,1,t),e.value=y(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=y(e.data,1,t),e.url=y(e.data,t+1,e.data.length);break}},PRIV:function(e){for(var t,i=0;i<e.data.length;i++)if(0===e.data[i]){e.owner=(t=e.data,unescape(Ue(t,0,i)));break}e.privateData=e.data.subarray(i+1),e.data=e.privateData}};Fe.prototype=new e;function He(){var r=new Uint8Array(188),s=0;He.prototype.init.call(this),this.push=function(e){var t,i=0,n=188;for(s?((t=new Uint8Array(e.byteLength+s)).set(r.subarray(0,s)),t.set(e,s),s=0):t=e;n<t.byteLength;)71!==t[i]||71!==t[n]?(i++,n++):(this.trigger("data",t.subarray(i,n)),i+=188,n+=188);i<t.byteLength&&(r.set(t.subarray(i),0),s=t.byteLength-i)},this.flush=function(){188===s&&71===r[0]&&(this.trigger("data",r),s=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){s=0,this.trigger("reset")}}var w,qe,x=Fe;He.prototype=new e,(w=function(){var n,r,s,a;w.prototype.init.call(this),(a=this).packetsWaitingForPmt=[],this.programMapTable=void 0,n=function(e,t){var i=0;t.payloadUnitStartIndicator&&(i+=e[i]+1),("pat"===t.type?r:s)(e.subarray(i),t)},r=function(e,t){t.section_number=e[7],t.last_section_number=e[8],a.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=a.pmtPid},s=function(e,t){var i,n;if(1&e[5]){for(a.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,n=12+((15&e[10])<<8|e[11]);n<i;){var r=e[n],s=(31&e[n+1])<<8|e[n+2];r===j.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=s:r===j.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?a.programMapTable.audio=s:r===j.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][s]=r),n+=5+((15&e[n+3])<<8|e[n+4])}t.programMapTable=a.programMapTable}},this.push=function(e){var t={},i=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(i+=e[i]+1),0===t.pid)t.type="pat",n(e.subarray(i),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",n(e.subarray(i),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,i,t]):this.processPes_(e,i,t)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=j.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=j.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}}).prototype=new e,w.STREAM_TYPES={h264:27,adts:15},(qe=function(){function n(e,t,i){var n,r,s,a,o=new Uint8Array(e.size),l={type:t},c=0,d=0;if(e.data.length&&!(e.size<9)){for(l.trackId=e.data[0].pid,c=0;c<e.data.length;c++)n=e.data[c],o.set(n.data,d),d+=n.data.byteLength;a=(r=o)[0]<<16|r[1]<<8|r[2],(s=l).data=new Uint8Array,1==a&&(s.packetLength=6+(r[4]<<8|r[5]),s.dataAlignmentIndicator=0!=(4&r[6]),192&(a=r[7])&&(s.pts=(14&r[9])<<27|(255&r[10])<<20|(254&r[11])<<12|(255&r[12])<<5|(254&r[13])>>>3,s.pts*=4,s.pts+=(6&r[13])>>>1,s.dts=s.pts,64&a)&&(s.dts=(14&r[14])<<27|(255&r[15])<<20|(254&r[16])<<12|(255&r[17])<<5|(254&r[18])>>>3,s.dts*=4,s.dts+=(6&r[18])>>>1),s.data=r.subarray(9+r[8])),t="video"===t||l.packetLength<=e.size,(i||t)&&(e.size=0,e.data.length=0),t&&u.trigger("data",l)}}var t,u=this,r=!1,s={data:[],size:0},a={data:[],size:0},o={data:[],size:0};qe.prototype.init.call(this),this.push=function(i){({pat:function(){},pes:function(){var e,t;switch(i.streamType){case j.H264_STREAM_TYPE:e=s,t="video";break;case j.ADTS_STREAM_TYPE:e=a,t="audio";break;case j.METADATA_STREAM_TYPE:e=o,t="timed-metadata";break;default:return}i.payloadUnitStartIndicator&&n(e,t,!0),e.data.push(i),e.size+=i.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]};null!==(t=i.programMapTable).video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),r=!0,u.trigger("data",e)}})[i.type]()},this.reset=function(){s.size=0,s.data.length=0,a.size=0,a.data.length=0,this.trigger("reset")},this.flushStreams_=function(){n(s,"video"),n(a,"audio"),n(o,"timed-metadata")},this.flush=function(){var e;!r&&t&&(e={type:"metadata",tracks:[]},null!==t.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),u.trigger("data",e)),r=!1,this.flushStreams_(),this.trigger("done")}}).prototype=new e;var S,ze={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:He,TransportParseStream:w,ElementaryStream:qe,TimestampRolloverStream:b,CaptionStream:v.CaptionStream,Cea608Stream:v.Cea608Stream,Cea708Stream:v.Cea708Stream,MetadataStream:x};for(S in j)j.hasOwnProperty(S)&&(ze[S]=j[S]);function We(l){var c,d=0;We.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes "+e+" to "+t+" in frame "+d+" outside syncword"})},this.push=function(e){var t,i,n,r,s,a,o=0;if(l||(d=0),"audio"===e.type){for(c&&c.length?(n=c,(c=new Uint8Array(n.byteLength+e.data.byteLength)).set(n),c.set(e.data,n.byteLength)):c=e.data;o+7<c.length;)if(255===c[o]&&240==(246&c[o+1])){if("number"==typeof a&&(this.skipWarn_(a,o),a=null),i=2*(1&~c[o+1]),t=(3&c[o+3])<<11|c[o+4]<<3|(224&c[o+5])>>5,s=(r=1024*(1+(3&c[o+6])))*Ve/Xe[(60&c[o+2])>>>2],c.byteLength-o<t)break;this.trigger("data",{pts:e.pts+d*s,dts:e.dts+d*s,sampleCount:r,audioobjecttype:1+(c[o+2]>>>6&3),channelcount:(1&c[o+2])<<2|(192&c[o+3])>>>6,samplerate:Xe[(60&c[o+2])>>>2],samplingfrequencyindex:(60&c[o+2])>>>2,samplesize:16,data:c.subarray(o+7+i,o+t)}),d++,o+=t}else"number"!=typeof a&&(a=o),o++;"number"==typeof a&&(this.skipWarn_(a,o),a=null),c=c.subarray(o)}},this.flush=function(){d=0,this.trigger("done")},this.reset=function(){c=void 0,this.trigger("reset")},this.endTimeline=function(){c=void 0,this.trigger("endedtimeline")}}var k=ze,Ve=m,Xe=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];We.prototype=new e;function Ge(n){var r=n.byteLength,s=0,a=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+a},this.loadWord=function(){var e=n.byteLength-r,t=new Uint8Array(4),i=Math.min(4,r);if(0===i)throw new Error("no bytes available");t.set(n.subarray(e,e+i)),s=new DataView(t.buffer).getUint32(0),a=8*i,r-=i},this.skipBits=function(e){var t;e<a||(e=(e-=a)-8*(t=Math.floor(e/8)),r-=t,this.loadWord()),s<<=e,a-=e},this.readBits=function(e){var t=Math.min(a,e),i=s>>>32-t;return 0<(a-=t)?s<<=t:0<r&&this.loadWord(),0<(t=e-t)?i<<t|this.readBits(t):i},this.skipLeadingZeros=function(){for(var e=0;e<a;++e)if(0!=(s&2147483648>>>e))return s<<=e,a-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()}function E(){var n,r,s=0;E.prototype.init.call(this),this.push=function(e){for(var t,i=(r=r?((t=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),t.set(e.data,r.byteLength),t):e.data).byteLength;s<i-3;s++)if(1===r[s+2]){n=s+5;break}for(;n<i;)switch(r[n]){case 0:if(0!==r[n-1])n+=2;else if(0!==r[n-2])n++;else{for(s+3!==n-2&&this.trigger("data",r.subarray(s+3,n-2));1!==r[++n]&&n<i;);s=n-2,n+=3}break;case 1:0!==r[n-1]||0!==r[n-2]?n+=3:(this.trigger("data",r.subarray(s+3,n-2)),s=n-2,n+=3);break;default:n+=3}r=r.subarray(s),n-=s,s=0},this.reset=function(){r=null,s=0,this.trigger("reset")},this.flush=function(){r&&3<r.byteLength&&this.trigger("data",r.subarray(s+3)),r=null,s=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}var Ye,Ke,Qe=We;function Je(e,t){var i=0<=(i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9])?i:0;return(16&e[t+5])>>4?20+i:10+i}function Ze(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}E.prototype=new e,Ke={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Ye=function(){var i,n,r,s,a,o,m,t=new E;Ye.prototype.init.call(this),(i=this).push=function(e){"video"===e.type&&(n=e.trackId,r=e.pts,s=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:n,pts:r,dts:s,data:e,nalUnitTypeCode:31&e[0]};switch(t.nalUnitTypeCode){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=a(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=a(e.subarray(1)),t.config=o(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}i.trigger("data",t)}),t.on("done",function(){i.trigger("done")}),t.on("partialdone",function(){i.trigger("partialdone")}),t.on("reset",function(){i.trigger("reset")}),t.on("endedtimeline",function(){i.trigger("endedtimeline")}),this.flush=function(){t.flush()},this.partialFlush=function(){t.partialFlush()},this.reset=function(){t.reset()},this.endTimeline=function(){t.endTimeline()},m=function(e,t){for(var i=8,n=8,r=0;r<e;r++)i=0===(n=0!==n?(i+t.readExpGolomb()+256)%256:n)?i:n},a=function(e){for(var t=e.byteLength,i=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return e;for(var r=t-i.length,s=new Uint8Array(r),a=0,n=0;n<r;a++,n++)a===i[0]&&(a++,i.shift()),s[n]=e[a];return s},o=function(e){var t,i,n,r,s,a=0,o=0,l=0,c=0,d=[1,1],u=new Ge(e),h=u.readUnsignedByte(),p=u.readUnsignedByte(),f=u.readUnsignedByte();if(u.skipUnsignedExpGolomb(),Ke[h]&&(3===(i=u.readUnsignedExpGolomb())&&u.skipBits(1),u.skipUnsignedExpGolomb(),u.skipUnsignedExpGolomb(),u.skipBits(1),u.readBoolean()))for(r=3!==i?8:12,s=0;s<r;s++)u.readBoolean()&&m(s<6?16:64,u);if(u.skipUnsignedExpGolomb(),0===(n=u.readUnsignedExpGolomb()))u.readUnsignedExpGolomb();else if(1===n)for(u.skipBits(1),u.skipExpGolomb(),u.skipExpGolomb(),t=u.readUnsignedExpGolomb(),s=0;s<t;s++)u.skipExpGolomb();if(u.skipUnsignedExpGolomb(),u.skipBits(1),e=u.readUnsignedExpGolomb(),i=u.readUnsignedExpGolomb(),0===(n=u.readBits(1))&&u.skipBits(1),u.skipBits(1),u.readBoolean()&&(a=u.readUnsignedExpGolomb(),o=u.readUnsignedExpGolomb(),l=u.readUnsignedExpGolomb(),c=u.readUnsignedExpGolomb()),u.readBoolean()&&u.readBoolean()){switch(u.readUnsignedByte()){case 1:d=[1,1];break;case 2:d=[12,11];break;case 3:d=[10,11];break;case 4:d=[16,11];break;case 5:d=[40,33];break;case 6:d=[24,11];break;case 7:d=[20,11];break;case 8:d=[32,11];break;case 9:d=[80,33];break;case 10:d=[18,11];break;case 11:d=[15,11];break;case 12:d=[64,33];break;case 13:d=[160,99];break;case 14:d=[4,3];break;case 15:d=[3,2];break;case 16:d=[2,1];break;case 255:d=[u.readUnsignedByte()<<8|u.readUnsignedByte(),u.readUnsignedByte()<<8|u.readUnsignedByte()]}d&&(d[0],d[1])}return{profileIdc:h,levelIdc:f,profileCompatibility:p,width:16*(e+1)-2*a-2*o,height:(2-n)*(i+1)*16-2*l-2*c,sarRatio:d}}}).prototype=new e;function et(){var s=new Uint8Array,a=0;et.prototype.init.call(this),this.setTimestamp=function(e){a=e},this.push=function(e){var t,i,n=0,r=0;for(s.length?(i=s.length,(s=new Uint8Array(e.byteLength+i)).set(s.subarray(0,i)),s.set(e,i)):s=e;3<=s.length-r;)if(s[r]!=="I".charCodeAt(0)||s[r+1]!=="D".charCodeAt(0)||s[r+2]!=="3".charCodeAt(0))if(255!=(255&s[r])||240!=(240&s[r+1]))r++;else{if(s.length-r<7)break;if(r+(n=C.parseAdtsSize(s,r))>s.length)break;t={type:"audio",data:s.subarray(r,r+n),pts:a,dts:a},this.trigger("data",t),r+=n}else{if(s.length-r<10)break;if(r+(n=C.parseId3TagSize(s,r))>s.length)break;t={type:"timed-metadata",data:s.subarray(r,r+n)},this.trigger("data",t),r+=n}e=s.length-r,s=0<e?s.subarray(r):new Uint8Array},this.reset=function(){s=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){s=new Uint8Array,this.trigger("endedtimeline")}}var x={H264Stream:Ye,NalByteStream:E},tt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],C={isLikelyAacData:function(e){var t=function e(t,i){return t.length-i<10||t[i]!=="I".charCodeAt(0)||t[i+1]!=="D".charCodeAt(0)||t[i+2]!=="3".charCodeAt(0)?i:e(t,i+=Je(t,i))}(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:Je,parseAdtsSize:function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return tt[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,i=10;64&e[5]&&(i=(i+=4)+Ze(e.subarray(10,14)));do{if((t=Ze(e.subarray(i+4,i+8)))<1)return null;if("PRIV"===String.fromCharCode(e[i],e[i+1],e[i+2],e[i+3]))for(var n=e.subarray(i+10,i+t+10),r=0;r<n.byteLength;r++)if(0===n[r]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(e,t){for(var i="",n=0;n<t;n++)i+="%"+("00"+e[n].toString(16)).slice(-2);return i}(n,r)))break;var s=n.subarray(r+1),a=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return(a*=4)+(3&s[7])}}while((i=i+10+t)<e.byteLength);return null}};function it(e,t){t.stream=e,this.trigger("log",t)}function nt(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++){var r=i[n];"headOfPipeline"!==r&&t[r].on&&t[r].on("log",it.bind(e,r))}}function rt(e,t){var i;if(e.length===t.length){for(i=0;i<e.length;i++)if(e[i]!==t[i])return;return 1}}function st(e,t,i,n,r,s){return{start:{dts:e,pts:e+(i-t)},end:{dts:e+(n-t),pts:e+(r-i)},prependedContentDuration:s,baseMediaDecodeTime:e}}et.prototype=new e;function at(o,l){var c=[],d=0,u=0,h=1/0,p=(l=l||{}).firstSequenceNumber||0;at.prototype.init.call(this),this.push=function(t){ee(o,t),o&&dt.forEach(function(e){o[e]=t[e]}),c.push(t)},this.setEarliestDts=function(e){d=e},this.setVideoBaseMediaDecodeTime=function(e){h=e},this.setAudioAppendStart=function(e){u=e},this.flush=function(){var e,t,i,n,r,s,a;0!==c.length&&(r=c,a=d,r=(s=o).minSegmentDts>=a?r:(s.minSegmentDts=1/0,r.filter(function(e){return e.dts>=a&&(s.minSegmentDts=Math.min(s.minSegmentDts,e.dts),s.minSegmentPts=s.minSegmentDts,!0)})),o.baseMediaDecodeTime=Z(o,l.keepOriginalTimestamps),n=J(o,r,u,h),o.samples=function(e){for(var t,i=[],n=0;n<e.length;n++)t=e[n],i.push({size:t.data.byteLength,duration:1024});return i}(r),e=Y(function(e){for(var t,i=0,n=new Uint8Array(function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].data.byteLength;return t}(e)),r=0;r<e.length;r++)t=e[r],n.set(t.data,i),i+=t.data.byteLength;return n}(r)),c=[],i=Ee(p,[o]),t=new Uint8Array(i.byteLength+e.byteLength),p++,t.set(i),t.set(e,i.byteLength),f(o),i=Math.ceil(1024*ft/o.samplerate),r.length&&(i=r.length*i,this.trigger("segmentTimingInfo",st(Ie(o.baseMediaDecodeTime,o.samplerate),r[0].dts,r[0].pts,r[0].dts+i,r[0].pts+i,n||0)),this.trigger("timingInfo",{start:r[0].pts,end:r[0].pts+i})),this.trigger("data",{track:o,boxes:t})),this.trigger("done","AudioSegmentStream")},this.reset=function(){f(o),c=[],this.trigger("reset")}}var ot,lt,A,ct=et,dt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],ut=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],ht=x.H264Stream,pt=C.isLikelyAacData,ft=m;function mt(e){var t=31&e[1];return(t<<=8)|e[2]}function gt(e){return!!(64&e[1])}function vt(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t}function yt(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}at.prototype=new e,(ot=function(o,l){var t,i,c=[],d=[],u=(l=l||{}).firstSequenceNumber||0;ot.prototype.init.call(this),delete o.minPTS,this.gopCache_=[],this.push=function(e){ee(o,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,o.sps=[e.data],ut.forEach(function(e){o[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||i||(i=e.data,o.pps=[e.data]),c.push(e)},this.flush=function(){for(var e,t,i,n,r,s=0;c.length&&"access_unit_delimiter_rbsp"!==c[0].nalUnitType;)c.shift();if(0!==c.length){if(e=function(e){var t,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,t=n.byteLength=r.duration=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(i=e[t]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r}(c),(t=function(e){var t,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r}(e))[0][0].keyFrame||((i=this.getGopForFusion_(c[0],o))?(s=i.duration,t.unshift(i),t.byteLength+=i.byteLength,t.nalCount+=i.nalCount,t.pts=i.pts,t.dts=i.dts,t.duration+=i.duration):(!(n=t)[0][0].keyFrame&&1<n.length&&(r=n.shift(),n.byteLength-=r.byteLength,n.nalCount-=r.nalCount,n[0][0].dts=r.dts,n[0][0].pts=r.pts,n[0][0].duration+=r.duration),t=n)),d.length){var a=l.alignGopsAtEnd?this.alignGopsAtEnd_(t):this.alignGopsAtStart_(t);if(!a)return this.gopCache_.unshift({gop:t.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");f(o),t=a}ee(o,t),o.samples=function(e,t){for(var i,n,r,s,a,o,l=t||0,c=[],d=0;d<e.length;d++)for(n=e[d],i=0;i<n.length;i++)r=n[i],l+=(s=r,a=l,(o={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=a,o.compositionTimeOffset=s.pts-s.dts,o.duration=s.duration,o.size=4*s.length,o.size+=s.byteLength,s.keyFrame&&(o.flags.dependsOn=2,o.flags.isNonSyncSample=0),(r=o).size),c.push(r);return c}(t),e=Y(function(e){for(var t,i,n,r,s,a=0,o=e.byteLength,l=e.nalCount,c=new Uint8Array(o+4*l),d=new DataView(c.buffer),u=0;u<e.length;u++)for(n=e[u],t=0;t<n.length;t++)for(r=n[t],i=0;i<r.length;i++)s=r[i],d.setUint32(a,s.data.byteLength),c.set(s.data,a+=4),a+=s.data.byteLength;return c}(t)),o.baseMediaDecodeTime=Z(o,l.keepOriginalTimestamps),this.trigger("processedGopsInfo",t.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),i=t[0],a=t[t.length-1],this.trigger("segmentTimingInfo",st(o.baseMediaDecodeTime,i.dts,i.pts,a.dts+a.duration,a.pts+a.duration,s)),this.trigger("timingInfo",{start:t[0].pts,end:t[t.length-1].pts+t[t.length-1].duration}),this.gopCache_.unshift({gop:t.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],this.trigger("baseMediaDecodeTime",o.baseMediaDecodeTime),this.trigger("timelineStartInfo",o.timelineStartInfo),s=Ee(u,[o]),t=new Uint8Array(s.byteLength+e.byteLength),u++,t.set(s),t.set(e,s.byteLength),this.trigger("data",{track:o,boxes:t})}this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),c=[],this.gopCache_.length=0,d.length=0,this.trigger("reset")},this.resetStream_=function(){f(o),i=t=void 0},this.getGopForFusion_=function(e){for(var t,i,n,r=1/0,s=0;s<this.gopCache_.length;s++)i=(n=this.gopCache_[s]).gop,o.pps&&rt(o.pps[0],n.pps[0])&&o.sps&&rt(o.sps[0],n.sps[0])&&(i.dts<o.timelineStartInfo.dts||-1e4<=(i=e.dts-i.dts-i.duration)&&i<=45e3&&(!t||i<r)&&(t=n,r=i));return t?t.gop:null},this.alignGopsAtStart_=function(e){for(var t,i,n,r,s=e.byteLength,a=e.nalCount,o=e.duration,l=t=0;l<d.length&&t<e.length&&(i=d[l],n=e[t],i.pts!==n.pts);)n.pts>i.pts?l++:(t++,s-=n.byteLength,a-=n.nalCount,o-=n.duration);return 0===t?e:t===e.length?null:((r=e.slice(t)).byteLength=s,r.duration=o,r.nalCount=a,r.pts=r[0].pts,r.dts=r[0].dts,r)},this.alignGopsAtEnd_=function(e){for(var t,i,n,r,s=d.length-1,a=e.length-1,o=null,l=!1;0<=s&&0<=a;){if(t=d[s],i=e[a],t.pts===i.pts){l=!0;break}t.pts>i.pts?s--:(s===d.length-1&&(o=a),a--)}return l||null!==o?0===(r=l?a:o)?e:(r=(n=e.slice(r)).reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0}),n.byteLength=r.byteLength,n.duration=r.duration,n.nalCount=r.nalCount,n.pts=n[0].pts,n.dts=n[0].dts,n):null},this.alignGopsWith=function(e){d=e}}).prototype=new e,(A=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,A.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new e,A.prototype.flush=function(e){var t,i,n,r,s,a,o=0,l={captions:[],captionStreams:{},metadata:[],info:{}},c=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(c=this.videoTrack.timelineStartInfo.pts,ut.forEach(function(e){l.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(c=this.audioTrack.timelineStartInfo.pts,dt.forEach(function(e){l.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?l.type=this.pendingTracks[0].type:l.type="combined",this.emittedTracks+=this.pendingTracks.length,r=this.pendingTracks,s=ke(),a=ce(r),(r=new Uint8Array(s.byteLength+a.byteLength)).set(s),r.set(a,s.byteLength),e=r,l.initSegment=new Uint8Array(e.byteLength),l.initSegment.set(e),l.data=new Uint8Array(this.pendingBytes),n=0;n<this.pendingBoxes.length;n++)l.data.set(this.pendingBoxes[n],o),o+=this.pendingBoxes[n].byteLength;for(n=0;n<this.pendingCaptions.length;n++)(t=this.pendingCaptions[n]).startTime=Q(t.startPts,c,this.keepOriginalTimestamps),t.endTime=Q(t.endPts,c,this.keepOriginalTimestamps),l.captionStreams[t.stream]=!0,l.captions.push(t);for(n=0;n<this.pendingMetadata.length;n++)(i=this.pendingMetadata[n]).cueTime=Q(i.pts,c,this.keepOriginalTimestamps),l.metadata.push(i);for(l.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",l),n=0;n<l.captions.length;n++)t=l.captions[n],this.trigger("caption",t);for(n=0;n<l.metadata.length;n++)i=l.metadata[n],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},A.prototype.setRemux=function(e){this.remuxTracks=e},(lt=function(n){var r,s,a=this,i=!0;lt.prototype.init.call(this),this.baseMediaDecodeTime=(n=n||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new k.MetadataStream,t.aacStream=new ct,t.audioTimestampRolloverStream=new k.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new k.TimestampRolloverStream("timed-metadata"),t.adtsStream=new Qe,t.coalesceStream=new A(n,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type&&"audio"!==e.type||t.audioSegmentStream||(s=s||{timelineStartInfo:{baseMediaDecodeTime:a.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new at(s,n),t.audioSegmentStream.on("log",a.getLogTrigger_("audioSegmentStream")),t.audioSegmentStream.on("timingInfo",a.trigger.bind(a,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream),a.trigger("trackinfo",{hasAudio:!!s,hasVideo:!!r}))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done")),nt(this,t)},this.setupTsPipeline=function(){var i={};(this.transmuxPipeline_=i).type="ts",i.metadataStream=new k.MetadataStream,i.packetStream=new k.TransportPacketStream,i.parseStream=new k.TransportParseStream,i.elementaryStream=new k.ElementaryStream,i.timestampRolloverStream=new k.TimestampRolloverStream,i.adtsStream=new Qe,i.h264Stream=new ht,i.captionStream=new k.CaptionStream(n),i.coalesceStream=new A(n,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)r||"video"!==e.tracks[t].type?s||"audio"!==e.tracks[t].type||((s=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=a.baseMediaDecodeTime):(r=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=a.baseMediaDecodeTime;r&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new ot(r,n),i.videoSegmentStream.on("log",a.getLogTrigger_("videoSegmentStream")),i.videoSegmentStream.on("timelineStartInfo",function(e){s&&!n.keepOriginalTimestamps&&(s.timelineStartInfo=e,i.audioSegmentStream.setEarliestDts(e.dts-a.baseMediaDecodeTime))}),i.videoSegmentStream.on("processedGopsInfo",a.trigger.bind(a,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",a.trigger.bind(a,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",function(e){s&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),i.videoSegmentStream.on("timingInfo",a.trigger.bind(a,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),s&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new at(s,n),i.audioSegmentStream.on("log",a.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",a.trigger.bind(a,"audioTimingInfo")),i.audioSegmentStream.on("segmentTimingInfo",a.trigger.bind(a,"audioSegmentTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),a.trigger("trackinfo",{hasAudio:!!s,hasVideo:!!r})}}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",function(e){e.dispatchType=i.metadataStream.dispatchType,a.trigger("id3Frame",e)}),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),nt(this,i)},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;n.keepOriginalTimestamps||(this.baseMediaDecodeTime=e),s&&(s.timelineStartInfo.dts=void 0,s.timelineStartInfo.pts=void 0,f(s),t.audioTimestampRolloverStream)&&t.audioTimestampRolloverStream.discontinuity(),r&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[]),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,f(r),t.captionStream.reset()),t.timestampRolloverStream&&t.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){s&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(e){var t=this.transmuxPipeline_;n.remux=e,t&&t.coalesceStream&&t.coalesceStream.setRemux(e)},this.alignGopsWith=function(e){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(t){var i=this;return function(e){e.stream=t,i.trigger("log",e)}},this.push=function(e){var t;i&&((t=pt(e))&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1),this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new e;function _t(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}function bt(){var t,c,h,p,f,i,n=!1;this.isInitialized=function(){return n},this.init=function(e){t=new Lt,n=!0,i=!!e&&e.isPartial,t.on("data",function(e){e.startTime=e.startPts/p,e.endTime=e.endPts/p,f.captions.push(e),f.captionStreams[e.stream]=!0}),t.on("log",function(e){f.logs.push(e)})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||h===e[0]&&p===t[h])},this.parse=function(e,t,i){if(!this.isInitialized())return null;if(!t||!i)return null;if(this.isNewInit(t,i))h=t[0],p=i[h];else if(null===h||!p)return c.push(e),null;for(;0<c.length;){var n=c.shift();this.parse(n,t,i)}return s=p,(e=null===(r=h)?null:(d=r,o=I(a=e,["moof","traf"]),a=I(a,["mdat"]),u={},l=[],a.forEach(function(e,t){t=o[t],l.push({mdat:e,traf:t})}),l.forEach(function(e){var t,i,n,r,s,a=e.mdat,o=e.traf,l=I(o,["tfhd"]),c=Ct(l[0]),e=c.trackId,l=0<(l=I(o,["tfdt"])).length?kt(l[0]).baseMediaDecodeTime:0,o=I(o,["trun"]);d===e&&0<o.length&&(t=l,i=c.defaultSampleDuration||0,n=c.defaultSampleSize||0,r=c.trackId,s=[],o.forEach(function(e){(e=Et(e).samples).forEach(function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=n),e.trackId=r,e.dts=t,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"==typeof t?(e.pts=t+At.BigInt(e.compositionTimeOffset),t+=At.BigInt(e.duration)):(e.pts=t+e.compositionTimeOffset,t+=e.duration)}),s=s.concat(e)}),a=function(e,t,i){for(var n,r,s=new DataView(e.buffer,e.byteOffset,e.byteLength),a={logs:[],seiNals:[]},o=0;o+4<e.length;o+=n)if(n=s.getUint32(o),o+=4,!(n<=0))switch(31&e[o]){case 6:var l=e.subarray(o+1,o+1+n),c=function(e){for(var t=o,i=0;i<e.length;i++){var n=e[i];if(t<n.size)return n;t-=n.size}return null}(t),l={nalUnitType:"sei_rbsp",size:n,data:l,escapedRBSP:Pt(l),trackId:i};if(c)l.pts=c.pts,l.dts=c.dts,r=c;else{if(!r){a.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+o+" for trackId "+i+". See mux.js#223."});break}l.pts=r.pts,l.dts=r.dts}a.seiNals.push(l)}return a}(a,s,e),u[e]||(u[e]={seiNals:[],logs:[]}),u[e].seiNals=u[e].seiNals.concat(a.seiNals),u[e].logs=u[e].logs.concat(a.logs))}),{seiNals:(r=u[r]||{}).seiNals,logs:r.logs,timescale:s}))&&e.logs&&(f.logs=f.logs.concat(e.logs)),null!==e&&e.seiNals?(this.pushNals(e.seiNals),this.flushStream(),f):f.logs.length?{logs:f.logs,captions:[],captionStreams:[]}:null;var r,s,a,d,o,u,l},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;i?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){f.captions=[],f.captionStreams={},f.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){c=[],p=h=null,f?this.clearParsedCaptions():f={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()}function P(e){return("00"+e.toString(16)).slice(-2)}var Tt=lt,L=function(e){var t="";return(t=(t=(t+=String.fromCharCode(e[0]))+String.fromCharCode(e[1]))+String.fromCharCode(e[2]))+String.fromCharCode(e[3])},wt=x=function(e){return e>>>0},I=function e(t,i){var n,r,s,a=[];if(!i.length)return null;for(n=0;n<t.byteLength;)r=wt(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),s=L(t.subarray(n+4,n+8)),r=1<r?n+r:t.byteLength,s===i[0]&&(1===i.length?a.push(t.subarray(n+8,r)):(s=e(t.subarray(n+8,r),i.slice(1))).length&&(a=a.concat(s))),n=r;return a},xt=x,St=X.getUint64,kt=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return t.baseMediaDecodeTime=1===t.version?St(e.subarray(4)):xt(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t},Et=function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&i.flags[2],s=4&i.flags[2],a=1&i.flags[1],o=2&i.flags[1],l=4&i.flags[1],c=8&i.flags[1],d=n.getUint32(4),u=8;for(r&&(i.dataOffset=n.getInt32(u),u+=4),s&&d&&(t={flags:_t(e.subarray(u,u+4))},u+=4,a&&(t.duration=n.getUint32(u),u+=4),o&&(t.size=n.getUint32(u),u+=4),c&&(t.compositionTimeOffset=1===i.version?n.getInt32(u):n.getUint32(u),u+=4),i.samples.push(t),d--);d--;)t={},a&&(t.duration=n.getUint32(u),u+=4),o&&(t.size=n.getUint32(u),u+=4),l&&(t.flags=_t(e.subarray(u,u+4)),u+=4),c&&(t.compositionTimeOffset=1===i.version?n.getInt32(u):n.getUint32(u),u+=4),i.samples.push(t);return i},Ct=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4)},n=1&i.flags[2],r=2&i.flags[2],s=8&i.flags[2],a=16&i.flags[2],o=32&i.flags[2],l=65536&i.flags[0],c=131072&i.flags[0],e=8;return n&&(e+=4,i.baseDataOffset=t.getUint32(12),e+=4),r&&(i.sampleDescriptionIndex=t.getUint32(e),e+=4),s&&(i.defaultSampleDuration=t.getUint32(e),e+=4),a&&(i.defaultSampleSize=t.getUint32(e),e+=4),o&&(i.defaultSampleFlags=t.getUint32(e)),l&&(i.durationIsEmpty=!0),!n&&c&&(i.baseDataOffsetIsMoof=!0),i},e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},At=e="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},Pt=De,Lt=v.CaptionStream,It=x,Ot=X.getUint64,e=function(e){return I(e,["moov","trak"]).reduce(function(e,t){var i,n,r=I(t,["tkhd"])[0];return r&&(i=r[0],r=It(r[n=0===i?12:20]<<24|r[1+n]<<16|r[2+n]<<8|r[3+n]),t=I(t,["mdia","mdhd"])[0])?(i=t[0],e[r]=It(t[n=0===i?12:20]<<24|t[1+n]<<16|t[2+n]<<8|t[3+n]),e):null},{})},Mt=function(s,e){return"bigint"==typeof(e=I(e,["moof","traf"]).reduce(function(e,t){var i,n=I(t,["tfhd"])[0],r=It(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),n=s[r]||9e4,r=I(t,["tfdt"])[0],t=new DataView(r.buffer,r.byteOffset,r.byteLength);return"bigint"==typeof(t=1===r[0]?Ot(r.subarray(4,12)):t.getUint32(4))?i=t/At.BigInt(n):"number"!=typeof t||isNaN(t)||(i=t/n),(i=i<Number.MAX_SAFE_INTEGER?Number(i):i)<e?i:e},1/0))||isFinite(e)?e:0},Dt=function(e){var e=I(e,["moov","trak"]),a=[];return e.forEach(function(e){var t={},i=I(e,["tkhd"])[0],n=(i&&(i=(n=new DataView(i.buffer,i.byteOffset,i.byteLength)).getUint8(0),t.id=0===i?n.getUint32(12):n.getUint32(20)),I(e,["mdia","hdlr"])[0]);n&&(s=L(n.subarray(8,12)),t.type="vide"===s?"video":"soun"===s?"audio":s);var r,s=I(e,["mdia","minf","stbl","stsd"])[0];s&&(s=s.subarray(8),t.codec=L(s.subarray(4,8)),s=I(s,[t.codec])[0])&&(/^[asm]vc[1-9]$/i.test(t.codec)?(r=s.subarray(78),"avcC"===L(r.subarray(4,8))&&11<r.length?(t.codec+=".",t.codec+=P(r[9]),t.codec+=P(r[10]),t.codec+=P(r[11])):t.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(t.codec)?(r=s.subarray(28),"esds"===L(r.subarray(4,8))&&20<r.length&&0!==r[19]?(t.codec+="."+P(r[19]),t.codec+="."+P(r[20]>>>2&63).replace(/^0/,"")):t.codec="mp4a.40.2"):t.codec=t.codec.toLowerCase()),(e=I(e,["mdia","mdhd"])[0])&&(t.timescale=(n=0===(i=e)[0]?12:20,It(i[n]<<24|i[1+n]<<16|i[2+n]<<8|i[3+n]))),a.push(t)}),a},O=T,N={};function jt(e){for(var t,i,n={pid:null,table:null},r={},s=e,a=n,o=0,l=188;l<s.byteLength;)if(71!==s[o]||71!==s[l])o++,l++;else{switch(i=s.subarray(o,l),N.ts.parseType(i,a.pid)){case"pat":a.pid=N.ts.parsePat(i);break;case"pmt":var c=N.ts.parsePmt(i);a.table=a.table||{},Object.keys(c).forEach(function(e){a.table[e]=c[e]})}o+=188,l+=188}for(t in n.table)if(n.table.hasOwnProperty(t))switch(n.table[t]){case j.H264_STREAM_TYPE:r.video=[],S=x=w=T=v=g=m=f=p=h=u=d=void 0;for(var d,u,h,p,f,m,g,v,y=e,_=n,b=r,T=0,w=188,x=!1,S={data:[],size:0};w<y.byteLength;)if(71!==y[T]||71!==y[w])T++,w++;else{if(d=y.subarray(T,w),"pes"===N.ts.parseType(d,_.pid)&&(u=N.ts.parsePesType(d,_.table),h=N.ts.parsePayloadUnitStartIndicator(d),"video"===u)&&(h&&!x&&(p=N.ts.parsePesTime(d))&&(p.type="video",b.video.push(p),x=!0),!b.firstKeyFrame)){if(h&&0!==S.size){for(f=new Uint8Array(S.size),m=0;S.data.length;)g=S.data.shift(),f.set(g,m),m+=g.byteLength;N.ts.videoPacketContainsKeyFrame(f)&&(v=N.ts.parsePesTime(f))&&(b.firstKeyFrame=v,b.firstKeyFrame.type="video"),S.size=0}S.data.push(d),S.size+=d.byteLength}if(x&&b.firstKeyFrame)break;T+=188,w+=188}for(T=(w=y.byteLength)-188,x=!1;0<=T;)if(71!==y[T]||71!==y[w])T--,w--;else{if(d=y.subarray(T,w),"pes"===N.ts.parseType(d,_.pid)&&(u=N.ts.parsePesType(d,_.table),h=N.ts.parsePayloadUnitStartIndicator(d),"video"===u)&&h&&(p=N.ts.parsePesTime(d))&&(p.type="video",b.video.push(p),x=!0),x)break;T-=188,w-=188}0===r.video.length&&delete r.video;break;case j.ADTS_STREAM_TYPE:r.audio=[],D=M=O=A=C=E=k=I=L=P=void 0;for(var k,E,C,A,P=e,L=n,I=r,O=0,M=188,D=!1;M<=P.byteLength;)if(71!==P[O]||71!==P[M]&&M!==P.byteLength)O++,M++;else{if(k=P.subarray(O,M),"pes"===N.ts.parseType(k,L.pid)&&(E=N.ts.parsePesType(k,L.table),C=N.ts.parsePayloadUnitStartIndicator(k),"audio"===E)&&C&&(A=N.ts.parsePesTime(k))&&(A.type="audio",I.audio.push(A),D=!0),D)break;O+=188,M+=188}for(O=(M=P.byteLength)-188,D=!1;0<=O;)if(71!==P[O]||71!==P[M]&&M!==P.byteLength)O--,M--;else{if(k=P.subarray(O,M),"pes"===N.ts.parseType(k,L.pid)&&(E=N.ts.parsePesType(k,L.table),C=N.ts.parsePayloadUnitStartIndicator(k),"audio"===E)&&C&&(A=N.ts.parsePesTime(k))&&(A.type="audio",I.audio.push(A),D=!0),D)break;O-=188,M-=188}0===r.audio.length&&delete r.audio}return r}N.ts={parseType:function(e,t){return 0===(e=mt(e))?"pat":e===t?"pmt":t?"pes":null},parsePat:function(e){var t=gt(e),i=4+vt(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},parsePmt:function(e){var t={},i=gt(e),n=4+vt(e);if(i&&(n+=e[n]+1),1&e[n+5]){for(var r=3+((15&e[n+1])<<8|e[n+2])-4,s=12+((15&e[n+10])<<8|e[n+11]);s<r;){var a=n+s;t[(31&e[a+1])<<8|e[a+2]]=e[a],s+=5+((15&e[a+3])<<8|e[a+4])}return t}},parsePayloadUnitStartIndicator:gt,parsePesType:function(e,t){switch(t[mt(e)]){case j.H264_STREAM_TYPE:return"video";case j.ADTS_STREAM_TYPE:return"audio";case j.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){var t,i,n;return!gt(e)||(t=4+vt(e))>=e.byteLength?null:(i=null,192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n)&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1),i)},videoPacketContainsKeyFrame:function(e){for(var t=4+vt(e),i=e.subarray(t),n=0,r=0,s=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1])n+=2;else if(0!==i[n-2])n++;else{for(r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===yt(31&i[r+3])&&(s=!0);1!==i[++n]&&n<i.length;);r=n-2,n+=3}break;case 1:0!==i[n-1]||0!==i[n-2]?n+=3:("slice_layer_without_partitioning_rbsp_idr"===yt(31&i[r+3])&&(s=!0),r=n-2,n+=3);break;default:n+=3}return i=i.subarray(r),n-=r,r=0,!!(i&&3<i.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===yt(31&i[r+3]))||s}},N.aac=C;var M=m,Nt=((b=Rt.prototype).init=function(){var i,e;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Tt(this.options),i=this.self,(e=this.transmuxer).on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},t=e.data,e.data=t.buffer,i.postMessage({action:"data",segment:e,byteOffset:t.byteOffset,byteLength:t.byteLength},[e.data])}),e.on("done",function(e){i.postMessage({action:"done"})}),e.on("gopInfo",function(e){i.postMessage({action:"gopInfo",gopInfo:e})}),e.on("videoSegmentTimingInfo",function(e){var t={start:{decode:n(e.start.dts),presentation:n(e.start.pts)},end:{decode:n(e.end.dts),presentation:n(e.end.pts)},baseMediaDecodeTime:n(e.baseMediaDecodeTime)};e.prependedContentDuration&&(t.prependedContentDuration=n(e.prependedContentDuration)),i.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})}),e.on("audioSegmentTimingInfo",function(e){var t={start:{decode:n(e.start.dts),presentation:n(e.start.pts)},end:{decode:n(e.end.dts),presentation:n(e.end.pts)},baseMediaDecodeTime:n(e.baseMediaDecodeTime)};e.prependedContentDuration&&(t.prependedContentDuration=n(e.prependedContentDuration)),i.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:t})}),e.on("id3Frame",function(e){i.postMessage({action:"id3Frame",id3Frame:e})}),e.on("caption",function(e){i.postMessage({action:"caption",caption:e})}),e.on("trackinfo",function(e){i.postMessage({action:"trackinfo",trackInfo:e})}),e.on("audioTimingInfo",function(e){i.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:n(e.start),end:n(e.end)}})}),e.on("videoTimingInfo",function(e){i.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:n(e.start),end:n(e.end)}})}),e.on("log",function(e){i.postMessage({action:"log",log:e})})},b.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new bt,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),e=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:e&&e.captions||[],logs:e&&e.logs||[],data:t.buffer},[t.buffer])},b.probeMp4StartTime=function(e){var t=e.timescales,e=e.data,t=Mt(t,e);this.self.postMessage({action:"probeMp4StartTime",startTime:t,data:e},[e.buffer])},b.probeMp4Tracks=function(e){var t=e.data,e=Dt(t);this.self.postMessage({action:"probeMp4Tracks",tracks:e,data:t},[t.buffer])},b.probeTs=function(e){var t,i,n,r,s,a=e.data,e="number"!=typeof(o=e.baseStartTime)||isNaN(o)?void 0:o*m,o=(t=a,i=e,(s=(N.aac.isLikelyAacData(t)?function(e){for(var t,i,n=!1,r=0,s=null,a=null,o=0,l=0;3<=e.length-l;){switch(N.aac.parseType(e,l)){case"timed-metadata":e.length-l<10?n=!0:(o=N.aac.parseId3TagSize(e,l))>e.length?n=!0:(null===a&&(t=e.subarray(l,l+o),a=N.aac.parseAacTimestamp(t)),l+=o);break;case"audio":e.length-l<7?n=!0:(o=N.aac.parseAdtsSize(e,l))>e.length?n=!0:(null===s&&(t=e.subarray(l,l+o),s=N.aac.parseSampleRate(t)),r++,l+=o);break;default:l++}if(n)return null}return null===s||null===a?null:{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*r*(i=M/s),pts:a+1024*r*i}]}}:jt)(t))&&(s.audio||s.video)?(t=i,(i=s).audio&&i.audio.length&&(void 0!==(n=t)&&!isNaN(n)||(n=i.audio[0].dts),i.audio.forEach(function(e){e.dts=O(e.dts,n),e.pts=O(e.pts,n),e.dtsTime=e.dts/M,e.ptsTime=e.pts/M})),i.video&&i.video.length&&(void 0!==(r=t)&&!isNaN(r)||(r=i.video[0].dts),i.video.forEach(function(e){e.dts=O(e.dts,r),e.pts=O(e.pts,r),e.dtsTime=e.dts/M,e.ptsTime=e.pts/M}),i.firstKeyFrame)&&((i=i.firstKeyFrame).dts=O(i.dts,r),i.pts=O(i.pts,r),i.dtsTime=i.dts/M,i.ptsTime=i.pts/M),s):null),e=null;o&&((e={hasVideo:o.video&&2===o.video.length||!1,hasAudio:o.audio&&2===o.audio.length||!1}).hasVideo&&(e.videoStart=o.video[0].ptsTime),e.hasAudio)&&(e.audioStart=o.audio[0].ptsTime),this.self.postMessage({action:"probeTs",result:e,data:a},[a.buffer])},b.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},b.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},b.push=function(e){e=new Uint8Array(e.data,e.byteOffset,e.byteLength),this.transmuxer.push(e)},b.reset=function(){this.transmuxer.reset()},b.setTimestampOffset=function(e){e=e.timestampOffset||0,this.transmuxer.setBaseMediaDecodeTime(Math.round(Le(e)))},b.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(Le(e.appendStart)))},b.setRemux=function(e){this.transmuxer.setRemux(e.remux)},b.flush=function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},b.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},b.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},Rt);function Rt(e,t){this.options=t||{},this.self=e,this.init()}self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new Nt(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new Nt(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),Eu=2,Cu=-101,Au=-102,Pu=qc("CodecUtils"),Lu=qc("PlaylistSelector"),ml=function(){var e=this.useDevicePixelRatio&&window.devicePixelRatio||1;return tu(this.playlists.master,this.systemBandwidth,parseInt(Jd(this.tech_.el(),"width"),10)*e,parseInt(Jd(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},Iu=(m(Ou,du=H.EventTarget),(b=Ou.prototype).createTransmuxer_=function(){return e={remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_},(t=new ku).currentTransmux=null,t.transmuxQueue=[],i=t.terminate,t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,i.call(t)},t.postMessage({action:"init",options:e}),t;var e,t,i},b.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},b.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},b.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},b.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},b.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,window.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},b.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},b.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},b.endOfStream=function(){this.ended_=!0,this.transmuxer_&&cu(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},b.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return H.createTimeRanges();if("main"===this.loaderType_){var t=e.hasAudio,i=e.hasVideo,e=e.isMuxed;if(i&&t&&!this.audioDisabled_&&!e)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},b.initSegmentForMap=function(e,t){var i,n;return void 0===t&&(t=!1),e?(i=Pd(e),n=this.initSegments_[i],t&&!n&&e.bytes&&(this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e):null},b.segmentKey=function(e,t){var i,n;return void 0===t&&(t=!1),e?(i=Ld(e),n=this.keyCache_[i],this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[i]=n={resolvedUri:e.resolvedUri,bytes:e.bytes}),e={resolvedUri:(n||e).resolvedUri},n&&(e.bytes=n.bytes),e):null},b.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},b.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},b.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},b.playlist=function(e,t){if(void 0===t&&(t={}),e){var i=this.playlist_,n=this.pendingSegment_,r=(this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_)&&this.syncController_.setDateTimeMappingForStart(e),null);if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();i&&i.uri===e.uri?(t=e.mediaSequence-i.mediaSequence,this.logger_("live window shift ["+t+"]"),null!==this.mediaIndex&&(this.mediaIndex-=t,this.mediaIndex<0?(this.mediaIndex=null,this.partIndex=null):(r=this.playlist_.segments[this.mediaIndex],!this.partIndex||r.parts&&r.parts.length&&r.parts[this.partIndex]||(r=this.mediaIndex,this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=r))),n&&(n.mediaIndex-=t,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(0<=n.mediaIndex&&(n.segment=e.segments[n.mediaIndex]),0<=n.partIndex&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)):(null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate"))}},b.pause=function(){this.checkBufferTimeout_&&(window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},b.paused=function(){return null===this.checkBufferTimeout_},b.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},b.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},b.resyncLoader=function(){this.transmuxer_&&cu(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},b.remove=function(o,e,t,i){if(void 0===t&&(t=function(){}),void 0===i&&(i=!1),(e=e===1/0?this.duration_():e)<=o)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var n,r=1,s=function(){0==--r&&t()};for(n in!i&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(o,e,s)),!i&&"main"!==this.loaderType_||(this.gopBuffer_=function(e,t,i){for(var n=Math.ceil(9e4*(o-i)),r=Math.ceil(9e4*(t-i)),i=e.slice(),s=e.length;s--&&!(e[s].pts<=r););if(-1!==s){for(var a=s+1;a--&&!(e[a].pts<=n););a=Math.max(a,0),i.splice(a,s-a+1)}return i}(this.gopBuffer_,e,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(o,e,s)),this.inbandTextTracks_)iu(o,e,this.inbandTextTracks_[n]);iu(o,e,this.segmentMetadataTrack_),s()}else this.logger_("skipping remove because no source updater or starting media info")},b.monitorBuffer_=function(){this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window.setTimeout(this.monitorBufferTick_.bind(this),1)},b.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window.setTimeout(this.monitorBufferTick_.bind(this),500)},b.fillBuffer_=function(){var e;this.sourceUpdater_.updating()||(e=this.chooseNextRequest_())&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))},b.isEndOfStream_=function(e,t,i){var n;return void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===i&&(i=this.partIndex),!(!t||!this.mediaSource_)&&(n="number"==typeof e&&t.segments[e],e=e+1===t.segments.length,n=!n||!n.parts||i+1===n.parts.length,t.endList)&&"open"===this.mediaSource_.readyState&&e&&n},b.chooseNextRequest_=function(){var o=this.buffered_(),e=Yc(o)||0,t=Kc(o,this.currentTime_()),i=!this.hasPlayed_()&&1<=t,n=t>=this.goalBufferLength_();if(!(o=this.playlist_.segments).length||i||n)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());(i={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)}).isSyncRequest?i.mediaIndex=function(e,t,i){t=o||[];for(var n=[],r=0,s=0;s<t.length;s++){var a=t[s];if(e===a.timeline&&(n.push(s),i<(r+=a.duration)))return s}return 0===n.length?0:n[n.length-1]}(this.currentTimeline_,0,e):null!==this.mediaIndex?(n=o[this.mediaIndex],r="number"==typeof this.partIndex?this.partIndex:-1,i.startOfSegment=n.end||e,n.parts&&n.parts[r+1]?(i.mediaIndex=this.mediaIndex,i.partIndex=r+1):i.mediaIndex=this.mediaIndex+1):(r=(a=vu.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?e:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time})).segmentIndex,s=a.startTime,a=a.partIndex,i.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+e:"currentTime "+this.currentTime_(),i.mediaIndex=r,i.startOfSegment=s,i.partIndex=a);var r,s=o[i.mediaIndex],a=s&&"number"==typeof i.partIndex&&s.parts&&s.parts[i.partIndex];return!s||"number"==typeof i.partIndex&&!a||("number"!=typeof i.partIndex&&s.parts&&(a=s.parts[i.partIndex=0]),t||!a||a.independent||(0===i.partIndex?(a=(t=o[i.mediaIndex-1]).parts&&t.parts.length&&t.parts[t.parts.length-1])&&a.independent&&(--i.mediaIndex,i.partIndex=t.parts.length-1,i.independent="previous segment"):s.parts[i.partIndex-1].independent&&(--i.partIndex,i.independent="previous part")),s=this.mediaSource_&&"ended"===this.mediaSource_.readyState,i.mediaIndex>=o.length-1&&s&&!this.seeking_())?null:this.generateSegmentInfo_(i)},b.generateSegmentInfo_=function(e){var t=e.independent,i=e.playlist,n=e.mediaIndex,r=e.startOfSegment,s=e.isSyncRequest,a=e.partIndex,o=e.forceTimestampOffset,l=e.getMediaInfoForTime,c=i.segments[n],e="number"==typeof a&&c.parts[a],t={requestId:"segment-loader-"+Math.random(),uri:e&&e.resolvedUri||c.resolvedUri,mediaIndex:n,partIndex:e?a:null,isSyncRequest:s,startOfSegment:r,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:e&&e.duration||c.duration,segment:c,part:e,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:l,independent:t},o=void 0!==o?o:this.isPendingTimestampOffset_;return t.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:o}),"number"==typeof(o=Yc(this.sourceUpdater_.audioBuffered()))&&(t.audioAppendStart=o-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(t.gopsToAlignWith=function(e,t,i){if(null==t||!e.length)return[];for(var n=Math.ceil(9e4*(t-i+3)),r=0;r<e.length&&!(e[r].pts>n);r++);return e.slice(r)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),t},b.timestampOffsetForSegment_=function(e){return i=(t=e).segmentTimeline,n=t.currentTimeline,r=t.startOfSegment,e=t.buffered,t.overrideCheck||i!==n?i<n||!e.length?r:e.end(e.length-1):null;var t,i,n,r},b.earlyAbortWhenNeeded_=function(e){var t,i,n,r,s,a,o,l,c,d,u,h,p;this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3||(t=this.currentTime_(),r=e.bandwidth,s=this.pendingSegment_.duration,p=vu.estimateSegmentRequestTime(s,r,this.playlist_,e.bytesReceived),i=this.buffered_(),n=t,void 0===(e=this.vhs_.tech_.playbackRate())&&(e=1),p<=(e=((i.length?i.end(i.length-1):0)-n)/e-1))||(s=(r={master:this.vhs_.playlists.master,currentTime:t,bandwidth:r,duration:this.duration_(),segmentDuration:s,timeUntilRebuffer:e,currentTimeline:this.currentTimeline_,syncController:this.syncController_}).master,a=r.currentTime,o=r.bandwidth,l=r.duration,c=r.segmentDuration,d=r.timeUntilRebuffer,u=r.currentTimeline,h=r.syncController,Zd(s=(r=(s=(s=(r=s.playlists.filter(function(e){return!vu.isIncompatible(e)})).filter(vu.isEnabled)).length?s:r.filter(function(e){return!vu.isDisabled(e)})).filter(vu.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=h.getSyncPoint(e,l,u,a)?1:2;return{playlist:e,rebufferingImpact:vu.estimateSegmentRequestTime(c,o,e)*t-d}})).filter(function(e){return e.rebufferingImpact<=0}),function(e,t){return eu(t.playlist,e.playlist)}),(r=s.length?s[0]:(Zd(r,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),r[0]||null))&&(p=p-e-r.rebufferingImpact,!r.playlist||r.playlist.uri===this.playlist_.uri||p<(e<=mu?1:.5)||(this.bandwidth=r.playlist.attributes.BANDWIDTH*M.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))))},b.handleAbort_=function(e){this.logger_("Aborting "+ru(e)),this.mediaRequestsAborted+=1},b.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},b.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(function(e,t){if(!(!e&&!t||!e&&t||e&&!t)){if(e===t)return 1;var i=Object.keys(e).sort(),n=Object.keys(t).sort();if(i.length===n.length){for(var r=0;r<i.length;r++){var s=i[r];if(s!==n[r])return;if(e[s]!==t[s])return}return 1}}}(this.currentMediaInfo_,t=t||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId))||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())},b.handleTimingInfo_=function(e,t,i,n){var r;this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||((r=this.pendingSegment_)[e=su(t)]=r[e]||{},r[e][i]=n,this.logger_("timinginfo: "+t+" - "+i+" - "+n),this.hasEnoughInfoToAppend_()&&this.processCallQueue_())},b.handleCaptions_=function(e,t){var g,v,y=this;this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||(0!==t.length?this.pendingSegment_.hasAppendedData_?(g=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),v={},t.forEach(function(e){v[e.stream]=v[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=v[e.stream];t.startTime=Math.min(t.startTime,e.startTime+g),t.endTime=Math.max(t.endTime,e.endTime+g),t.captions.push(e)}),Object.keys(v).forEach(function(e){var t,i,n,r,s,a,o,l,c,d,u=v[e],h=u.startTime,p=u.endTime,f=u.captions,m=y.inbandTextTracks_;y.logger_("adding cues from "+h+" -> "+p+" for "+e),t=m,i=y.vhs_.tech_,t[n=e]||(i.trigger({type:"usage",name:"vhs-608"}),i.trigger({type:"usage",name:"hls-608"}),/^cc708_/.test(r=n)&&(r="SERVICE"+n.split("_")[1]),(o=i.textTracks().getTrackById(r))?t[n]=o:(a=s=n,u=!1,(o=(i.options_.vhs&&i.options_.vhs.captionServices||{})[r])&&(s=o.label,a=o.language,u=o.default),t[n]=i.addRemoteTextTrack({kind:"captions",id:r,default:u,label:s,language:a},!1).track)),iu(h,p,m[e]),c=(f={captionArray:f,inbandTextTracks:m,timestampOffset:g}).inbandTextTracks,d=f.timestampOffset,(m=f.captionArray)&&(l=window.WebKitDataCue||window.VTTCue,m.forEach(function(e){var t=e.stream;c[t].addCue(new l(e.startTime+d,e.endTime+d,e.text))}))}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})):this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t)):this.logger_("SegmentLoader received no captions from a caption event"))},b.handleId3_=function(e,t,i){var n;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(this.pendingSegment_.hasAppendedData_){n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s=this.inbandTextTracks_,a=i,r=this.vhs_.tech_,s.metadataTrack_||(s.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,s.metadataTrack_.inBandMetadataTrackDispatchType=a);var r={inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:n,videoDuration:this.duration_()},s=r.inbandTextTracks,a=r.metadataArray,o=r.timestampOffset,l=r.videoDuration;if(a){var c=window.WebKitDataCue||window.VTTCue,d=s.metadataTrack_;if(d&&(a.forEach(function(e){var n=e.cueTime+o;!("number"!=typeof n||window.isNaN(n)||n<0)&&n<1/0&&e.frames.forEach(function(e){var t,i=new c(n,n,e.value||e.url||e.data||"");i.frame=e,i.value=e,t=i,Object.defineProperties(t.frame,{id:{get:function(){return H.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return H.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return H.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}}),d.addCue(i)})}),d.cues)&&d.cues.length){for(var u=d.cues,h=[],p=0;p<u.length;p++)u[p]&&h.push(u[p]);var f=h.reduce(function(e,t){var i=e[t.startTime]||[];return i.push(t),e[t.startTime]=i,e},{}),m=Object.keys(f).sort(function(e,t){return Number(e)-Number(t)});m.forEach(function(e,t){var e=f[e],i=Number(m[t+1])||l;e.forEach(function(e){e.endTime=i})})}}}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i))},b.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},b.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(e){return e()})},b.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(e){return e()})},b.hasEnoughInfoToLoad_=function(){var e;return"audio"!==this.loaderType_||!(!(e=this.pendingSegment_)||this.getCurrentMediaInfo_()&&au({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},b.getCurrentMediaInfo_=function(e){return(e=void 0===e?this.pendingSegment_:e)&&e.trackInfo||this.currentMediaInfo_},b.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},b.hasEnoughInfoToAppend_=function(){var e,t,i,n;return!!this.sourceUpdater_.ready()&&!(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_||(e=this.pendingSegment_,n=this.getCurrentMediaInfo_(),!e)||!n||(t=n.hasAudio,i=n.hasVideo,n=n.isMuxed,i&&!e.videoTimingInfo)||t&&!this.audioDisabled_&&!n&&!e.audioTimingInfo||au({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},b.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var i,n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4?(this.trigger("fmp4"),n.timingInfo.start=n[su(t.type)].start):(i=this.getCurrentMediaInfo_(),(i="main"===this.loaderType_&&i&&i.hasVideo)&&(r=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:i,firstVideoFrameTimeForData:r,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})),this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});var r=this.chooseNextRequest_();if(r.mediaIndex!==n.mediaIndex||r.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},b.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},b.getInitSegmentAndUpdateState_=function(e){var t=e.type,i=e.initSegment,n=e.map,r=e.playlist;if(n){if(e=Pd(n),this.activeInitSegmentId_===e)return null;i=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=e}return i&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=r,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,i):null},b.handleQuotaExceededError_=function(e,t){var i=this,n=e.segmentInfo,r=e.type,s=e.bytes,a=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered(),l=(1<a.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Gc(a).join(", ")),1<o.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Gc(o).join(", ")),a.length?a.start(0):0),c=a.length?a.end(a.length-1):0,d=o.length?o.start(0):0,e=o.length?o.end(o.length-1):0;c-l<=1&&e-d<=1?(this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+s.byteLength+", audio buffer: "+Gc(a).join(", ")+", video buffer: "+Gc(o).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error")):(this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:n,type:r,bytes:s})),s=this.currentTime_()-1,this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+s),this.remove(0,s,function(){i.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=window.setTimeout(function(){i.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),i.quotaExceededErrorRetryTimeout_=null,i.processCallQueue_()},1e3)},!0))},b.handleAppendError_=function(e,t){var i=e.segmentInfo,n=e.type,e=e.bytes;t&&(22!==t.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(n+" append of "+e.length+"b failed for segment #"+i.mediaIndex+" in playlist "+i.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:i,type:n,bytes:e}))},b.appendToSourceBuffer_=function(e){var t,i,n=e.segmentInfo,r=e.type,s=e.initSegment,a=e.data,o=e.bytes;o||(e=[a],a=a.byteLength,s&&(e.unshift(s),a+=s.byteLength),i=0,(e={bytes:a,segments:e}).bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach(function(e){t.set(e,i),i+=e.byteLength})),o=t),this.sourceUpdater_.appendBuffer({segmentInfo:n,type:r,bytes:o},this.handleAppendError_.bind(this,{segmentInfo:n,type:r,bytes:o}))},b.handleSegmentTimingInfo_=function(e,t,i){this.pendingSegment_&&t===this.pendingSegment_.requestId&&((t=this.pendingSegment_.segment)[e+="TimingInfo"]||(t[e]={}),t[e].transmuxerPrependedSeconds=i.prependedContentDuration||0,t[e].transmuxedPresentationStart=i.start.presentation,t[e].transmuxedDecodeStart=i.start.decode,t[e].transmuxedPresentationEnd=i.end.presentation,t[e].transmuxedDecodeEnd=i.end.decode,t[e].baseMediaDecodeTime=i.baseMediaDecodeTime)},b.appendData_=function(e,t){var i=t.type,n=t.data;n&&n.byteLength&&("audio"===i&&this.audioDisabled_||(t=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null}),this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:t,data:n})))},b.loadSegment_=function(t){var i=this;this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),"number"==typeof t.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):this.loadQueue_.push(function(){var e=Y({},t,{forceTimestampOffset:!0});Y(t,i.generateSegmentInfo_(e)),i.isPendingTimestampOffset_=!1,i.updateTransmuxerAndRequestSegment_(t)})},b.updateTransmuxerAndRequestSegment_=function(n){var r=this,e=(this.shouldUpdateTransmuxerTimestampOffset_(n.timestampOffset)&&(this.gopBuffer_.length=0,n.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:n.timestampOffset})),this.createSimplifiedSegmentObj_(n)),t=this.isEndOfStream_(n.mediaIndex,n.playlist,n.partIndex),i=null!==this.mediaIndex,s=n.timeline!==this.currentTimeline_&&0<n.timeline,s=t||i&&s;this.logger_("Requesting "+ru(n)),e.map&&!e.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),n.abortRequests=Vd({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:e,abortFn:this.handleAbort_.bind(this,n),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",n.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",n.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:s,endedTimelineFn:function(){r.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(e){var t=e.message,i=e.level,e=e.stream;r.logger_(ru(n)+" logged from transmuxer stream "+e+" as a "+i+": "+t)}})},b.trimBackBuffer_=function(e){t=this.seekable_(),i=this.currentTime_(),n=this.playlist_.targetDuration||10,r=i-M.BACK_BUFFER_LENGTH,t.length&&(r=Math.max(r,t.start(0)));var t,i,n,r=Math.min(i-n,r);0<r&&this.remove(0,r)},b.createSimplifiedSegmentObj_=function(e){var t=e.segment,i=e.part,n={resolvedUri:(i||t).resolvedUri,byterange:(i||t).byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part};return(i=e.playlist.segments[e.mediaIndex-1])&&i.timeline===t.timeline&&(i.videoTimingInfo?n.baseStartTime=i.videoTimingInfo.transmuxedDecodeEnd:i.audioTimingInfo&&(n.baseStartTime=i.audioTimingInfo.transmuxedDecodeEnd)),t.key&&(e=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]),n.key=this.segmentKey(t.key),n.key.iv=e),t.map&&(n.map=this.initSegmentForMap(t.map)),n},b.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},b.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<1/60?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record "+1/60):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},b.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},b.segmentRequestFinished_=function(e,t,i){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===Au?void 0:(this.pause(),e.code===Cu?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));e=this.pendingSegment_,this.saveBandwidthRelatedStats_(e.duration,t.stats),e.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=function(e,t,i){if(!t.length)return e;if(i)return t.slice();for(var n=t[0].pts,r=0;r<e.length&&!(e[r].pts>=n);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(e)}},b.setTimeMapping_=function(e){null!==(e=this.syncController_.mappingForTimeline(e))&&(this.timeMapping_=e)},b.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},b.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},b.trueSegmentStart_=function(e){var t=e.currentStart,i=e.playlist,n=e.mediaIndex,r=e.firstVideoFrameTimeForData,s=e.currentVideoTimestampOffset,a=e.useVideoTimingInfo,o=e.videoTimingInfo,e=e.audioTimingInfo;return void 0!==t?t:a?(i=i.segments[n-1],0!==n&&i&&void 0!==i.start&&i.end===r+s?o.start:r):e.start},b.waitForAppendsToComplete_=function(e){var t,i,n=this.getCurrentMediaInfo_(e);n?(t=n.hasAudio,i=n.hasVideo,n=n.isMuxed,i="main"===this.loaderType_&&i,n=!this.audioDisabled_&&t&&!n,e.waitingOnAppends=0,e.hasAppendedData_?(i&&e.waitingOnAppends++,n&&e.waitingOnAppends++,i&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),n&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))):(e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e))):(this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error"))},b.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},b.checkForIllegalMediaSwitch=function(e){var t=this.loaderType_,i=this.getCurrentMediaInfo_();return!!(e="main"===t&&i&&e?e.hasAudio||e.hasVideo?i.hasVideo&&!e.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!i.hasVideo&&e.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)&&(this.error({message:e,blacklistDuration:1/0}),this.trigger("error"),!0)},b.updateSourceBufferTimestampOffset_=function(e){var t;null===e.timestampOffset||"number"!=typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_||(t=!1,e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset"))},b.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var t=e.videoTimingInfo,i=e.audioTimingInfo,e=e.timingInfo;return this.useDtsForTimestampOffset_?t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:i&&"number"==typeof i.transmuxedDecodeStart?i.transmuxedDecodeStart:e.start:e.start},b.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_();(t="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo)&&(e.timingInfo.end="number"==typeof t.end?t.end:t.start+e.duration)},b.handleAppendsDone_=function(){var e,t,n,r,i,s,a,o;this.pendingSegment_&&this.trigger("appendsdone"),this.pendingSegment_?(e=this.pendingSegment_,this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_}),a=e,(o="hls"===(t=this.sourceType_)&&(n={audioTimingInfo:a.audioTimingInfo,videoTimingInfo:a.videoTimingInfo},r=0,["video","audio"].forEach(function(e){var t,i=n[e+"TimingInfo"];i&&(e=i.start,i=i.end,"bigint"==typeof e||"bigint"==typeof i?t=window.BigInt(i)-window.BigInt(e):"number"==typeof e&&"number"==typeof i&&(t=i-e),void 0!==t)&&r<t&&(r=t)}),o=r="bigint"==typeof r&&r<Number.MAX_SAFE_INTEGER?Number(r):r)&&(i=ou({segmentDuration:o,maxDuration:2*(s=a.playlist.targetDuration)}),t=ou({segmentDuration:o,maxDuration:s}),s="Segment with index "+a.mediaIndex+" from playlist "+a.playlist.id+" has a duration of "+o+" when the reported duration is "+a.duration+" and the target duration is "+s+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1",i||t)?{severity:i?"warn":"info",message:s}:null)&&("warn"===o.severity?H.log.warn(o.message):this.logger_(o.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)?(this.logger_("Appended "+ru(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),a=e.segment,o=e.part,a=a.end&&this.currentTime_()-a.end>3*e.playlist.targetDuration,o=o&&o.end&&this.currentTime_()-o.end>3*e.playlist.partTargetDuration,a||o?(this.logger_("bad "+(a?"segment":"part")+" "+ru(e)),this.resetEverything()):(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_())):this.logger_("Throwing away un-appended sync request "+ru(e))):(this.state="READY",this.paused()||this.monitorBuffer_())},b.recordThroughput_=function(e){var t,i;e.duration<1/60?this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record "+1/60):(t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/i*8*1e3),this.throughput.rate+=(i-t)/++this.throughput.count)},b.addSegmentMetadataCue_=function(e){var t,i,n,r;this.segmentMetadataTrack_&&(i=(t=e.segment).start,r=t.end,nu(i))&&nu(r)&&(iu(i,r,this.segmentMetadataTrack_),n=window.WebKitDataCue||window.VTTCue,e={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:r},(r=new n(i,r,JSON.stringify(e))).value=e,this.segmentMetadataTrack_.addCue(r))},Ou);function Ou(e,t){var i=du.call(this)||this;if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(e.mediaSource)return i.bandwidth=e.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.partIndex=null,i.hasPlayed_=e.hasPlayed,i.currentTime_=e.currentTime,i.seekable_=e.seekable,i.seeking_=e.seeking,i.duration_=e.duration,i.mediaSource_=e.mediaSource,i.vhs_=e.vhs,i.loaderType_=e.loaderType,i.currentMediaInfo_=void 0,i.startingMediaInfo_=void 0,i.segmentMetadataTrack_=e.segmentMetadataTrack,i.goalBufferLength_=e.goalBufferLength,i.sourceType_=e.sourceType,i.sourceUpdater_=e.sourceUpdater,i.inbandTextTracks_=e.inbandTextTracks,i.state_="INIT",i.timelineChangeController_=e.timelineChangeController,i.shouldSaveSegmentTimingInfo_=!0,i.parse708captions_=e.parse708captions,i.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,i.captionServices_=e.captionServices,i.experimentalExactManifestTimings=e.experimentalExactManifestTimings,i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.xhrOptions_=null,i.pendingSegments_=[],i.audioDisabled_=!1,i.isPendingTimestampOffset_=!1,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=11<=H.browser.IE_VERSION,i.appendInitSegment_={audio:!0,video:!0},i.playlistOfLastInitSegment_={audio:null,video:null},i.callQueue_=[],i.loadQueue_=[],i.metadataQueue_={id3:[],caption:[]},i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=null,i.activeInitSegmentId_=null,i.initSegments_={},i.cacheEncryptionKeys_=e.cacheEncryptionKeys,i.keyCache_={},i.decrypter_=e.decrypter,i.syncController_=e.syncController,i.syncPoint_={segmentIndex:0,time:0},i.transmuxer_=i.createTransmuxer_(),i.triggerSyncInfoUpdate_=function(){return i.trigger("syncinfoupdate")},i.syncController_.on("syncinfoupdate",i.triggerSyncInfoUpdate_),i.mediaSource_.addEventListener("sourceopen",function(){i.isEndOfStream_()||(i.ended_=!1)}),i.fetchAtBuffer_=!1,i.logger_=qc("SegmentLoader["+i.loaderType_+"]"),Object.defineProperty(y(i),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),i.sourceUpdater_.on("ready",function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),"main"===i.loaderType_&&i.timelineChangeController_.on("pendingtimelinechange",function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),"audio"===i.loaderType_&&i.timelineChangeController_.on("timelinechange",function(){i.hasEnoughInfoToLoad_()&&i.processLoadQueue_(),i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),i;throw new TypeError("No MediaSource specified")}function Mu(e,t,i,n){var r;if(void 0===i&&(i={}),(r=uu.call(this)||this).masterPlaylistLoader_=n||y(r),n||(r.isMaster_=!0),n=void 0!==(n=i.withCredentials)&&n,i=void 0!==(i=i.handleManifestRedirects)&&i,r.vhs_=t,r.withCredentials=n,r.handleManifestRedirects=i,e)return r.on("minimumUpdatePeriod",function(){r.refreshXml_()}),r.on("mediaupdatetimeout",function(){r.refreshMedia_(r.media().id)}),r.state="HAVE_NOTHING",r.loadedPlaylists_={},r.logger_=qc("DashPlaylistLoader"),r.isMaster_?(r.masterPlaylistLoader_.srcUrl=e,r.masterPlaylistLoader_.sidxMapping_={}):r.childPlaylist_=e,r;throw new Error("A non-empty playlist URL or object is required")}function Du(e,t,i){var n;if(void 0===i&&(i={}),n=hu.call(this)||this,!e)throw new Error("A non-empty playlist URL or object is required");n.logger_=qc("PlaylistLoader");var r=void 0!==(r=i.withCredentials)&&r,i=void 0!==(i=i.handleManifestRedirects)&&i;return n.src=e,n.vhs_=t,n.withCredentials=r,n.handleManifestRedirects=i,t=t.options_,n.customTagParsers=t&&t.customTagParsers||[],n.customTagMappers=t&&t.customTagMappers||[],n.experimentalLLHLS=t&&t.experimentalLLHLS||!1,H.browser.IE_VERSION&&(n.experimentalLLHLS=!1),n.state="HAVE_NOTHING",n.handleMediaupdatetimeout_=n.handleMediaupdatetimeout_.bind(y(n)),n.on("mediaupdatetimeout",n.handleMediaupdatetimeout_),n}function ju(){}function Nu(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})}function Ru(e,t){var i=t[e+"Buffer"];return i&&i.updating||t.queuePending[e]}function Bu(e,t){if(0!==t.queue.length){var i=0,n=t.queue[i];if("mediaSource"!==n.type){if("mediaSource"!==e&&t.ready()&&"closed"!==t.mediaSource.readyState&&!Ru(e,t)){if(n.type!==e){if(null===(i=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if("mediaSource"===n.type)return null;if(n.type===e)return i}return null}(e,t.queue)))return;n=t.queue[i]}t.queue.splice(i,1),(t.queuePending[e]=n).action(e,t),n.doneFn||(t.queuePending[e]=null,Bu(e,t))}}else t.updating()||"closed"===t.mediaSource.readyState||(t.queue.shift(),n.action(t),n.doneFn&&n.doneFn(),Bu("audio",t),Bu("video",t))}}function Uu(e,t){var i=t[e+"Buffer"],n=Nu(e);i&&(i.removeEventListener("updateend",t["on"+n+"UpdateEnd_"]),i.removeEventListener("error",t["on"+n+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)}function Fu(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)}function $u(e){var t=e.type,i=e.sourceUpdater,n=e.action,r=e.doneFn,e=e.name;i.queue.push({type:t,action:n,doneFn:r,name:e}),Bu(t,i)}function Hu(i,n){return function(e){var t;n.queuePending[i]&&(t=n.queuePending[i].doneFn,n.queuePending[i]=null,t)&&t(n[i+"Error_"]),Bu(i,n)}}function qu(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}function zu(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)}function Wu(e,t){(t.activePlaylistLoader=e).load()}function Vu(s){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){ph[e](e,s)});var e,a=s.mediaTypes,t=s.masterPlaylistLoader,i=s.tech,n=s.vhs,r=s.segmentLoaders,o=r.AUDIO,l=r.main;function c(){a.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"}),i.trigger({type:"usage",name:"hls-audio-change"})}for(e in["AUDIO","SUBTITLES"].forEach(function(e){var l,c,o,d,t,i,u,h,n,r;a[e].activeGroup=(l=e,c=s,function(t){var e=c.masterPlaylistLoader,i=c.mediaTypes[l].groups,n=e.media();if(!n)return null;var r=null,s=(n.attributes[l]&&(r=i[n.attributes[l]]),Object.keys(i));if(!r)if("AUDIO"===l&&1<s.length&&pd(c.master))for(var a=0;a<s.length;a++){var o=i[s[a]];if(function e(t,i){for(var n=0;n<t.length;n++){if(ud(i,t[n]))return 1;if(t[n].playlists&&e(t[n].playlists,i))return 1}}(o,n)){r=o;break}}else i.main?r=i.main:1===s.length&&(r=i[s[0]]);return void 0===t?r:null!==t&&r&&r.filter(function(e){return e.id===t.id})[0]||null}),a[e].activeTrack=fh[e](e,s),a[e].onGroupChanged=(o=e,d=s,function(){var e=(a=d.segmentLoaders)[o],t=a.main,i=d.mediaTypes[o],n=i.activeTrack(),r=i.getActiveGroup(),s=i.activePlaylistLoader,a=i.lastGroup_;r&&a&&r.id===a.id||(i.lastGroup_=r,i.lastTrack_=n,zu(e,i),r&&!r.isMasterPlaylist&&(r.playlistLoader?(e.resyncLoader(),Wu(r.playlistLoader,i)):s&&t.resetEverything()))}),a[e].onGroupChanging=(t=e,i=s,function(){var e=i.segmentLoaders[t];i.mediaTypes[t].lastGroup_=null,e.abort(),e.pause()}),a[e].onTrackChanged=(u=e,h=s,function(){var e,t=h.masterPlaylistLoader,i=h.segmentLoaders,n=i[u],r=i.main,s=h.mediaTypes[u],a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,c=s.lastTrack_;if((!c||!a||c.id!==a.id)&&(s.lastGroup_=o,s.lastTrack_=a,zu(n,s),o)){if(o.isMasterPlaylist)return!a||!c||a.id===c.id||(i=(e=h.vhs.masterPlaylistController_).selectPlaylist(),e.media()===i)?void 0:(s.logger_("track change. Switching master audio from "+c.id+" to "+a.id),t.pause(),r.resetEverything(),void e.fastQualityChange_(i));if("AUDIO"===u){if(!o.playlistLoader)return r.setAudio(!0),void r.resetEverything();n.setAudio(!0),r.setAudio(!1)}l!==o.playlistLoader&&(n.track&&n.track(a),n.resetEverything()),Wu(o.playlistLoader,s)}}),a[e].getActiveGroup=(n=e,r=s.mediaTypes,function(){var e=r[n].activeTrack();return e?r[n].activeGroup(e):null})}),(r=a.AUDIO.activeGroup())&&(r=(r.filter(function(e){return e.default})[0]||r[0]).id,a.AUDIO.tracks[r].enabled=!0,a.AUDIO.onGroupChanged(),a.AUDIO.onTrackChanged(),(a.AUDIO.getActiveGroup().playlistLoader?(l.setAudio(!1),o):l).setAudio(!0)),t.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return a[e].onGroupChanged()})}),t.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(e){return a[e].onGroupChanging()})}),i.audioTracks().addEventListener("change",c),i.remoteTextTracks().addEventListener("change",a.SUBTITLES.onTrackChanged),n.on("dispose",function(){i.audioTracks().removeEventListener("change",c),i.remoteTextTracks().removeEventListener("change",a.SUBTITLES.onTrackChanged)}),i.clearTracks("audio"),a.AUDIO.tracks)i.audioTracks().addTrack(a.AUDIO.tracks[e])}function Xu(e,t,i){var n,r,s,a,o=e.masterPlaylistController_,l=o[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(o);t.attributes&&(n=t.attributes.RESOLUTION,this.width=n&&n.width,this.height=n&&n.height,this.bandwidth=t.attributes.BANDWIDTH),this.codecs=Kd(o.master(),t),this.playlist=t,this.id=i,this.enabled=(r=e.playlists,s=t.id,a=l,function(e){var t=r.master.playlists[s],i=od(t),n=ld(t);return void 0===e?n:(e?delete t.disabled:t.disabled=!0,e===n||i||(a(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})}function Gu(n,r){return function(e,t){var i=t[e+"Buffer"];if(Fu(t.mediaSource,i)){t.logger_("Removing "+n+" to "+r+" from "+e+"Buffer");try{i.remove(n,r)}catch(i){t.logger_("Remove "+n+" to "+r+" from "+e+"Buffer failed")}}}}function Yu(n){return function(e,t){var i=t[e+"Buffer"];Fu(t.mediaSource,i)&&(t.logger_("Setting "+e+"timestampOffset to "+n),i.timestampOffset=n)}}function Ku(i){return function(e,t){i()}}var Qu,Ju,Zu,eh,th,ih,nh=["video","audio"],rh=(m(kh,ih=H.EventTarget),(v=kh.prototype).initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},v.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},v.hasInitializedAnyEme=function(){return this.initializedEme_},v.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},v.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},v.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},v.addSourceBuffer=function(e,t){var n,r;$u({type:"mediaSource",sourceUpdater:this,action:(n=e,r=t,function(e){var t=Nu(n),i=Ka(r);e.logger_("Adding "+n+"Buffer with codec "+r+" to mediaSource"),(i=e.mediaSource.addSourceBuffer(i)).addEventListener("updateend",e["on"+t+"UpdateEnd_"]),i.addEventListener("error",e["on"+t+"Error_"]),e.codecs[n]=r,e[n+"Buffer"]=i}),name:"addSourceBuffer"})},v.abort=function(e){$u({type:e,sourceUpdater:this,action:function(e,t){if("open"===t.mediaSource.readyState){var i=t[e+"Buffer"];if(Fu(t.mediaSource,i)){t.logger_("calling abort on "+e+"Buffer");try{i.abort()}catch(t){H.log.warn("Failed to abort on "+e+"Buffer",t)}}}},name:"abort"})},v.removeSourceBuffer=function(e){var i;this.canRemoveSourceBuffer()?$u({type:"mediaSource",sourceUpdater:this,action:(i=e,function(e){var t=e[i+"Buffer"];if(Uu(i,e),Fu(e.mediaSource,t)){e.logger_("Removing "+i+"Buffer with codec "+e.codecs[i]+" from mediaSource");try{e.mediaSource.removeSourceBuffer(t)}catch(e){H.log.warn("Failed to removeSourceBuffer "+i+"Buffer",e)}}}),name:"removeSourceBuffer"}):H.log.error("removeSourceBuffer is not supported!")},v.canRemoveSourceBuffer=function(){return!H.browser.IE_VERSION&&!H.browser.IS_FIREFOX&&window.MediaSource&&window.MediaSource.prototype&&"function"==typeof window.MediaSource.prototype.removeSourceBuffer},kh.canChangeType=function(){return window.SourceBuffer&&window.SourceBuffer.prototype&&"function"==typeof window.SourceBuffer.prototype.changeType},v.canChangeType=function(){return this.constructor.canChangeType()},v.changeType=function(e,t){var r;this.canChangeType()?$u({type:e,sourceUpdater:this,action:(r=t,function(e,t){var i=t[e+"Buffer"],n=Ka(r);Fu(t.mediaSource,i)&&t.codecs[e]!==r&&(t.logger_("changing "+e+"Buffer codec from "+t.codecs[e]+" to "+r),i.changeType(n),t.codecs[e]=r)}),name:"changeType"}):H.log.error("changeType is not supported!")},v.addOrChangeSourceBuffers=function(i){var n=this;if(!i||"object"!=typeof i||0===Object.keys(i).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i).forEach(function(e){var t=i[e];if(!n.hasCreatedSourceBuffers())return n.addSourceBuffer(e,t);n.canChangeType()&&n.changeType(e,t)})},v.appendBuffer=function(e,t){var n,r,s,i=this,a=e.segmentInfo,o=e.type,l=e.bytes;this.processedAppend_=!0,"audio"===o&&this.videoBuffer&&!this.videoAppendQueued_?(this.delayedAudioAppendQueue_.push([e,t]),this.logger_("delayed audio append of "+l.length+" until video append")):($u({type:o,sourceUpdater:this,action:(n=l,r=a||{mediaIndex:-1},function(e,t){var i=t[e+"Buffer"];if(Fu(t.mediaSource,i)){t.logger_("Appending segment "+r.mediaIndex+"'s "+n.length+" bytes to "+e+"Buffer");try{i.appendBuffer(n)}catch(i){t.logger_("Error with code "+i.code+" "+(22===i.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+r.mediaIndex+" to "+e+"Buffer"),t.queuePending[e]=null,s(i)}}}),doneFn:s=t,name:"appendBuffer"}),"video"===o&&(this.videoAppendQueued_=!0,this.delayedAudioAppendQueue_.length)&&(o=this.delayedAudioAppendQueue_.slice(),this.logger_("queuing delayed audio "+o.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,o.forEach(function(e){i.appendBuffer.apply(i,e)})))},v.audioBuffered=function(){return Fu(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered||H.createTimeRange()},v.videoBuffered=function(){return Fu(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered||H.createTimeRange()},v.buffered=function(){var e=Fu(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Fu(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;{if(t&&!e)return this.audioBuffered();if(e&&!t)return this.videoBuffered();var i=this.audioBuffered(),n=this.videoBuffered(),r=null,s=null,a=0,o=[],l=[];if(!(i&&i.length&&n&&n.length))return H.createTimeRange();for(var c=i.length;c--;)o.push({time:i.start(c),type:"start"}),o.push({time:i.end(c),type:"end"});for(c=n.length;c--;)o.push({time:n.start(c),type:"start"}),o.push({time:n.end(c),type:"end"});for(o.sort(function(e,t){return e.time-t.time}),c=0;c<o.length;c++)"start"===o[c].type?2==++a&&(r=o[c].time):"end"===o[c].type&&1==--a&&(s=o[c].time),null!==r&&null!==s&&(l.push([r,s]),s=r=null);return H.createTimeRanges(l)}},v.setDuration=function(e,t){var i;$u({type:"mediaSource",sourceUpdater:this,action:(i=e,function(e){e.logger_("Setting mediaSource duration to "+i);try{e.mediaSource.duration=i}catch(e){H.log.warn("Failed to set media source duration",e)}}),name:"duration",doneFn:t=void 0===t?ju:t})},v.endOfStream=function(e,t){var i;$u({type:"mediaSource",sourceUpdater:this,action:(i=e="string"!=typeof(e=void 0===e?null:e)?void 0:e,function(e){if("open"===e.mediaSource.readyState){e.logger_("Calling mediaSource endOfStream("+(i||"")+")");try{e.mediaSource.endOfStream(i)}catch(e){H.log.warn("Failed to call media source endOfStream",e)}}}),name:"endOfStream",doneFn:t=void 0===t?ju:t})},v.removeAudio=function(e,t,i){void 0===i&&(i=ju),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?$u({type:"audio",sourceUpdater:this,action:Gu(e,t),doneFn:i,name:"remove"}):i()},v.removeVideo=function(e,t,i){void 0===i&&(i=ju),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?$u({type:"video",sourceUpdater:this,action:Gu(e,t),doneFn:i,name:"remove"}):i()},v.updating=function(){return!(!Ru("audio",this)&&!Ru("video",this))},v.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&($u({type:"audio",sourceUpdater:this,action:Yu(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},v.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&($u({type:"video",sourceUpdater:this,action:Yu(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},v.audioQueueCallback=function(e){this.audioBuffer&&$u({type:"audio",sourceUpdater:this,action:Ku(e),name:"callback"})},v.videoQueueCallback=function(e){this.videoBuffer&&$u({type:"video",sourceUpdater:this,action:Ku(e),name:"callback"})},v.dispose=function(){var t=this;this.trigger("dispose"),nh.forEach(function(e){t.abort(e),t.canRemoveSourceBuffer()?t.removeSourceBuffer(e):t[e+"QueueCallback"](function(){return Uu(e,t)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},kh),sh=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),ah=(m(Sh,th=Iu),(s=Sh.prototype).createTransmuxer_=function(){return null},s.buffered_=function(){var e,t;return this.subtitlesTrack_&&this.subtitlesTrack_.cues&&this.subtitlesTrack_.cues.length?(e=(t=this.subtitlesTrack_.cues)[0].startTime,t=t[t.length-1].startTime,H.createTimeRanges([[e,t]])):H.createTimeRanges()},s.initSegmentForMap=function(e,t){var i,n;return void 0===t&&(t=!1),e?(i=Pd(e),n=this.initSegments_[i],t&&!n&&e.bytes&&(t=sh.byteLength+e.bytes.byteLength,(t=new Uint8Array(t)).set(e.bytes),t.set(sh,e.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:t}),n||e):null},s.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},s.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},s.track=function(e){return void 0!==e&&(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_())&&this.init_(),this.subtitlesTrack_},s.remove=function(e,t){iu(e,t,this.subtitlesTrack_)},s.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();t&&(null===this.syncController_.timestampOffsetForTimeline(t.timeline)?(this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(t))},s.timestampOffsetForSegment_=function(){return null},s.chooseNextRequest_=function(){return this.skipEmptySegments_(th.prototype.chooseNextRequest_.call(this))},s.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},s.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},s.segmentRequestFinished_=function(e,t,i){var n=this;if(this.subtitlesTrack_)if(this.saveTransferStats_(t.stats),this.pendingSegment_)if(e)e.code===Cu&&this.handleTimeout_(),e.code===Au?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);else{var r,s,a=this.pendingSegment_,o=(this.saveBandwidthRelatedStats_(a.duration,t.stats),this.state="APPENDING",this.trigger("appending"),a.segment);if(o.map&&(o.map.bytes=t.map.bytes),a.bytes=t.bytes,"function"!=typeof window.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_)r=function(){n.subtitlesTrack_.tech_.off("vttjsloaded",s),n.stopForError({message:"Error loading vtt.js"})},s=function(){n.subtitlesTrack_.tech_.off("vttjserror",r),n.segmentRequestFinished_(e,t,i)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",s),this.subtitlesTrack_.tech_.one("vttjserror",r);else{o.requested=!0;try{this.parseVTTCues_(a)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(a,this.syncController_.timelines[a.timeline],this.playlist_),a.cues.length?a.timingInfo={start:a.cues[0].startTime,end:a.cues[a.cues.length-1].endTime}:a.timingInfo={start:a.startOfSegment,end:a.startOfSegment+a.duration},a.isSyncRequest)this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";else{a.byteLength=a.bytes.byteLength,this.mediaSecondsLoaded+=o.duration,a.cues.forEach(function(e){n.subtitlesTrack_.addCue(n.featuresNativeTextTracks_?new window.VTTCue(e.startTime,e.endTime,e.text):e)});var l=this.subtitlesTrack_,c=l.cues;if(c)for(var d=0;d<c.length;d++){for(var u=[],h=0,p=0;p<c.length;p++)c[d].startTime===c[p].startTime&&c[d].endTime===c[p].endTime&&c[d].text===c[p].text&&1<++h&&u.push(c[p]);u.length&&u.forEach(function(e){return l.removeCue(e)})}this.handleAppendsDone_()}}}else this.state="READY",this.mediaRequestsAborted+=1;else this.state="READY"},s.handleData_=function(){},s.updateTimingInfoEnd_=function(){},s.parseVTTCues_=function(t){var e=!1,i=("function"==typeof window.TextDecoder?i=new window.TextDecoder("utf8"):(i=window.WebVTT.StringDecoder(),e=!0),new window.WebVTT.Parser(window,window.vttjs,i)),n=(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=t.cues.push.bind(t.cues),i.ontimestampmap=function(e){t.timestampmap=e},i.onparsingerror=function(e){H.log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map&&(n=t.segment.map.bytes,e&&(n=qu(n)),i.parse(n)),t.bytes);e&&(n=qu(n)),i.parse(n),i.flush()},s.updateTimeMapping_=function(e,t,i){var n,r,s=e.segment;t&&(e.cues.length?(r=e.timestampmap,n=r.MPEGTS/9e4-r.LOCAL+t.mapping,e.cues.forEach(function(e){e.startTime+=n,e.endTime+=n}),i.syncInfo||(r=e.cues[0].startTime,t=e.cues[e.cues.length-1].startTime,i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(r,t-s.duration)})):s.empty=!0)},Sh),oh=[{name:"VOD",run:function(e,t,i,n,r){return i===1/0?null:{time:0,segmentIndex:0,partIndex:null}}},{name:"ProgramDateTime",run:function(e,t,i,n,r){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var s=null,a=null,o=Jc(t);r=r||0;for(var l=0;l<o.length;l++){var c=o[t.endList||0===r?l:o.length-(l+1)],d=c.segment,u=e.timelineToDatetimeMappings[d.timeline];if(u&&d.dateTimeObject){var h=d.dateTimeObject.getTime()/1e3+u;if(d.parts&&"number"==typeof c.partIndex)for(var p=0;p<c.partIndex;p++)h+=d.parts[p].duration;if(u=Math.abs(r-h),null!==a&&(0===u||a<u))break;a=u,s={time:h,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}}return s}},{name:"Segment",run:function(e,t,i,n,r){var s=null,a=null;r=r||0;for(var o=Jc(t),l=0;l<o.length;l++){var c=o[t.endList||0===r?l:o.length-(l+1)],d=c.segment,u=c.part&&c.part.start||d&&d.start;if(d.timeline===n&&void 0!==u){if(d=Math.abs(r-u),null!==a&&a<d)break;(!s||null===a||d<=a)&&(a=d,s={time:u,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return s}},{name:"Discontinuity",run:function(e,t,i,n,r){var s=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var a=null,o=0;o<t.discontinuityStarts.length;o++){var l=t.discontinuityStarts[o],c=t.discontinuitySequence+o+1,d=e.discontinuities[c];if(d){if(c=Math.abs(r-d.time),null!==a&&a<c)break;(!s||null===a||c<=a)&&(a=c,s={time:d.time,segmentIndex:l,partIndex:null})}}return s}},{name:"Playlist",run:function(e,t,i,n,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],lh=(m(xh,eh=H.EventTarget),(i=xh.prototype).getSyncPoint=function(e,t,i,n){return(i=this.runStrategies_(e,t,i,n)).length?this.selectSyncPoint_(i,{key:"time",value:n}):null},i.getExpiredTime=function(e,t){return e&&e.segments&&(t=this.runStrategies_(e,t,e.discontinuitySequence,0)).length?(0<(t=this.selectSyncPoint_(t,{key:"segmentIndex",value:0})).segmentIndex&&(t.time*=-1),Math.abs(t.time+rd({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:t.segmentIndex,endIndex:0}))):null},i.runStrategies_=function(e,t,i,n){for(var r=[],s=0;s<oh.length;s++){var a=oh[s],o=a.run(this,e,t,i,n);o&&(o.strategy=a.name,r.push({strategy:a.name,syncPoint:o}))}return r},i.selectSyncPoint_=function(e,t){for(var i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,s=1;s<e.length;s++){var a=Math.abs(e[s].syncPoint[t.key]-t.value);a<n&&(n=a,i=e[s].syncPoint,r=e[s].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+("number"==typeof i.partIndex?",partIndex:"+i.partIndex:"")+"]"),i},i.saveExpiredSegmentInfo=function(e,t){var i=t.mediaSequence-e.mediaSequence;if(86400<i)H.log.warn("Not saving expired segment info. Media sequence gap "+i+" is too large.");else for(var n=i-1;0<=n;n--){var r=e.segments[n];if(r&&void 0!==r.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:r.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},i.setDateTimeMappingForStart=function(e){var t;this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject&&(e=(t=e.segments[0]).dateTimeObject.getTime()/1e3,this.timelineToDatetimeMappings[t.timeline]=-e)},i.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,i=e.shouldSaveTimelineMapping,n=this.calculateSegmentTimeMapping_(t,t.timingInfo,i),e=t.segment;n&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:e.start})),t=e.dateTimeObject,e.discontinuity&&i&&t&&(this.timelineToDatetimeMappings[e.timeline]=-t.getTime()/1e3)},i.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},i.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},i.calculateSegmentTimeMapping_=function(e,t,i){var n,r=e.segment,s=e.part,a=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+a.time+"] [mapping: "+a.mapping+"]")),n=e.startOfSegment;else{if(!a)return!1;n=t.start+a.mapping}return i=t.end+a.mapping,s&&(s.start=n,s.end=i),(!r.start||n<r.start)&&(r.start=n),r.end=i,!0},i.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var r=t.discontinuityStarts[n],s=t.discontinuitySequence+n+1,a=r-e.mediaIndex,o=Math.abs(a);(!this.discontinuities[s]||this.discontinuities[s].accuracy>o)&&(a=a<0?i.start-rd({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:r}):i.end+rd({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[s]={time:a,accuracy:o})}},i.dispose=function(){this.trigger("dispose"),this.off()},xh),ch=(m(wh,Zu=H.EventTarget),(_=wh.prototype).clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},_.pendingTimelineChange=function(e){var t=e.type,i=e.from,e=e.to;return"number"==typeof i&&"number"==typeof e&&(this.pendingTimelineChanges_[t]={type:t,from:i,to:e},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},_.lastTimelineChange=function(e){var t=e.type,i=e.from,e=e.to;return"number"==typeof i&&"number"==typeof e&&(this.lastTimelineChanges_[t]={type:t,from:i,to:e},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},_.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},wh),dh=r(ce(t(function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t,i){return e(i={path:t,exports:{},require:function(e,t){throw null==t&&i.path,new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}},i.exports),i.exports}var i=t(function(e){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e},e.exports.default=e.exports,e.exports.__esModule=!0}),n=t(function(i){function n(e,t){return i.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i.exports.default=i.exports,i.exports.__esModule=!0,n(e,t)}i.exports=n,i.exports.default=i.exports,i.exports.__esModule=!0}),r=t(function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0}),s=((l=a.prototype).on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},l.off=function(e,t){return!!this.listeners[e]&&(t=this.listeners[e].indexOf(t),this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(t,1),-1<t)},l.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=t.length,a=0;a<s;++a)t[a].apply(this,r)},l.dispose=function(){this.listeners={}},l.pipe=function(t){this.on("data",function(e){t.push(e)})},a);function a(){this.listeners={}}function m(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}var o,l,d=null,g=(f.prototype.decrypt=function(e,t,i,n,r,s){for(var a,o,l,c=this._key[1],d=e^c[0],u=n^c[1],h=i^c[2],p=t^c[3],f=c.length/4-2,m=4,g=(t=this._tables[1])[0],v=t[1],y=t[2],_=t[3],b=t[4],T=0;T<f;T++)a=g[d>>>24]^v[u>>16&255]^y[h>>8&255]^_[255&p]^c[m],o=g[u>>>24]^v[h>>16&255]^y[p>>8&255]^_[255&d]^c[m+1],l=g[h>>>24]^v[p>>16&255]^y[d>>8&255]^_[255&u]^c[m+2],p=g[p>>>24]^v[d>>16&255]^y[u>>8&255]^_[255&h]^c[m+3],m+=4,d=a,u=o,h=l;for(T=0;T<4;T++)r[(3&-T)+s]=b[d>>>24]<<24^b[u>>16&255]<<16^b[h>>8&255]<<8^b[255&p]^c[m++],a=d,d=u,u=h,h=p,p=a},f),c=(r(p,o=s),(l=p.prototype).processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},l.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},p),u=(h.prototype.decryptChunk_=function(t,i,n,r){return function(){var e=function(e,t,i){for(var n,r,s,a,o=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),l=new g(Array.prototype.slice.call(t)),e=new Uint8Array(e.byteLength),c=new Int32Array(e.buffer),d=i[0],u=i[1],h=i[2],p=i[3],f=0;f<o.length;f+=4)n=m(o[f]),r=m(o[f+1]),s=m(o[f+2]),a=m(o[f+3]),l.decrypt(n,r,s,a,c,f),c[f]=m(c[f]^d),c[f+1]=m(c[f+1]^u),c[f+2]=m(c[f+2]^h),c[f+3]=m(c[f+3]^p),d=n,u=r,h=s,p=a;return e}(t,i,n);r.set(e,t.byteOffset)}},i(h,null,[{key:"STEP",get:function(){return 32e3}}]),h);function h(e,t,i,n){var r=h.STEP,s=new Int32Array(e.buffer),a=new Uint8Array(e.byteLength),o=0;for(this.asyncStream_=new c,this.asyncStream_.push(this.decryptChunk_(s.subarray(o,o+r),t,i,a)),o=r;o<s.length;o+=r)i=new Uint32Array([m(s[o-4]),m(s[o-3]),m(s[o-2]),m(s[o-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(o,o+r),t,i,a));this.asyncStream_.push(function(){var e;n(null,(e=a).subarray(0,e.byteLength-e[e.byteLength-1]))})}function p(){var e=o.call(this,s)||this;return e.jobs=[],e.delay=1,e.timeout_=null,e}function f(e){d=d||function(){for(var e,t,i,n,r,s,a,o=[[[],[],[],[],[]],[[],[],[],[],[]]],l=o[0],c=o[1],d=l[4],u=c[4],h=[],p=[],f=0;f<256;f++)p[(h[f]=f<<1^283*(f>>7))^f]=f;for(e=t=0;!d[e];e^=i||1,t=p[t]||1)for(a=16843009*h[n=h[i=h[u[d[e]=r=(r=t^t<<1^t<<2^t<<3^t<<4)>>8^255&r^99]=e]]]^65537*n^257*i^16843008*e,s=257*h[r]^16843008*r,f=0;f<4;f++)l[f][e]=s=s<<24^s>>>8,c[f][r]=a=a<<24^a>>>8;for(f=0;f<5;f++)l[f]=l[f].slice(0),c[f]=c[f].slice(0);return o}(),this._tables=[[d[0][0].slice(),d[0][1].slice(),d[0][2].slice(),d[0][3].slice(),d[0][4].slice()],[d[1][0].slice(),d[1][1].slice(),d[1][2].slice(),d[1][3].slice(),d[1][4].slice()]];var t,i,n,r=this._tables[0][4],s=this._tables[1],a=e.length,o=1;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size");var l=e.slice(0),c=[];for(this._key=[l,c],t=a;t<4*a+28;t++)n=l[t-1],(t%a==0||8===a&&t%a==4)&&(n=r[n>>>24]<<24^r[n>>16&255]<<16^r[n>>8&255]<<8^r[255&n],t%a==0)&&(n=n<<8^n>>>24^o<<24,o=o<<1^283*(o>>7)),l[t]=l[t-a]^n;for(i=0;t;i++,t--)n=l[3&i?t:t-4],c[i]=t<=4||i<4?n:s[0][r[n>>>24]]^s[1][r[n>>16&255]]^s[2][r[n>>8&255]]^s[3][r[255&n]]}(e=(e="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).BigInt||Number)("0x1"),e("0x100"),e("0x10000"),e("0x1000000"),e("0x100000000"),e("0x10000000000"),e("0x1000000000000"),e("0x100000000000000"),e("0x10000000000000000"),self.onmessage=function(e){var i=e.data,t=new Uint8Array(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength),n=new Uint32Array(i.key.bytes,i.key.byteOffset,i.key.byteLength/4),e=new Uint32Array(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/4);new u(t,n,e,function(e,t){var n,r;self.postMessage((n={source:i.source,decrypted:t},r={},Object.keys(n).forEach(function(e){var t=n[e],i=t;("function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer)?r[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:r[e]=t}),r),[t.buffer])})}}))),uh={AUDIO:function(a,o){return function(){var e=o.segmentLoaders[a],t=o.mediaTypes[a],i=o.blacklistCurrentPlaylist,n=(zu(e,t),t.activeTrack()),e=((e=t.activeGroup()).filter(function(e){return e.default})[0]||e[0]).id,r=t.tracks[e];if(n!==r){for(var s in H.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),t.tracks)t.tracks[s].enabled=t.tracks[s]===r;t.onTrackChanged()}else i({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(i,n){return function(){var e=n.segmentLoaders[i],t=n.mediaTypes[i];H.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),zu(e,t),(e=t.activeTrack())&&(e.mode="disabled"),t.onTrackChanged()}}},hh={AUDIO:function(e,t,i){var n,r,s;t&&(n=i.tech,r=i.requestOptions,s=i.segmentLoaders[e],t.on("loadedmetadata",function(){var e=t.media();s.playlist(e,r),(!n.paused()||e.endList&&"none"!==n.preload())&&s.load()}),t.on("loadedplaylist",function(){s.playlist(t.media(),r),n.paused()||s.load()}),t.on("error",uh[e](e,i)))},SUBTITLES:function(e,t,i){var n=i.tech,r=i.requestOptions,s=i.segmentLoaders[e],a=i.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();s.playlist(e,r),s.track(a.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&s.load()}),t.on("loadedplaylist",function(){s.playlist(t.media(),r),n.paused()||s.load()}),t.on("error",uh[e](e,i))}},ph={AUDIO:function(e,t){var i,n,r=t.vhs,s=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions,l=t.master.mediaGroups,c=t.mediaTypes[e],d=c.groups,u=c.tracks,h=c.logger_,p=t.masterPlaylistLoader,f=pd(p.master);for(i in l[e]&&0!==Object.keys(l[e]).length||(l[e]={main:{default:{default:!0}}},f&&(l[e].main.default.playlists=p.master.playlists)),l[e])for(var m in d[i]||(d[i]=[]),l[e][i]){var g=l[e][i][m],v=void 0,v=f?(h("AUDIO group '"+i+"' label '"+m+"' is a master playlist"),g.isMasterPlaylist=!0,null):"vhs-json"===s&&g.playlists?new bu(g.playlists[0],r,o):g.resolvedUri?new bu(g.resolvedUri,r,o):g.playlists&&"dash"===s?new Su(g.playlists[0],r,o,p):null,g=H.mergeOptions({id:m,playlistLoader:v},g);hh[e](e,g.playlistLoader,t),d[i].push(g),void 0===u[m]&&(g=new H.AudioTrack({id:m,kind:(n=(v=g).default?"main":"alternative",v.characteristics&&0<=v.characteristics.indexOf("public.accessibility.describes-video")?"main-desc":n),enabled:!1,language:g.language,default:g.default,label:m}),u[m]=g)}a.on("error",uh[e](e,t))},SUBTITLES:function(e,t){var i,n=t.tech,r=t.vhs,s=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions,l=t.master.mediaGroups,c=t.mediaTypes[e],d=c.groups,u=c.tracks,h=t.masterPlaylistLoader;for(i in l[e])for(var p in d[i]||(d[i]=[]),l[e][i])if(!l[e][i][p].forced){var f=l[e][i][p],m=void 0;if("hls"===s)m=new bu(f.resolvedUri,r,o);else if("dash"===s){if(!f.playlists.filter(function(e){return e.excludeUntil!==1/0}).length)return;m=new Su(f.playlists[0],r,o,h)}else"vhs-json"===s&&(m=new bu(f.playlists?f.playlists[0]:f.resolvedUri,r,o));f=H.mergeOptions({id:p,playlistLoader:m},f),hh[e](e,f.playlistLoader,t),d[i].push(f),void 0===u[p]&&(f=n.addRemoteTextTrack({id:p,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:p},!1).track,u[p]=f)}a.on("error",uh[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i,n=t.tech,r=t.master.mediaGroups,s=(t=t.mediaTypes[e]).groups,a=t.tracks;for(i in r[e])for(var o in s[i]||(s[i]=[]),r[e][i]){var l,c,d=r[e][i][o];/^(?:CC|SERVICE)/.test(d.instreamId)&&(void 0===(c=(l=n.options_.vhs&&n.options_.vhs.captionServices||{})[(c={label:o,language:d.language,instreamId:d.instreamId,default:d.default&&d.autoselect}).instreamId]?H.mergeOptions(c,l[c.instreamId]):c).default&&delete c.default,s[i].push(H.mergeOptions({id:o},d)),void 0===a[o])&&(c=n.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track,a[o]=c)}}},fh={AUDIO:function(i,n){return function(){var e,t=n.mediaTypes[i].tracks;for(e in t)if(t[e].enabled)return t[e];return null}},SUBTITLES:function(i,n){return function(){var e,t=n.mediaTypes[i].tracks;for(e in t)if("showing"===t[e].mode||"hidden"===t[e].mode)return t[e];return null}}},mh=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],gh=(m(Th,Ju=H.EventTarget),(n=Th.prototype).mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},n.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},n.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t},n.timeToLoadedData_=function(){return this.timeToLoadedData__},n.checkABR_=function(){var e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,"abr")},n.switchMedia_=function(e,t,i){var n=(r=this.media())&&(r.id||r.uri),r=e.id||e.uri;n&&n!==r&&(this.logger_("switch media "+n+" -> "+r+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,i)},n.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=window.setInterval(function(){return e.checkABR_()},250)},n.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(window.clearInterval(this.abrTimer_),this.abrTimer_=null)},n.getAudioTrackPlaylists_=function(){var e=this.master(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var i,n=e.mediaGroups.AUDIO,r=Object.keys(n);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)i=this.mediaTypes_.AUDIO.activeTrack();else{var s,a=n.main||r.length&&n[r[0]];for(s in a)if(a[s].default){i={label:s};break}}if(!i)return t;var o,l=[];for(o in n)if(n[o][i.label]){var c=n[o][i.label];if(c.playlists&&c.playlists.length)l.push.apply(l,c.playlists);else if(c.uri)l.push(c);else if(e.playlists.length)for(var d=0;d<e.playlists.length;d++){var u=e.playlists[d];u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===o&&l.push(u)}}return l.length?l:t},n.setupMasterPlaylistLoaderListeners_=function(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=i.masterPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;dd(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=t,e.endList&&"none"!==i.tech_.preload()&&(i.mainSegmentLoader_.playlist(e,i.requestOptions_),i.mainSegmentLoader_.load()),Vu({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,vhs:i.vhs_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),e),i.setupFirstPlay(),!i.mediaTypes_.AUDIO.activePlaylistLoader||i.mediaTypes_.AUDIO.activePlaylistLoader.media()?i.trigger("selectedinitialmedia"):i.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){i.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){i.loadOnPlay_&&i.tech_.off("play",i.loadOnPlay_);var e,t=i.masterPlaylistLoader_.media();if(!t){if(i.excludeUnsupportedVariants_(),!(e=(e=i.enableLowInitialPlaylist?i.selectInitialPlaylist():e)||i.selectPlaylist())||!i.shouldSwitchToMedia_(e))return;if(i.initialMedia_=e,i.switchMedia_(i.initialMedia_,"initial"),"vhs-json"!==i.sourceType_||!i.initialMedia_.segments)return;t=i.initialMedia_}i.handleUpdatedMediaPlaylist(t)}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var e=i.masterPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;dd(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=t,i.mainSegmentLoader_.playlist(e,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=i.masterPlaylistLoader_.media();"playlist-unchanged"!==e.lastExcludeReason_&&i.stuckAtPlaylistEnd_(e)&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),i.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},n.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(e,t){var i,n=e.mediaGroups||{},r=!0,e=Object.keys(n.AUDIO);for(i in n.AUDIO)for(var s in n.AUDIO[i])n.AUDIO[i][s].uri||(r=!1);r&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(n.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Qu.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),e.length&&1<Object.keys(n.AUDIO[e[0]]).length&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.shouldSwitchToMedia_=function(e){var t,i,n,r,s,a,o=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,l=this.tech_.currentTime(),c=this.bufferLowWaterLine(),d=this.bufferHighWaterLine();return l={buffered:this.tech_.buffered(),currentTime:l,currentPlaylist:o,nextPlaylist:e,bufferLowWaterLine:c,bufferHighWaterLine:d,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_},o=l.currentPlaylist,e=l.buffered,c=l.currentTime,d=l.bufferLowWaterLine,n=l.bufferHighWaterLine,r=l.duration,s=l.experimentalBufferBasedABR,a=l.log,(i=l.nextPlaylist)?(t="allowing switch "+(o&&o.id||"null")+" -> "+i.id,o?!(i.id===o.id||(l=Boolean(Wc(e,c).length),o.endList?(e=Kc(e,c),r<(c=s?M.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:M.MAX_BUFFER_LOW_WATER_LINE)?(a(t+" as duration < max low water line ("+r+" < "+c+")"),0):(c=i.attributes.BANDWIDTH)<(i=o.attributes.BANDWIDTH)&&(!s||e<n)?(o=t+" as next bandwidth < current bandwidth ("+c+" < "+i+")",s&&(o+=" and forwardBuffer < bufferHighWaterLine ("+e+" < "+n+")"),a(o),0):(!s||i<c)&&d<=e?(d=t+" as forwardBuffer >= bufferLowWaterLine ("+e+" >= "+d+")",s&&(d+=" and next bandwidth > current bandwidth ("+c+" > "+i+")"),a(d),0):(a("not "+t+" as no switching criteria met"),1)):l||"number"!=typeof o.partTargetDuration?(a(t+" as current playlist is live"),0):(a("not "+t+" as current playlist is live llhls, but currentTime isn't in buffered."),1))):(a(t+" as current playlist is not set"),!0)):(H.log.warn("We received no playlist to switch to. Please check your stream."),!1)},n.setupSegmentLoaderListeners_=function(){var t=this;function e(){if(!t.sourceUpdater_.hasCreatedSourceBuffers())return t.tryToCreateSourceBuffers_();var e=t.getCodecsOrExclude_();e&&t.sourceUpdater_.addOrChangeSourceBuffers(e)}this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=t.selectPlaylist();t.shouldSwitchToMedia_(e)&&t.switchMedia_(e,"bandwidthupdate"),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){t.error=t.mainSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){t.error=t.audioSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){t.logger_("main segment loader ended"),t.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(e){t.experimentalBufferBasedABR||(t.delegateLoaders_("all",["abort"]),t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}),this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){t.logger_("audioSegmentLoader ended"),t.onEndOfStream()})},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},n.fastQualityChange_=function(e){var t=this;(e=void 0===e?this.selectPlaylist():e)!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){H.browser.IE_VERSION||H.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},n.play=function(){var e;if(!this.setupFirstPlay())return this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load(),e=this.tech_.seekable(),this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0},n.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var i=this.seekable();if(!i.length)return!1;if(H.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(i.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){var e;this.tryToCreateSourceBuffers_(),this.tech_.autoplay()&&void 0!==(e=this.tech_.play())&&"function"==typeof e.then&&e.then(null,function(e){}),this.trigger("sourceopen")},n.handleSourceEnded_=function(){var e,t;this.inbandTextTracks_.metadataTrack_&&(e=this.inbandTextTracks_.metadataTrack_.cues)&&e.length&&(t=this.duration(),e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t)},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var e,t=this.mainSegmentLoader_.ended_;(this.mediaTypes_.AUDIO.activePlaylistLoader?((e=this.mainSegmentLoader_.getCurrentMediaInfo_())&&!e.hasVideo||t)&&this.audioSegmentLoader_.ended_:t)&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},n.stuckAtPlaylistEnd_=function(e){var t,i;return!!this.seekable().length&&null!==(i=this.syncController_.getExpiredTime(e,this.duration()))&&(t=Qu.Playlist.playlistEnd(e,i),e=this.tech_.currentTime(),(i=this.tech_.buffered()).length?(i=i.end(i.length-1))-e<=.1&&t-i<=.1:t-e<=.1)},n.blacklistCurrentPlaylist=function(e,t){var i,n,r,s,a=(e=void 0===e?{}:e).playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,a)return a.playlistErrors_++,s=1===(r=(n=this.masterPlaylistLoader_.master.playlists).filter(ld)).length&&r[0]===a,1===n.length&&t!==1/0?(H.log.warn("Problem encountered with playlist "+a.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s)):(s&&(i=!1,n.forEach(function(e){var t;e!==a&&void 0!==(t=e.excludeUntil)&&t!==1/0&&(i=!0,delete e.excludeUntil)}),i)&&(H.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist")),r=a.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*t,a.excludeUntil=r,e.reason&&(a.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),(n=this.selectPlaylist())?(t=e.internal?this.logger_:H.log.warn,r=e.message?" "+e.message:"",t((e.internal?"Internal problem":"Problem")+" encountered with playlist "+a.id+"."+r+" Switching to playlist "+n.id+"."),n.attributes.AUDIO!==a.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),n.attributes.SUBTITLES!==a.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),r=n.targetDuration/2*1e3||5e3,r="number"==typeof n.lastRequest&&Date.now()-n.lastRequest<=r,this.switchMedia_(n,"exclude",s||r)):(this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error")));this.error=e,"open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network")},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},n.delegateLoaders_=function(i,e){var n=this,r=[],t="all"===i,s=(!t&&"main"!==i||r.push(this.masterPlaylistLoader_),[]);!t&&"audio"!==i||s.push("AUDIO"),!t&&"subtitle"!==i||(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(function(e){(e=n.mediaTypes_[e]&&n.mediaTypes_[e].activePlaylistLoader)&&r.push(e)}),["main","audio","subtitle"].forEach(function(e){var t=n[e+"SegmentLoader_"];!t||i!==e&&"all"!==i||r.push(t)}),r.forEach(function(t){return e.forEach(function(e){"function"==typeof t[e]&&t[e]()})})},n.setCurrentTime=function(e){var t=Wc(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},n.duration=function(){var e;return this.masterPlaylistLoader_&&(e=this.masterPlaylistLoader_.media())?e.endList?this.mediaSource?this.mediaSource.duration:Qu.Playlist.duration(e):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var i=this.syncController_.getExpiredTime(t,this.duration());if(null!==i){var n,r,s=this.masterPlaylistLoader_.master,a=Qu.Playlist.seekable(t,i,Qu.Playlist.liveEdgeDelay(s,t));if(0!==a.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=Qu.Playlist.seekable(t,i,Qu.Playlist.liveEdgeDelay(s,t))).length)return}this.seekable_&&this.seekable_.length&&(n=this.seekable_.end(0),r=this.seekable_.start(0)),!e||e.start(0)>a.end(0)||a.start(0)>e.end(0)?this.seekable_=a:this.seekable_=H.createTimeRanges([[(e.start(0)>a.start(0)?e:a).start(0),(e.end(0)<a.end(0)?e:a).end(0)]]),this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===n&&this.seekable_.start(0)===r||(this.logger_("seekable updated ["+Xc(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},n.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);else{var t;if(e)return(t=this.seekable()).length?void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))):void 0;e=this.tech_.buffered(),t=Qu.Playlist.duration(this.masterPlaylistLoader_.media()),0<e.length&&(t=Math.max(t,e.end(e.length-1))),this.mediaSource.duration!==t&&this.sourceUpdater_.setDuration(t)}},n.dispose=function(){var n=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(e){var t,i=n.mediaTypes_[e].groups;for(t in i)i[t].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),e=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return t&&e},n.getCodecsOrExclude_=function(){var n=this,i={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},e=(i.video=i.main,Kd(this.master(),this.media())),r={},t=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(i.main.hasVideo&&(r.video=e.video||i.main.videoCodec||"avc1.4d400d"),i.main.isMuxed&&(r.video+=","+(e.audio||i.main.audioCodec||po)),(i.main.hasAudio&&!i.main.isMuxed||i.audio.hasAudio||t)&&(r.audio=e.audio||i.main.audioCodec||i.audio.audioCodec||po,i.audio.isFmp4=(i.main.hasAudio&&!i.main.isMuxed?i.main:i.audio).isFmp4),r.audio||r.video){var s,a,o={};if(["video","audio"].forEach(function(e){var t;r.hasOwnProperty(e)&&!(i[e].isFmp4?Qa:Ja)(t=r[e])&&(t=i[e].isFmp4?"browser":"muxer",o[t]=o[t]||[],o[t].push(r[e]),"audio"===e&&(s=t))}),t&&s&&this.media().attributes.AUDIO&&(a=this.media().attributes.AUDIO,this.master().playlists.forEach(function(e){(e.attributes&&e.attributes.AUDIO)===a&&e!==n.media()&&(e.excludeUntil=1/0)}),this.logger_("excluding audio group "+a+" as "+s+' does not support codec(s): "'+r.audio+'"')),!Object.keys(o).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var l=[];if(["video","audio"].forEach(function(e){var t=(Ga(n.sourceUpdater_.codecs[e]||"")[0]||{}).type,i=(Ga(r[e]||"")[0]||{}).type;t&&i&&t.toLowerCase()!==i.toLowerCase()&&l.push('"'+n.sourceUpdater_.codecs[e]+'" -> "'+r[e]+'"')}),l.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+l.join(", ")+".",blacklistDuration:1/0,internal:!0})}return r}t=Object.keys(o).reduce(function(e,t){return e&&(e+=", "),e+(t+' does not support codec(s): "'+o[t].join(","))+'"'},"")+".",this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:t,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},n.tryToCreateSourceBuffers_=function(){var e;"open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()&&(e=this.getCodecsOrExclude_())&&(this.sourceUpdater_.createSourceBuffers(e),e=[e.video,e.audio].filter(Boolean).join(","),this.excludeIncompatibleVariants_(e))},n.excludeUnsupportedVariants_=function(){var n=this,r=this.master().playlists,s=[];Object.keys(r).forEach(function(e){var t,i=r[e];-1===s.indexOf(i.id)&&(s.push(i.id),t=[],!(e=Kd(n.master,i)).audio||Ja(e.audio)||Qa(e.audio)||t.push("audio codec "+e.audio),!e.video||Ja(e.video)||Qa(e.video)||t.push("video codec "+e.video),e.text&&"stpp.ttml.im1t"===e.text&&t.push("text codec "+e.text),t.length)&&(i.excludeUntil=1/0,n.logger_("excluding "+i.id+" for unsupported: "+t.join(", ")))})},n.excludeIncompatibleVariants_=function(e){var r=this,s=[],a=this.master().playlists,o=Yd(e=Gd(Ga(e))),l=e.video&&Ga(e.video)[0]||null,c=e.audio&&Ga(e.audio)[0]||null;Object.keys(a).forEach(function(e){var t,i,n=a[e];-1===s.indexOf(n.id)&&n.excludeUntil!==1/0&&(s.push(n.id),t=[],e=Yd(i=Kd(r.masterPlaylistLoader_.master,n)),i.audio||i.video)&&(e!==o&&t.push('codec count "'+e+'" !== "'+o+'"'),r.sourceUpdater_.canChangeType()||(e=i.video&&Ga(i.video)[0]||null,i=i.audio&&Ga(i.audio)[0]||null,e&&l&&e.type.toLowerCase()!==l.type.toLowerCase()&&t.push('video codec "'+e.type+'" !== "'+l.type+'"'),i&&c&&i.type.toLowerCase()!==c.type.toLowerCase()&&t.push('audio codec "'+i.type+'" !== "'+c.type+'"')),t.length)&&(n.excludeUntil=1/0,r.logger_("blacklisting "+n.id+": "+t.join(" && ")))})},n.updateAdCues_=function(e){var t=0,i=this.seekable(),n=(i.length&&(t=i.start(0)),e),r=this.cueTagsTrack_,i=void 0===t?0:t;if(n.segments)for(var s=i,a=0;a<n.segments.length;a++){var o,l,c,d=n.segments[a];if(c=c||function(e){for(var t=r.cues,i=0;i<t.length;i++){var n=t[i];if(e>=n.adStartTime&&e<=n.adEndTime)return n}return null}(s+d.duration/2)){if("cueIn"in d){c.endTime=s,c.adEndTime=s,s+=d.duration,c=null;continue}if(s<c.endTime){s+=d.duration;continue}c.endTime+=d.duration}else"cueOut"in d&&((c=new window.VTTCue(s,s+d.duration,d.cueOut)).adStartTime=s,c.adEndTime=s+parseFloat(d.cueOut),r.addCue(c)),"cueOutCont"in d&&(o=(l=d.cueOutCont.split("/").map(parseFloat))[0],l=l[1],(c=new window.VTTCue(s,s+d.duration,"")).adStartTime=s-o,c.adEndTime=c.adStartTime+l,r.addCue(c));s+=d.duration}},n.goalBufferLength=function(){var e=this.tech_.currentTime(),t=M.GOAL_BUFFER_LENGTH,i=M.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,M.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)},n.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=M.BUFFER_LOW_WATER_LINE,i=M.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,M.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,M.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.experimentalBufferBasedABR?r:n)},n.bufferHighWaterLine=function(){return M.BUFFER_HIGH_WATER_LINE},Th),vh=["seeking","seeked","pause","playing","error"],yh=((w=bh.prototype).monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&window.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=window.setTimeout(this.monitorCurrentTime_.bind(this),250)},w.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];0<this[e+"StalledDownloads_"]&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},w.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,i=t[e+"SegmentLoader_"],n=i.buffered_(),r=function(e,t){if(e!==t){if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var i=0;i<e.length;i++)if(e.start(i)!==t.start(i)||e.end(i)!==t.end(i))return!0}return!1}(this[e+"Buffered_"],n);this[e+"Buffered_"]=n,r?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:i.playlist_&&i.playlist_.id,buffered:Gc(n)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},w.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},w.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},w.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),i=this.tech_.currentTime();if(this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1)),void 0!==(e=this.beforeSeekableWindow_(t,i)?(s=t.start(0))+(s===t.end(0)?0:.1):e))return this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+Xc(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;for(var n=this.masterPlaylistController_.sourceUpdater_,r=this.tech_.buffered(),s=n.audioBuffer?n.audioBuffered():null,t=n.videoBuffer?n.videoBuffered():null,a=(n=this.media()).partTargetDuration||2*(n.targetDuration-mu),o=[s,t],l=0;l<o.length;l++)if(o[l]&&Kc(o[l],i)<a)return!1;return 0!==(r=Vc(r,i)).length&&(e=r.start(0)+.1,this.logger_("Buffered region starts ("+r.start(0)+")  just beyond seek point ("+i+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},w.waiting_=function(){var e,t;this.techWaiting_()||(e=this.tech_.currentTime(),(t=Wc(t=this.tech_.buffered(),e)).length&&e+3<=t.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+t.start(0)+" -> "+t.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})))},w.techWaiting_=function(){var e,t=this.seekable(),i=this.tech_.currentTime();return!(!this.tech_.seeking()&&null===this.timer_)||(this.beforeSeekableWindow_(t,i)?(e=t.end(t.length-1),this.logger_("Fell out of live window at time "+i+". Seeking to live point (seekable end) "+e),this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0):(t=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,e=this.tech_.buffered(),this.videoUnderflow_({audioBuffered:t.audioBuffered(),videoBuffered:t.videoBuffered(),currentTime:i})?(this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):0<(t=Vc(e,i)).length&&(e=t.start(0)-i,this.logger_("Stopped at "+i+", setting timer for "+e+", seeking to "+t.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*e,i),!0)))},w.afterSeekableWindow_=function(e,t,i,n){var r;return void 0===n&&(n=!1),!!e.length&&(r=e.end(e.length-1)+.1,(r=!i.endList&&n?e.end(e.length-1)+3*i.targetDuration:r)<t)},w.beforeSeekableWindow_=function(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-this.liveRangeSafeTimeDelta)},w.videoUnderflow_=function(e){var t,i,n=e.videoBuffered,r=e.audioBuffered,s=e.currentTime;if(n)return n.length&&r.length?(i=Wc(n,s-3),e=Wc(n,s),(r=Wc(r,s)).length&&!e.length&&i.length&&(t={start:i.end(0),end:r.end(0)})):Vc(n,s).length||(t=this.gapFromVideoUnderflow_(n,s)),!!t&&(this.logger_("Encountered a gap in video from "+t.start+" to "+t.end+". Seeking to current time "+s),!0)},w.skipTheGap_=function(e){var t=this.tech_.buffered(),i=this.tech_.currentTime(),t=Vc(t,i);this.cancelTimer_(),0!==t.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",t.start(0)),this.tech_.setCurrentTime(t.start(0)+mu),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},w.gapFromVideoUnderflow_=function(e,t){for(var i=function(e){if(e.length<2)return H.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var n=e.end(i-1),r=e.start(i);t.push([n,r])}return H.createTimeRanges(t)}(e),n=0;n<i.length;n++){var r=i.start(n),s=i.end(n);if(t-r<4&&2<t-r)return{start:r,end:s}}return null},bh),_h={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},D={PlaylistLoader:bu,Playlist:vu,utils:hi,STANDARD_PLAYLIST_SELECTOR:ml,INITIAL_PLAYLIST_SELECTOR:function(){var t=this,e=this.playlists.master.playlists.filter(vu.isEnabled);return Zd(e,eu),e.filter(function(e){return!!Kd(t.playlists.master,e).video})[0]||null},lastBandwidthSelector:ml,movingAverageBandwidthSelector:function(t){var i=-1,n=-1;if(t<0||1<t)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var e=this.useDevicePixelRatio&&window.devicePixelRatio||1;return i<0&&(i=this.systemBandwidth,n=this.systemBandwidth),0<this.systemBandwidth&&this.systemBandwidth!==n&&(i=t*this.systemBandwidth+(1-t)*i,n=this.systemBandwidth),tu(this.playlists.master,i,parseInt(Jd(this.tech_.el(),"width"),10)*e,parseInt(Jd(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:eu,comparePlaylistResolution:function(e,t){var i,n;return(i=(i=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width?e.attributes.RESOLUTION.width:i)||window.Number.MAX_VALUE)===(n=(n=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width?t.attributes.RESOLUTION.width:n)||window.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n},xhr:Sd()};function bh(e){var i=this;function t(){return i.monitorCurrentTime_()}function n(){return i.monitorCurrentTime_()}function r(){return i.techWaiting_()}function s(){return i.cancelTimer_()}this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=qc("PlaybackWatcher"),this.logger_("initialize");var a=this.masterPlaylistController_,o=["main","subtitle","audio"],l={};function c(t){["main","audio"].forEach(function(e){a[e+"SegmentLoader_"][t]("appended",i.seekingAppendCheck_)})}o.forEach(function(e){l[e]={reset:function(){return i.resetSegmentDownloads_(e)},updateend:function(){return i.checkSegmentDownloads_(e)}},a[e+"SegmentLoader_"].on("appendsdone",l[e].updateend),a[e+"SegmentLoader_"].on("playlistupdate",l[e].reset),i.tech_.on(["seeked","seeking"],l[e].reset)}),this.seekingAppendCheck_=function(){i.fixesBadSeeks_()&&(i.consecutiveUpdates=0,i.lastRecordedTime=i.tech_.currentTime(),c("off"))},this.clearSeekingAppendCheck_=function(){return c("off")},this.watchForBadSeeking_=function(){i.clearSeekingAppendCheck_(),c("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(vh,s),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=function(){i.clearSeekingAppendCheck_(),i.logger_("dispose"),i.tech_.off("waiting",r),i.tech_.off(vh,s),i.tech_.off("canplay",n),i.tech_.off("play",t),i.tech_.off("seeking",i.watchForBadSeeking_),i.tech_.off("seeked",i.clearSeekingAppendCheck_),o.forEach(function(e){a[e+"SegmentLoader_"].off("appendsdone",l[e].updateend),a[e+"SegmentLoader_"].off("playlistupdate",l[e].reset),i.tech_.off(["seeked","seeking"],l[e].reset)}),i.checkCurrentTimeTimeout_&&window.clearTimeout(i.checkCurrentTimeTimeout_),i.cancelTimer_()}}function Th(e){var t,i,n=Ju.call(this)||this,r=e.src,s=e.handleManifestRedirects,a=e.withCredentials,o=e.tech,l=e.bandwidth,c=e.externVhs,d=e.useCueTags,u=e.blacklistDuration,h=e.enableLowInitialPlaylist,p=e.sourceType,f=e.cacheEncryptionKeys,m=e.experimentalBufferBasedABR,g=e.experimentalLeastPixelDiffSelector,v=e.captionServices;if(r)return null==(i=e.maxPlaylistRetries)&&(i=1/0),Qu=c,n.experimentalBufferBasedABR=Boolean(m),n.experimentalLeastPixelDiffSelector=Boolean(g),n.withCredentials=a,n.tech_=o,n.vhs_=o.vhs,n.sourceType_=p,n.useCueTags_=d,n.blacklistDuration=u,n.maxPlaylistRetries=i,n.enableLowInitialPlaylist=h,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:a,handleManifestRedirects:s,maxPlaylistRetries:i,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=(t={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:ju,activeTrack:ju,getActiveGroup:ju,onGroupChanged:ju,onTrackChanged:ju,lastTrack_:null,logger_:qc("MediaGroups["+e+"]")}}),t),n.mediaSource=new window.MediaSource,n.handleDurationChange_=n.handleDurationChange_.bind(y(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind(y(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind(y(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=H.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new lh(e),n.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new dh,n.sourceUpdater_=new rh(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new ch,f={vhs:n.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:v,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:l,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:f,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:e.experimentalExactManifestTimings},n.masterPlaylistLoader_=new("dash"===n.sourceType_?Su:bu)(r,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new Iu(H.mergeOptions(f,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),e),n.audioSegmentLoader_=new Iu(H.mergeOptions(f,{loaderType:"audio"}),e),n.subtitleSegmentLoader_=new ah(H.mergeOptions(f,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks}),e),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",function(){return n.startABRTimer_()}),n.tech_.on("pause",function(){return n.stopABRTimer_()}),n.tech_.on("play",function(){return n.startABRTimer_()})),mh.forEach(function(e){n[e+"_"]=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]}.bind(y(n),e)}),n.logger_=qc("MPC"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1,e="none"===n.tech_.preload()?"play":"loadstart",n.tech_.one(e,function(){var e=Date.now();n.tech_.one("loadeddata",function(){n.timeToLoadedData__=Date.now()-e,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends})}),n;throw new Error("A non-empty playlist URL or JSON manifest string is required")}function wh(){var e=Zu.call(this)||this;return e.pendingTimelineChanges_={},e.lastTimelineChanges_={},e}function xh(e){var t=eh.call(this)||this;return t.timelines=[],t.discontinuities=[],t.timelineToDatetimeMappings={},t.logger_=qc("SyncController"),t}function Sh(e,t){return(t=th.call(this,e,t=void 0===t?{}:t)||this).mediaSource_=null,t.subtitlesTrack_=null,t.loaderType_="subtitle",t.featuresNativeTextTracks_=e.featuresNativeTextTracks,t.shouldSaveSegmentTimingInfo_=!1,t}function kh(e){var t=ih.call(this)||this;return t.mediaSource=e,t.sourceopenListener_=function(){return Bu("mediaSource",y(t))},t.mediaSource.addEventListener("sourceopen",t.sourceopenListener_),t.logger_=qc("SourceUpdater"),t.audioTimestampOffset_=0,t.videoTimestampOffset_=0,t.queue=[],t.queuePending={audio:null,video:null},t.delayedAudioAppendQueue_=[],t.videoAppendQueued_=!1,t.codecs={},t.onVideoUpdateEnd_=Hu("video",y(t)),t.onAudioUpdateEnd_=Hu("audio",y(t)),t.onVideoError_=function(e){t.videoError_=e},t.onAudioError_=function(e){t.audioError_=e},t.createdSourceBuffers_=!1,t.initializedEme_=!1,t.triggeredReady_=!1,t}function Eh(e,t){for(var i=t.media(),n=-1,r=0;r<e.length;r++)if(e[r].id===i.id){n=r;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})}Object.keys(M).forEach(function(t){Object.defineProperty(D,t,{get:function(){return H.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),M[t]},set:function(e){H.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<0?H.log.warn("value of Vhs."+t+" must be greater than or equal to 0"):M[t]=e}})});var Ch,Ah="videojs-vhs";function Ph(){if(!window.localStorage)return null;var e=window.localStorage.getItem(Ah);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}D.canPlaySource=function(){return H.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},D.supportsNativeHls=!(!document||!document.createElement||(Ch=document.createElement("video"),!H.getTech("Html5").isSupported()))&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(e){return/maybe|probably/i.test(Ch.canPlayType(e))}),D.supportsNativeDash=!!(document&&document.createElement&&H.getTech("Html5").isSupported())&&/maybe|probably/i.test(document.createElement("video").canPlayType("application/dash+xml")),D.supportsTypeNatively=function(e){return"hls"===e?D.supportsNativeHls:"dash"===e&&D.supportsNativeDash},D.isSupported=function(){return H.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};Lh=H.getComponent("Component"),m(Mh,Lh),(e=Mh.prototype).setOptions_=function(){var e,t=this;this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage&&((e=Ph())&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),e)&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"})),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=M.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===M.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(e){void 0!==t.source_[e]&&(t.options_[e]=t.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},e.src=function(e,t){var n=this;e&&(this.setOptions_(),this.options_.src=0===(e=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e.substring(e.indexOf(",")+1)):e,this.options_.tech=this.tech_,this.options_.externVhs=D,this.options_.sourceType=Za(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.options_.smoothQualityChange&&H.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new gh(this.options_),t=H.mergeOptions({liveRangeSafeTimeDelta:.1},this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_}),this.playbackWatcher_=new yh(t),this.masterPlaylistController_.on("error",function(){var e=H.players[n.tech_.options_.playerId],t=n.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}),t=this.options_.experimentalBufferBasedABR?D.movingAverageBandwidthSelector(.55):D.STANDARD_PLAYLIST_SELECTOR,this.masterPlaylistController_.selectPlaylist=(this.selectPlaylist||t).bind(this),this.masterPlaylistController_.selectInitialPlaylist=D.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var e=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,t=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection;return this.options_.useNetworkInformationApi&&t?1e7<=(t=1e3*t.downlink*1e3)&&1e7<=e?Math.max(e,t):t:e},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=0<this.throughput?1/this.throughput:0;return Math.floor(1/(e+t))},set:function(){H.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return n.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return n.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return n.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Gc(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Gc(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){if(n.options_.useBandwidthFromLocalStorage){var e={bandwidth:n.bandwidth,throughput:Math.round(n.throughput)};if(window.localStorage){var t=(t=Ph())?H.mergeOptions(t,e):e;try{window.localStorage.setItem(Ah,JSON.stringify(t))}catch(e){}}}}),this.masterPlaylistController_.on("selectedinitialmedia",function(){var i;(i=n).representations=function(){var e=i.masterPlaylistController_.master();return(e=pd(e)?i.masterPlaylistController_.getAudioTrackPlaylists_():e.playlists)?e.filter(function(e){return!od(e)}).map(function(e,t){return new Xu(i,e,e.id)}):[]}}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){n.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el())&&(this.mediaSourceUrl_=window.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))},e.createKeySessions_=function(){var i,t,n,r,e,s,a=this,o=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),o={player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:o&&o.media(),mainPlaylists:this.playlists.master.playlists},r=o.player,e=o.sourceKeySystems,s=o.audioMedia,o=o.mainPlaylists,(r.eme.initializeMediaKeys?(o=s?o.concat([s]):o,i=Object.keys(e),o=o.reduce(function(e,n){var t;return n.contentProtection&&(t=i.reduce(function(e,t){var i=n.contentProtection[t];return i&&i.pssh&&(e[t]={pssh:i.pssh}),e},{}),Object.keys(t).length)&&e.push(t),e},[]),t=[],n=[],o.forEach(function(e){n.push(new Promise(function(e,t){r.tech_.one("keysessioncreated",e)})),t.push(new Promise(function(t,i){r.eme.initializeMediaKeys({keySystems:e},function(e){e?i(e):t()})}))}),Promise.race([Promise.all(t),Promise.race(n)])):Promise.resolve()).then(function(){a.logger_("created EME key session"),a.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(e){a.logger_("error while creating EME key session",e),a.player_.error({message:"Failed to initialize media keys for EME",code:3})})},e.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},e.setupEme_=function(){var e,t,i=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=(e={player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:n&&n.media()},t=e.player,!(!(e=function(e,t,i){if(!e)return e;var n={};t&&t.attributes&&t.attributes.CODECS&&(n=Gd(Ga(t.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(n.audio=i.attributes.CODECS);var r,s=Ka(n.video),a=Ka(n.audio),o={};for(r in e)o[r]={},a&&(o[r].audioContentType=a),s&&(o[r].videoContentType=s),t.contentProtection&&t.contentProtection[r]&&t.contentProtection[r].pssh&&(o[r].pssh=t.contentProtection[r].pssh),"string"==typeof e[r]&&(o[r].url=e[r]);return H.mergeOptions(e,o)}(e.sourceKeySystems,e.media,e.audioMedia))||(t.currentSource().keySystems=e)&&!t.eme&&(H.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)));this.player_.tech_.on("keystatuschange",function(e){"output-restricted"===e.status&&i.masterPlaylistController_.blacklistCurrentPlaylist({playlist:i.masterPlaylistController_.media(),message:"DRM keystatus changed to "+e.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==H.browser.IE_VERSION&&n?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},e.setupQualityLevels_=function(){var i=this,e=H.players[this.tech_.options_.playerId];e&&e.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=e.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var e,t=i.qualityLevels_;(e=i).representations().forEach(function(e){t.addQualityLevel(e)}),Eh(t,e.playlists)}),this.playlists.on("mediachange",function(){Eh(i.qualityLevels_,i.playlists)}))},Mh.version=function(){return{"@videojs/http-streaming":"2.14.2","mux.js":"6.0.1","mpd-parser":"0.21.1","m3u8-parser":"4.7.1","aes-decrypter":"3.1.3"}},e.version=function(){return this.constructor.version()},e.canChangeType=function(){return rh.canChangeType()},e.play=function(){this.masterPlaylistController_.play()},e.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},e.duration=function(){return this.masterPlaylistController_.duration()},e.seekable=function(){return this.masterPlaylistController_.seekable()},e.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&window.URL.revokeObjectURL&&(window.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),Lh.prototype.dispose.call(this)},e.convertToProgramTime=function(e,t){var i,n,e={playlist:this.masterPlaylistController_.media(),time:e,callback:t},t=e.playlist,r=e.time,s=void 0===r?void 0:r;if(r=e.callback)return t&&void 0!==s?(e=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var i,n=0,r=0;r<t.segments.length&&!(e<=(n=(i=t.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);var s=t.segments[t.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(n<e){if(e>n+.25*s.duration)return null;i=s}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}}(s,t))?"estimate"===e.type?r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:e.estimatedStart}):(t={mediaSeconds:s},(e=(i=e.segment).dateTimeObject?(n=i.videoTimingInfo.transmuxerPrependedSeconds,n=s-(i.videoTimingInfo.transmuxedPresentationStart+n),new Date(i.dateTimeObject.getTime()+1e3*n)):null)&&(t.programDateTime=e.toISOString()),r(null,t)):r({message:"valid programTime was not found"}):r({message:"getProgramTime: playlist and time must be provided"});throw new Error("getProgramTime: callback must be provided")},e.seekToProgramTime=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=2),function e(t){var i=t.programTime,n=t.playlist,r=t.retryCount,s=void 0===r?2:r,a=t.seekTo,o=t.pauseAfterSeek,l=void 0===o||o,c=t.tech,d=t.callback;if(d)return void 0!==i&&n&&a?n.endList||c.hasStarted_?function(e){if(e.segments&&0!==e.segments.length){for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return;return 1}}(n)?(r=function(e,t){var i;try{i=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;if(i<(r=t.segments[0]).dateTimeObject)return null;for(var n=0;n<t.segments.length-1;n++){var r=t.segments[n];if(i<t.segments[n+1].dateTimeObject)break}var s=t.segments[t.segments.length-1],e=s.dateTimeObject,a=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+.25*s.duration;return new Date(e.getTime()+1e3*a)<i?null:{segment:r=e<i?s:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:vu.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"}}(i,n))?(t=function(e,t){var i;try{n=new Date(e),i=new Date(t)}catch(e){}var n=n.getTime();return(i.getTime()-n)/1e3}((o=r.segment).dateTimeObject,i),"estimate"===r.type?0===s?d({message:i+" is not buffered yet. Try again"}):(a(r.estimatedStart+t),void c.one("seeked",function(){e({programTime:i,playlist:n,retryCount:s-1,seekTo:a,pauseAfterSeek:l,tech:c,callback:d})})):(t=o.start+t,c.one("seeked",function(){return d(null,c.currentTime())}),l&&c.pause(),void a(t))):d({message:i+" was not found in the stream"}):d({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri}):d({message:"player must be playing a live stream to start buffering"}):d({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});throw new Error("seekToProgramTime: callback must be provided")}({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})};var Lh,Ih=Mh,Oh={name:"videojs-http-streaming",VERSION:"2.14.2",canHandleSource:function(e,t){return t=H.mergeOptions(H.options,t=void 0===t?{}:t),Oh.canPlayType(e.type,t)},handleSource:function(e,t,i){return i=H.mergeOptions(H.options,i=void 0===i?{}:i),t.vhs=new Ih(e,t,i),H.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return H.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=Sd(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){var t=void 0===(t=(t=void 0===(t=(i=H.mergeOptions(H.options,t=void 0===t?{}:t)).vhs)?{}:t).overrideNative)?!H.browser.IS_ANY_SAFARI:t,i=void 0!==(i=(void 0===(i=i.hls)?{}:i).overrideNative)&&i;return(e=Za(e))&&(!D.supportsTypeNatively(e)||i||t)?"maybe":""}};function Mh(e,t,i){var n=Lh.call(this,t,H.mergeOptions(i.hls,i.vhs))||this;if(i.hls&&Object.keys(i.hls).length&&H.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof i.initialBandwidth&&(n.options_.bandwidth=i.initialBandwidth),n.logger_=qc("VhsHandler"),t.options_&&t.options_.playerId&&((i=H(t.options_.playerId)).hasOwnProperty("hls")||Object.defineProperty(i,"hls",{get:function(){return H.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"hls-player-access"}),y(n)},configurable:!0}),i.hasOwnProperty("vhs")||Object.defineProperty(i,"vhs",{get:function(){return H.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"vhs-player-access"}),y(n)},configurable:!0}),i.hasOwnProperty("dash")||Object.defineProperty(i,"dash",{get:function(){return H.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),y(n)},configurable:!0}),n.player_=i),n.tech_=t,n.source_=e,n.stats={},n.ignoreNextSeekingEvent_=!1,n.setOptions_(),n.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(n.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return n.on(document,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;t&&t.contains(n.tech_.el())?n.masterPlaylistController_.fastQualityChange_():n.masterPlaylistController_.checkABR_()}),n.on(n.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),n.on(n.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),n.on(n.tech_,"play",n.play),n}return Qa("avc1.4d400d,mp4a.40.2")&&H.getTech("Html5").registerSourceHandler(Oh,0),H.VhsHandler=Ih,Object.defineProperty(H,"HlsHandler",{get:function(){return H.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Ih},configurable:!0}),H.VhsSourceHandler=Oh,Object.defineProperty(H,"HlsSourceHandler",{get:function(){return H.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Oh},configurable:!0}),H.Vhs=D,Object.defineProperty(H,"Hls",{get:function(){return H.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),D},configurable:!0}),H.use||(H.registerComponent("Hls",D),H.registerComponent("Vhs",D)),H.options.vhs=H.options.vhs||{},H.options.hls=H.options.hls||{},H.getPlugin&&H.getPlugin("reloadSourceOnError")||(H.registerPlugin||H.plugin)("reloadSourceOnError",function(e){!function t(i,e){var n=0,r=0,s=H.mergeOptions(_h,e);function a(){r&&i.currentTime(r)}function o(e){null!=e&&(r=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",a),i.src(e),i.trigger({type:"usage",name:"vhs-error-reload"}),i.trigger({type:"usage",name:"hls-error-reload"}),i.play())}function l(){return Date.now()-n<1e3*s.errorInterval?(i.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void i.trigger({type:"usage",name:"hls-error-reload-canceled"})):s.getSource&&"function"==typeof s.getSource?(n=Date.now(),s.getSource.call(i,o)):void H.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}function c(){i.off("loadedmetadata",a),i.off("error",l),i.off("dispose",c)}i.ready(function(){i.trigger({type:"usage",name:"vhs-error-reload-initialized"}),i.trigger({type:"usage",name:"hls-error-reload-initialized"})}),i.on("error",l),i.on("dispose",c),i.reloadSourceOnError=function(e){c(),t(i,e)}}(this,e)}),H}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ScrollTrigger",[],t):"object"==typeof exports?exports.ScrollTrigger=t():e.ScrollTrigger=t()}(window,function(){return i=[function(e,t){e.exports=function t(i,n){return null==i||null==n||Object.keys(n).forEach(function(e){"[object Object]"!=Object.prototype.toString.call(n[e])||"[object Object]"!=Object.prototype.toString.call(i[e])?i[e]=n[e]:i[e]=t(i[e],n[e])}),i}},function(e,t){Array.prototype.each=function(e){for(var t=this.length,i=0;i<t;i++){var n=this[i];n&&e(n,i)}},NodeList.prototype.each=Array.prototype.each,NodeList.prototype.filter=Array.prototype.filter},function(e,t,i){"use strict";i.r(t);function n(){this.trigger={once:!1,offset:{viewport:{x:0,y:0},element:{x:0,y:0}},toggle:{class:{in:"visible",out:"invisible"},callback:{in:null,visible:null,out:null}}},this.scroll={sustain:300,element:window,callback:function(){},start:function(){},stop:function(){},directionChange:function(){}}}var r=i(0),s=i.n(r);function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return Number(e)===e&&e%1==0}function l(e){return Number(e)===e&&e%1!=0}i(1);a(d.prototype,[{key:"checkVisibility",value:function(e,t){if(!this.active)return this.visible;var e={w:e.offsetWidth||e.innerWidth||0,h:e.offsetHeight||e.innerHeight||0},i=this.getBounds(),i=this._checkVisibility(i,e,t);if(i!==this.visible){this.visible=i;e=this._toggleCallback();e instanceof Promise?e.then(this._toggleClass.bind(this)).catch(function(e){console.error("Trigger promise failed"),console.error(e)}):this._toggleClass(),this.visible&&this.once&&(this.active=!1)}else if(i&&"function"==typeof this.toggle.callback.visible)return this.toggle.callback.visible.call(this.element,this);return i}},{key:"getBounds",value:function(){return this.element.getBoundingClientRect()}},{key:"_getElementOffset",value:function(e,t){var i={x:0,y:0};return"function"==typeof this.offset.element.x?i.x=e.width*this.offset.element.x(this,e,t):l(this.offset.element.x)?i.x=e.width*this.offset.element.x:o(this.offset.element.x)&&(i.x=this.offset.element.x),"function"==typeof this.offset.element.y?i.y=e.height*this.offset.element.y(this,e,t):l(this.offset.element.y)?i.y=e.height*this.offset.element.y:o(this.offset.element.y)&&(i.y=this.offset.element.y),i}},{key:"_getViewportOffset",value:function(e,t){var i={x:0,y:0};return"function"==typeof this.offset.viewport.x?i.x=e.w*this.offset.viewport.x(this,e,t):l(this.offset.viewport.x)?i.x=e.w*this.offset.viewport.x:o(this.offset.viewport.x)&&(i.x=this.offset.viewport.x),"function"==typeof this.offset.viewport.y?i.y=e.h*this.offset.viewport.y(this,e,t):l(this.offset.viewport.y)?i.y=e.h*this.offset.viewport.y:o(this.offset.viewport.y)&&(i.y=this.offset.viewport.y),i}},{key:"_checkVisibility",value:function(e,t,i){var n=this._getElementOffset(e,i),i=this._getViewportOffset(t,i),r=!0;return e.left-i.x<-(e.width-n.x)&&(r=!1),e.left+i.x>t.w-n.x&&(r=!1),e.top-i.y<-(e.height-n.y)&&(r=!1),r=e.top+i.y>t.h-n.y?!1:r}},{key:"_toggleClass",value:function(){var t=this;this.visible?(Array.isArray(this.toggle.class.in)?this.toggle.class.in.each(function(e){t.element.classList.add(e)}):this.element.classList.add(this.toggle.class.in),Array.isArray(this.toggle.class.out)?this.toggle.class.out.each(function(e){t.element.classList.remove(e)}):this.element.classList.remove(this.toggle.class.out)):(Array.isArray(this.toggle.class.in)?this.toggle.class.in.each(function(e){t.element.classList.remove(e)}):this.element.classList.remove(this.toggle.class.in),Array.isArray(this.toggle.class.out)?this.toggle.class.out.each(function(e){t.element.classList.add(e)}):this.element.classList.add(this.toggle.class.out))}},{key:"_toggleCallback",value:function(){if(this.visible){if("function"==typeof this.toggle.callback.in)return this.toggle.callback.in.call(this.element,this)}else if("function"==typeof this.toggle.callback.out)return this.toggle.callback.out.call(this.element,this)}}]);var c=d;function d(e,t){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.element=e,t=s()((new n).trigger,t),this.offset=t.offset,this.toggle=t.toggle,this.once=t.once,this.visible=null,this.active=!0}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}u(h.prototype,[{key:"add",value:function(e){var t=this;if(e instanceof c)return this.triggers.push(e);e.each(function(e){e instanceof c?t.triggers.push(e):console.error("Object added to TriggerCollection is not a Trigger. Object: ",e)})}},{key:"remove",value:function(e){e instanceof c&&(e=[e]),this.triggers=this.triggers.filter(function(t){var i=!1;return e.each(function(e){e==t&&(i=!0)}),!i})}},{key:"query",value:function(i){return this.triggers.filter(function(e){var e=e.element,t=e.parentNode;return-1<[].slice.call(t.querySelectorAll(i)).indexOf(e)})}},{key:"search",value:function(e){var t=this.triggers.filter(function(t){var i;return e instanceof NodeList||Array.isArray(e)?(i=!1,e.each(function(e){t.element==e&&(i=!0)}),i):t.element==e});return 0==t.length?null:1<t.length?t:t[0]}},{key:"call",value:function(e){this.triggers.each(e)}}]);r=h;function h(e){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.triggers=e instanceof Array?e:[]}function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}p(m.prototype,[{key:"_parseOptions",value:function(e){var t=(new n).scroll;"function"!=typeof e?(t.callback=function(){},t=s()(t,e)):t.callback=e,this.element=t.element,this.sustain=t.sustain,this.callback=t.callback,this.startCallback=t.start,this.stopCallback=t.stop,this.directionChange=t.directionChange}},{key:"_didScroll",value:function(){var e,t=this.getPosition();this.position!==t?(e=this.direction,(e=t.x!==this.position.x?t.x>this.position.x?"right":"left":t.y!==this.position.y?t.y>this.position.y?"bottom":"top":"none")!==this.direction&&(this.direction=e,"function"==typeof this.directionChange)&&this.directionChange(this.direction),this.position=t,this.lastAction=this._getTimestamp()):this.direction="none",this.running||this._startRun()}},{key:"_startRun",value:function(){this.running=!0,"function"==typeof this.startCallback&&this.startCallback(),this._loop()}},{key:"_stopRun",value:function(){this.running=!1,"function"==typeof this.stopCallback&&this.stopCallback()}},{key:"getPosition",value:function(){return{x:this.element.pageXOffset||this.element.scrollLeft||document.documentElement.scrollLeft||0,y:this.element.pageYOffset||this.element.scrollTop||document.documentElement.scrollTop||0}}},{key:"_getTimestamp",value:function(){return Number(Date.now())}},{key:"_tick",value:function(){this.callback(this.position,this.direction),this._getTimestamp()-this.lastAction>this.sustain&&this._stopRun(),this.running&&this._loop()}},{key:"_loop",value:function(){(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){setTimeout(e,1e3/60)})(this._tick.bind(this))}},{key:"kill",value:function(){this.running=!1,this.element.removeEventListener("scroll",this._boundListener)}}]);var f=m;function m(e,t){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this._parseOptions(e),"function"==typeof t&&(this.callback=t),this.direction="none",this.position=this.getPosition(),this.lastAction=this._getTimestamp(),this._startRun(),this._boundListener=this._didScroll.bind(this),this.element.addEventListener("scroll",this._boundListener)}function g(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.d(t,"Trigger",function(){return v}),i.d(t,"TriggerCollection",function(){return y}),i.d(t,"ScrollAnimationLoop",function(){return _}),i.d(t,"default",function(){return b});var v=c,y=r,_=f,b=(g(T.prototype,[{key:"_parseOptions",value:function(e){e=s()(new n,e),this.defaultTrigger=e.trigger,this.scrollOptions=e.scroll}},{key:"_initCollection",value:function(){var e=document.querySelectorAll("[data-scroll]"),t=[];0<e.length&&(t=this.createTriggers(e)),this.collection=new y(t)}},{key:"_initLoop",value:function(){var i=this;this.loop=new _({sustain:this.scrollOptions.sustain,element:this.scrollOptions.element,callback:function(e,t){i._scrollCallback(e,t)},start:function(){i._scrollStart()},stop:function(){i._scrollStop()},directionChange:function(e){i._scrollDirectionChange(e)}})}},{key:"_scrollCallback",value:function(e,t){var i=this;this.collection.call(function(e){e.checkVisibility(i.scrollOptions.element,t)}),this.scrollOptions.callback(e,t)}},{key:"_scrollStart",value:function(){this.scrollOptions.start()}},{key:"_scrollStop",value:function(){this.scrollOptions.stop()}},{key:"_scrollDirectionChange",value:function(e){this.scrollOptions.directionChange(e)}},{key:"createTrigger",value:function(e,t){return new v(e,s()(this.defaultTrigger,t))}},{key:"createTriggers",value:function(e,t){var i=this,n=[];return e.each(function(e){n.push(i.createTrigger(e,t))}),n}},{key:"add",value:function(e,t){return e instanceof HTMLElement?this.collection.add(this.createTrigger(e,t)):e instanceof v?this.collection.add(e):e instanceof NodeList?this.collection.add(this.createTriggers(e,t)):Array.isArray(e)&&e.length&&e[0]instanceof v?this.collection.add(e):Array.isArray(e)&&e.length&&e[0]instanceof HTMLElement?this.collection.add(this.createTriggers(e,t)):this.collection.add(this.createTriggers(document.querySelectorAll(e),t)),this}},{key:"remove",value:function(e){return e instanceof v||Array.isArray(e)&&e.length&&e[0]instanceof v?this.collection.remove(e):e instanceof HTMLElement||Array.isArray(e)&&e.length&&e[0]instanceof HTMLElement||e instanceof NodeList?this.collection.remove(this.search(e)):Array.isArray(e)&&e.length&&e[0]instanceof v?this.collection.remove(e):this.collection.remove(this.query(e.toString())),this}},{key:"query",value:function(e){return this.collection.query(e)}},{key:"search",value:function(e){return this.collection.search(e)}},{key:"listen",value:function(){this.loop||this._initLoop()}},{key:"kill",value:function(){this.loop.kill(),this.loop=null}}]),T);function T(e){if(!(this instanceof T))throw new TypeError("Cannot call a class as a function");this._parseOptions(e),this._initCollection(),this._initLoop()}}],n={},r.m=i,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2);function r(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},i[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}var i,n}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Swiper=t()}(this,function(){"use strict";function n(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function r(t,i){void 0===t&&(t={}),void 0===i&&(i={}),Object.keys(i).forEach(e=>{void 0===t[e]?t[e]=i[e]:n(i[e])&&n(t[e])&&0<Object.keys(i[e]).length&&r(t[e],i[e])})}const t={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function A(){var e="undefined"!=typeof document?document:{};return r(e,t),e}const _={document:t,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function P(){var e="undefined"!=typeof window?window:{};return r(e,_),e}function S(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function v(){return Date.now()}function L(e,t){void 0===t&&(t="x");var i=P();let n,r,s;e=function(e){var t=P();let i;return i=(i=!(i=t.getComputedStyle?t.getComputedStyle(e,null):i)&&e.currentStyle?e.currentStyle:i)||e.style}(e);return i.WebKitCSSMatrix?(6<(r=e.transform||e.webkitTransform).split(",").length&&(r=r.split(", ").map(e=>e.replace(",",".")).join(", ")),s=new i.WebKitCSSMatrix("none"===r?"":r)):(s=e.MozTransform||e.OTransform||e.MsTransform||e.msTransform||e.transform||e.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=s.toString().split(",")),"x"===t&&(r=i.WebKitCSSMatrix?s.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),(r="y"===t?i.WebKitCSSMatrix?s.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5]):r)||0}function c(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function p(e){const i=Object(arguments.length<=0?void 0:e),t=["__proto__","constructor","prototype"];for(let e=1;e<arguments.length;e+=1){var n=e<0||arguments.length<=e?void 0:arguments[e];if(null!=n&&(o=n,!("undefined"!=typeof window&&void 0!==window.HTMLElement?o instanceof HTMLElement:o&&(1===o.nodeType||11===o.nodeType)))){var r=Object.keys(Object(n)).filter(e=>t.indexOf(e)<0);for(let e=0,t=r.length;e<t;e+=1){var s=r[e],a=Object.getOwnPropertyDescriptor(n,s);void 0!==a&&a.enumerable&&(c(i[s])&&c(n[s])?n[s].__swiper__?i[s]=n[s]:p(i[s],n[s]):c(i[s])||!c(n[s])||(i[s]={},n[s].__swiper__)?i[s]=n[s]:p(i[s],n[s]))}}}var o;return i}function C(e,t,i){e.style.setProperty(t,i)}function y(e){let{swiper:i,targetPosition:n,side:r}=e;const s=P(),a=-i.translate;let o,l=null;const c=i.params.speed,d=(i.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(i.cssModeFrameID),n>a?"next":"prev"),u=(e,t)=>"next"===d&&t<=e||"prev"===d&&e<=t,h=()=>{o=(new Date).getTime(),null===l&&(l=o);var e=Math.max(Math.min((o-l)/c,1),0),e=.5-Math.cos(e*Math.PI)/2;let t=a+e*(n-a);u(t,n)&&(t=n),i.wrapperEl.scrollTo({[r]:t}),u(t,n)?(i.wrapperEl.style.overflow="hidden",i.wrapperEl.style.scrollSnapType="",setTimeout(()=>{i.wrapperEl.style.overflow="",i.wrapperEl.scrollTo({[r]:t})}),s.cancelAnimationFrame(i.cssModeFrameID)):i.cssModeFrameID=s.requestAnimationFrame(h)};h()}function s(e){return e.querySelector(".swiper-slide-transform")||e.shadowEl&&e.shadowEl.querySelector(".swiper-slide-transform")||e}function I(e,t){return void 0===t&&(t=""),[...e.children].filter(e=>e.matches(t))}function O(e,t){void 0===t&&(t=[]);e=document.createElement(e);return e.classList.add(...Array.isArray(t)?t:[t]),e}function M(e){var t=P(),i=A(),n=e.getBoundingClientRect(),i=i.body,r=e.clientTop||i.clientTop||0,i=e.clientLeft||i.clientLeft||0,s=e===t?t.scrollY:e.scrollTop,t=e===t?t.scrollX:e.scrollLeft;return{top:n.top+s-r,left:n.left+t-i}}function D(e,t){return P().getComputedStyle(e,null).getPropertyValue(t)}function w(e){let t,i=e;if(i){for(t=0;null!==(i=i.previousSibling);)1===i.nodeType&&(t+=1);return t}}function j(e,t){var i=[];let n=e.parentElement;for(;n;)t&&!n.matches(t)||i.push(n),n=n.parentElement;return i}function m(i,n){n&&i.addEventListener("transitionend",function e(t){t.target===i&&(n.call(i,t),i.removeEventListener("transitionend",e))})}function N(e,t,i){var n=P();return i?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}let i,l,d;function h(){return i=i||(e=P(),{smoothScroll:(t=A()).documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)});var e,t}function a(e){var{swiper:e,runCallbacks:t,direction:i,step:n}=e,{activeIndex:r,previousIndex:s}=e;let a=i;if(a=a||(s<r?"next":r<s?"prev":"reset"),e.emit("transition"+n),t&&r!==s){if("reset"===a)return e.emit("slideResetTransition"+n);e.emit("slideChangeTransition"+n),"next"===a?e.emit("slideNextTransition"+n):e.emit("slidePrevTransition"+n)}}let B;function U(){const e=this,{params:t,el:i}=e;var n,r,s,a,o;i&&0===i.offsetWidth||(t.breakpoints&&e.setBreakpoint(),{allowSlideNext:n,allowSlidePrev:r,snapGrid:s}=e,a=e.virtual&&e.params.virtual.enabled,e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),o=a&&t.loop,!("auto"===t.slidesPerView||1<t.slidesPerView)||!e.isEnd||e.isBeginning||e.params.centeredSlides||o?e.params.loop&&!a?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(B),B=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=r,e.allowSlideNext=n,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow())}const o=(e,t)=>{if(e&&!e.destroyed&&e.params){var i=t.closest(e.isElement?"swiper-slide":"."+e.params.slideClass);if(i){const t=i.querySelector("."+e.params.lazyPreloaderClass);t&&t.remove()}}};let F=!1;function $(){}const H=(e,t)=>{var i=A(),{params:n,el:r,wrapperEl:s,device:a}=e,o=!!n.nested,l="on"===t?"addEventListener":"removeEventListener";r[l]("pointerdown",e.onTouchStart,{passive:!1}),i[l]("pointermove",e.onTouchMove,{passive:!1,capture:o}),i[l]("pointerup",e.onTouchEnd,{passive:!0}),i[l]("pointercancel",e.onTouchEnd,{passive:!0}),i[l]("pointerout",e.onTouchEnd,{passive:!0}),i[l]("pointerleave",e.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&r[l]("click",e.onClick,!0),n.cssMode&&s[l]("scroll",e.onScroll),n.updateOnWindowResize?e[t](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",U,!0):e[t]("observerUpdate",U,!0),r[l]("load",e.onLoad,{capture:!0})},q=(e,t)=>e.grid&&t.grid&&1<t.grid.rows;var z={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",runCallbacksOnInit:!0,_emitClasses:!1};const u={eventsEmitter:{on(e,t,i){const n=this;if(n.eventsListeners&&!n.destroyed&&"function"==typeof t){const r=i?"unshift":"push";e.split(" ").forEach(e=>{n.eventsListeners[e]||(n.eventsListeners[e]=[]),n.eventsListeners[e][r](t)})}return n},once(n,r,e){const s=this;return!s.eventsListeners||s.destroyed||"function"!=typeof r?s:(a.__emitterProxy=r,s.on(n,a,e));function a(){s.off(n,a),a.__emitterProxy&&delete a.__emitterProxy;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r.apply(s,t)}},onAny(e,t){return this.eventsListeners&&!this.destroyed&&"function"==typeof e&&(t=t?"unshift":"push",this.eventsAnyListeners.indexOf(e)<0)&&this.eventsAnyListeners[t](e),this},offAny(e){return this.eventsListeners&&!this.destroyed&&this.eventsAnyListeners&&0<=(e=this.eventsAnyListeners.indexOf(e))&&this.eventsAnyListeners.splice(e,1),this},off(e,n){const r=this;return!r.eventsListeners||r.destroyed||r.eventsListeners&&e.split(" ").forEach(i=>{void 0===n?r.eventsListeners[i]=[]:r.eventsListeners[i]&&r.eventsListeners[i].forEach((e,t)=>{(e===n||e.__emitterProxy&&e.__emitterProxy===n)&&r.eventsListeners[i].splice(t,1)})}),r},emit(){const r=this;if(r.eventsListeners&&!r.destroyed&&r.eventsListeners){let e,i,n;for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];n="string"==typeof s[0]||Array.isArray(s[0])?(e=s[0],i=s.slice(1,s.length),r):(e=s[0].events,i=s[0].data,s[0].context||r),i.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach(t=>{r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach(e=>{e.apply(n,[t,...i])}),r.eventsListeners&&r.eventsListeners[t]&&r.eventsListeners[t].forEach(e=>{e.apply(n,i)})})}return r}},update:{updateSize:function(){var e=this;let t,i;var n=e.el;t=void 0!==e.params.width&&null!==e.params.width?e.params.width:n.clientWidth,i=void 0!==e.params.height&&null!==e.params.height?e.params.height:n.clientHeight,0===t&&e.isHorizontal()||0===i&&e.isVertical()||(t=t-parseInt(D(n,"padding-left")||0,10)-parseInt(D(n,"padding-right")||0,10),i=i-parseInt(D(n,"padding-top")||0,10)-parseInt(D(n,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(i)&&(i=0),Object.assign(e,{width:t,height:i,size:e.isHorizontal()?t:i}))},updateSlides:function(){const n=this;function r(e){return n.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}function s(e,t){return parseFloat(e.getPropertyValue(r(t))||0)}const a=n.params,{wrapperEl:o,slidesEl:e,size:l,rtlTranslate:c,wrongRTL:d}=n,t=n.virtual&&a.virtual.enabled,u=(t?n.virtual:n).slides.length,h=I(e,`.${n.params.slideClass}, swiper-slide`),p=(t?n.virtual.slides:h).length;let f=[];const m=[],g=[];let v=a.slidesOffsetBefore,y=("function"==typeof v&&(v=a.slidesOffsetBefore.call(n)),a.slidesOffsetAfter);"function"==typeof y&&(y=a.slidesOffsetAfter.call(n));var _=n.snapGrid.length,b=n.slidesGrid.length;let T=a.spaceBetween,w=-v,x=0,S=0;if(void 0!==l){"string"==typeof T&&0<=T.indexOf("%")&&(T=parseFloat(T.replace("%",""))/100*l),n.virtualSize=-T,h.forEach(e=>{c?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""}),a.centeredSlides&&a.cssMode&&(C(o,"--swiper-centered-offset-before",""),C(o,"--swiper-centered-offset-after",""));var k=a.grid&&1<a.grid.rows&&n.grid;let i;k&&n.grid.initSlides(p);var E="auto"===a.slidesPerView&&a.breakpoints&&0<Object.keys(a.breakpoints).filter(e=>void 0!==a.breakpoints[e].slidesPerView).length;for(let t=0;t<p;t+=1){let e;if(i=0,h[t]&&(e=h[t]),k&&n.grid.updateSlide(t,e,p,r),!h[t]||"none"!==D(e,"display")){if("auto"===a.slidesPerView){E&&(h[t].style[r("width")]="");const l=getComputedStyle(e),c=e.style.transform,d=e.style.webkitTransform;if(c&&(e.style.transform="none"),d&&(e.style.webkitTransform="none"),a.roundLengths)i=n.isHorizontal()?N(e,"width",!0):N(e,"height",!0);else{const n=s(l,"width"),r=s(l,"padding-left"),a=s(l,"padding-right"),o=s(l,"margin-left"),c=s(l,"margin-right"),d=l.getPropertyValue("box-sizing");if(d&&"border-box"===d)i=n+o+c;else{const{clientWidth:s,offsetWidth:l}=e;i=n+r+a+o+c+(l-s)}}c&&(e.style.transform=c),d&&(e.style.webkitTransform=d),a.roundLengths&&(i=Math.floor(i))}else i=(l-(a.slidesPerView-1)*T)/a.slidesPerView,a.roundLengths&&(i=Math.floor(i)),h[t]&&(h[t].style[r("width")]=i+"px");h[t]&&(h[t].swiperSlideSize=i),g.push(i),a.centeredSlides?(w=w+i/2+x/2+T,0===x&&0!==t&&(w=w-l/2-T),0===t&&(w=w-l/2-T),Math.abs(w)<.001&&(w=0),a.roundLengths&&(w=Math.floor(w)),S%a.slidesPerGroup==0&&f.push(w),m.push(w)):(a.roundLengths&&(w=Math.floor(w)),(S-Math.min(n.params.slidesPerGroupSkip,S))%n.params.slidesPerGroup==0&&f.push(w),m.push(w),w=w+i+T),n.virtualSize+=i+T,x=i,S+=1}}if(n.virtualSize=Math.max(n.virtualSize,l)+y,c&&d&&("slide"===a.effect||"coverflow"===a.effect)&&(o.style.width=n.virtualSize+a.spaceBetween+"px"),a.setWrapperSize&&(o.style[r("width")]=n.virtualSize+a.spaceBetween+"px"),k&&n.grid.updateWrapperSize(i,f,r),!a.centeredSlides){const r=[];for(let t=0;t<f.length;t+=1){let e=f[t];a.roundLengths&&(e=Math.floor(e)),f[t]<=n.virtualSize-l&&r.push(e)}f=r,1<Math.floor(n.virtualSize-l)-Math.floor(f[f.length-1])&&f.push(n.virtualSize-l)}if(t&&a.loop){const r=g[0]+T;if(1<a.slidesPerGroup){const s=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/a.slidesPerGroup),o=r*a.slidesPerGroup;for(let e=0;e<s;e+=1)f.push(f[f.length-1]+o)}for(let e=0;e<n.virtual.slidesBefore+n.virtual.slidesAfter;e+=1)1===a.slidesPerGroup&&f.push(f[f.length-1]+r),m.push(m[m.length-1]+r),n.virtualSize+=r}if(0===f.length&&(f=[0]),0!==a.spaceBetween){const s=n.isHorizontal()&&c?"marginLeft":r("marginRight");h.filter((e,t)=>!(a.cssMode&&!a.loop)||t!==h.length-1).forEach(e=>{e.style[s]=T+"px"})}if(a.centeredSlides&&a.centeredSlidesBounds){let t=0;g.forEach(e=>{t+=e+(a.spaceBetween||0)});const r=(t-=a.spaceBetween)-l;f=f.map(e=>e<0?-v:e>r?r+y:e)}if(a.centerInsufficientSlides){let t=0;if(g.forEach(e=>{t+=e+(a.spaceBetween||0)}),(t-=a.spaceBetween)<l){const r=(l-t)/2;f.forEach((e,t)=>{f[t]=e-r}),m.forEach((e,t)=>{m[t]=e+r})}}if(Object.assign(n,{slides:h,snapGrid:f,slidesGrid:m,slidesSizesGrid:g}),a.centeredSlides&&a.cssMode&&!a.centeredSlidesBounds){C(o,"--swiper-centered-offset-before",-f[0]+"px"),C(o,"--swiper-centered-offset-after",n.size/2-g[g.length-1]/2+"px");const r=-n.snapGrid[0],s=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(e=>e+r),n.slidesGrid=n.slidesGrid.map(e=>e+s)}if(p!==u&&n.emit("slidesLengthChange"),f.length!==_&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),m.length!==b&&n.emit("slidesGridLengthChange"),a.watchSlidesProgress&&n.updateSlidesOffset(),!(t||a.cssMode||"slide"!==a.effect&&"fade"!==a.effect)){const r=a.containerModifierClass+"backface-hidden",s=n.el.classList.contains(r);p<=a.maxBackfaceHiddenSlides?s||n.el.classList.add(r):s&&n.el.classList.remove(r)}}},updateAutoHeight:function(e){const t=this,i=[],n=t.virtual&&t.params.virtual.enabled;let r,s=0;"number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);var a=e=>n?t.getSlideIndexByData(e):t.slides[e];if("auto"!==t.params.slidesPerView&&1<t.params.slidesPerView)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(e=>{i.push(e)});else for(r=0;r<Math.ceil(t.params.slidesPerView);r+=1){const e=t.activeIndex+r;if(e>t.slides.length&&!n)break;i.push(a(e))}else i.push(a(t.activeIndex));for(r=0;r<i.length;r+=1)if(void 0!==i[r]){const e=i[r].offsetHeight;s=e>s?e:s}!s&&0!==s||(t.wrapperEl.style.height=s+"px")},updateSlidesOffset:function(){var t=this.slides,i=this.isElement?this.isHorizontal()?this.wrapperEl.offsetLeft:this.wrapperEl.offsetTop:0;for(let e=0;e<t.length;e+=1)t[e].swiperSlideOffset=(this.isHorizontal()?t[e].offsetLeft:t[e].offsetTop)-i},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const n=this,r=n.params,{slides:s,rtlTranslate:a,snapGrid:o}=n;if(0!==s.length){void 0===s[0].swiperSlideOffset&&n.updateSlidesOffset();let i=a?e:-e;s.forEach(e=>{e.classList.remove(r.slideVisibleClass)}),n.visibleSlidesIndexes=[],n.visibleSlides=[];for(let t=0;t<s.length;t+=1){var l=s[t];let e=l.swiperSlideOffset;r.cssMode&&r.centeredSlides&&(e-=s[0].swiperSlideOffset);var c=(i+(r.centeredSlides?n.minTranslate():0)-e)/(l.swiperSlideSize+r.spaceBetween),d=(i-o[0]+(r.centeredSlides?n.minTranslate():0)-e)/(l.swiperSlideSize+r.spaceBetween),u=-(i-e),h=u+n.slidesSizesGrid[t];(0<=u&&u<n.size-1||1<h&&h<=n.size||u<=0&&h>=n.size)&&(n.visibleSlides.push(l),n.visibleSlidesIndexes.push(t),s[t].classList.add(r.slideVisibleClass)),l.progress=a?-c:c,l.originalProgress=a?-d:d}}},updateProgress:function(e){var t=this;if(void 0===e){const i=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*i||0}const i=t.params,n=t.maxTranslate()-t.minTranslate();let{progress:r,isBeginning:s,isEnd:a,progressLoop:o}=t;const l=s,c=a;if(0===n)r=0,s=!0,a=!0;else{r=(e-t.minTranslate())/n;const i=Math.abs(e-t.minTranslate())<1,o=Math.abs(e-t.maxTranslate())<1;s=i||r<=0,a=o||1<=r,i&&(r=0),o&&(r=1)}if(i.loop){const i=t.getSlideIndexByData(0),n=t.getSlideIndexByData(t.slides.length-1),r=t.slidesGrid[i],s=t.slidesGrid[n],a=t.slidesGrid[t.slidesGrid.length-1],l=Math.abs(e);1<(o=l>=r?(l-r)/a:(l+a-s)/a)&&--o}Object.assign(t,{progress:r,progressLoop:o,isBeginning:s,isEnd:a}),(i.watchSlidesProgress||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),s&&!l&&t.emit("reachBeginning toEdge"),a&&!c&&t.emit("reachEnd toEdge"),(l&&!s||c&&!a)&&t.emit("fromEdge"),t.emit("progress",r)},updateSlidesClasses:function(){const{slides:i,params:n,slidesEl:t,activeIndex:r}=this,e=this.virtual&&n.virtual.enabled,s=e=>I(t,`.${n.slideClass}${e}, swiper-slide`+e)[0];let a;if(i.forEach(e=>{e.classList.remove(n.slideActiveClass,n.slideNextClass,n.slidePrevClass)}),e)if(n.loop){let e=r-this.virtual.slidesBefore;(e=e<0?this.virtual.slides.length+e:e)>=this.virtual.slides.length&&(e-=this.virtual.slides.length),a=s(`[data-swiper-slide-index="${e}"]`)}else a=s(`[data-swiper-slide-index="${r}"]`);else a=i[r];if(a){a.classList.add(n.slideActiveClass);let e=function(e,t){for(var i=[];e.nextElementSibling;){var n=e.nextElementSibling;t&&!n.matches(t)||i.push(n),e=n}return i}(a,`.${n.slideClass}, swiper-slide`)[0],t=((e=n.loop&&!e?i[0]:e)&&e.classList.add(n.slideNextClass),function(e,t){for(var i=[];e.previousElementSibling;){var n=e.previousElementSibling;t&&!n.matches(t)||i.push(n),e=n}return i}(a,`.${n.slideClass}, swiper-slide`)[0]);(t=n.loop&&0===!t?i[i.length-1]:t)&&t.classList.add(n.slidePrevClass)}this.emitSlidesClasses()},updateActiveIndex:function(e){const i=this,t=i.rtlTranslate?i.translate:-i.translate,{snapGrid:n,params:r,activeIndex:s,realIndex:a,snapIndex:o}=i;let l,c=e;var e=e=>{let t=e-i.virtual.slidesBefore;return(t=t<0?i.virtual.slides.length+t:t)>=i.virtual.slides.length&&(t-=i.virtual.slides.length),t};if(void 0===c&&(c=function(e){var{slidesGrid:t,params:i}=e,n=e.rtlTranslate?e.translate:-e.translate;let r;for(let e=0;e<t.length;e+=1)void 0!==t[e+1]?n>=t[e]&&n<t[e+1]-(t[e+1]-t[e])/2?r=e:n>=t[e]&&n<t[e+1]&&(r=e+1):n>=t[e]&&(r=e);return r=i.normalizeSlideIndex&&(r<0||void 0===r)?0:r}(i)),0<=n.indexOf(t))l=n.indexOf(t);else{const e=Math.min(r.slidesPerGroupSkip,c);l=e+Math.floor((c-e)/r.slidesPerGroup)}l>=n.length&&(l=n.length-1),c===s?(l!==o&&(i.snapIndex=l,i.emit("snapIndexChange")),i.params.loop&&i.virtual&&i.params.virtual.enabled&&(i.realIndex=e(c))):(e=i.virtual&&r.virtual.enabled&&r.loop?e(c):i.slides[c]?parseInt(i.slides[c].getAttribute("data-swiper-slide-index")||c,10):c,Object.assign(i,{snapIndex:l,realIndex:e,previousIndex:s,activeIndex:c}),i.emit("activeIndexChange"),i.emit("snapIndexChange"),a!==e&&i.emit("realIndexChange"),(i.initialized||i.params.runCallbacksOnInit)&&i.emit("slideChange"))},updateClickedSlide:function(e){var t=this,i=t.params,n=e.closest(`.${i.slideClass}, swiper-slide`);let r,s=!1;if(n)for(let e=0;e<t.slides.length;e+=1)if(t.slides[e]===n){s=!0,r=e;break}n&&s?(t.clickedSlide=n,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(n.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=r,i.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()):(t.clickedSlide=void 0,t.clickedIndex=void 0)}},translate:{getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var{params:t,rtlTranslate:i,translate:n,wrapperEl:r}=this;if(t.virtualTranslate)return i?-n:n;if(t.cssMode)return n;let s=L(r,e);return(s=i?-s:s)||0},setTranslate:function(e,t){var i=this,{rtlTranslate:n,params:r,wrapperEl:s,progress:a}=i;let o=0,l=0;i.isHorizontal()?o=n?-e:e:l=e,r.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),r.cssMode?s[i.isHorizontal()?"scrollLeft":"scrollTop"]=i.isHorizontal()?-o:-l:r.virtualTranslate||(s.style.transform=`translate3d(${o}px, ${l}px, 0px)`),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?o:l;n=i.maxTranslate()-i.minTranslate();(0==n?0:(e-i.minTranslate())/n)!==a&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,i,n,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0),void 0===n&&(n=!0);const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;var l=s.minTranslate(),c=s.maxTranslate(),l=n&&l<e?l:n&&e<c?c:e;if(s.updateProgress(l),a.cssMode){const e=s.isHorizontal();if(0===t)o[e?"scrollLeft":"scrollTop"]=-l;else{if(!s.support.smoothScroll)return y({swiper:s,targetPosition:-l,side:e?"left":"top"}),!0;o.scrollTo({[e?"left":"top"]:-l,behavior:"smooth"})}}else 0===t?(s.setTransition(0),s.setTranslate(l),i&&(s.emit("beforeTransitionStart",t,r),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(l),i&&(s.emit("beforeTransitionStart",t,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,i)&&s.emit("transitionEnd")}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd)));return!0}},transition:{setTransition:function(e,t){this.params.cssMode||(this.wrapperEl.style.transitionDuration=e+"ms"),this.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var i=this["params"];i.cssMode||(i.autoHeight&&this.updateAutoHeight(),a({swiper:this,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);var i=this["params"];this.animating=!1,i.cssMode||(this.setTransition(0),a({swiper:this,runCallbacks:e,direction:t,step:"End"}))}},slide:{slideTo:function(e,t,i,n,r){void 0===t&&(t=this.params.speed),void 0===i&&(i=!0),"string"==typeof(e=void 0===e?0:e)&&(e=parseInt(e,10));const s=this;let a=e;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:d,activeIndex:u,rtlTranslate:h,wrapperEl:p,enabled:f}=s;if(s.animating&&o.preventInteractionOnTransition||!f&&!n&&!r)return!1;e=Math.min(s.params.slidesPerGroupSkip,a);let m=e+Math.floor((a-e)/s.params.slidesPerGroup);var g=-l[m=m>=l.length?l.length-1:m];if(o.normalizeSlideIndex)for(let e=0;e<c.length;e+=1){const t=-Math.floor(100*g),i=Math.floor(100*c[e]),n=Math.floor(100*c[e+1]);void 0!==c[e+1]?t>=i&&t<n-(n-i)/2?a=e:t>=i&&t<n&&(a=e+1):t>=i&&(a=e)}if(s.initialized&&a!==u){if(!s.allowSlideNext&&g<s.translate&&g<s.minTranslate())return!1;if(!s.allowSlidePrev&&g>s.translate&&g>s.maxTranslate()&&(u||0)!==a)return!1}let v;if(a!==(d||0)&&i&&s.emit("beforeSlideChangeStart"),s.updateProgress(g),v=a>u?"next":a<u?"prev":"reset",h&&-g===s.translate||!h&&g===s.translate)return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==o.effect&&s.setTranslate(g),"reset"!=v&&(s.transitionStart(i,v),s.transitionEnd(i,v)),!1;if(o.cssMode){const e=s.isHorizontal(),i=h?g:-g;if(0===t){const t=s.virtual&&s.params.virtual.enabled;t&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),t&&!s._cssModeVirtualInitialSet&&0<s.params.initialSlide?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[e?"scrollLeft":"scrollTop"]=i})):p[e?"scrollLeft":"scrollTop"]=i,t&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return y({swiper:s,targetPosition:i,side:e?"left":"top"}),!0;p.scrollTo({[e?"left":"top"]:i,behavior:"smooth"})}}else s.setTransition(t),s.setTranslate(g),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,n),s.transitionStart(i,v),0===t?s.transitionEnd(i,v):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(i,v))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd));return!0},slideToLoop:function(e,t,i,n){void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);let r=e="string"==typeof(e=void 0===e?0:e)?parseInt(e,10):e;return this.params.loop&&(this.virtual&&this.params.virtual.enabled?r+=this.virtual.slidesBefore:r=this.getSlideIndexByData(r)),this.slideTo(r,t,i,n)},slideNext:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var n=this,{enabled:r,params:s,animating:a}=n;if(!r)return n;let o=s.slidesPerGroup;"auto"===s.slidesPerView&&1===s.slidesPerGroup&&s.slidesPerGroupAuto&&(o=Math.max(n.slidesPerViewDynamic("current",!0),1));var r=n.activeIndex<s.slidesPerGroupSkip?1:o,l=n.virtual&&s.virtual.enabled;if(s.loop){if(a&&!l&&s.loopPreventsSliding)return!1;n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft}return s.rewind&&n.isEnd?n.slideTo(0,e,t,i):n.slideTo(n.activeIndex+r,e,t,i)},slidePrev:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const n=this,{params:r,snapGrid:s,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=n;if(!l)return n;var d=n.virtual&&r.virtual.enabled;if(r.loop){if(c&&!d&&r.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const h=u(o?n.translate:-n.translate),p=s.map(e=>u(e));let f=s[p.indexOf(h)-1];if(void 0===f&&r.cssMode){let i;s.forEach((e,t)=>{h>=e&&(i=t)}),void 0!==i&&(f=s[0<i?i-1:i])}let m=0;if(void 0!==f&&((m=a.indexOf(f))<0&&(m=n.activeIndex-1),"auto"===r.slidesPerView)&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(m=m-n.slidesPerViewDynamic("previous",!0)+1,m=Math.max(m,0)),r.rewind&&n.isBeginning){const r=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(r,e,t,i)}return n.slideTo(m,e,t,i)},slideReset:function(e,t,i){return void 0===e&&(e=this.params.speed),this.slideTo(this.activeIndex,e,t=void 0===t?!0:t,i)},slideToClosest:function(e,t,i,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===n&&(n=.5);var r=this;let s=r.activeIndex;var a=Math.min(r.params.slidesPerGroupSkip,s),a=a+Math.floor((s-a)/r.params.slidesPerGroup),o=r.rtlTranslate?r.translate:-r.translate;if(o>=r.snapGrid[a]){const e=r.snapGrid[a];o-e>(r.snapGrid[a+1]-e)*n&&(s+=r.params.slidesPerGroup)}else{const e=r.snapGrid[a-1];o-e<=(r.snapGrid[a]-e)*n&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,e,t,i)},slideToClickedSlide:function(){const e=this,{params:t,slidesEl:i}=e,n="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let r,s=e.clickedIndex;var a=e.isElement?"swiper-slide":"."+t.slideClass;t.loop?e.animating||(r=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?s<e.loopedSlides-n/2||s>e.slides.length-e.loopedSlides+n/2?(e.loopFix(),s=e.getSlideIndex(I(i,a+`[data-swiper-slide-index="${r}"]`)[0]),S(()=>{e.slideTo(s)})):e.slideTo(s):s>e.slides.length-n?(e.loopFix(),s=e.getSlideIndex(I(i,a+`[data-swiper-slide-index="${r}"]`)[0]),S(()=>{e.slideTo(s)})):e.slideTo(s)):e.slideTo(s)}},loop:{loopCreate:function(e){var{params:t,slidesEl:i}=this;!t.loop||this.virtual&&this.params.virtual.enabled||(I(i,`.${t.slideClass}, swiper-slide`).forEach((e,t)=>{e.setAttribute("data-swiper-slide-index",t)}),this.loopFix({slideRealIndex:e,direction:t.centeredSlides?void 0:"next"}))},loopFix:function(r){let{slideRealIndex:s,slideTo:a=!0,direction:o,setTranslate:l,activeSlideIndex:c,byController:d,byMousewheel:u}=void 0===r?{}:r;const h=this;if(h.params.loop){h.emit("beforeLoopFix");const{slides:g,allowSlidePrev:v,allowSlideNext:y,slidesEl:_,params:b}=h;if(h.allowSlidePrev=!0,h.allowSlideNext=!0,h.virtual&&b.virtual.enabled)a&&(b.centeredSlides||0!==h.snapIndex?b.centeredSlides&&h.snapIndex<b.slidesPerView?h.slideTo(h.virtual.slides.length+h.snapIndex,0,!1,!0):h.snapIndex===h.snapGrid.length-1&&h.slideTo(h.virtual.slidesBefore,0,!1,!0):h.slideTo(h.virtual.slides.length,0,!1,!0)),h.allowSlidePrev=v,h.allowSlideNext=y;else{r="auto"===b.slidesPerView?h.slidesPerViewDynamic():Math.ceil(parseFloat(b.slidesPerView,10));let t=b.loopedSlides||r;t%b.slidesPerGroup!=0&&(t+=b.slidesPerGroup-t%b.slidesPerGroup),h.loopedSlides=t;var p=[],f=[];let e=h.activeIndex;void 0===c?c=h.getSlideIndex(h.slides.filter(e=>e.classList.contains(b.slideActiveClass))[0]):e=c;var r="next"===o||!o,m="prev"===o||!o;let i=0,n=0;if(c<t){i=Math.max(t-c,b.slidesPerGroup);for(let e=0;e<t-c;e+=1){const s=e-Math.floor(e/g.length)*g.length;p.push(g.length-s-1)}}else if(c>h.slides.length-2*t){n=Math.max(c-(h.slides.length-2*t),b.slidesPerGroup);for(let e=0;e<n;e+=1){const s=e-Math.floor(e/g.length)*g.length;f.push(s)}}if(m&&p.forEach(e=>{_.prepend(h.slides[e])}),r&&f.forEach(e=>{_.append(h.slides[e])}),h.recalcSlides(),b.watchSlidesProgress&&h.updateSlidesOffset(),a)if(0<p.length&&m)if(void 0===s){const r=h.slidesGrid[e],s=h.slidesGrid[e+i]-r;u?h.setTranslate(h.translate-s):(h.slideTo(e+i,0,!1,!0),l&&(h.touches[h.isHorizontal()?"startX":"startY"]+=s))}else l&&h.slideToLoop(s,0,!1,!0);else if(0<f.length&&r)if(void 0===s){const r=h.slidesGrid[e],s=h.slidesGrid[e-n]-r;u?h.setTranslate(h.translate-s):(h.slideTo(e-n,0,!1,!0),l&&(h.touches[h.isHorizontal()?"startX":"startY"]+=s))}else h.slideToLoop(s,0,!1,!0);if(h.allowSlidePrev=v,h.allowSlideNext=y,h.controller&&h.controller.control&&!d){const r={slideRealIndex:s,slideTo:!1,direction:o,setTranslate:l,activeSlideIndex:c,byController:!0};Array.isArray(h.controller.control)?h.controller.control.forEach(e=>{!e.destroyed&&e.params.loop&&e.loopFix(r)}):h.controller.control instanceof h.constructor&&h.controller.control.params.loop&&h.controller.control.loopFix(r)}}h.emit("loopFix")}},loopDestroy:function(){const{params:e,slidesEl:t}=this;if(!(!e.loop||this.virtual&&this.params.virtual.enabled)){this.recalcSlides();const i=[];this.slides.forEach(e=>{var t=void 0===e.swiperSlideIndex?+e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;i[t]=e}),this.slides.forEach(e=>{e.removeAttribute("data-swiper-slide-index")}),i.forEach(e=>{t.append(e)}),this.recalcSlides(),this.slideTo(this.realIndex,0)}}},grabCursor:{setGrabCursor:function(e){const t=this;var i;!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode||(i="container"===t.params.touchEventsTarget?t.el:t.wrapperEl,t.isElement&&(t.__preventObserver__=!0),i.style.cursor="move",i.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))},unsetGrabCursor:function(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}},events:{attachEvents:function(){var e=this,t=A(),i=e["params"];e.onTouchStart=function(n){var r=this,s=A(),a=P(),o=r.touchEventsData,{params:l,touches:c,enabled:d}=(o.evCache.push(n),r);if(d&&(l.simulateTouch||"mouse"!==n.pointerType)&&(!r.animating||!l.preventInteractionOnTransition)){!r.animating&&l.cssMode&&l.loop&&r.loopFix();let t=n,i=(t=t.originalEvent?t.originalEvent:t).target;if(("wrapper"!==l.touchEventsTarget||r.wrapperEl.contains(i))&&!("which"in t&&3===t.which||"button"in t&&0<t.button||o.isTouched&&o.isMoved)){var d=!!l.noSwipingClass&&""!==l.noSwipingClass,u=n.composedPath?n.composedPath():n.path,d=(d&&t.target&&t.target.shadowRoot&&u&&(i=u[0]),l.noSwipingSelector||"."+l.noSwipingClass),u=!(!t.target||!t.target.shadowRoot);if(l.noSwiping&&(u?function(n,e){return function e(t){var i;return t&&t!==A()&&t!==P()&&((i=(t=t.assignedSlot?t.assignedSlot:t).closest(n))||t.getRootNode)?i||e(t.getRootNode().host):null}(e=void 0===i?this:e)}(d,i):i.closest(d)))r.allowClick=!0;else if(!l.swipeHandler||i.closest(l.swipeHandler)){c.currentX=t.pageX,c.currentY=t.pageY;var u=c.currentX,d=c.currentY,h=l.edgeSwipeDetection||l.iOSEdgeSwipeDetection,p=l.edgeSwipeThreshold||l.iOSEdgeSwipeThreshold;if(h&&(u<=p||u>=a.innerWidth-p)){if("prevent"!==h)return;n.preventDefault()}Object.assign(o,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),c.startX=u,c.startY=d,o.touchStartTime=v(),r.allowClick=!0,r.updateSize(),r.swipeDirection=void 0,0<l.threshold&&(o.allowThresholdMove=!1);let e=!0;i.matches(o.focusableElements)&&(e=!1,"SELECT"===i.nodeName)&&(o.isTouched=!1),s.activeElement&&s.activeElement.matches(o.focusableElements)&&s.activeElement!==i&&s.activeElement.blur();a=e&&r.allowTouchMove&&l.touchStartPreventDefault;!l.touchStartForcePreventDefault&&!a||i.isContentEditable||t.preventDefault(),r.params.freeMode&&r.params.freeMode.enabled&&r.freeMode&&r.animating&&!l.cssMode&&r.freeMode.onTouchStart(),r.emit("touchStart",t)}}}}.bind(e),e.onTouchMove=function(a){var o=A(),l=this,c=l.touchEventsData,{params:d,touches:u,rtlTranslate:h,enabled:e}=l;if(e&&(d.simulateTouch||"mouse"!==a.pointerType)){let s=a;if(s.originalEvent&&(s=s.originalEvent),c.isTouched){e=c.evCache.findIndex(e=>e.pointerId===s.pointerId),a=(0<=e&&(c.evCache[e]=s),1<c.evCache.length?c.evCache[0]:s),e=a.pageX,a=a.pageY;if(s.preventedByNestedSwiper)u.startX=e,u.startY=a;else if(l.allowTouchMove){if(d.touchReleaseOnEdges&&!d.loop)if(l.isVertical()){if(a<u.startY&&l.translate<=l.maxTranslate()||a>u.startY&&l.translate>=l.minTranslate())return c.isTouched=!1,void(c.isMoved=!1)}else if(e<u.startX&&l.translate<=l.maxTranslate()||e>u.startX&&l.translate>=l.minTranslate())return;if(o.activeElement&&s.target===o.activeElement&&s.target.matches(c.focusableElements))c.isMoved=!0,l.allowClick=!1;else if(c.allowTouchCallbacks&&l.emit("touchMove",s),!(s.targetTouches&&1<s.targetTouches.length)){u.currentX=e,u.currentY=a;var o=u.currentX-u.startX,p=u.currentY-u.startY;if(!(l.params.threshold&&Math.sqrt(o**2+p**2)<l.params.threshold))if(void 0===c.isScrolling&&(l.isHorizontal()&&u.currentY===u.startY||l.isVertical()&&u.currentX===u.startX?c.isScrolling=!1:25<=o*o+p*p&&(f=180*Math.atan2(Math.abs(p),Math.abs(o))/Math.PI,c.isScrolling=l.isHorizontal()?f>d.touchAngle:90-f>d.touchAngle)),c.isScrolling&&l.emit("touchMoveOpposite",s),void 0!==c.startMoving||u.currentX===u.startX&&u.currentY===u.startY||(c.startMoving=!0),c.isScrolling||l.zoom&&l.params.zoom&&l.params.zoom.enabled&&1<c.evCache.length)c.isTouched=!1;else if(c.startMoving){l.allowClick=!1,!d.cssMode&&s.cancelable&&s.preventDefault(),d.touchMoveStopPropagation&&!d.nested&&s.stopPropagation();let e=l.isHorizontal()?o:p,t=l.isHorizontal()?u.currentX-u.previousX:u.currentY-u.previousY;d.oneWayMovement&&(e=Math.abs(e)*(h?1:-1),t=Math.abs(t)*(h?1:-1)),u.diff=e,e*=d.touchRatio,h&&(e=-e,t=-t);var f=l.touchesDirection,o=(l.swipeDirection=0<e?"prev":"next",l.touchesDirection=0<t?"prev":"next",l.params.loop&&!d.cssMode);if(!c.isMoved){if(o&&l.loopFix({direction:l.swipeDirection}),c.startTranslate=l.getTranslate(),l.setTransition(0),l.animating){const a=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});l.wrapperEl.dispatchEvent(a)}c.allowMomentumBounce=!1,!d.grabCursor||!0!==l.allowSlideNext&&!0!==l.allowSlidePrev||l.setGrabCursor(!0),l.emit("sliderFirstMove",s)}let i,n=(c.isMoved&&f!==l.touchesDirection&&o&&1<=Math.abs(e)&&(l.loopFix({direction:l.swipeDirection,setTranslate:!0}),i=!0),l.emit("sliderMove",s),c.isMoved=!0,c.currentTranslate=e+c.startTranslate,!0),r=d.resistanceRatio;if(d.touchReleaseOnEdges&&(r=0),0<e?(o&&!i&&c.currentTranslate>(d.centeredSlides?l.minTranslate()-l.size/2:l.minTranslate())&&l.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),c.currentTranslate>l.minTranslate()&&(n=!1,d.resistance)&&(c.currentTranslate=l.minTranslate()-1+(-l.minTranslate()+c.startTranslate+e)**r)):e<0&&(o&&!i&&c.currentTranslate<(d.centeredSlides?l.maxTranslate()+l.size/2:l.maxTranslate())&&l.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:l.slides.length-("auto"===d.slidesPerView?l.slidesPerViewDynamic():Math.ceil(parseFloat(d.slidesPerView,10)))}),c.currentTranslate<l.maxTranslate())&&(n=!1,d.resistance)&&(c.currentTranslate=l.maxTranslate()+1-(l.maxTranslate()-c.startTranslate-e)**r),n&&(s.preventedByNestedSwiper=!0),!l.allowSlideNext&&"next"===l.swipeDirection&&c.currentTranslate<c.startTranslate&&(c.currentTranslate=c.startTranslate),!l.allowSlidePrev&&"prev"===l.swipeDirection&&c.currentTranslate>c.startTranslate&&(c.currentTranslate=c.startTranslate),l.allowSlidePrev||l.allowSlideNext||(c.currentTranslate=c.startTranslate),0<d.threshold){if(!(Math.abs(e)>d.threshold||c.allowThresholdMove))return void(c.currentTranslate=c.startTranslate);if(!c.allowThresholdMove)return c.allowThresholdMove=!0,u.startX=u.currentX,u.startY=u.currentY,c.currentTranslate=c.startTranslate,void(u.diff=l.isHorizontal()?u.currentX-u.startX:u.currentY-u.startY)}d.followFinger&&!d.cssMode&&((d.freeMode&&d.freeMode.enabled&&l.freeMode||d.watchSlidesProgress)&&(l.updateActiveIndex(),l.updateSlidesClasses()),l.params.freeMode&&d.freeMode.enabled&&l.freeMode&&l.freeMode.onTouchMove(),l.updateProgress(c.currentTranslate),l.setTranslate(c.currentTranslate))}}}else s.target.matches(c.focusableElements)||(l.allowClick=!1),c.isTouched&&(Object.assign(u,{startX:e,startY:a,prevX:l.touches.currentX,prevY:l.touches.currentY,currentX:e,currentY:a}),c.touchStartTime=v())}else c.startMoving&&c.isScrolling&&l.emit("touchMoveOpposite",s)}}.bind(e),e.onTouchEnd=function(t){const s=this,e=s.touchEventsData,i=e.evCache.findIndex(e=>e.pointerId===t.pointerId);if(0<=i&&e.evCache.splice(i,1),!["pointercancel","pointerout","pointerleave"].includes(t.type)||"pointercancel"===t.type&&(s.browser.isSafari||s.browser.isWebView)){var{params:a,touches:o,rtlTranslate:n,slidesGrid:l,enabled:c}=s;if(c&&(a.simulateTouch||"mouse"!==t.pointerType)){let r=t;if(r.originalEvent&&(r=r.originalEvent),e.allowTouchCallbacks&&s.emit("touchEnd",r),e.allowTouchCallbacks=!1,e.isTouched){a.grabCursor&&e.isMoved&&e.isTouched&&(!0===s.allowSlideNext||!0===s.allowSlidePrev)&&s.setGrabCursor(!1);var d,c=v(),u=c-e.touchStartTime;if(s.allowClick){const t=r.path||r.composedPath&&r.composedPath();s.updateClickedSlide(t&&t[0]||r.target),s.emit("tap click",r),u<300&&c-e.lastClickTime<300&&s.emit("doubleTap doubleClick",r)}if(e.lastClickTime=v(),S(()=>{s.destroyed||(s.allowClick=!0)}),e.isTouched&&e.isMoved&&s.swipeDirection&&0!==o.diff&&e.currentTranslate!==e.startTranslate){if(e.isTouched=!1,e.isMoved=!1,e.startMoving=!1,d=a.followFinger?n?s.translate:-s.translate:-e.currentTranslate,!a.cssMode)if(s.params.freeMode&&a.freeMode.enabled)s.freeMode.onTouchEnd({currentPos:d});else{let t=0,i=s.slidesSizesGrid[0];for(let e=0;e<l.length;e+=e<a.slidesPerGroupSkip?1:a.slidesPerGroup){const s=e<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;void 0!==l[e+s]?d>=l[e]&&d<l[e+s]&&(t=e,i=l[e+s]-l[e]):d>=l[e]&&(t=e,i=l[l.length-1]-l[l.length-2])}let e=null,n=null;a.rewind&&(s.isBeginning?n=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1:s.isEnd&&(e=0));c=(d-l[t])/i,o=t<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;u>a.longSwipesMs?a.longSwipes?("next"===s.swipeDirection&&(c>=a.longSwipesRatio?s.slideTo(a.rewind&&s.isEnd?e:t+o):s.slideTo(t)),"prev"===s.swipeDirection&&(c>1-a.longSwipesRatio?s.slideTo(t+o):null!==n&&c<0&&Math.abs(c)>a.longSwipesRatio?s.slideTo(n):s.slideTo(t))):s.slideTo(s.activeIndex):a.shortSwipes?!s.navigation||r.target!==s.navigation.nextEl&&r.target!==s.navigation.prevEl?("next"===s.swipeDirection&&s.slideTo(null!==e?e:t+o),"prev"===s.swipeDirection&&s.slideTo(null!==n?n:t)):r.target===s.navigation.nextEl?s.slideTo(t+o):s.slideTo(t):s.slideTo(s.activeIndex)}}else e.isTouched=!1,e.isMoved=!1,e.startMoving=!1}else e.isMoved&&a.grabCursor&&s.setGrabCursor(!1),e.isMoved=!1,e.startMoving=!1}}}.bind(e),i.cssMode&&(e.onScroll=function(){var e=this,{wrapperEl:t,rtlTranslate:i,enabled:n}=e;n&&(e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses(),(0==(n=e.maxTranslate()-e.minTranslate())?0:(e.translate-e.minTranslate())/n)!==e.progress&&e.updateProgress(i?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1))}.bind(e)),e.onClick=function(e){this.enabled&&!this.allowClick&&(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation)&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation())}.bind(e),e.onLoad=function(e){o(this,e.target),this.update()}.bind(e),F||(t.addEventListener("touchstart",$),F=!0),H(e,"on")},detachEvents:function(){H(this,"off")}},breakpoints:{setBreakpoint:function(){const n=this,{realIndex:e,initialized:t,params:r,el:i}=n,s=r.breakpoints;if(s&&0!==Object.keys(s).length){var a=n.getBreakpoint(s,n.params.breakpointsBase,n.el);if(a&&n.currentBreakpoint!==a){const c=(a in s?s[a]:void 0)||n.originalParams,d=q(n,r),u=q(n,c),h=r.enabled;d&&!u?(i.classList.remove(r.containerModifierClass+"grid",r.containerModifierClass+"grid-column"),n.emitContainerClasses()):!d&&u&&(i.classList.add(r.containerModifierClass+"grid"),(c.grid.fill&&"column"===c.grid.fill||!c.grid.fill&&"column"===r.grid.fill)&&i.classList.add(r.containerModifierClass+"grid-column"),n.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(e=>{var t=r[e]&&r[e].enabled,i=c[e]&&c[e].enabled;t&&!i&&n[e].disable(),!t&&i&&n[e].enable()});var o=c.direction&&c.direction!==r.direction,l=r.loop&&(c.slidesPerView!==r.slidesPerView||o),o=(o&&t&&n.changeDirection(),p(n.params,c),n.params.enabled);Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),h&&!o?n.disable():!h&&o&&n.enable(),n.currentBreakpoint=a,n.emit("_beforeBreakpoint",c),l&&t&&(n.loopDestroy(),n.loopCreate(e),n.updateSlides()),n.emit("breakpoint",c)}}},getBreakpoint:function(e,i,n){if(void 0===i&&(i="window"),e&&("container"!==i||n)){let t=!1;const r=P(),s="window"===i?r.innerHeight:n.clientHeight,a=Object.keys(e).map(e=>{var t;return"string"==typeof e&&0===e.indexOf("@")?(t=parseFloat(e.substr(1)),{value:s*t,point:e}):{value:e,point:e}});a.sort((e,t)=>parseInt(e.value,10)-parseInt(t.value,10));for(let e=0;e<a.length;e+=1){const{point:P,value:s}=a[e];"window"===i?r.matchMedia(`(min-width: ${s}px)`).matches&&(t=P):s<=n.clientWidth&&(t=P)}return t||"max"}}},checkOverflow:{checkOverflow:function(){const e=this,{isLocked:t,params:i}=e,n=i["slidesOffsetBefore"];if(n){const t=e.slides.length-1,i=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*n;e.isLocked=e.size>i}else e.isLocked=1===e.snapGrid.length;!0===i.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===i.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:{addClasses:function(){var{classNames:e,params:t,rtl:i,el:n,device:r}=this,i=function(e,i){const n=[];return e.forEach(t=>{"object"==typeof t?Object.keys(t).forEach(e=>{t[e]&&n.push(i+e)}):"string"==typeof t&&n.push(i+t)}),n}(["initialized",t.direction,{"free-mode":this.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&1<t.grid.rows},{"grid-column":t.grid&&1<t.grid.rows&&"column"===t.grid.fill},{android:r.android},{ios:r.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...i),n.classList.add(...e),this.emitContainerClasses()},removeClasses:function(){var{el:e,classNames:t}=this;e.classList.remove(...t),this.emitContainerClasses()}}},f={};class g{constructor(){let t,i;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];1===n.length&&n[0].constructor&&"Object"===Object.prototype.toString.call(n[0]).slice(8,-1)?i=n[0]:[t,i]=n,i=p({},i=i||{}),t&&!i.el&&(i.el=t);var u,s=A();if(i.el&&"string"==typeof i.el&&1<s.querySelectorAll(i.el).length){const t=[];return s.querySelectorAll(i.el).forEach(e=>{e=p({},i,{el:e});t.push(new g(e))}),t}const a=this,o=(a.__swiper__=!0,a.support=h(),a.device=(void 0===(u={userAgent:i.userAgent})&&(u={}),l=l||function(){var e=(void 0===u?{}:u)["userAgent"],t=h(),i=P(),n=i.navigator.platform,e=e||i.navigator.userAgent,r={ios:!1,android:!1},s=i.screen.width,i=i.screen.height,a=e.match(/(Android);?[\s\/]+([\d.]+)?/);let o=e.match(/(iPad).*OS\s([\d_]+)/);var l=e.match(/(iPod)(.*OS\s([\d_]+))?/),c=!o&&e.match(/(iPhone\sOS|iOS)\s([\d_]+)/),d="Win32"===n,n="MacIntel"===n;return!o&&n&&t.touch&&0<=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(s+"x"+i)&&(o=(o=e.match(/(Version)\/([\d.]+)/))||[0,1,"13_0_0"]),a&&!d&&(r.os="android",r.android=!0),(o||c||l)&&(r.os="ios",r.ios=!0),r}()),a.browser=d=d||function(){const t=P();let e=!1;function i(){var e=t.navigator.userAgent.toLowerCase();return 0<=e.indexOf("safari")&&e.indexOf("chrome")<0&&e.indexOf("android")<0}if(i()){const i=String(t.navigator.userAgent);if(i.includes("Version/")){const[t,n]=i.split("Version/")[1].split(" ")[0].split(".").map(e=>Number(e));e=t<16||16===t&&n<2}}return{isSafari:e||i(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],i.modules&&Array.isArray(i.modules)&&a.modules.push(...i.modules),{});a.modules.forEach(e=>{var n,r;e({params:i,swiper:a,extendParams:(n=i,r=o,function(e){void 0===e&&(e={});var t=Object.keys(e)[0],i=e[t];"object"==typeof i&&null!==i&&(0<=["navigation","pagination","scrollbar"].indexOf(t)&&!0===n[t]&&(n[t]={auto:!0}),t in n)&&"enabled"in i&&(!0===n[t]&&(n[t]={enabled:!0}),"object"!=typeof n[t]||"enabled"in n[t]||(n[t].enabled=!0),n[t]||(n[t]={enabled:!1})),p(r,e)}),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});s=p({},z,o);return a.params=p({},s,f,i),a.originalParams=p({},a.params),a.passedParams=p({},i),a.params&&a.params.on&&Object.keys(a.params.on).forEach(e=>{a.on(e,a.params.on[e])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===a.params.direction,isVertical:()=>"vertical"===a.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:v(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getSlideIndex(e){var{slidesEl:t,params:i}=this,t=w(I(t,`.${i.slideClass}, swiper-slide`)[0]);return w(e)-t}getSlideIndexByData(t){return this.getSlideIndex(this.slides.filter(e=>+e.getAttribute("data-swiper-slide-index")===t)[0])}recalcSlides(){var{slidesEl:e,params:t}=this;this.slides=I(e,`.${t.slideClass}, swiper-slide`)}enable(){this.enabled||(this.enabled=!0,this.params.grabCursor&&this.setGrabCursor(),this.emit("enable"))}disable(){this.enabled&&(this.enabled=!1,this.params.grabCursor&&this.unsetGrabCursor(),this.emit("disable"))}setProgress(e,t){e=Math.min(Math.max(e,0),1);var i=this.minTranslate(),e=(this.maxTranslate()-i)*e+i;this.translateTo(e,void 0===t?0:t),this.updateActiveIndex(),this.updateSlidesClasses()}emitContainerClasses(){const t=this;var e;t.params._emitClasses&&t.el&&(e=t.el.className.split(" ").filter(e=>0===e.indexOf("swiper")||0===e.indexOf(t.params.containerModifierClass)),t.emit("_containerClasses",e.join(" ")))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)).join(" ")}emitSlidesClasses(){const i=this;if(i.params._emitClasses&&i.el){const n=[];i.slides.forEach(e=>{var t=i.getSlideClasses(e);n.push({slideEl:e,classNames:t}),i.emit("_slideClass",e,t)}),i.emit("_slideClasses",n)}}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);var{params:i,slides:n,slidesGrid:r,slidesSizesGrid:s,size:a,activeIndex:o}=this;let l=1;if(i.centeredSlides){let t,i=n[o].swiperSlideSize;for(let e=o+1;e<n.length;e+=1)n[e]&&!t&&(i+=n[e].swiperSlideSize,l+=1,i>a)&&(t=!0);for(let e=o-1;0<=e;--e)n[e]&&!t&&(i+=n[e].swiperSlideSize,l+=1,i>a)&&(t=!0)}else if("current"===e)for(let e=o+1;e<n.length;e+=1)(t?r[e]+s[e]-r[o]<a:r[e]-r[o]<a)&&(l+=1);else for(let e=o-1;0<=e;--e)r[o]-r[e]<a&&(l+=1);return l}update(){const t=this;var e,i;function n(){var e=t.rtlTranslate?-1*t.translate:t.translate,e=Math.min(Math.max(e,t.maxTranslate()),t.minTranslate());t.setTranslate(e),t.updateActiveIndex(),t.updateSlidesClasses()}t&&!t.destroyed&&({snapGrid:e,params:i}=t,i.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(e=>{e.complete&&o(t,e)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.params.freeMode&&t.params.freeMode.enabled?(n(),t.params.autoHeight&&t.updateAutoHeight()):(("auto"===t.params.slidesPerView||1<t.params.slidesPerView)&&t.isEnd&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0))||n(),i.watchOverflow&&e!==t.snapGrid&&t.checkOverflow(),t.emit("update"))}changeDirection(t,e){void 0===e&&(e=!0);var i=this,n=i.params.direction;return(t=t||("horizontal"===n?"vertical":"horizontal"))===n||"horizontal"!==t&&"vertical"!==t||(i.el.classList.remove(""+i.params.containerModifierClass+n),i.el.classList.add(""+i.params.containerModifierClass+t),i.emitContainerClasses(),i.params.direction=t,i.slides.forEach(e=>{"vertical"===t?e.style.width="":e.style.height=""}),i.emit("changeDirection"),e&&i.update()),i}changeLanguageDirection(e){var t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add(t.params.containerModifierClass+"rtl"),t.el.dir="rtl"):(t.el.classList.remove(t.params.containerModifierClass+"rtl"),t.el.dir="ltr"),t.update())}mount(i){const n=this;if(!n.mounted){let e=i||n.params.el;if(!(e="string"==typeof e?document.querySelector(e):e))return!1;e.swiper=n,e.shadowEl&&(n.isElement=!0);const r=()=>"."+(n.params.wrapperClass||"").trim().split(" ").join(".");let t=e&&e.shadowRoot&&e.shadowRoot.querySelector?e.shadowRoot.querySelector(r()):I(e,r())[0];!t&&n.params.createElements&&(t=O("div",n.params.wrapperClass),e.append(t),I(e,"."+n.params.slideClass).forEach(e=>{t.append(e)})),Object.assign(n,{el:e,wrapperEl:t,slidesEl:n.isElement?e:t,mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===D(e,"direction"),rtlTranslate:"horizontal"===n.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===D(e,"direction")),wrongRTL:"-webkit-box"===D(t,"display")})}return!0}init(e){const t=this;return t.initialized||!1!==t.mount(e)&&(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(e=>{e.complete?o(t,e):e.addEventListener("load",e=>{o(t,e.target)})}),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const i=this,{params:n,el:r,wrapperEl:s,slides:a}=i;if(void 0!==i.params&&!i.destroyed){if(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),n.loop&&i.loopDestroy(),t&&(i.removeClasses(),r.removeAttribute("style"),s.removeAttribute("style"),a)&&a.length&&a.forEach(e=>{e.classList.remove(n.slideVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")}),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(e=>{i.off(e)}),!1!==e){i.el.swiper=null;{const o=i;Object.keys(o).forEach(e=>{try{o[e]=null}catch(e){}try{delete o[e]}catch(e){}})}}i.destroyed=!0}return null}static extendDefaults(e){p(f,e)}static get extendedDefaults(){return f}static get defaults(){return z}static installModule(e){g.prototype.__modules__||(g.prototype.__modules__=[]);var t=g.prototype.__modules__;"function"==typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?e.forEach(e=>g.installModule(e)):g.installModule(e),g}}function k(i,n,r,s){return i.params.createElements&&Object.keys(s).forEach(t=>{if(!r[t]&&!0===r.auto){let e=I(i.el,"."+s[t])[0];e||((e=O("div",s[t])).className=s[t],i.el.append(e)),r[t]=e,n[t]=e}}),r}function x(e){return"."+(e=void 0===e?"":e).trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}function b(e){const{effect:i,swiper:n,on:t,setTranslate:r,setTransition:s,overwriteParams:a,perspective:o,recreateShadows:l,getEffectParams:c}=e;let d;t("beforeInit",()=>{var e;n.params.effect===i&&(n.classNames.push(""+n.params.containerModifierClass+i),o&&o()&&n.classNames.push(n.params.containerModifierClass+"3d"),e=a?a():{},Object.assign(n.params,e),Object.assign(n.originalParams,e))}),t("setTranslate",()=>{n.params.effect===i&&r()}),t("setTransition",(e,t)=>{n.params.effect===i&&s(t)}),t("transitionEnd",()=>{n.params.effect===i&&l&&c&&c().slideShadows&&(n.slides.forEach(e=>{e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(e=>e.remove())}),l())}),t("virtualUpdate",()=>{n.params.effect===i&&(n.slides.length||(d=!0),requestAnimationFrame(()=>{d&&n.slides&&n.slides.length&&(r(),d=!1)}))})}function T(e,t){var i=s(t);return i!==t&&(i.style.backfaceVisibility="hidden",i.style["-webkit-backface-visibility"]="hidden"),i}function E(e){let{swiper:i,duration:t,transformElements:n,allSlides:r}=e;const s=i["activeIndex"];if(i.params.virtualTranslate&&0!==t){let t=!1;(r?n:n.filter(e=>{var t,e=e.classList.contains("swiper-slide-transform")?(t=e).parentElement||i.slides.filter(e=>e.shadowEl&&e.shadowEl===t.parentNode)[0]:e;return i.getSlideIndex(e)===s})).forEach(e=>{m(e,()=>{var e;t||i&&!i.destroyed&&(t=!0,i.animating=!1,e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0}),i.wrapperEl.dispatchEvent(e))})})}}function R(e,t,i){var n="swiper-slide-shadow"+(i?"-"+i:""),t=s(t);let r=t.querySelector("."+n);return r||(r=O("div","swiper-slide-shadow"+(i?"-"+i:"")),t.append(r)),r}return Object.keys(u).forEach(t=>{Object.keys(u[t]).forEach(e=>{g.prototype[e]=u[t][e]})}),g.use([function(e){let{swiper:s,on:t,emit:i}=e;const n=P();let r=null,a=null;const o=()=>{s&&!s.destroyed&&s.initialized&&(i("beforeResize"),i("resize"))},l=()=>{s&&!s.destroyed&&s.initialized&&i("orientationchange")};t("init",()=>{s.params.resizeObserver&&void 0!==n.ResizeObserver?s&&!s.destroyed&&s.initialized&&(r=new ResizeObserver(i=>{a=n.requestAnimationFrame(()=>{var{width:e,height:t}=s;let n=e,r=t;i.forEach(e=>{var{contentBoxSize:e,contentRect:t,target:i}=e;i&&i!==s.el||(n=t?t.width:(e[0]||e).inlineSize,r=t?t.height:(e[0]||e).blockSize)}),n===e&&r===t||o()})})).observe(s.el):(n.addEventListener("resize",o),n.addEventListener("orientationchange",l))}),t("destroy",()=>{a&&n.cancelAnimationFrame(a),r&&r.unobserve&&s.el&&(r.unobserve(s.el),r=null),n.removeEventListener("resize",o),n.removeEventListener("orientationchange",l)})},function(e){let{swiper:n,extendParams:t,on:i,emit:r}=e;function s(e,t){void 0===t&&(t={});var i=new(o.MutationObserver||o.WebkitMutationObserver)(e=>{var t;n.__preventObserver__||(1===e.length?r("observerUpdate",e[0]):(t=function(){r("observerUpdate",e[0])},o.requestAnimationFrame?o.requestAnimationFrame(t):o.setTimeout(t,0)))});i.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),a.push(i)}const a=[],o=P();t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",()=>{if(n.params.observer){if(n.params.observeParents){var t=j(n.el);for(let e=0;e<t.length;e+=1)s(t[e])}s(n.el,{childList:n.params.observeSlideChildren}),s(n.wrapperEl,{attributes:!1})}}),i("destroy",()=>{a.forEach(e=>{e.disconnect()}),a.splice(0,a.length)})}]),g.use([function(e){let t,{swiper:S,extendParams:i,on:n,emit:k}=e;i({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});e=A();S.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};const r=e.createElement("div");function E(e,t){var i=S.params.virtual;if(i.cache&&S.virtual.cache[t])return S.virtual.cache[t];let n;return i.renderSlide?"string"==typeof(n=i.renderSlide.call(S,e,t))&&(r.innerHTML=n,n=r.children[0]):n=S.isElement?O("swiper-slide"):O("div",S.params.slideClass),n.setAttribute("data-swiper-slide-index",t),i.renderSlide||(n.innerHTML=e),i.cache&&(S.virtual.cache[t]=n),n}function a(t){const{slidesPerView:i,slidesPerGroup:e,centeredSlides:n,loop:r}=S.params,{addSlidesBefore:s,addSlidesAfter:a}=S.params.virtual,{from:o,to:l,slides:c,slidesGrid:d,offset:u}=S.virtual;S.params.cssMode||S.updateActiveIndex();var h=S.activeIndex||0;let p,f,m,g=(p=S.rtlTranslate?"right":S.isHorizontal()?"left":"top",h-(m=n?(f=Math.floor(i/2)+e+a,Math.floor(i/2)+e+s):(f=i+(e-1)+a,(r?i:e)+s))),v=h+f,y=(r||(g=Math.max(g,0),v=Math.min(v,c.length-1)),(S.slidesGrid[g]||0)-(S.slidesGrid[0]||0));function _(){S.updateSlides(),S.updateProgress(),S.updateSlidesClasses(),k("virtualUpdate")}if(r&&h>=m?(g-=m,n||(y+=S.slidesGrid[0])):r&&h<m&&(g=-m,n)&&(y+=S.slidesGrid[0]),Object.assign(S.virtual,{from:g,to:v,offset:y,slidesGrid:S.slidesGrid,slidesBefore:m,slidesAfter:f}),o!==g||l!==v||t)if(S.params.virtual.renderExternal)S.params.virtual.renderExternal.call(S,{offset:y,from:g,to:v,slides:function(){var t=[];for(let e=g;e<=v;e+=1)t.push(c[e]);return t}()}),S.params.virtual.renderExternalUpdate?_():k("virtualUpdate");else{var b=[],T=[],w=e=>{let t=e;return e<0?t=c.length+e:t>=c.length&&(t-=c.length),t};if(t)S.slidesEl.querySelectorAll(`.${S.params.slideClass}, swiper-slide`).forEach(e=>{e.remove()});else for(let e=o;e<=l;e+=1)if(e<g||e>v){const i=w(e);S.slidesEl.querySelectorAll(`.${S.params.slideClass}[data-swiper-slide-index="${i}"], swiper-slide[data-swiper-slide-index="${i}"]`).forEach(e=>{e.remove()})}var h=r?-c.length:0,x=r?2*c.length:c.length;for(let e=h;e<x;e+=1)if(e>=g&&e<=v){const S=w(e);void 0===l||t?T.push(S):(e>l&&T.push(S),e<o&&b.push(S))}if(T.forEach(e=>{S.slidesEl.append(E(c[e],e))}),r)for(let e=b.length-1;0<=e;--e){const i=b[e];S.slidesEl.prepend(E(c[i],i))}else b.sort((e,t)=>t-e),b.forEach(e=>{S.slidesEl.prepend(E(c[e],e))});I(S.slidesEl,".swiper-slide, swiper-slide").forEach(e=>{e.style[p]=y+"px"}),_()}else S.slidesGrid!==d&&y!==u&&S.slides.forEach(e=>{e.style[p]=y+"px"}),S.updateProgress(),k("virtualUpdate")}n("beforeInit",()=>{if(S.params.virtual.enabled){let e;var t;void 0===S.passedParams.virtual.slides&&(t=[...S.slidesEl.children].filter(e=>e.matches(`.${S.params.slideClass}, swiper-slide`)))&&t.length&&(S.virtual.slides=[...t],e=!0,t.forEach((e,t)=>{e.setAttribute("data-swiper-slide-index",t),(S.virtual.cache[t]=e).remove()})),e||(S.virtual.slides=S.params.virtual.slides),S.classNames.push(S.params.containerModifierClass+"virtual"),S.params.watchSlidesProgress=!0,S.originalParams.watchSlidesProgress=!0,S.params.initialSlide||a()}}),n("setTranslate",()=>{S.params.virtual.enabled&&(S.params.cssMode&&!S._immediateVirtual?(clearTimeout(t),t=setTimeout(()=>{a()},100)):a())}),n("init update resize",()=>{S.params.virtual.enabled&&S.params.cssMode&&C(S.wrapperEl,"--swiper-virtual-size",S.virtualSize+"px")}),Object.assign(S.virtual,{appendSlide:function(t){if("object"==typeof t&&"length"in t)for(let e=0;e<t.length;e+=1)t[e]&&S.virtual.slides.push(t[e]);else S.virtual.slides.push(t);a(!0)},prependSlide:function(n){const r=S.activeIndex;let e=r+1,s=1;if(Array.isArray(n)){for(let e=0;e<n.length;e+=1)n[e]&&S.virtual.slides.unshift(n[e]);e=r+n.length,s=n.length}else S.virtual.slides.unshift(n);if(S.params.virtual.cache){const n=S.virtual.cache,r={};Object.keys(n).forEach(e=>{var t=n[e],i=t.getAttribute("data-swiper-slide-index");i&&t.setAttribute("data-swiper-slide-index",parseInt(i,10)+s),r[parseInt(e,10)+s]=t}),S.virtual.cache=r}a(!0),S.slideTo(e,0)},removeSlide:function(i){if(null!=i){let t=S.activeIndex;if(Array.isArray(i))for(let e=i.length-1;0<=e;--e)S.virtual.slides.splice(i[e],1),S.params.virtual.cache&&delete S.virtual.cache[i[e]],i[e]<t&&--t,t=Math.max(t,0);else S.virtual.slides.splice(i,1),S.params.virtual.cache&&delete S.virtual.cache[i],i<t&&--t,t=Math.max(t,0);a(!0),S.slideTo(t,0)}},removeAllSlides:function(){S.virtual.slides=[],S.params.virtual.cache&&(S.virtual.cache={}),a(!0),S.slideTo(0,0)},update:a})},function(e){let{swiper:u,extendParams:t,on:i,emit:h}=e;const p=A(),f=P();function n(t){if(u.enabled){const i=u["rtlTranslate"];let e=t;const n=(e=e.originalEvent?e.originalEvent:e).keyCode||e.charCode,r=u.params.keyboard.pageUpDown,s=r&&33===n,a=r&&34===n,o=37===n,l=39===n,c=38===n,d=40===n;if(!u.allowSlideNext&&(u.isHorizontal()&&l||u.isVertical()&&d||a))return!1;if(!u.allowSlidePrev&&(u.isHorizontal()&&o||u.isVertical()&&c||s))return!1;if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||p.activeElement&&p.activeElement.nodeName&&("input"===p.activeElement.nodeName.toLowerCase()||"textarea"===p.activeElement.nodeName.toLowerCase()))){if(u.params.keyboard.onlyInViewport&&(s||a||o||l||c||d)){let t=!1;if(0<j(u.el,`.${u.params.slideClass}, swiper-slide`).length&&0===j(u.el,"."+u.params.slideActiveClass).length)return;const e=u.el,n=e.clientWidth,r=e.clientHeight,h=f.innerWidth,p=f.innerHeight,s=M(e),a=(i&&(s.left-=e.scrollLeft),[[s.left,s.top],[s.left+n,s.top],[s.left,s.top+r],[s.left+n,s.top+r]]);for(let e=0;e<a.length;e+=1){const i=a[e];0<=i[0]&&i[0]<=h&&0<=i[1]&&i[1]<=p&&(0===i[0]&&0===i[1]||(t=!0))}if(!t)return}u.isHorizontal()?((s||a||o||l)&&(e.preventDefault?e.preventDefault():e.returnValue=!1),((a||l)&&!i||(s||o)&&i)&&u.slideNext(),((s||o)&&!i||(a||l)&&i)&&u.slidePrev()):((s||a||c||d)&&(e.preventDefault?e.preventDefault():e.returnValue=!1),(a||d)&&u.slideNext(),(s||c)&&u.slidePrev()),h("keyPress",n)}}}function r(){u.keyboard.enabled||(p.addEventListener("keydown",n),u.keyboard.enabled=!0)}function s(){u.keyboard.enabled&&(p.removeEventListener("keydown",n),u.keyboard.enabled=!1)}u.keyboard={enabled:!1},t({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),i("init",()=>{u.params.keyboard.enabled&&r()}),i("destroy",()=>{u.keyboard.enabled&&s()}),Object.assign(u.keyboard,{enable:r,disable:s})},function(e){let{swiper:d,extendParams:t,on:i,emit:u}=e;const n=P();let h;t({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}}),d.mousewheel={enabled:!1};let p,r=v();const f=[];function s(){d.enabled&&(d.mouseEntered=!0)}function a(){d.enabled&&(d.mouseEntered=!1)}function m(e){d.params.mousewheel.thresholdDelta&&e.delta<d.params.mousewheel.thresholdDelta||d.params.mousewheel.thresholdTime&&v()-r<d.params.mousewheel.thresholdTime||6<=e.delta&&v()-r<60||(e.direction<0?d.isEnd&&!d.params.loop||d.animating||(d.slideNext(),u("scroll",e.raw)):d.isBeginning&&!d.params.loop||d.animating||(d.slidePrev(),u("scroll",e.raw)),r=(new n.Date).getTime())}function o(n){let r=n,s=!0;if(d.enabled){var a=d.params.mousewheel;d.params.cssMode&&r.preventDefault();let e=d.el;const c=(e="container"!==d.params.mousewheel.eventsTarget?document.querySelector(d.params.mousewheel.eventsTarget):e)&&e.contains(r.target);if(!d.mouseEntered&&!c&&!a.releaseOnEdges)return!0;r.originalEvent&&(r=r.originalEvent);let i=0;var o=d.rtlTranslate?-1:1,l=function(e){let t=0,i=0,n=0,r=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),n=10*t,r=10*i,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(n=e.deltaX),e.shiftKey&&!n&&(n=r,r=0),(n||r)&&e.deltaMode&&(1===e.deltaMode?(n*=40,r*=40):(n*=800,r*=800)),n&&!t&&(t=n<1?-1:1),r&&!i&&(i=r<1?-1:1),{spinX:t,spinY:i,pixelX:n,pixelY:r}}(r);if(a.forceToAxis)if(d.isHorizontal()){if(!(Math.abs(l.pixelX)>Math.abs(l.pixelY)))return!0;i=-l.pixelX*o}else{if(!(Math.abs(l.pixelY)>Math.abs(l.pixelX)))return!0;i=-l.pixelY}else i=Math.abs(l.pixelX)>Math.abs(l.pixelY)?-l.pixelX*o:-l.pixelY;if(0===i)return!0;a.invert&&(i=-i);let t=d.getTranslate()+i*a.sensitivity;if((t=t>=d.minTranslate()?d.minTranslate():t)<=d.maxTranslate()&&(t=d.maxTranslate()),(s=!!d.params.loop||!(t===d.minTranslate()||t===d.maxTranslate()))&&d.params.nested&&r.stopPropagation(),d.params.freeMode&&d.params.freeMode.enabled){const n={time:v(),delta:Math.abs(i),direction:Math.sign(i)},s=p&&n.time<p.time+500&&n.delta<=p.delta&&n.direction===p.direction;if(!s){p=void 0;let e=d.getTranslate()+i*a.sensitivity;const t=d.isBeginning,c=d.isEnd;if((e=e>=d.minTranslate()?d.minTranslate():e)<=d.maxTranslate()&&(e=d.maxTranslate()),d.setTransition(0),d.setTranslate(e),d.updateProgress(),d.updateActiveIndex(),d.updateSlidesClasses(),(!t&&d.isBeginning||!c&&d.isEnd)&&d.updateSlidesClasses(),d.params.loop&&d.loopFix({direction:n.direction<0?"next":"prev",byMousewheel:!0}),d.params.freeMode.sticky){clearTimeout(h),h=void 0,15<=f.length&&f.shift();const r=f.length?f[f.length-1]:void 0,s=f[0];if(f.push(n),r&&(n.delta>r.delta||n.direction!==r.direction))f.splice(0);else if(15<=f.length&&n.time-s.time<500&&1<=s.delta-n.delta&&n.delta<=6){const r=0<i?.8:.2;p=n,f.splice(0),h=S(()=>{d.slideToClosest(d.params.speed,!0,void 0,r)},0)}h=h||S(()=>{p=n,f.splice(0),d.slideToClosest(d.params.speed,!0,void 0,.5)},500)}if(s||u("scroll",r),d.params.autoplay&&d.params.autoplayDisableOnInteraction&&d.autoplay.stop(),e===d.minTranslate()||e===d.maxTranslate())return!0}}else{const r={time:v(),delta:Math.abs(i),direction:Math.sign(i),raw:n},s=(2<=f.length&&f.shift(),f.length?f[f.length-1]:void 0);if(f.push(r),(!s||r.direction!==s.direction||r.delta>s.delta||r.time>s.time+150)&&m(r),function(e){var t=d.params.mousewheel;if(e.direction<0){if(d.isEnd&&!d.params.loop&&t.releaseOnEdges)return 1}else if(d.isBeginning&&!d.params.loop&&t.releaseOnEdges)return 1}(r))return!0}return r.preventDefault?r.preventDefault():r.returnValue=!1,!1}}function l(e){let t=d.el;(t="container"!==d.params.mousewheel.eventsTarget?document.querySelector(d.params.mousewheel.eventsTarget):t)[e]("mouseenter",s),t[e]("mouseleave",a),t[e]("wheel",o)}function c(){return d.params.cssMode?(d.wrapperEl.removeEventListener("wheel",o),!0):!d.mousewheel.enabled&&(l("addEventListener"),d.mousewheel.enabled=!0)}function g(){return d.params.cssMode?(d.wrapperEl.addEventListener(event,o),!0):!!d.mousewheel.enabled&&(l("removeEventListener"),!(d.mousewheel.enabled=!1))}i("init",()=>{!d.params.mousewheel.enabled&&d.params.cssMode&&g(),d.params.mousewheel.enabled&&c()}),i("destroy",()=>{d.params.cssMode&&c(),d.mousewheel.enabled&&g()}),Object.assign(d.mousewheel,{enable:c,disable:g})},function(e){let{swiper:r,extendParams:t,on:i,emit:s}=e;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),r.navigation={nextEl:null,prevEl:null};const a=e=>e=Array.isArray(e)?e:[e].filter(e=>!!e);function o(e){let t;return!(e&&"string"==typeof e&&r.isElement&&(t=r.el.shadowRoot.querySelector(e)))&&(e&&("string"==typeof e&&(t=[...document.querySelectorAll(e)]),r.params.uniqueNavElements)&&"string"==typeof e&&1<t.length&&1===r.el.querySelectorAll(e).length&&(t=r.el.querySelector(e)),e)&&!t?e:t}function n(e,t){const i=r.params.navigation;(e=a(e)).forEach(e=>{e&&(e.classList[t?"add":"remove"](...i.disabledClass.split(" ")),"BUTTON"===e.tagName&&(e.disabled=t),r.params.watchOverflow)&&r.enabled&&e.classList[r.isLocked?"add":"remove"](i.lockClass)})}function l(){var{nextEl:e,prevEl:t}=r.navigation;r.params.loop?(n(t,!1),n(e,!1)):(n(t,r.isBeginning&&!r.params.rewind),n(e,r.isEnd&&!r.params.rewind))}function c(e){e.preventDefault(),r.isBeginning&&!r.params.loop&&!r.params.rewind||(r.slidePrev(),s("navigationPrev"))}function d(e){e.preventDefault(),r.isEnd&&!r.params.loop&&!r.params.rewind||(r.slideNext(),s("navigationNext"))}function u(){const i=r.params.navigation;if(r.params.navigation=k(r,r.originalParams.navigation,r.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),i.nextEl||i.prevEl){var e=o(i.nextEl),t=o(i.prevEl);Object.assign(r.navigation,{nextEl:e,prevEl:t}),e=a(e),t=a(t);const n=(e,t)=>{e&&e.addEventListener("click","next"===t?d:c),!r.enabled&&e&&e.classList.add(...i.lockClass.split(" "))};e.forEach(e=>n(e,"next")),t.forEach(e=>n(e,"prev"))}}function h(){var{nextEl:e,prevEl:t}=r.navigation,e=a(e),t=a(t);const i=(e,t)=>{e.removeEventListener("click","next"===t?d:c),e.classList.remove(...r.params.navigation.disabledClass.split(" "))};e.forEach(e=>i(e,"next")),t.forEach(e=>i(e,"prev"))}i("init",()=>{(!1===r.params.navigation.enabled?p:(u(),l))()}),i("toEdge fromEdge lock unlock",()=>{l()}),i("destroy",()=>{h()}),i("enable disable",()=>{var{nextEl:e,prevEl:t}=r.navigation,e=a(e),t=a(t);[...e,...t].filter(e=>!!e).forEach(e=>e.classList[r.enabled?"remove":"add"](r.params.navigation.lockClass))}),i("click",(e,t)=>{var{nextEl:i,prevEl:n}=r.navigation,i=a(i),n=a(n),t=t.target;if(r.params.navigation.hideOnClick&&!n.includes(t)&&!i.includes(t)&&(!(r.pagination&&r.params.pagination&&r.params.pagination.clickable)||r.pagination.el!==t&&!r.pagination.el.contains(t))){let e;i.length?e=i[0].classList.contains(r.params.navigation.hiddenClass):n.length&&(e=n[0].classList.contains(r.params.navigation.hiddenClass)),s(!0===e?"navigationShow":"navigationHide"),[...i,...n].filter(e=>!!e).forEach(e=>e.classList.toggle(r.params.navigation.hiddenClass))}});const p=()=>{r.el.classList.add(...r.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(r.navigation,{enable:()=>{r.el.classList.remove(...r.params.navigation.navigationDisabledClass.split(" ")),u(),l()},disable:p,update:l,init:u,destroy:h})},function(e){let{swiper:c,extendParams:t,on:i,emit:d}=e;e="swiper-pagination";let u,h=(t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:e+"-bullet",bulletActiveClass:e+"-bullet-active",modifierClass:e+"-",currentClass:e+"-current",totalClass:e+"-total",hiddenClass:e+"-hidden",progressbarFillClass:e+"-progressbar-fill",progressbarOppositeClass:e+"-progressbar-opposite",clickableClass:e+"-clickable",lockClass:e+"-lock",horizontalClass:e+"-horizontal",verticalClass:e+"-vertical",paginationDisabledClass:e+"-disabled"}}),c.pagination={el:null,bullets:[]},0);const r=e=>e=Array.isArray(e)?e:[e].filter(e=>!!e);function s(){return!c.params.pagination.el||!c.pagination.el||Array.isArray(c.pagination.el)&&0===c.pagination.el.length}function p(e,t){var i=c.params.pagination["bulletActiveClass"];(e=e&&e[("prev"===t?"previous":"next")+"ElementSibling"])&&(e.classList.add(i+"-"+t),e=e[("prev"===t?"previous":"next")+"ElementSibling"])&&e.classList.add(i+`-${t}-`+t)}function n(e){var t=e.target.closest(x(c.params.pagination.bulletClass));t&&(e.preventDefault(),e=w(t)*c.params.slidesPerGroup,c.params.loop?c.realIndex!==e&&((e<c.loopedSlides||e>c.slides.length-c.loopedSlides)&&c.loopFix({direction:e<c.loopedSlides?"prev":"next",activeSlideIndex:e,slideTo:!1}),c.slideToLoop(e)):c.slideTo(e))}function a(){const a=c.rtl,o=c.params.pagination;if(!s()){let s,e=c.pagination.el;e=r(e);const t=(c.virtual&&c.params.virtual.enabled?c.virtual:c).slides.length,l=c.params.loop?Math.ceil(t/c.params.slidesPerGroup):c.snapGrid.length;if(s=c.params.loop?1<c.params.slidesPerGroup?Math.floor(c.realIndex/c.params.slidesPerGroup):c.realIndex:void 0!==c.snapIndex?c.snapIndex:c.activeIndex||0,"bullets"===o.type&&c.pagination.bullets&&0<c.pagination.bullets.length){const d=c.pagination.bullets;let i,n,r;if(o.dynamicBullets&&(u=N(d[0],c.isHorizontal()?"width":"height",!0),e.forEach(e=>{e.style[c.isHorizontal()?"width":"height"]=u*(o.dynamicMainBullets+4)+"px"}),1<o.dynamicMainBullets&&void 0!==c.previousIndex&&((h+=s-(c.previousIndex||0))>o.dynamicMainBullets-1?h=o.dynamicMainBullets-1:h<0&&(h=0)),i=Math.max(s-h,0),n=i+(Math.min(d.length,o.dynamicMainBullets)-1),r=(n+i)/2),d.forEach(e=>{var t=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(e=>""+o.bulletActiveClass+e)].map(e=>"string"==typeof e&&e.includes(" ")?e.split(" "):e).flat();e.classList.remove(...t)}),1<e.length)d.forEach(e=>{var t=w(e);t===s&&e.classList.add(...o.bulletActiveClass.split(" ")),o.dynamicBullets&&(t>=i&&t<=n&&e.classList.add(...(o.bulletActiveClass+"-main").split(" ")),t===i&&p(e,"prev"),t===n)&&p(e,"next")});else{const a=d[s];if(a&&a.classList.add(...o.bulletActiveClass.split(" ")),o.dynamicBullets){const a=d[i],c=d[n];for(let e=i;e<=n;e+=1)d[e]&&d[e].classList.add(...(o.bulletActiveClass+"-main").split(" "));p(a,"prev"),p(c,"next")}}if(o.dynamicBullets){const e=Math.min(d.length,o.dynamicMainBullets+4),t=(u*e-u)/2-r*u,h=a?"right":"left";d.forEach(e=>{e.style[c.isHorizontal()?h:"top"]=t+"px"})}}e.forEach((e,n)=>{if("fraction"===o.type&&(e.querySelectorAll(x(o.currentClass)).forEach(e=>{e.textContent=o.formatFractionCurrent(s+1)}),e.querySelectorAll(x(o.totalClass)).forEach(e=>{e.textContent=o.formatFractionTotal(l)})),"progressbar"===o.type){var r=o.progressbarOpposite?c.isHorizontal()?"vertical":"horizontal":c.isHorizontal()?"horizontal":"vertical";const n=(s+1)/l;let t=1,i=1;"horizontal"==r?t=n:i=n,e.querySelectorAll(x(o.progressbarFillClass)).forEach(e=>{e.style.transform=`translate3d(0,0,0) scaleX(${t}) scaleY(${i})`,e.style.transitionDuration=c.params.speed+"ms"})}"custom"===o.type&&o.renderCustom?(e.innerHTML=o.renderCustom(c,s+1,l),0===n&&d("paginationRender",e)):(0===n&&d("paginationRender",e),d("paginationUpdate",e)),c.params.watchOverflow&&c.enabled&&e.classList[c.isLocked?"add":"remove"](o.lockClass)})}}function o(){const n=c.params.pagination;if(!s()){var e=(c.virtual&&c.params.virtual.enabled?c.virtual:c).slides.length,t=c.pagination.el,t=r(t);let i="";if("bullets"===n.type){let t=c.params.loop?Math.ceil(e/c.params.slidesPerGroup):c.snapGrid.length;c.params.freeMode&&c.params.freeMode.enabled&&t>e&&(t=e);for(let e=0;e<t;e+=1)n.renderBullet?i+=n.renderBullet.call(c,e,n.bulletClass):i+=`<${n.bulletElement} class="${n.bulletClass}"></${n.bulletElement}>`}"fraction"===n.type&&(i=n.renderFraction?n.renderFraction.call(c,n.currentClass,n.totalClass):`<span class="${n.currentClass}"></span> / <span class="${n.totalClass}"></span>`),"progressbar"===n.type&&(i=n.renderProgressbar?n.renderProgressbar.call(c,n.progressbarFillClass):`<span class="${n.progressbarFillClass}"></span>`),c.pagination.bullets=[],t.forEach(e=>{"custom"!==n.type&&(e.innerHTML=i||""),"bullets"===n.type&&c.pagination.bullets.push(...e.querySelectorAll(x(n.bulletClass)))}),"custom"!==n.type&&d("paginationRender",t[0])}}function l(){c.params.pagination=k(c,c.originalParams.pagination,c.params.pagination,{el:"swiper-pagination"});const t=c.params.pagination;if(t.el){let e;(e=(e=(e="string"==typeof t.el&&c.isElement?c.el.shadowRoot.querySelector(t.el):e)||"string"!=typeof t.el?e:[...document.querySelectorAll(t.el)])||t.el)&&0!==e.length&&(c.params.uniqueNavElements&&"string"==typeof t.el&&Array.isArray(e)&&1<e.length&&1<(e=[...c.el.querySelectorAll(t.el)]).length&&(e=e.filter(e=>j(e,".swiper")[0]===c.el)[0]),Array.isArray(e)&&1===e.length&&(e=e[0]),Object.assign(c.pagination,{el:e}),(e=r(e)).forEach(e=>{"bullets"===t.type&&t.clickable&&e.classList.add(t.clickableClass),e.classList.add(t.modifierClass+t.type),e.classList.add(c.isHorizontal()?t.horizontalClass:t.verticalClass),"bullets"===t.type&&t.dynamicBullets&&(e.classList.add(""+t.modifierClass+t.type+"-dynamic"),h=0,t.dynamicMainBullets<1)&&(t.dynamicMainBullets=1),"progressbar"===t.type&&t.progressbarOpposite&&e.classList.add(t.progressbarOppositeClass),t.clickable&&e.addEventListener("click",n),c.enabled||e.classList.add(t.lockClass)}))}}function f(){const t=c.params.pagination;var e;s()||((e=c.pagination.el)&&(e=r(e)).forEach(e=>{e.classList.remove(t.hiddenClass),e.classList.remove(t.modifierClass+t.type),e.classList.remove(c.isHorizontal()?t.horizontalClass:t.verticalClass),t.clickable&&e.removeEventListener("click",n)}),c.pagination.bullets&&c.pagination.bullets.forEach(e=>e.classList.remove(...t.bulletActiveClass.split(" "))))}i("init",()=>{(!1===c.params.pagination.enabled?m:(l(),o(),a))()}),i("activeIndexChange",()=>{void 0===c.snapIndex&&a()}),i("snapIndexChange",()=>{a()}),i("snapGridLengthChange",()=>{o(),a()}),i("destroy",()=>{f()}),i("enable disable",()=>{var e=c.pagination["el"];e&&(e=r(e)).forEach(e=>e.classList[c.enabled?"remove":"add"](c.params.pagination.lockClass))}),i("lock unlock",()=>{a()}),i("click",(e,t)=>{t=t.target;let i=c.pagination["el"];if(Array.isArray(i)||(i=[i].filter(e=>!!e)),c.params.pagination.el&&c.params.pagination.hideOnClick&&i&&0<i.length&&!t.classList.contains(c.params.pagination.bulletClass)&&(!c.navigation||!(c.navigation.nextEl&&t===c.navigation.nextEl||c.navigation.prevEl&&t===c.navigation.prevEl))){const e=i[0].classList.contains(c.params.pagination.hiddenClass);d(!0===e?"paginationShow":"paginationHide"),i.forEach(e=>e.classList.toggle(c.params.pagination.hiddenClass))}});const m=()=>{c.el.classList.add(c.params.pagination.paginationDisabledClass);var e=c.pagination["el"];e&&(e=r(e)).forEach(e=>e.classList.add(c.params.pagination.paginationDisabledClass)),f()};Object.assign(c.pagination,{enable:()=>{c.el.classList.remove(c.params.pagination.paginationDisabledClass);var e=c.pagination["el"];e&&(e=r(e)).forEach(e=>e.classList.remove(c.params.pagination.paginationDisabledClass)),l(),o(),a()},disable:m,render:o,update:a,init:l,destroy:f})},function(e){let{swiper:l,extendParams:t,on:i,emit:s}=e;const a=A();let o,c,d,n,u=!1,h=null,p=null;function r(){if(l.params.scrollbar.el&&l.scrollbar.el){const{scrollbar:i,rtlTranslate:n}=l,{dragEl:r,el:s}=i,a=l.params.scrollbar,o=l.params.loop?l.progressLoop:l.progress;let e=c,t=(d-c)*o;n?0<(t=-t)?(e=c-t,t=0):-t+c>d&&(e=d+t):t<0?(e=c+t,t=0):t+c>d&&(e=d-t),l.isHorizontal()?(r.style.transform=`translate3d(${t}px, 0, 0)`,r.style.width=e+"px"):(r.style.transform=`translate3d(0px, ${t}px, 0)`,r.style.height=e+"px"),a.hide&&(clearTimeout(h),s.style.opacity=1,h=setTimeout(()=>{s.style.opacity=0,s.style.transitionDuration="400ms"},1e3))}}function f(){var e,t,i;l.params.scrollbar.el&&l.scrollbar.el&&(e=l["scrollbar"],{dragEl:t,el:i}=e,t.style.width="",t.style.height="",d=l.isHorizontal()?i.offsetWidth:i.offsetHeight,n=l.size/(l.virtualSize+l.params.slidesOffsetBefore-(l.params.centeredSlides?l.snapGrid[0]:0)),c="auto"===l.params.scrollbar.dragSize?d*n:parseInt(l.params.scrollbar.dragSize,10),l.isHorizontal()?t.style.width=c+"px":t.style.height=c+"px",i.style.display=1<=n?"none":"",l.params.scrollbar.hide&&(i.style.opacity=0),l.params.watchOverflow)&&l.enabled&&e.el.classList[l.isLocked?"add":"remove"](l.params.scrollbar.lockClass)}function m(e){return l.isHorizontal()?e.clientX:e.clientY}function g(e){var{scrollbar:t,rtlTranslate:i}=l,t=t["el"];let n;n=(m(e)-M(t)[l.isHorizontal()?"left":"top"]-(null!==o?o:c/2))/(d-c),n=Math.max(Math.min(n,1),0),i&&(n=1-n);e=l.minTranslate()+(l.maxTranslate()-l.minTranslate())*n;l.updateProgress(e),l.setTranslate(e),l.updateActiveIndex(),l.updateSlidesClasses()}function v(e){var t=l.params.scrollbar,{scrollbar:i,wrapperEl:n}=l,{el:i,dragEl:r}=i;u=!0,o=e.target===r?m(e)-e.target.getBoundingClientRect()[l.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),n.style.transitionDuration="100ms",r.style.transitionDuration="100ms",g(e),clearTimeout(p),i.style.transitionDuration="0ms",t.hide&&(i.style.opacity=1),l.params.cssMode&&(l.wrapperEl.style["scroll-snap-type"]="none"),s("scrollbarDragStart",e)}function y(e){var{scrollbar:t,wrapperEl:i}=l,{el:t,dragEl:n}=t;u&&(e.preventDefault?e.preventDefault():e.returnValue=!1,g(e),i.style.transitionDuration="0ms",t.style.transitionDuration="0ms",n.style.transitionDuration="0ms",s("scrollbarDragMove",e))}function _(e){const t=l.params.scrollbar,{scrollbar:i,wrapperEl:n}=l,r=i["el"];u&&(u=!1,l.params.cssMode&&(l.wrapperEl.style["scroll-snap-type"]="",n.style.transitionDuration=""),t.hide&&(clearTimeout(p),p=S(()=>{r.style.opacity=0,r.style.transitionDuration="400ms"},1e3)),s("scrollbarDragEnd",e),t.snapOnRelease)&&l.slideToClosest()}function b(e){var t,{scrollbar:i,params:n}=l,i=i.el;i&&(t=!!n.passiveListeners&&{passive:!1,capture:!1},n=!!n.passiveListeners&&{passive:!0,capture:!1},i=i)&&(i[i="on"===e?"addEventListener":"removeEventListener"]("pointerdown",v,t),a[i]("pointermove",y,t),a[i]("pointerup",_,n))}function T(){var{scrollbar:i,el:n}=l,r=(l.params.scrollbar=k(l,l.originalParams.scrollbar,l.params.scrollbar,{el:"swiper-scrollbar"}),l.params.scrollbar);if(r.el){let e,t;e=(e="string"==typeof r.el&&l.isElement?l.el.shadowRoot.querySelector(r.el):e)||"string"!=typeof r.el?e||r.el:a.querySelectorAll(r.el),(e=0<(e=l.params.uniqueNavElements&&"string"==typeof r.el&&1<e.length&&1===n.querySelectorAll(r.el).length?n.querySelector(r.el):e).length?e[0]:e).classList.add(l.isHorizontal()?r.horizontalClass:r.verticalClass),e&&((t=e.querySelector("."+l.params.scrollbar.dragClass))||(t=O("div",l.params.scrollbar.dragClass),e.append(t))),Object.assign(i,{el:e,dragEl:t}),r.draggable&&l.params.scrollbar.el&&l.scrollbar.el&&b("on"),e&&e.classList[l.enabled?"remove":"add"](l.params.scrollbar.lockClass)}}function w(){var e=l.params.scrollbar,t=l.scrollbar.el;t&&t.classList.remove(l.isHorizontal()?e.horizontalClass:e.verticalClass),l.params.scrollbar.el&&l.scrollbar.el&&b("off")}t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),l.scrollbar={el:null,dragEl:null},i("init",()=>{(!1===l.params.scrollbar.enabled?x:(T(),f(),r))()}),i("update resize observerUpdate lock unlock",()=>{f()}),i("setTranslate",()=>{r()}),i("setTransition",(e,t)=>{t=t,l.params.scrollbar.el&&l.scrollbar.el&&(l.scrollbar.dragEl.style.transitionDuration=t+"ms")}),i("enable disable",()=>{var e=l.scrollbar["el"];e&&e.classList[l.enabled?"remove":"add"](l.params.scrollbar.lockClass)}),i("destroy",()=>{w()});const x=()=>{l.el.classList.add(l.params.scrollbar.scrollbarDisabledClass),l.scrollbar.el&&l.scrollbar.el.classList.add(l.params.scrollbar.scrollbarDisabledClass),w()};Object.assign(l.scrollbar,{enable:()=>{l.el.classList.remove(l.params.scrollbar.scrollbarDisabledClass),l.scrollbar.el&&l.scrollbar.el.classList.remove(l.params.scrollbar.scrollbarDisabledClass),T(),f(),r()},disable:x,updateSize:f,setTranslate:r,init:T,destroy:w})},function(e){let{swiper:d,extendParams:t,on:i}=e;t({parallax:{enabled:!1}});const s=(e,t)=>{var i=d["rtl"],i=i?-1:1,n=e.getAttribute("data-swiper-parallax")||"0";let r=e.getAttribute("data-swiper-parallax-x"),s=e.getAttribute("data-swiper-parallax-y");var a=e.getAttribute("data-swiper-parallax-scale"),o=e.getAttribute("data-swiper-parallax-opacity"),l=e.getAttribute("data-swiper-parallax-rotate");if(r||s?(r=r||"0",s=s||"0"):d.isHorizontal()?(r=n,s="0"):(s=n,r="0"),r=0<=r.indexOf("%")?parseInt(r,10)*t*i+"%":r*t*i+"px",s=0<=s.indexOf("%")?parseInt(s,10)*t+"%":s*t+"px",null!=o){const d=o-(o-1)*(1-Math.abs(t));e.style.opacity=d}let c=`translate3d(${r}, ${s}, 0px)`;null!=a&&(c+=` scale(${a-(a-1)*(1-Math.abs(t))})`),l&&null!=l&&(c+=` rotate(${l*t*-1}deg)`),e.style.transform=c},n=()=>{const{el:e,slides:t,progress:n,snapGrid:r}=d;I(e,"[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").forEach(e=>{s(e,n)}),t.forEach((e,t)=>{let i=e.progress;1<d.params.slidesPerGroup&&"auto"!==d.params.slidesPerView&&(i+=Math.ceil(t/2)-n*(r.length-1)),i=Math.min(Math.max(i,-1),1),e.querySelectorAll("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale], [data-swiper-parallax-rotate]").forEach(e=>{s(e,i)})})};i("beforeInit",()=>{d.params.parallax.enabled&&(d.params.watchSlidesProgress=!0,d.originalParams.watchSlidesProgress=!0)}),i("init",()=>{d.params.parallax.enabled&&n()}),i("setTranslate",()=>{d.params.parallax.enabled&&n()}),i("setTransition",(e,t)=>{var i;d.params.parallax.enabled&&(void 0===(i=t)&&(i=d.params.speed),d.el.querySelectorAll("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").forEach(e=>{let t=parseInt(e.getAttribute("data-swiper-parallax-duration"),10)||i;0===i&&(t=0),e.style.transitionDuration=t+"ms"}))})},function(e){let{swiper:w,extendParams:t,on:i,emit:n}=e;const x=P();t({zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),w.zoom={enabled:!1};let r,s,S=1,a=!1;const o=[],k={slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},E={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},l={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let c=1;function d(){var e,t,i,n;return o.length<2?1:(e=o[0].pageX,t=o[0].pageY,i=o[1].pageX,n=o[1].pageY,Math.sqrt((i-e)**2+(n-t)**2))}function u(t){var e=w.isElement?"swiper-slide":"."+w.params.slideClass;return t.target.matches(e)||0<w.slides.filter(e=>e.contains(t.target)).length}function h(t){if("mouse"===t.pointerType&&o.splice(0,o.length),u(t)){var i=w.params.zoom;if(r=!1,s=!1,o.push(t),!(o.length<2)){if(r=!0,k.scaleStart=d(),!k.slideEl){k.slideEl=t.target.closest(`.${w.params.slideClass}, swiper-slide`),k.slideEl||(k.slideEl=w.slides[w.activeIndex]);let e=k.slideEl.querySelector("."+i.containerClass);if(e=e&&e.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0],k.imageEl=e,k.imageWrapEl=e?j(k.imageEl,"."+i.containerClass)[0]:void 0,!k.imageWrapEl)return void(k.imageEl=void 0);k.maxRatio=k.imageWrapEl.getAttribute("data-swiper-zoom")||i.maxRatio}if(k.imageEl){const[t,w]=o.length<2?{x:null,y:null}:(i=k.imageEl.getBoundingClientRect(),[(o[0].pageX+(o[1].pageX-o[0].pageX)/2-i.x)/S,(o[0].pageY+(o[1].pageY-o[0].pageY)/2-i.y)/S]);k.imageEl.style.transformOrigin=`${t}px ${w}px`,k.imageEl.style.transitionDuration="0ms"}a=!0}}}function p(t){var e,i,n;u(t)&&(e=w.params.zoom,i=w.zoom,0<=(n=o.findIndex(e=>e.pointerId===t.pointerId))&&(o[n]=t),o.length<2||(s=!0,k.scaleMove=d(),k.imageEl&&(i.scale=k.scaleMove/k.scaleStart*S,i.scale>k.maxRatio&&(i.scale=k.maxRatio-1+(i.scale-k.maxRatio+1)**.5),i.scale<e.minRatio&&(i.scale=e.minRatio+1-(e.minRatio-i.scale+1)**.5),k.imageEl.style.transform=`translate3d(0,0,0) scale(${i.scale})`)))}function f(t){var e,i,n;!u(t)||"mouse"===t.pointerType&&"pointerout"===t.type||(e=w.params.zoom,i=w.zoom,0<=(n=o.findIndex(e=>e.pointerId===t.pointerId))&&o.splice(n,1),r&&s&&(r=!1,s=!1,k.imageEl)&&(i.scale=Math.max(Math.min(i.scale,k.maxRatio),e.minRatio),k.imageEl.style.transitionDuration=w.params.speed+"ms",k.imageEl.style.transform=`translate3d(0,0,0) scale(${i.scale})`,S=i.scale,a=!1,1===i.scale)&&(k.slideEl=void 0))}function m(e){if(u(e)&&(t=e,i="."+w.params.zoom.containerClass,t.target.matches(i)||0<[...w.el.querySelectorAll(i)].filter(e=>e.contains(t.target)).length)){var t,i=w.zoom;if(k.imageEl&&(w.allowClick=!1,E.isTouched)&&k.slideEl){E.isMoved||(E.width=k.imageEl.offsetWidth,E.height=k.imageEl.offsetHeight,E.startX=L(k.imageWrapEl,"x")||0,E.startY=L(k.imageWrapEl,"y")||0,k.slideWidth=k.slideEl.offsetWidth,k.slideHeight=k.slideEl.offsetHeight,k.imageWrapEl.style.transitionDuration="0ms");var n=E.width*i.scale,i=E.height*i.scale;if(!(n<k.slideWidth&&i<k.slideHeight)){if(E.minX=Math.min(k.slideWidth/2-n/2,0),E.maxX=-E.minX,E.minY=Math.min(k.slideHeight/2-i/2,0),E.maxY=-E.minY,E.touchesCurrent.x=(0<o.length?o[0]:e).pageX,E.touchesCurrent.y=(0<o.length?o[0]:e).pageY,!E.isMoved&&!a){if(w.isHorizontal()&&(Math.floor(E.minX)===Math.floor(E.startX)&&E.touchesCurrent.x<E.touchesStart.x||Math.floor(E.maxX)===Math.floor(E.startX)&&E.touchesCurrent.x>E.touchesStart.x))return void(E.isTouched=!1);if(!w.isHorizontal()&&(Math.floor(E.minY)===Math.floor(E.startY)&&E.touchesCurrent.y<E.touchesStart.y||Math.floor(E.maxY)===Math.floor(E.startY)&&E.touchesCurrent.y>E.touchesStart.y))return void(E.isTouched=!1)}e.cancelable&&e.preventDefault(),e.stopPropagation(),E.isMoved=!0,E.currentX=E.touchesCurrent.x-E.touchesStart.x+E.startX,E.currentY=E.touchesCurrent.y-E.touchesStart.y+E.startY,E.currentX<E.minX&&(E.currentX=E.minX+1-(E.minX-E.currentX+1)**.8),E.currentX>E.maxX&&(E.currentX=E.maxX-1+(E.currentX-E.maxX+1)**.8),E.currentY<E.minY&&(E.currentY=E.minY+1-(E.minY-E.currentY+1)**.8),E.currentY>E.maxY&&(E.currentY=E.maxY-1+(E.currentY-E.maxY+1)**.8),l.prevPositionX||(l.prevPositionX=E.touchesCurrent.x),l.prevPositionY||(l.prevPositionY=E.touchesCurrent.y),l.prevTime||(l.prevTime=Date.now()),l.x=(E.touchesCurrent.x-l.prevPositionX)/(Date.now()-l.prevTime)/2,l.y=(E.touchesCurrent.y-l.prevPositionY)/(Date.now()-l.prevTime)/2,Math.abs(E.touchesCurrent.x-l.prevPositionX)<2&&(l.x=0),Math.abs(E.touchesCurrent.y-l.prevPositionY)<2&&(l.y=0),l.prevPositionX=E.touchesCurrent.x,l.prevPositionY=E.touchesCurrent.y,l.prevTime=Date.now(),k.imageWrapEl.style.transform=`translate3d(${E.currentX}px, ${E.currentY}px,0)`}}}}function g(){var e=w.zoom;k.slideEl&&w.previousIndex!==w.activeIndex&&(k.imageEl&&(k.imageEl.style.transform="translate3d(0,0,0) scale(1)"),k.imageWrapEl&&(k.imageWrapEl.style.transform="translate3d(0,0,0)"),e.scale=1,S=1,k.slideEl=void 0,k.imageEl=void 0,k.imageWrapEl=void 0)}function v(y){var _=w.zoom,b=w.params.zoom;if(!k.slideEl){y&&y.target&&(k.slideEl=y.target.closest(`.${w.params.slideClass}, swiper-slide`)),k.slideEl||(w.params.virtual&&w.params.virtual.enabled&&w.virtual?k.slideEl=I(w.slidesEl,"."+w.params.slideActiveClass)[0]:k.slideEl=w.slides[w.activeIndex]);let e=k.slideEl.querySelector("."+b.containerClass);e=e&&e.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0],k.imageEl=e,k.imageWrapEl=e?j(k.imageEl,"."+b.containerClass)[0]:void 0}if(k.imageEl&&k.imageWrapEl){let e,t,i,n,r,s,a,o,l,c,d,u,h,p,f,m,g,v;w.params.cssMode&&(w.wrapperEl.style.overflow="hidden",w.wrapperEl.style.touchAction="none"),k.slideEl.classList.add(""+b.zoomedSlideClass),t=void 0===E.touchesStart.x&&y?(e=y.pageX,y.pageY):(e=E.touchesStart.x,E.touchesStart.y);var T="number"==typeof y?y:null;1===S&&T&&(e=void 0,t=void 0),_.scale=T||k.imageWrapEl.getAttribute("data-swiper-zoom")||b.maxRatio,S=T||k.imageWrapEl.getAttribute("data-swiper-zoom")||b.maxRatio,!y||1===S&&T?(a=0,o=0):(g=k.slideEl.offsetWidth,v=k.slideEl.offsetHeight,i=M(k.slideEl).left+x.scrollX,n=M(k.slideEl).top+x.scrollY,r=i+g/2-e,s=n+v/2-t,l=k.imageEl.offsetWidth,c=k.imageEl.offsetHeight,d=l*_.scale,u=c*_.scale,f=-(h=Math.min(g/2-d/2,0)),m=-(p=Math.min(v/2-u/2,0)),a=r*_.scale,o=s*_.scale,(a=a<h?h:a)>f&&(a=f),(o=o<p?p:o)>m&&(o=m)),k.imageWrapEl.style.transitionDuration="300ms",k.imageWrapEl.style.transform=`translate3d(${a}px, ${o}px,0)`,k.imageEl.style.transitionDuration="300ms",k.imageEl.style.transform=`translate3d(0,0,0) scale(${_.scale})`}}function y(){var e=w.zoom,t=w.params.zoom;if(!k.slideEl){w.params.virtual&&w.params.virtual.enabled&&w.virtual?k.slideEl=I(w.slidesEl,"."+w.params.slideActiveClass)[0]:k.slideEl=w.slides[w.activeIndex];let e=k.slideEl.querySelector("."+t.containerClass);e=e&&e.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0],k.imageEl=e,k.imageWrapEl=e?j(k.imageEl,"."+t.containerClass)[0]:void 0}k.imageEl&&k.imageWrapEl&&(w.params.cssMode&&(w.wrapperEl.style.overflow="",w.wrapperEl.style.touchAction=""),e.scale=1,S=1,k.imageWrapEl.style.transitionDuration="300ms",k.imageWrapEl.style.transform="translate3d(0,0,0)",k.imageEl.style.transitionDuration="300ms",k.imageEl.style.transform="translate3d(0,0,0) scale(1)",k.slideEl.classList.remove(""+t.zoomedSlideClass),k.slideEl=void 0)}function _(e){var t=w.zoom;t.scale&&1!==t.scale?y():v(e)}function b(){return{passiveListener:!!w.params.passiveListeners&&{passive:!0,capture:!1},activeListenerWithCapture:!w.params.passiveListeners||{passive:!1,capture:!0}}}function T(){var e=w.zoom;if(!e.enabled){e.enabled=!0;const{passiveListener:t,activeListenerWithCapture:i}=b();w.wrapperEl.addEventListener("pointerdown",h,t),w.wrapperEl.addEventListener("pointermove",p,i),["pointerup","pointercancel","pointerout"].forEach(e=>{w.wrapperEl.addEventListener(e,f,t)}),w.wrapperEl.addEventListener("pointermove",m,i)}}function C(){var e=w.zoom;if(e.enabled){e.enabled=!1;const{passiveListener:t,activeListenerWithCapture:i}=b();w.wrapperEl.removeEventListener("pointerdown",h,t),w.wrapperEl.removeEventListener("pointermove",p,i),["pointerup","pointercancel","pointerout"].forEach(e=>{w.wrapperEl.removeEventListener(e,f,t)}),w.wrapperEl.removeEventListener("pointermove",m,i)}}Object.defineProperty(w.zoom,"scale",{get:()=>c,set(e){var t,i;c!==e&&(t=k.imageEl,i=k.slideEl,n("zoomChange",e,t,i)),c=e}}),i("init",()=>{w.params.zoom.enabled&&T()}),i("destroy",()=>{C()}),i("touchStart",(e,t)=>{var i;w.zoom.enabled&&(t=t,i=w.device,k.imageEl)&&!E.isTouched&&(i.android&&t.cancelable&&t.preventDefault(),E.isTouched=!0,E.touchesStart.x=t.pageX,E.touchesStart.y=t.pageY)}),i("touchEnd",(e,t)=>{if(w.zoom.enabled){var i=w.zoom;if(k.imageEl){if(!E.isTouched||!E.isMoved)return void(E.isTouched=!1,E.isMoved=!1);E.isTouched=!1,E.isMoved=!1;let e=300,t=300;var n=l.x*e,n=E.currentX+n,r=l.y*t,r=E.currentY+r,s=(0!==l.x&&(e=Math.abs((n-E.currentX)/l.x)),0!==l.y&&(t=Math.abs((r-E.currentY)/l.y)),Math.max(e,t)),n=(E.currentX=n,E.currentY=r,E.width*i.scale),r=E.height*i.scale;E.minX=Math.min(k.slideWidth/2-n/2,0),E.maxX=-E.minX,E.minY=Math.min(k.slideHeight/2-r/2,0),E.maxY=-E.minY,E.currentX=Math.max(Math.min(E.currentX,E.maxX),E.minX),E.currentY=Math.max(Math.min(E.currentY,E.maxY),E.minY),k.imageWrapEl.style.transitionDuration=s+"ms",k.imageWrapEl.style.transform=`translate3d(${E.currentX}px, ${E.currentY}px,0)`}}}),i("doubleTap",(e,t)=>{!w.animating&&w.params.zoom.enabled&&w.zoom.enabled&&w.params.zoom.toggle&&_(t)}),i("transitionEnd",()=>{w.zoom.enabled&&w.params.zoom.enabled&&g()}),i("slideChange",()=>{w.zoom.enabled&&w.params.zoom.enabled&&w.params.cssMode&&g()}),Object.assign(w.zoom,{enable:T,disable:C,in:v,out:y,toggle:_})},function(e){let{swiper:o,extendParams:t,on:i}=e;function l(e,t){const i=function(){let i,n,r;return(e,t)=>{for(n=-1,i=e.length;1<i-n;)e[r=i+n>>1]<=t?n=r:i=r;return i}}();let n,r;return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(r=i(this.x,e),n=r-1,(e-this.x[n])*(this.y[r]-this.y[n])/(this.x[r]-this.x[n])+this.y[n]):0},this}function n(){o.controller.control&&o.controller.spline&&(o.controller.spline=void 0,delete o.controller.spline)}t({controller:{control:void 0,inverse:!1,by:"slide"}}),o.controller={control:void 0},i("beforeInit",()=>{if("undefined"!=typeof window&&("string"==typeof o.params.controller.control||o.params.controller.control instanceof HTMLElement)){const t=document.querySelector(o.params.controller.control);if(t&&t.swiper)o.controller.control=t.swiper;else if(t){const i=e=>{o.controller.control=e.detail[0],o.update(),t.removeEventListener("init",i)};t.addEventListener("init",i)}}else o.controller.control=o.params.controller.control}),i("update",()=>{n()}),i("resize",()=>{n()}),i("observerUpdate",()=>{n()}),i("setTranslate",(e,t,i)=>{o.controller.control&&o.controller.setTranslate(t,i)}),i("setTransition",(e,t,i)=>{o.controller.control&&o.controller.setTransition(t,i)}),Object.assign(o.controller,{setTranslate:function(e,t){var i=o.controller.control;let n,r;var s=o.constructor;function a(e){var t,i=o.rtlTranslate?-o.translate:o.translate;"slide"===o.params.controller.by&&(t=e,o.controller.spline||(o.controller.spline=o.params.loop?new l(o.slidesGrid,t.slidesGrid):new l(o.snapGrid,t.snapGrid)),r=-o.controller.spline.interpolate(-i)),r&&"container"!==o.params.controller.by||(n=(e.maxTranslate()-e.minTranslate())/(o.maxTranslate()-o.minTranslate()),r=(i-o.minTranslate())*n+e.minTranslate()),o.params.controller.inverse&&(r=e.maxTranslate()-r),e.updateProgress(r),e.setTranslate(r,o),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(i))for(let e=0;e<i.length;e+=1)i[e]!==t&&i[e]instanceof s&&a(i[e]);else i instanceof s&&t!==i&&a(i)},setTransition:function(t,e){const i=o.constructor,n=o.controller.control;let r;function s(e){e.setTransition(t,o),0!==t&&(e.transitionStart(),e.params.autoHeight&&S(()=>{e.updateAutoHeight()}),m(e.wrapperEl,()=>{n&&e.transitionEnd()}))}if(Array.isArray(n))for(r=0;r<n.length;r+=1)n[r]!==e&&n[r]instanceof i&&s(n[r]);else n instanceof i&&e!==n&&s(n)}})},function(e){let{swiper:o,extendParams:t,on:i}=e,l=(t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),o.a11y={clicked:!1},null);function n(e){var t=l;0!==t.length&&(t.innerHTML="",t.innerHTML=e)}const c=e=>e=Array.isArray(e)?e:[e].filter(e=>!!e);function r(e){(e=c(e)).forEach(e=>{e.setAttribute("tabIndex","0")})}function s(e){(e=c(e)).forEach(e=>{e.setAttribute("tabIndex","-1")})}function a(e,t){(e=c(e)).forEach(e=>{e.setAttribute("role",t)})}function d(e,t){(e=c(e)).forEach(e=>{e.setAttribute("aria-roledescription",t)})}function u(e,t){(e=c(e)).forEach(e=>{e.setAttribute("aria-label",t)})}function h(e){(e=c(e)).forEach(e=>{e.setAttribute("aria-disabled",!0)})}function p(e){(e=c(e)).forEach(e=>{e.setAttribute("aria-disabled",!1)})}function f(e){var t,i;13!==e.keyCode&&32!==e.keyCode||(t=o.params.a11y,i=e.target,o.pagination&&o.pagination.el&&(i===o.pagination.el||o.pagination.el.contains(e.target))&&!e.target.matches(x(o.params.pagination.bulletClass)))||(o.navigation&&o.navigation.nextEl&&i===o.navigation.nextEl&&(o.isEnd&&!o.params.loop||o.slideNext(),o.isEnd?n(t.lastSlideMessage):n(t.nextSlideMessage)),o.navigation&&o.navigation.prevEl&&i===o.navigation.prevEl&&(o.isBeginning&&!o.params.loop||o.slidePrev(),o.isBeginning?n(t.firstSlideMessage):n(t.prevSlideMessage)),o.pagination&&i.matches(x(o.params.pagination.bulletClass))&&i.click())}function m(){return o.pagination&&o.pagination.bullets&&o.pagination.bullets.length}function g(){return m()&&o.params.pagination.clickable}const v=(e,t,i)=>{var n;r(e),"BUTTON"!==e.tagName&&(a(e,"button"),e.addEventListener("keydown",f)),u(e,i),i=e,n=t,(i=c(i)).forEach(e=>{e.setAttribute("aria-controls",n)})},y=()=>{o.a11y.clicked=!0},_=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{o.destroyed||(o.a11y.clicked=!1)})})},b=e=>{var t,i,n;o.a11y.clicked||(t=e.target.closest(`.${o.params.slideClass}, swiper-slide`))&&o.slides.includes(t)&&(i=o.slides.indexOf(t)===o.activeIndex,n=o.params.watchSlidesProgress&&o.visibleSlides&&o.visibleSlides.includes(t),i||n||e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents||(o.isHorizontal()?o.el.scrollLeft=0:o.el.scrollTop=0,o.slideTo(o.slides.indexOf(t),0)))},T=()=>{const i=o.params.a11y,n=(i.itemRoleDescriptionMessage&&d(o.slides,i.itemRoleDescriptionMessage),i.slideRole&&a(o.slides,i.slideRole),o.slides.length);i.slideLabelMessage&&o.slides.forEach((e,t)=>{t=o.params.loop?parseInt(e.getAttribute("data-swiper-slide-index"),10):t;u(e,i.slideLabelMessage.replace(/\{\{index\}\}/,t+1).replace(/\{\{slidesLength\}\}/,n))})};i("beforeInit",()=>{(l=O("span",o.params.a11y.notificationClass)).setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),o.isElement&&l.setAttribute("slot","container-end")}),i("afterInit",()=>{if(o.params.a11y.enabled){const r=o.params.a11y;o.el.append(l);var e=o.el;r.containerRoleDescriptionMessage&&d(e,r.containerRoleDescriptionMessage),r.containerMessage&&u(e,r.containerMessage);const s=o.wrapperEl,a=r.id||s.getAttribute("id")||"swiper-wrapper-"+"x".repeat(e=void 0===(e=16)?16:e).replace(/x/g,()=>Math.round(16*Math.random()).toString(16));var t,e=o.params.autoplay&&o.params.autoplay.enabled?"off":"polite",i=a,{nextEl:e,prevEl:n}=(c(s).forEach(e=>{e.setAttribute("id",i)}),n=s,t=e,(n=c(n)).forEach(e=>{e.setAttribute("aria-live",t)}),T(),o.navigation||{}),e=c(e),n=c(n);e&&e.forEach(e=>v(e,a,r.nextSlideMessage)),n&&n.forEach(e=>v(e,a,r.prevSlideMessage)),g()&&(Array.isArray(o.pagination.el)?o.pagination.el:[o.pagination.el]).forEach(e=>{e.addEventListener("keydown",f)}),o.el.addEventListener("focus",b,!0),o.el.addEventListener("pointerdown",y,!0),o.el.addEventListener("pointerup",_,!0)}}),i("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{o.params.a11y.enabled&&T()}),i("fromEdge toEdge afterInit lock unlock",()=>{var e,t;o.params.a11y.enabled&&!o.params.loop&&!o.params.rewind&&o.navigation&&({nextEl:e,prevEl:t}=o.navigation,t&&(o.isBeginning?(h(t),s):(p(t),r))(t),e)&&(o.isEnd?(h(e),s):(p(e),r))(e)}),i("paginationUpdate",()=>{if(o.params.a11y.enabled){const t=o.params.a11y;m()&&o.pagination.bullets.forEach(e=>{o.params.pagination.clickable&&(r(e),o.params.pagination.renderBullet||(a(e,"button"),u(e,t.paginationBulletMessage.replace(/\{\{index\}\}/,w(e)+1)))),e.matches(x(o.params.pagination.bulletActiveClass))?e.setAttribute("aria-current","true"):e.removeAttribute("aria-current")})}}),i("destroy",()=>{var e,t;o.params.a11y.enabled&&(l&&0<l.length&&l.remove(),{nextEl:e,prevEl:t}=o.navigation||{},e=c(e),t=c(t),e&&e.forEach(e=>e.removeEventListener("keydown",f)),t&&t.forEach(e=>e.removeEventListener("keydown",f)),g()&&(Array.isArray(o.pagination.el)?o.pagination.el:[o.pagination.el]).forEach(e=>{e.removeEventListener("keydown",f)}),o.el.removeEventListener("focus",b,!0),o.el.removeEventListener("pointerdown",y,!0),o.el.removeEventListener("pointerup",_,!0))})},function(e){let{swiper:a,extendParams:t,on:i}=e,s=(t({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}}),!1),n={};const o=e=>e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),r=e=>{var t=P(),e=(e?new URL(e):t.location).pathname.slice(1).split("/").filter(e=>""!==e),t=e.length;return{key:e[t-2],value:e[t-1]}},l=(i,e)=>{var n=P();if(s&&a.params.history.enabled){var r=a.params.url?new URL(a.params.url):n.location,e=a.slides[e];let t=o(e.getAttribute("data-history"));if(0<a.params.history.root.length){let e=a.params.history.root;"/"===e[e.length-1]&&(e=e.slice(0,e.length-1)),t=e+"/"+(i?i+"/":"")+t}else r.pathname.includes(i)||(t=(i?i+"/":"")+t);a.params.history.keepQuery&&(t+=r.search);e=n.history.state;e&&e.value===t||(a.params.history.replaceState?n.history.replaceState({value:t},null,t):n.history.pushState({value:t},null,t))}},c=(i,n,r)=>{if(n)for(let e=0,t=a.slides.length;e<t;e+=1){var s=a.slides[e];if(o(s.getAttribute("data-history"))===n){const n=a.getSlideIndex(s);a.slideTo(n,i,r)}}else a.slideTo(0,i,r)},d=()=>{n=r(a.params.url),c(a.params.speed,n.value,!1)};i("init",()=>{var e;a.params.history.enabled&&(e=P(),a.params.history)&&(e.history&&e.history.pushState?(s=!0,((n=r(a.params.url)).key||n.value)&&c(0,n.value,a.params.runCallbacksOnInit),a.params.history.replaceState||e.addEventListener("popstate",d)):(a.params.history.enabled=!1,a.params.hashNavigation.enabled=!0))}),i("destroy",()=>{var e;a.params.history.enabled&&(e=P(),a.params.history.replaceState||e.removeEventListener("popstate",d))}),i("transitionEnd _freeModeNoMomentumRelease",()=>{s&&l(a.params.history.key,a.activeIndex)}),i("slideChange",()=>{s&&a.params.cssMode&&l(a.params.history.key,a.activeIndex)})},function(e){let{swiper:r,extendParams:t,emit:i,on:n}=e,s=!1;const a=A(),o=P(),l=(t({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}}),()=>{i("hashChange");var e=a.location.hash.replace("#","");e!==r.slides[r.activeIndex].getAttribute("data-hash")&&void 0!==(e=r.getSlideIndex(I(r.slidesEl,`.${r.params.slideClass}[data-hash="${e}"], swiper-slide[data-hash="${e}"]`)[0]))&&r.slideTo(e)}),c=()=>{var e;s&&r.params.hashNavigation.enabled&&(r.params.hashNavigation.replaceState&&o.history&&o.history.replaceState?o.history.replaceState(null,null,"#"+r.slides[r.activeIndex].getAttribute("data-hash")||""):(e=(e=r.slides[r.activeIndex]).getAttribute("data-hash")||e.getAttribute("data-history"),a.location.hash=e||""),i("hashSet"))};n("init",()=>{if(r.params.hashNavigation.enabled&&!(!r.params.hashNavigation.enabled||r.params.history&&r.params.history.enabled)){s=!0;const n=a.location.hash.replace("#","");if(n)for(let e=0,t=r.slides.length;e<t;e+=1){var i=r.slides[e];if((i.getAttribute("data-hash")||i.getAttribute("data-history"))===n){const n=r.getSlideIndex(i);r.slideTo(n,0,r.params.runCallbacksOnInit,!0)}}r.params.hashNavigation.watchState&&o.addEventListener("hashchange",l)}}),n("destroy",()=>{r.params.hashNavigation.enabled&&r.params.hashNavigation.watchState&&o.removeEventListener("hashchange",l)}),n("transitionEnd _freeModeNoMomentumRelease",()=>{s&&c()}),n("slideChange",()=>{s&&r.params.cssMode&&c()})},function(e){let s,a,{swiper:o,extendParams:t,on:i,emit:l,params:n}=e;o.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let c,r,d,u,h,p,f,m=n&&n.autoplay?n.autoplay.delay:3e3,g=n&&n.autoplay?n.autoplay.delay:3e3,v=(new Date).getTime;function y(e){o&&!o.destroyed&&o.wrapperEl&&e.target===o.wrapperEl&&(o.wrapperEl.removeEventListener("transitionend",y),S())}const _=()=>{var e;!o.destroyed&&o.autoplay.running&&(o.autoplay.paused?r=!0:r&&(g=c,r=!1),e=o.autoplay.paused?c:v+g-(new Date).getTime(),o.autoplay.timeLeft=e,l("autoplayTimeLeft",e,e/m),a=requestAnimationFrame(()=>{_()}))},b=t=>{if(!o.destroyed&&o.autoplay.running){cancelAnimationFrame(a),_();let e=void 0===t?o.params.autoplay.delay:t;m=o.params.autoplay.delay,g=o.params.autoplay.delay;var i=(()=>{var e=o.virtual&&o.params.virtual.enabled?o.slides.filter(e=>e.classList.contains("swiper-slide-active"))[0]:o.slides[o.activeIndex];if(e)return parseInt(e.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(i)&&0<i&&void 0===t&&(e=i,m=i,g=i),c=e;const n=o.params.speed,r=()=>{o&&!o.destroyed&&(o.params.autoplay.reverseDirection?!o.isBeginning||o.params.loop||o.params.rewind?(o.slidePrev(n,!0,!0),l("autoplay")):o.params.autoplay.stopOnLastSlide||(o.slideTo(o.slides.length-1,n,!0,!0),l("autoplay")):!o.isEnd||o.params.loop||o.params.rewind?(o.slideNext(n,!0,!0),l("autoplay")):o.params.autoplay.stopOnLastSlide||(o.slideTo(0,n,!0,!0),l("autoplay")),o.params.cssMode)&&(v=(new Date).getTime(),requestAnimationFrame(()=>{b()}))};return 0<e?(clearTimeout(s),s=setTimeout(()=>{r()},e)):requestAnimationFrame(()=>{r()}),e}},T=()=>{o.autoplay.running=!0,b(),l("autoplayStart")},w=()=>{o.autoplay.running=!1,clearTimeout(s),cancelAnimationFrame(a),l("autoplayStop")},x=(e,t)=>{!o.destroyed&&o.autoplay.running&&(clearTimeout(s),e||(f=!0),e=()=>{l("autoplayPause"),o.params.autoplay.waitForTransition?o.wrapperEl.addEventListener("transitionend",y):S()},o.autoplay.paused=!0,t?(p&&(c=o.params.autoplay.delay),p=!1,e()):(t=c||o.params.autoplay.delay,c=t-((new Date).getTime()-v),o.isEnd&&c<0&&!o.params.loop||(c<0&&(c=0),e())))},S=()=>{o.isEnd&&c<0&&!o.params.loop||o.destroyed||!o.autoplay.running||(v=(new Date).getTime(),f?(f=!1,b(c)):b(),o.autoplay.paused=!1,l("autoplayResume"))},k=()=>{var e;!o.destroyed&&o.autoplay.running&&("hidden"===(e=A()).visibilityState&&(f=!0,x(!0)),"visible"===e.visibilityState)&&S()},E=e=>{"mouse"===e.pointerType&&(f=!0,x(!0))},C=e=>{"mouse"===e.pointerType&&o.autoplay.paused&&S()};i("init",()=>{o.params.autoplay.enabled&&(o.params.autoplay.pauseOnMouseEnter&&(o.el.addEventListener("pointerenter",E),o.el.addEventListener("pointerleave",C)),A().addEventListener("visibilitychange",k),v=(new Date).getTime(),T())}),i("destroy",()=>{o.el.removeEventListener("pointerenter",E),o.el.removeEventListener("pointerleave",C),A().removeEventListener("visibilitychange",k),o.autoplay.running&&w()}),i("beforeTransitionStart",(e,t,i)=>{!o.destroyed&&o.autoplay.running&&(i||!o.params.autoplay.disableOnInteraction?x(!0,!0):w())}),i("sliderFirstMove",()=>{!o.destroyed&&o.autoplay.running&&(o.params.autoplay.disableOnInteraction?w():(d=!0,u=!1,f=!1,h=setTimeout(()=>{f=!0,u=!0,x(!0)},200)))}),i("touchEnd",()=>{!o.destroyed&&o.autoplay.running&&d&&(clearTimeout(h),clearTimeout(s),d=(u=(o.params.autoplay.disableOnInteraction||u&&o.params.cssMode&&S(),!1),!1))}),i("slideChange",()=>{!o.destroyed&&o.autoplay.running&&(p=!0)}),Object.assign(o.autoplay,{start:T,stop:w,pause:x,resume:S})},function(e){let{swiper:l,extendParams:t,on:i}=e,n=(t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}}),!1),r=!1;function s(){var e,t,i=l.thumbs.swiper;!i||i.destroyed||(e=i.clickedIndex,(t=i.clickedSlide)&&t.classList.contains(l.params.thumbs.slideThumbActiveClass))||null!=e&&(t=i.params.loop?parseInt(i.clickedSlide.getAttribute("data-swiper-slide-index"),10):e,l.params.loop?l.slideToLoop(t):l.slideTo(t))}function a(){var e=l.params["thumbs"];if(n)return!1;n=!0;var t=l.constructor;return e.swiper instanceof t?(l.thumbs.swiper=e.swiper,Object.assign(l.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(l.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),l.thumbs.swiper.update()):c(e.swiper)&&(e=Object.assign({},e.swiper),Object.assign(e,{watchSlidesProgress:!0,slideToClickedSlide:!1}),l.thumbs.swiper=new t(e),r=!0),l.thumbs.swiper.el.classList.add(l.params.thumbs.thumbsContainerClass),l.thumbs.swiper.on("tap",s),!0}function o(n){var r=l.thumbs.swiper;if(r&&!r.destroyed){var s="auto"===r.params.slidesPerView?r.slidesPerViewDynamic():r.params.slidesPerView;let t=1;const i=l.params.thumbs.slideThumbActiveClass;if(1<l.params.slidesPerView&&!l.params.centeredSlides&&(t=l.params.slidesPerView),l.params.thumbs.multipleActiveThumbs||(t=1),t=Math.floor(t),r.slides.forEach(e=>e.classList.remove(i)),r.params.loop||r.params.virtual&&r.params.virtual.enabled)for(let e=0;e<t;e+=1)I(r.slidesEl,`[data-swiper-slide-index="${l.realIndex+e}"]`).forEach(e=>{e.classList.add(i)});else for(let e=0;e<t;e+=1)r.slides[l.realIndex+e]&&r.slides[l.realIndex+e].classList.add(i);var a=l.params.thumbs.autoScrollOffset,o=a&&!r.params.loop;if(l.realIndex!==r.realIndex||o){const e=r.activeIndex;let t,i;if(r.params.loop){const n=r.slides.filter(e=>e.getAttribute("data-swiper-slide-index")===""+l.realIndex)[0];t=r.slides.indexOf(n),i=l.activeIndex>l.previousIndex?"next":"prev"}else t=l.realIndex,i=t>l.previousIndex?"next":"prev";o&&(t+="next"===i?a:-1*a),r.visibleSlidesIndexes&&r.visibleSlidesIndexes.indexOf(t)<0&&(r.params.centeredSlides?t=t>e?t-Math.floor(s/2)+1:t+Math.floor(s/2)-1:t>e&&r.params.slidesPerGroup,r.slideTo(t,n?0:void 0))}}}l.thumbs={swiper:null},i("beforeInit",()=>{const i=l.params["thumbs"];if(i&&i.swiper)if("string"==typeof i.swiper||i.swiper instanceof HTMLElement){const n=A(),e=()=>{l.destroyed||(()=>{const t="string"==typeof i.swiper?n.querySelector(i.swiper):i.swiper;if(t&&t.swiper)i.swiper=t.swiper,a(),o(!0);else if(t){const n=e=>{i.swiper=e.detail[0],t.removeEventListener("init",n),a(),o(!0),i.swiper.update(),l.update()};t.addEventListener("init",n)}return t})()||requestAnimationFrame(e)};requestAnimationFrame(e)}else a(),o(!0)}),i("slideChange update resize observerUpdate",()=>{o()}),i("setTransition",(e,t)=>{var i=l.thumbs.swiper;i&&!i.destroyed&&i.setTransition(t)}),i("beforeDestroy",()=>{var e=l.thumbs.swiper;e&&!e.destroyed&&r&&e.destroy()}),Object.assign(l.thumbs,{init:a,update:o})},function(e){let{swiper:h,extendParams:t,emit:p,once:f}=e;t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(h,{freeMode:{onTouchStart:function(){var e=h.getTranslate();h.setTranslate(e),h.setTransition(0),h.touchEventsData.velocities.length=0,h.freeMode.onTouchEnd({currentPos:h.rtl?h.translate:-h.translate})},onTouchMove:function(){var{touchEventsData:e,touches:t}=h;0===e.velocities.length&&e.velocities.push({position:t[h.isHorizontal()?"startX":"startY"],time:e.touchStartTime}),e.velocities.push({position:t[h.isHorizontal()?"currentX":"currentY"],time:v()})},onTouchEnd:function(s){let a=s["currentPos"];const{params:o,wrapperEl:l,rtlTranslate:c,snapGrid:d,touchEventsData:u}=h,e=v()-u.touchStartTime;if(a<-h.minTranslate())h.slideTo(h.activeIndex);else if(a>-h.maxTranslate())h.slides.length<d.length?h.slideTo(d.length-1):h.slideTo(h.slides.length-1);else{if(o.freeMode.momentum){if(1<u.velocities.length){const s=u.velocities.pop(),a=u.velocities.pop(),p=s.position-a.position,f=s.time-a.time;h.velocity=p/f,h.velocity/=2,Math.abs(h.velocity)<o.freeMode.minimumVelocity&&(h.velocity=0),(150<f||300<v()-s.time)&&(h.velocity=0)}else h.velocity=0;h.velocity*=o.freeMode.momentumVelocityRatio,u.velocities.length=0;let e=1e3*o.freeMode.momentumRatio;const a=h.velocity*e;let i=h.translate+a;c&&(i=-i);let t,n=!1;s=20*Math.abs(h.velocity)*o.freeMode.momentumBounceRatio;let r;if(i<h.maxTranslate())o.freeMode.momentumBounce?(i+h.maxTranslate()<-s&&(i=h.maxTranslate()-s),t=h.maxTranslate(),n=!0,u.allowMomentumBounce=!0):i=h.maxTranslate(),o.loop&&o.centeredSlides&&(r=!0);else if(i>h.minTranslate())o.freeMode.momentumBounce?(i-h.minTranslate()>s&&(i=h.minTranslate()+s),t=h.minTranslate(),n=!0,u.allowMomentumBounce=!0):i=h.minTranslate(),o.loop&&o.centeredSlides&&(r=!0);else if(o.freeMode.sticky){let t;for(let e=0;e<d.length;e+=1)if(d[e]>-i){t=e;break}i=-(i=Math.abs(d[t]-i)<Math.abs(d[t-1]-i)||"next"===h.swipeDirection?d[t]:d[t-1])}if(r&&f("transitionEnd",()=>{h.loopFix()}),0!==h.velocity){if(e=c?Math.abs((-i-h.translate)/h.velocity):Math.abs((i-h.translate)/h.velocity),o.freeMode.sticky){const a=Math.abs((c?-i:i)-h.translate),p=h.slidesSizesGrid[h.activeIndex];e=a<p?o.speed:a<2*p?1.5*o.speed:2.5*o.speed}}else if(o.freeMode.sticky)return void h.slideToClosest();o.freeMode.momentumBounce&&n?(h.updateProgress(t),h.setTransition(e),h.setTranslate(i),h.transitionStart(!0,h.swipeDirection),h.animating=!0,m(l,()=>{h&&!h.destroyed&&u.allowMomentumBounce&&(p("momentumBounce"),h.setTransition(o.speed),setTimeout(()=>{h.setTranslate(t),m(l,()=>{h&&!h.destroyed&&h.transitionEnd()})},0))})):h.velocity?(p("_freeModeNoMomentumRelease"),h.updateProgress(i),h.setTransition(e),h.setTranslate(i),h.transitionStart(!0,h.swipeDirection),h.animating||(h.animating=!0,m(l,()=>{h&&!h.destroyed&&h.transitionEnd()}))):h.updateProgress(i),h.updateActiveIndex(),h.updateSlidesClasses()}else{if(o.freeMode.sticky)return void h.slideToClosest();o.freeMode&&p("_freeModeNoMomentumRelease")}(!o.freeMode.momentum||e>=o.longSwipesMs)&&(h.updateProgress(),h.updateActiveIndex(),h.updateSlidesClasses())}}}})},function(e){let u,h,p,{swiper:f,extendParams:t}=e;t({grid:{rows:1,fill:"column"}}),f.grid={initSlides:e=>{var t=f.params["slidesPerView"],{rows:i,fill:n}=f.params.grid;h=u/i,p=Math.floor(e/i),u=Math.floor(e/i)===e/i?e:Math.ceil(e/i)*i,"auto"!==t&&"row"===n&&(u=Math.max(u,t*i))},updateSlide:(e,t,i,n)=>{var{slidesPerGroup:r,spaceBetween:s}=f.params,{rows:a,fill:o}=f.params.grid;let l,c,d;if("row"===o&&1<r){const h=Math.floor(e/(r*a)),p=e-a*r*h,f=0===h?r:Math.min(Math.ceil((i-h*a*r)/a),r);d=Math.floor(p/f),l=(c=p-d*f+h*r)+d*u/a,t.style.order=l}else"column"===o?(c=Math.floor(e/a),d=e-c*a,(c>p||c===p&&d===a-1)&&(d+=1)>=a&&(d=0,c+=1)):(d=Math.floor(e/h),c=e-d*h);t.style[n("margin-top")]=0!==d?s&&s+"px":""},updateWrapperSize:(i,n,e)=>{var{spaceBetween:t,centeredSlides:r,roundLengths:s}=f.params,a=f.params.grid["rows"];if(f.virtualSize=(i+t)*u,f.virtualSize=Math.ceil(f.virtualSize/a)-t,f.wrapperEl.style[e("width")]=f.virtualSize+t+"px",r){const i=[];for(let t=0;t<n.length;t+=1){let e=n[t];s&&(e=Math.floor(e)),n[t]<f.virtualSize+n[0]&&i.push(e)}n.splice(0,n.length),n.push(...i)}}}},function(e){e=e.swiper;Object.assign(e,{appendSlide:function(t){const{params:e,slidesEl:i}=this;e.loop&&this.loopDestroy();var n=e=>{var t;"string"==typeof e?((t=document.createElement("div")).innerHTML=e,i.append(t.children[0]),t.innerHTML=""):i.append(e)};if("object"==typeof t&&"length"in t)for(let e=0;e<t.length;e+=1)t[e]&&n(t[e]);else n(t);this.recalcSlides(),e.loop&&this.loopCreate(),e.observer&&!this.isElement||this.update()}.bind(e),prependSlide:function(t){const{params:e,activeIndex:i,slidesEl:n}=this;e.loop&&this.loopDestroy();let r=i+1;var s=e=>{var t;"string"==typeof e?((t=document.createElement("div")).innerHTML=e,n.prepend(t.children[0]),t.innerHTML=""):n.prepend(e)};if("object"==typeof t&&"length"in t){for(let e=0;e<t.length;e+=1)t[e]&&s(t[e]);r=i+t.length}else s(t);this.recalcSlides(),e.loop&&this.loopCreate(),e.observer&&!this.isElement||this.update(),this.slideTo(r,0,!1)}.bind(e),addSlide:function(t,i){var n=this,{params:r,activeIndex:s,slidesEl:a}=n;let o=s;if(r.loop&&(o-=n.loopedSlides,n.loopDestroy(),n.recalcSlides()),s=n.slides.length,t<=0)n.prependSlide(i);else if(s<=t)n.appendSlide(i);else{let e=o>t?o+1:o;var l=[];for(let e=s-1;e>=t;--e){const t=n.slides[e];t.remove(),l.unshift(t)}if("object"==typeof i&&"length"in i){for(let e=0;e<i.length;e+=1)i[e]&&a.append(i[e]);e=o>t?o+i.length:o}else a.append(i);for(let e=0;e<l.length;e+=1)a.append(l[e]);n.recalcSlides(),r.loop&&n.loopCreate(),r.observer&&!n.isElement||n.update(),r.loop?n.slideTo(e+n.loopedSlides,0,!1):n.slideTo(e,0,!1)}}.bind(e),removeSlide:function(t){var i=this,{params:e,activeIndex:n}=i;let r=n;e.loop&&(r-=i.loopedSlides,i.loopDestroy());let s,a=r;if("object"==typeof t&&"length"in t)for(let e=0;e<t.length;e+=1)s=t[e],i.slides[s]&&i.slides[s].remove(),s<a&&--a;else s=t,i.slides[s]&&i.slides[s].remove(),s<a&&--a;a=Math.max(a,0),i.recalcSlides(),e.loop&&i.loopCreate(),e.observer&&!i.isElement||i.update(),e.loop?i.slideTo(a+i.loopedSlides,0,!1):i.slideTo(a,0,!1)}.bind(e),removeAllSlides:function(){var t=[];for(let e=0;e<this.slides.length;e+=1)t.push(e);this.removeSlide(t)}.bind(e)})},function(e){let{swiper:a,extendParams:t,on:i}=e;t({fadeEffect:{crossFade:!1}}),b({effect:"fade",swiper:a,on:i,setTranslate:()=>{const n=a["slides"];a.params.fadeEffect;for(let i=0;i<n.length;i+=1){const n=a.slides[i];let e=-n.swiperSlideOffset,t=(a.params.virtualTranslate||(e-=a.translate),0);a.isHorizontal()||(t=e,e=0);var r=a.params.fadeEffect.crossFade?Math.max(1-Math.abs(n.progress),0):1+Math.min(Math.max(n.progress,-1),0),s=T(0,n);s.style.opacity=r,s.style.transform=`translate3d(${e}px, ${t}px, 0px)`}},setTransition:t=>{var e=a.slides.map(e=>s(e));e.forEach(e=>{e.style.transitionDuration=t+"ms"}),E({swiper:a,duration:t,transformElements:e,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!a.params.cssMode})})},function(e){let{swiper:g,extendParams:t,on:i}=e;t({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const v=(e,t,i)=>{let n=i?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),r=i?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom");n||(n=O("div","swiper-slide-shadow-"+(i?"left":"top")),e.append(n)),r||(r=O("div","swiper-slide-shadow-"+(i?"right":"bottom")),e.append(r)),n&&(n.style.opacity=Math.max(-t,0)),r&&(r.style.opacity=Math.max(t,0))};b({effect:"cube",swiper:g,on:i,setTranslate:()=>{const{el:e,wrapperEl:t,slides:o,width:i,height:n,rtlTranslate:l,size:c,browser:d}=g,u=g.params.cubeEffect,h=g.isHorizontal(),p=g.virtual&&g.params.virtual.enabled;let r,f=0;u.shadow&&(h?((r=g.slidesEl.querySelector(".swiper-cube-shadow"))||(r=O("div","swiper-cube-shadow"),g.slidesEl.append(r)),r.style.height=i+"px"):(r=e.querySelector(".swiper-cube-shadow"))||(r=O("div","swiper-cube-shadow"),e.append(r)));for(let a=0;a<o.length;a+=1){const g=o[a];let e=a,t=90*(e=p?parseInt(g.getAttribute("data-swiper-slide-index"),10):e),i=Math.floor(t/360);l&&(t=-t,i=Math.floor(-t/360));const d=Math.max(Math.min(g.progress,1),-1);let n=0,r=0,s=0;e%4==0?(n=4*-i*c,s=0):(e-1)%4==0?(n=0,s=4*-i*c):(e-2)%4==0?(n=c+4*i*c,s=c):(e-3)%4==0&&(n=-c,s=3*c+4*c*i),l&&(n=-n),h||(r=n,n=0);var m=`rotateX(${h?0:-t}deg) rotateY(${h?t:0}deg) translate3d(${n}px, ${r}px, ${s}px)`;d<=1&&-1<d&&(f=90*e+90*d,l)&&(f=90*-e-90*d),g.style.transform=m,u.slideShadows&&v(g,d,h)}if(t.style.transformOrigin=`50% 50% -${c/2}px`,t.style["-webkit-transform-origin"]=`50% 50% -${c/2}px`,u.shadow)if(h)r.style.transform=`translate3d(0px, ${i/2+u.shadowOffset}px, ${-i/2}px) rotateX(90deg) rotateZ(0deg) scale(${u.shadowScale})`;else{const e=Math.abs(f)-90*Math.floor(Math.abs(f)/90),g=1.5-(Math.sin(2*e*Math.PI/360)/2+Math.cos(2*e*Math.PI/360)/2),t=u.shadowScale,o=u.shadowScale/g,v=u.shadowOffset;r.style.transform=`scale3d(${t}, 1, ${o}) translate3d(0px, ${n/2+v}px, ${-n/2/o}px) rotateX(-90deg)`}var s=(d.isSafari||d.isWebView)&&d.needPerspectiveFix?-c/2:0;t.style.transform=`translate3d(0px,0,${s}px) rotateX(${g.isHorizontal()?0:f}deg) rotateY(${g.isHorizontal()?-f:0}deg)`,t.style.setProperty("--swiper-cube-translate-z",s+"px")},setTransition:t=>{var{el:e,slides:i}=g;if(i.forEach(e=>{e.style.transitionDuration=t+"ms",e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(e=>{e.style.transitionDuration=t+"ms"})}),g.params.cubeEffect.shadow&&!g.isHorizontal()){const g=e.querySelector(".swiper-cube-shadow");g&&(g.style.transitionDuration=t+"ms")}},recreateShadows:()=>{const i=g.isHorizontal();g.slides.forEach(e=>{var t=Math.max(Math.min(e.progress,1),-1);v(e,t,i)})},getEffectParams:()=>g.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})},function(e){let{swiper:u,extendParams:t,on:i}=e;t({flipEffect:{slideShadows:!0,limitRotation:!0}});const h=(e,t,i)=>{let n=u.isHorizontal()?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),r=u.isHorizontal()?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom");n=n||R(0,e,u.isHorizontal()?"left":"top"),r=r||R(0,e,u.isHorizontal()?"right":"bottom"),n&&(n.style.opacity=Math.max(-t,0)),r&&(r.style.opacity=Math.max(t,0))};b({effect:"flip",swiper:u,on:i,setTranslate:()=>{var{slides:a,rtlTranslate:o}=u,l=u.params.flipEffect;for(let s=0;s<a.length;s+=1){var c=a[s];let e=c.progress;u.params.flipEffect.limitRotation&&(e=Math.max(Math.min(c.progress,1),-1));var d=c.swiperSlideOffset;let t=-180*e,i=0,n=u.params.cssMode?-d-u.translate:-d,r=0;u.isHorizontal()?o&&(t=-t):(r=n,n=0,i=-t,t=0),c.style.zIndex=-Math.abs(Math.round(e))+a.length,l.slideShadows&&h(c,e);d=`translate3d(${n}px, ${r}px, 0px) rotateX(${i}deg) rotateY(${t}deg)`;T(0,c).style.transform=d}},setTransition:t=>{var e=u.slides.map(e=>s(e));e.forEach(e=>{e.style.transitionDuration=t+"ms",e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(e=>{e.style.transitionDuration=t+"ms"})}),E({swiper:u,duration:t,transformElements:e})},recreateShadows:()=>{u.params.flipEffect,u.slides.forEach(e=>{let t=e.progress;u.params.flipEffect.limitRotation&&(t=Math.max(Math.min(e.progress,1),-1)),h(e,t)})},getEffectParams:()=>u.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!u.params.cssMode})})},function(e){let{swiper:_,extendParams:t,on:i}=e;t({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),b({effect:"coverflow",swiper:_,on:i,setTranslate:()=>{const{width:e,height:l,slides:c,slidesSizesGrid:d}=_,u=_.params.coverflowEffect,h=_.isHorizontal(),p=_.translate,f=h?e/2-p:l/2-p,m=h?u.rotate:-u.rotate,g=u.depth;for(let o=0,e=c.length;o<e;o+=1){const _=c[o],l=d[o],p=(f-_.swiperSlideOffset-l/2)/l,y="function"==typeof u.modifier?u.modifier(p):p*u.modifier;let e=h?m*y:0,t=h?0:m*y,i=-g*Math.abs(y),n=u.stretch,r=("string"==typeof n&&-1!==n.indexOf("%")&&(n=parseFloat(u.stretch)/100*l),h?0:n*y),s=h?n*y:0,a=1-(1-u.scale)*Math.abs(y);Math.abs(s)<.001&&(s=0),Math.abs(r)<.001&&(r=0),Math.abs(i)<.001&&(i=0),Math.abs(e)<.001&&(e=0),Math.abs(t)<.001&&(t=0),Math.abs(a)<.001&&(a=0);var v=`translate3d(${s}px,${r}px,${i}px)  rotateX(${t}deg) rotateY(${e}deg) scale(${a})`;if(T(0,_).style.transform=v,_.style.zIndex=1-Math.abs(Math.round(y)),u.slideShadows){let e=h?_.querySelector(".swiper-slide-shadow-left"):_.querySelector(".swiper-slide-shadow-top"),t=h?_.querySelector(".swiper-slide-shadow-right"):_.querySelector(".swiper-slide-shadow-bottom");e=e||R(0,_,h?"left":"top"),t=t||R(0,_,h?"right":"bottom"),e&&(e.style.opacity=0<y?y:0),t&&(t.style.opacity=0<-y?-y:0)}}},setTransition:t=>{_.slides.map(e=>s(e)).forEach(e=>{e.style.transitionDuration=t+"ms",e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(e=>{e.style.transitionDuration=t+"ms"})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})},function(e){let{swiper:y,extendParams:t,on:i}=e;t({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});b({effect:"creative",swiper:y,on:i,setTranslate:()=>{const{slides:r,wrapperEl:e,slidesSizesGrid:s}=y,a=y.params.creativeEffect,o=a["progressMultiplier"],l=y.params.centeredSlides;if(l){const r=s[0]/2-y.params.slidesOffsetBefore||0;e.style.transform=`translateX(calc(50% - ${r}px))`}for(let n=0;n<r.length;n+=1){const s=r[n],p=s.progress,f=Math.min(Math.max(s.progress,-a.limitProgress),a.limitProgress);let e=f;l||(e=Math.min(Math.max(s.originalProgress,-a.limitProgress),a.limitProgress));const m=s.swiperSlideOffset,g=[y.params.cssMode?-m-y.translate:-m,0,0],v=[0,0,0];let t=!1,i=(y.isHorizontal()||(g[1]=g[0],g[0]=0),{translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1});f<0?(i=a.next,t=!0):0<f&&(i=a.prev,t=!0),g.forEach((e,t)=>{g[t]=`calc(${e}px + (${e=i.translate[t],"string"==typeof e?e:e+"px"} * ${Math.abs(f*o)}))`}),v.forEach((e,t)=>{v[t]=i.rotate[t]*Math.abs(f*o)}),s.style.zIndex=-Math.abs(Math.round(p))+r.length;var c=g.join(", "),d=`rotateX(${v[0]}deg) rotateY(${v[1]}deg) rotateZ(${v[2]}deg)`,u=e<0?`scale(${1+(1-i.scale)*e*o})`:`scale(${1-(1-i.scale)*e*o})`,h=e<0?1+(1-i.opacity)*e*o:1-(1-i.opacity)*e*o,c=`translate3d(${c}) ${d} `+u;if(t&&i.shadow||!t){let e=s.querySelector(".swiper-slide-shadow");if(e=!e&&i.shadow?R(0,s):e){const y=a.shadowPerProgress?f*(1/a.limitProgress):f;e.style.opacity=Math.min(Math.max(Math.abs(y),0),1)}}d=T(0,s);d.style.transform=c,d.style.opacity=h,i.origin&&(d.style.transformOrigin=i.origin)}},setTransition:t=>{var e=y.slides.map(e=>s(e));e.forEach(e=>{e.style.transitionDuration=t+"ms",e.querySelectorAll(".swiper-slide-shadow").forEach(e=>{e.style.transitionDuration=t+"ms"})}),E({swiper:y,duration:t,transformElements:e,allSlides:!0})},perspective:()=>y.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!y.params.cssMode})})},function(e){let{swiper:_,extendParams:t,on:i}=e;t({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),b({effect:"cards",swiper:_,on:i,setTranslate:()=>{const{slides:o,activeIndex:l}=_,c=_.params.cardsEffect,{startTranslate:d,isTouched:u}=_.touchEventsData,h=_.translate;for(let a=0;a<o.length;a+=1){var p=o[a],f=p.progress,m=Math.min(Math.max(f,-4),4);let e=p.swiperSlideOffset,t=(_.params.centeredSlides&&!_.params.cssMode&&(_.wrapperEl.style.transform=`translateX(${_.minTranslate()}px)`),_.params.centeredSlides&&_.params.cssMode&&(e-=o[0].swiperSlideOffset),_.params.cssMode?-e-_.translate:-e),i=0;var g=-100*Math.abs(m);let n=1,r=-c.perSlideRotate*m,s=c.perSlideOffset-.75*Math.abs(m);var v=_.virtual&&_.params.virtual.enabled?_.virtual.from+a:a,y=(v===l||v===l-1)&&0<m&&m<1&&(u||_.params.cssMode)&&h<d,v=(v===l||v===l+1)&&m<0&&-1<m&&(u||_.params.cssMode)&&d<h;if(y||v){const o=(1-Math.abs((Math.abs(m)-.5)/.5))**.5;r+=-28*m*o,n+=-.5*o,s+=96*o,i=-25*o*Math.abs(m)+"%"}if(t=m<0?`calc(${t}px + (${s*Math.abs(m)}%))`:0<m?`calc(${t}px + (-${s*Math.abs(m)}%))`:t+"px",!_.isHorizontal()){const o=i;i=t,t=o}y=m<0?""+(1+(1-n)*m):""+(1-(1-n)*m),v=`
        translate3d(${t}, ${i}, ${g}px)
        rotateZ(${c.rotate?r:0}deg)
        scale(${y})
      `;if(c.slideShadows){let e=p.querySelector(".swiper-slide-shadow");(e=e||R(0,p))&&(e.style.opacity=Math.min(Math.max((Math.abs(m)-.5)/.5,0),1))}p.style.zIndex=-Math.abs(Math.round(f))+o.length,T(0,p).style.transform=v}},setTransition:t=>{var e=_.slides.map(e=>s(e));e.forEach(e=>{e.style.transitionDuration=t+"ms",e.querySelectorAll(".swiper-slide-shadow").forEach(e=>{e.style.transitionDuration=t+"ms"})}),E({swiper:_,duration:t,transformElements:e})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!_.params.cssMode})})}]),g}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(I,O){"use strict";if(!I.jstree){var d,u,h,r,s,c,p,n,a=0,o=!1,l=!1,f=!1,i=[],e=I("script:last").attr("src"),y=window.document,m=window.setImmediate,g=window.Promise,v=(!m&&g&&(m=function(e,t){g.resolve(t).then(e)}),I.jstree={version:"3.3.15",defaults:{plugins:[]},plugins:{},path:e&&-1!==e.indexOf("/")?e.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},I.jstree.create=function(e,i){var n=new I.jstree.core(++a),t=i;return i=I.extend(!0,{},I.jstree.defaults,i),t&&t.plugins&&(i.plugins=t.plugins),I.each(i.plugins,function(e,t){"core"!==e&&(n=n.plugin(t,i[t]))}),I(e).data("jstree",n),n.init(e,i),n},I.jstree.destroy=function(){I(".jstree:jstree").jstree("destroy"),I(y).off(".jstree")},I.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},I.jstree.reference=function(t){var i=null,e=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!e||!e.length)try{e=I(t)}catch(e){}if(!e||!e.length)try{e=I("#"+t.replace(I.jstree.idregex,"\\$&"))}catch(e){}return e&&e.length&&(e=e.closest(".jstree")).length&&(e=e.data("jstree"))?i=e:I(".jstree").each(function(){var e=I(this).data("jstree");if(e&&e._model.data[t])return i=e,!1}),i},I.fn.jstree=function(i){var n="string"==typeof i,r=Array.prototype.slice.call(arguments,1),s=null;return!(!0===i&&!this.length)&&(this.each(function(){var e=I.jstree.reference(this),t=n&&e?e[i]:null;if(s=n&&t?t.apply(e,r):null,e||n||i!==O&&!I.isPlainObject(i)||I.jstree.create(this,i),null!==(s=e&&!n||!0===i?e||!1:s)&&s!==O)return!1}),null!==s&&s!==O?s:this)},I.expr.pseudos.jstree=I.expr.createPseudo(function(e){return function(e){return I(e).hasClass("jstree")&&I(e).data("jstree")!==O}}),I.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:I.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0,loaded_state:!1,restore_focus:!0,compute_elements_positions:!1,keyboard:{"ctrl-space":function(e){e.type="click",I(e.currentTarget).trigger(e)},enter:function(e){e.type="click",I(e.currentTarget).trigger(e)},left:function(e){e.preventDefault(),this.is_open(e.currentTarget)?this.close_node(e.currentTarget):(e=this.get_parent(e.currentTarget))&&e.id!==I.jstree.root&&this.get_node(e,!0).children(".jstree-anchor").trigger("focus")},up:function(e){e.preventDefault(),(e=this.get_prev_dom(e.currentTarget))&&e.length&&e.children(".jstree-anchor").trigger("focus")},right:function(e){e.preventDefault(),this.is_closed(e.currentTarget)?this.open_node(e.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").trigger("focus")}):this.is_open(e.currentTarget)&&(e=this.get_node(e.currentTarget,!0).children(".jstree-children")[0])&&I(this._firstChild(e)).children(".jstree-anchor").trigger("focus")},down:function(e){e.preventDefault(),(e=this.get_next_dom(e.currentTarget))&&e.length&&e.children(".jstree-anchor").trigger("focus")},"*":function(e){this.open_all()},home:function(e){e.preventDefault(),(e=this._firstChild(this.get_container_ul()[0]))&&I(e).children(".jstree-anchor").filter(":visible").trigger("focus")},end:function(e){e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().trigger("focus")},f2:function(e){e.preventDefault(),this.edit(e.currentTarget)}}},I.jstree.core.prototype={plugin:function(e,t){var i=I.jstree.plugins[e];return i?(this._data[e]={},i.prototype=this,new i(t,this)):this},init:function(e,t){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[I.jstree.root]={id:I.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=I(e).addClass("jstree jstree-"+this._id),this.settings=t,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='none'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' role='treeitem' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(I.jstree.root)},destroy:function(e){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,i=y.createElement("LI");return i.setAttribute("role","none"),(e=y.createElement("I")).className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),i.appendChild(e),(e=y.createElement("A")).className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),e.setAttribute("role","treeitem"),(t=y.createElement("I")).className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),i.appendChild(e),e=t=null,i},_kbevent_to_func:function(e){var t={8:"Backspace",9:"Tab",13:"Enter",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock",16:"Shift",17:"Ctrl",18:"Alt",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*",173:"-"},i=[];if(e.ctrlKey&&i.push("ctrl"),e.altKey&&i.push("alt"),e.shiftKey&&i.push("shift"),i.push(t[e.which]?t[e.which].toLowerCase():e.which),"shift-shift"!==(i=i.sort().join("-").toLowerCase())&&"ctrl-ctrl"!==i&&"alt-alt"!==i){var n,r,s=this.settings.core.keyboard;for(n in s)if(s.hasOwnProperty(n)&&(r="-"!==(r=n)&&"+"!==r?(r=r.replace("--","-MINUS").replace("+-","-MINUS").replace("++","-PLUS").replace("-+","-PLUS")).split(/-|\+/).sort().join("-").replace("MINUS","-").replace("PLUS","+").toLowerCase():r)===i)return s[n]}return null},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var r="",s=null,t=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(y.selection&&y.selection.empty)y.selection.empty();else if(window.getSelection){e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(e){}}}).on("mousedown.jstree",function(e){e.target===this.element[0]&&(e.preventDefault(),t=+new Date)}.bind(this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",function(e){this.toggle_node(e.target)}.bind(this)).on("dblclick.jstree",".jstree-anchor",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this.settings.core.dblclick_toggle&&this.toggle_node(e.target)}.bind(this)).on("click.jstree",".jstree-anchor",function(e){e.preventDefault(),e.currentTarget!==y.activeElement&&I(e.currentTarget).trigger("focus"),this.activate_node(e.currentTarget,e)}.bind(this)).on("keydown.jstree",".jstree-anchor",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37));var t=this._kbevent_to_func(e);if(t&&(!1===(e=t.call(this,e))||!0===e))return e}.bind(this)).on("load_node.jstree",function(e,t){t.status&&(t.node.id!==I.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){for(var e=[],t=0,i=this._data.core.selected.length;t<i;t++)e=e.concat(this._model.data[this._data.core.selected[t]].parents);for(t=0,i=(e=I.vakata.array_unique(e)).length;t<i;t++)this.open_node(e[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}}.bind(this),0))}.bind(this)).on("keypress.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;s&&clearTimeout(s),s=setTimeout(function(){r=""},500);var i=String.fromCharCode(e.which).toLowerCase(),t=this.element.find(".jstree-anchor").filter(":visible"),e=t.index(y.activeElement)||0,n=!1;if(1<(r+=i).length){if(t.slice(e).each(function(e,t){if(0===I(t).text().toLowerCase().indexOf(r))return I(t).trigger("focus"),!(n=!0)}.bind(this)),n)return;if(t.slice(0,e).each(function(e,t){if(0===I(t).text().toLowerCase().indexOf(r))return I(t).trigger("focus"),!(n=!0)}.bind(this)),n)return}new RegExp("^"+i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(r)&&(t.slice(e+1).each(function(e,t){if(I(t).text().toLowerCase().charAt(0)===i)return I(t).trigger("focus"),!(n=!0)}.bind(this)),n||t.slice(0,e+1).each(function(e,t){if(I(t).text().toLowerCase().charAt(0)===i)return I(t).trigger("focus"),!(n=!0)}.bind(this)))}.bind(this)).on("init.jstree",function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)}.bind(this)).on("loading.jstree",function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()}.bind(this)).on("blur.jstree",".jstree-anchor",function(e){this._data.core.focused=null,I(e.currentTarget).filter(".jstree-hovered").trigger("mouseleave"),this.element.attr("tabindex","0"),I(e.currentTarget).attr("tabindex","-1")}.bind(this)).on("focus.jstree",".jstree-anchor",function(e){var t=this.get_node(e.currentTarget);t&&(t.id||0===t.id)&&(this._data.core.focused=t.id),this.element.find(".jstree-hovered").not(e.currentTarget).trigger("mouseleave"),I(e.currentTarget).trigger("mouseenter"),this.element.attr("tabindex","-1"),I(e.currentTarget).attr("tabindex","0")}.bind(this)).on("focus.jstree",function(){var e;500<+new Date-t&&!this._data.core.focused&&this.settings.core.restore_focus&&(t=0,e=this.get_node(this.element.attr("aria-activedescendant"),!0))&&e.find("> .jstree-anchor").trigger("focus")}.bind(this)).on("mouseenter.jstree",".jstree-anchor",function(e){this.hover_node(e.currentTarget)}.bind(this)).on("mouseleave.jstree",".jstree-anchor",function(e){this.dehover_node(e.currentTarget)}.bind(this))},unbind:function(){this.element.off(".jstree"),I(y).off(".jstree-"+this._id)},trigger:function(e,t){((t=t||{}).instance=this).element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(e){var t=this.settings.core.strings;return I.vakata.is_function(t)?t.call(this,e):t&&t[e]?t[e]:e},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(e,t){var i;(e=e&&(e.id||0===e.id)?e.id:e)instanceof I&&e.length&&e[0].id&&(e=e[0].id);try{if(this._model.data[e])e=this._model.data[e];else if("string"==typeof e&&this._model.data[e.replace(/^#/,"")])e=this._model.data[e.replace(/^#/,"")];else if("string"==typeof e&&(i=I("#"+e.replace(I.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[i.closest(".jstree-node").attr("id")])e=this._model.data[i.closest(".jstree-node").attr("id")];else if((i=this.element.find(e)).length&&this._model.data[i.closest(".jstree-node").attr("id")])e=this._model.data[i.closest(".jstree-node").attr("id")];else{if(!(i=this.element.find(e)).length||!i.hasClass("jstree"))return!1;e=this._model.data[I.jstree.root]}return t?e.id===I.jstree.root?this.element:I("#"+e.id.replace(I.jstree.idregex,"\\$&"),this.element):e}catch(e){return!1}},get_path:function(e,t,i){if(!(e=e.parents?e:this.get_node(e))||e.id===I.jstree.root||!e.parents)return!1;var n,r,s=[];for(s.push(i?e.id:e.text),n=0,r=e.parents.length;n<r;n++)s.push(i?e.parents[n]:this.get_text(e.parents[n]));return s=s.reverse().slice(1),t?s.join(t):s},get_next_dom:function(e,t){var i;if((e=this.get_node(e,!0))[0]===this.element[0]){for(i=this._firstChild(this.get_container_ul()[0]);i&&0===i.offsetHeight;)i=this._nextSibling(i);return!!i&&I(i)}if(!e||!e.length)return!1;if(t){for(i=e[0];(i=this._nextSibling(i))&&0===i.offsetHeight;);return!!i&&I(i)}if(e.hasClass("jstree-open")){for(i=this._firstChild(e.children(".jstree-children")[0]);i&&0===i.offsetHeight;)i=this._nextSibling(i);if(null!==i)return I(i)}for(i=e[0];(i=this._nextSibling(i))&&0===i.offsetHeight;);return null!==i?I(i):e.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(e,t){var i;if((e=this.get_node(e,!0))[0]===this.element[0]){for(i=this.get_container_ul()[0].lastChild;i&&0===i.offsetHeight;)i=this._previousSibling(i);return!!i&&I(i)}if(!e||!e.length)return!1;if(t){for(i=e[0];(i=this._previousSibling(i))&&0===i.offsetHeight;);return!!i&&I(i)}for(i=e[0];(i=this._previousSibling(i))&&0===i.offsetHeight;);if(null===i)return!(!(i=e[0].parentNode.parentNode)||!i.className||-1===i.className.indexOf("jstree-node"))&&I(i);for(e=I(i);e.hasClass("jstree-open");)e=e.children(".jstree-children").first().children(".jstree-node:visible:last");return e},get_parent:function(e){return!(!(e=this.get_node(e))||e.id===I.jstree.root)&&e.parent},get_children_dom:function(e){return(e=this.get_node(e,!0))[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||0<e.children.length)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(a,o){var e,t,i,n,r,s=this.get_node(a,!0);if(I.vakata.is_array(a))this._load_nodes(a.slice(),o);else{if(!(a=this.get_node(a)))return o&&o.call(this,a,!1),!1;if(a.state.loaded){for(a.state.loaded=!1,i=0,n=a.parents.length;i<n;i++)this._model.data[a.parents[i]].children_d=I.vakata.array_filter(this._model.data[a.parents[i]].children_d,function(e){return-1===I.inArray(e,a.children_d)});for(e=0,t=a.children_d.length;e<t;e++)this._model.data[a.children_d[e]].state.selected&&(r=!0),delete this._model.data[a.children_d[e]];r&&(this._data.core.selected=I.vakata.array_filter(this._data.core.selected,function(e){return-1===I.inArray(e,a.children_d)})),a.children=[],a.children_d=[],r&&this.trigger("changed",{action:"load_node",node:a,selected:this._data.core.selected})}a.state.failed=!1,a.state.loading=!0,(a.id!==I.jstree.root?s.children(".jstree-anchor"):s).attr("aria-busy",!0),s.addClass("jstree-loading"),this._load_node(a,function(e){(a=this._model.data[a.id]).state.loading=!1,a.state.loaded=e,a.state.failed=!a.state.loaded;for(var t=this.get_node(a,!0),i=0,n=this._model.data,r=!1,i=0,s=a.children.length;i<s;i++)if(n[a.children[i]]&&!n[a.children[i]].state.hidden){r=!0;break}a.state.loaded&&t&&t.length&&(t.removeClass("jstree-closed jstree-open jstree-leaf"),r?"#"!==a.id&&t.addClass(a.state.opened?"jstree-open":"jstree-closed"):t.addClass("jstree-leaf")),(a.id!==I.jstree.root?t.children(".jstree-anchor"):t).attr("aria-busy",!1),t.removeClass("jstree-loading"),this.trigger("load_node",{node:a,status:e}),o&&o.call(this,a,e)}.bind(this))}return!0},_load_nodes:function(e,t,i,n){for(var r=!0,s=function(){this._load_nodes(e,t,!0)},a=this._model.data,o=[],l=0,c=e.length;l<c;l++)a[e[l]]&&(!a[e[l]].state.loaded&&!a[e[l]].state.failed||!i&&n)&&(this.is_loading(e[l])||this.load_node(e[l],s),r=!1);if(r){for(l=0,c=e.length;l<c;l++)a[e[l]]&&a[e[l]].state.loaded&&o.push(e[l]);t&&!t.done&&(t.call(this,o),t.done=!0)}},load_all:function(e,t){if(e=e||I.jstree.root,!(e=this.get_node(e)))return!1;var i,n,r=[],s=this._model.data,a=s[e.id].children_d;for(e.state&&!e.state.loaded&&r.push(e.id),i=0,n=a.length;i<n;i++)s[a[i]]&&s[a[i]].state&&!s[a[i]].state.loaded&&r.push(a[i]);r.length?this._load_nodes(r,function(){this.load_all(e,t)}):(t&&t.call(this,e),this.trigger("load_all",{node:e}))},_load_node:function(r,s){function a(){return 3!==this.nodeType&&8!==this.nodeType}var e,t=this.settings.core.data;return t?I.vakata.is_function(t)?t.call(this,r,function(e){!1===e?s.call(this,!1):this["string"==typeof e?"_append_html_data":"_append_json_data"](r,"string"==typeof e?I(I.parseHTML(e)).filter(a):e,function(e){s.call(this,e)})}.bind(this)):"object"==typeof t?t.url?(t=I.extend(!0,{},t),I.vakata.is_function(t.url)&&(t.url=t.url.call(this,r)),I.vakata.is_function(t.data)&&(t.data=t.data.call(this,r)),I.ajax(t).done(function(e,t,i){var n=i.getResponseHeader("Content-Type");return n&&-1!==n.indexOf("json")||"object"==typeof e?this._append_json_data(r,e,function(e){s.call(this,e)}):n&&-1!==n.indexOf("html")||"string"==typeof e?this._append_html_data(r,I(I.parseHTML(e)).filter(a),function(e){s.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:r.id,xhr:i})},this.settings.core.error.call(this,this._data.core.last_error),s.call(this,!1))}.bind(this)).fail(function(e){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:r.id,xhr:e})},s.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)}.bind(this))):(e=I.vakata.is_array(t)?I.extend(!0,[],t):I.isPlainObject(t)?I.extend(!0,{},t):t,r.id===I.jstree.root?this._append_json_data(r,e,function(e){s.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:r.id})},this.settings.core.error.call(this,this._data.core.last_error),s.call(this,!1))):"string"==typeof t?r.id===I.jstree.root?this._append_html_data(r,I(I.parseHTML(t)).filter(a),function(e){s.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:r.id})},this.settings.core.error.call(this,this._data.core.last_error),s.call(this,!1)):s.call(this,!1):r.id===I.jstree.root?this._append_html_data(r,this._data.core.original_container_html.clone(!0),function(e){s.call(this,e)}):s.call(this,!1)},_node_changed:function(e){(e=this.get_node(e))&&-1===I.inArray(e.id,this._model.changed)&&this._model.changed.push(e.id)},_append_html_data:function(e,t,i){(e=this.get_node(e)).children=[],e.children_d=[];var n,r,s,t=t.is("ul")?t.children():t,a=e.id,o=[],l=[],c=this._model.data,d=c[a],e=this._data.core.selected.length;for(t.each(function(e,t){(n=this._parse_model_from_html(I(t),a,d.parents.concat()))&&(o.push(n),l.push(n),c[n].children_d.length)&&(l=l.concat(c[n].children_d))}.bind(this)),d.children=o,d.children_d=l,r=0,s=d.parents.length;r<s;r++)c[d.parents[r]].children_d=c[d.parents[r]].children_d.concat(l);this.trigger("model",{nodes:l,parent:a}),a!==I.jstree.root?(this._node_changed(a),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==e&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)},_append_json_data:function(e,t,l,i){if(null!==this.element){(e=this.get_node(e)).children=[],e.children_d=[],t.d&&"string"==typeof(t=t.d)&&(t=JSON.parse(t)),I.vakata.is_array(t)||(t=[t]);var n=null,r={df:this._model.default_state,dat:t,par:e.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},v=this,s=function(e,c){function d(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var n,r,s,a,o=e.id.toString(),l={id:o,text:e.text||"",icon:e.icon===c||e.icon,parent:t,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(n in p)p.hasOwnProperty(n)&&(l.state[n]=p[n]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),l.icon!==c&&null!==l.icon&&""!==l.icon||(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(n in e.data.jstree)e.data.jstree.hasOwnProperty(n)&&(l.state[n]=e.data.jstree[n]);if(e&&"object"==typeof e.state)for(n in e.state)e.state.hasOwnProperty(n)&&(l.state[n]=e.state[n]);if(e&&"object"==typeof e.li_attr)for(n in e.li_attr)e.li_attr.hasOwnProperty(n)&&(l.li_attr[n]=e.li_attr[n]);if(l.li_attr.id||(l.li_attr.id=o),e&&"object"==typeof e.a_attr)for(n in e.a_attr)e.a_attr.hasOwnProperty(n)&&(l.a_attr[n]=e.a_attr[n]);for(e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),n=0,r=(g[l.id]=l).children.length;n<r;n++)s=d(g[l.children[n]],l.id,i),a=g[s],l.children_d.push(s),a.children_d.length&&(l.children_d=l.children_d.concat(a.children_d));return delete e.data,delete e.children,g[l.id].original=e,l.state.selected&&h.push(l.id),l.id}function u(e,t,i){i=i?i.concat():[],t&&i.unshift(t);for(var n,r,s,a,o,l=!1;l="j"+f+"_"+ ++m,g[l];);for(n in o={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===c||e.icon,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},p)p.hasOwnProperty(n)&&(o.state[n]=p[n]);if(e&&(e.id||0===e.id)&&(o.id=e.id.toString()),e&&e.text&&(o.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(o.icon=e.data.jstree.icon),o.icon!==c&&null!==o.icon&&""!==o.icon||(o.icon=!0),e&&e.data&&(o.data=e.data,e.data.jstree))for(n in e.data.jstree)e.data.jstree.hasOwnProperty(n)&&(o.state[n]=e.data.jstree[n]);if(e&&"object"==typeof e.state)for(n in e.state)e.state.hasOwnProperty(n)&&(o.state[n]=e.state[n]);if(e&&"object"==typeof e.li_attr)for(n in e.li_attr)e.li_attr.hasOwnProperty(n)&&(o.li_attr[n]=e.li_attr[n]);if(o.li_attr.id&&!o.id&&0!==o.id&&(o.id=o.li_attr.id.toString()),o.id||0===o.id||(o.id=l),o.li_attr.id||(o.li_attr.id=o.id),e&&"object"==typeof e.a_attr)for(n in e.a_attr)e.a_attr.hasOwnProperty(n)&&(o.a_attr[n]=e.a_attr[n]);if(e&&e.children&&e.children.length){for(n=0,r=e.children.length;n<r;n++)s=u(e.children[n],o.id,i),a=g[s],o.children.push(s),a.children_d.length&&(o.children_d=o.children_d.concat(a.children_d));o.children_d=o.children_d.concat(o.children)}return e&&e.children&&!0===e.children&&(o.state.loaded=!1,o.children=[],o.children_d=[]),delete e.data,delete e.children,o.original=e,(g[o.id]=o).state.selected&&h.push(o.id),o.id}var t,i,n,r=(e=e.data||e).dat,s=e.par,a=[],o=[],h=[],p=e.df,f=e.t_id,m=e.t_cnt,g=e.m,l=g[s],e=e.sel;if(r.length&&r[0].id!==c&&r[0].parent!==c){for(i=0,n=r.length;i<n;i++)r[i].children||(r[i].children=[]),r[i].state||(r[i].state={}),g[r[i].id.toString()]=r[i];for(i=0,n=r.length;i<n;i++)g[r[i].parent.toString()]?(g[r[i].parent.toString()].children.push(r[i].id.toString()),l.children_d.push(r[i].id.toString())):void 0!==v&&(v._data.core.last_error={error:"parse",plugin:"core",id:"core_07",reason:"Node with invalid parent",data:JSON.stringify({id:r[i].id.toString(),parent:r[i].parent.toString()})},v.settings.core.error.call(v,v._data.core.last_error));for(i=0,n=l.children.length;i<n;i++)t=d(g[l.children[i]],s,l.parents.concat()),o.push(t),g[t].children_d.length&&(o=o.concat(g[t].children_d));for(i=0,n=l.parents.length;i<n;i++)g[l.parents[i]].children_d=g[l.parents[i]].children_d.concat(o)}else{for(i=0,n=r.length;i<n;i++)(t=u(r[i],s,l.parents.concat()))&&(a.push(t),o.push(t),g[t].children_d.length)&&(o=o.concat(g[t].children_d));for(l.children=a,l.children_d=o,i=0,n=l.parents.length;i<n;i++)g[l.parents[i]].children_d=g[l.parents[i]].children_d.concat(o)}if(e={cnt:m,mod:g,sel:e,par:s,dpc:o,add:h},"undefined"!=typeof window&&void 0!==window.document)return e;postMessage(e)},a=function(e,t){if(null!==this.element){for(var i in this._cnt=e.cnt,o=this._model.data)o.hasOwnProperty(i)&&o[i].state&&o[i].state.loading&&e.mod[i]&&(e.mod[i].state.loading=!0);if(this._model.data=e.mod,t){var n,r=e.add,s=e.sel,a=this._data.core.selected.slice(),o=this._model.data;if(s.length!==a.length||I.vakata.array_unique(s.concat(a)).length!==s.length){for(i=0,n=s.length;i<n;i++)-1===I.inArray(s[i],r)&&-1===I.inArray(s[i],a)&&(o[s[i]].state.selected=!1);for(i=0,n=a.length;i<n;i++)-1===I.inArray(a[i],s)&&(o[a[i]].state.selected=!0)}}e.add.length&&(this._data.core.selected=this._data.core.selected.concat(e.add)),this.trigger("model",{nodes:e.dpc,parent:e.par}),e.par!==I.jstree.root?(this._node_changed(e.par),this.redraw()):this.redraw(!0),e.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),!t&&m?m(function(){l.call(v,!0)}):l.call(v,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+s.toString()],{type:"text/javascript"}))),!this._data.core.working||i?(this._data.core.working=!0,(n=new window.Worker(this._wrk)).onmessage=function(e){a.call(this,e.data,!0);try{n.terminate(),n=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}.bind(this),n.onerror=function(e){a.call(this,s(r),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}.bind(this),r.par?n.postMessage(r):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([e,t,l,!0])}catch(e){a.call(this,s(r),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else a.call(this,s(r),!1)}},_parse_model_from_html:function(e,t,i){i=i?[].concat(i):[],t&&i.unshift(t);var n,r,s,a,o=this._model.data,l={id:!1,text:!1,icon:!0,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in this._model.default_state)this._model.default_state.hasOwnProperty(s)&&(l.state[s]=this._model.default_state[s]);if(t=I.vakata.attributes(e,!0),I.each(t,function(e,t){return!(t=I.vakata.trim(t)).length||(l.li_attr[e]=t,void("id"===e&&(l.id=t.toString())))}),(t=e.children("a").first()).length&&(t=I.vakata.attributes(t,!0),I.each(t,function(e,t){(t=I.vakata.trim(t)).length&&(l.a_attr[e]=t)})),(t=(e.children("a").first().length?e.children("a").first():e).clone()).children("ins, i, ul").remove(),t=t.html(),t=I("<div></div>").html(t),l.text=this.settings.core.force_text?t.text():t.html(),t=e.data(),l.data=t?I.extend(!0,{},t):null,l.state.opened=e.hasClass("jstree-open"),l.state.selected=e.children("a").hasClass("jstree-clicked"),l.state.disabled=e.children("a").hasClass("jstree-disabled"),l.data&&l.data.jstree)for(s in l.data.jstree)l.data.jstree.hasOwnProperty(s)&&(l.state[s]=l.data.jstree[s]);for((t=e.children("a").children(".jstree-themeicon")).length&&(l.icon=!t.hasClass("jstree-themeicon-hidden")&&t.attr("rel")),l.state.icon!==O&&(l.icon=l.state.icon),l.icon!==O&&null!==l.icon&&""!==l.icon||(l.icon=!0),t=e.children("ul").children("li");o[a="j"+this._id+"_"+ ++this._cnt];);return l.id=l.li_attr.id?l.li_attr.id.toString():a,t.length?(t.each(function(e,t){n=this._parse_model_from_html(I(t),l.id,i),r=this._model.data[n],l.children.push(n),r.children_d.length&&(l.children_d=l.children_d.concat(r.children_d))}.bind(this)),l.children_d=l.children_d.concat(l.children)):e.hasClass("jstree-closed")&&(l.state.loaded=!1),l.li_attr.class&&(l.li_attr.class=l.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),l.a_attr.class&&(l.a_attr.class=l.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),(o[l.id]=l).state.selected&&this._data.core.selected.push(l.id),l.id},_parse_model_from_flat_json:function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var n,r,s,a,o=e.id.toString(),l=this._model.data,c=this._model.default_state,d={id:o,text:e.text||"",icon:e.icon===O||e.icon,parent:t,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(n in c)c.hasOwnProperty(n)&&(d.state[n]=c[n]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),d.icon!==O&&null!==d.icon&&""!==d.icon||(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(n in e.data.jstree)e.data.jstree.hasOwnProperty(n)&&(d.state[n]=e.data.jstree[n]);if(e&&"object"==typeof e.state)for(n in e.state)e.state.hasOwnProperty(n)&&(d.state[n]=e.state[n]);if(e&&"object"==typeof e.li_attr)for(n in e.li_attr)e.li_attr.hasOwnProperty(n)&&(d.li_attr[n]=e.li_attr[n]);if(d.li_attr.id||(d.li_attr.id=o),e&&"object"==typeof e.a_attr)for(n in e.a_attr)e.a_attr.hasOwnProperty(n)&&(d.a_attr[n]=e.a_attr[n]);for(e&&e.children&&!0===e.children&&(d.state.loaded=!1,d.children=[],d.children_d=[]),n=0,r=(l[d.id]=d).children.length;n<r;n++)a=l[s=this._parse_model_from_flat_json(l[d.children[n]],d.id,i)],d.children_d.push(s),a.children_d.length&&(d.children_d=d.children_d.concat(a.children_d));return delete e.data,delete e.children,l[d.id].original=e,d.state.selected&&this._data.core.selected.push(d.id),d.id},_parse_model_from_json:function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);for(var n,r,s,a,o,l=!1,c=this._model.data,d=this._model.default_state;c[l="j"+this._id+"_"+ ++this._cnt];);for(n in o={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===O||e.icon,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},d)d.hasOwnProperty(n)&&(o.state[n]=d[n]);if(e&&(e.id||0===e.id)&&(o.id=e.id.toString()),e&&e.text&&(o.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(o.icon=e.data.jstree.icon),o.icon!==O&&null!==o.icon&&""!==o.icon||(o.icon=!0),e&&e.data&&(o.data=e.data,e.data.jstree))for(n in e.data.jstree)e.data.jstree.hasOwnProperty(n)&&(o.state[n]=e.data.jstree[n]);if(e&&"object"==typeof e.state)for(n in e.state)e.state.hasOwnProperty(n)&&(o.state[n]=e.state[n]);if(e&&"object"==typeof e.li_attr)for(n in e.li_attr)e.li_attr.hasOwnProperty(n)&&(o.li_attr[n]=e.li_attr[n]);if(o.li_attr.id&&!o.id&&0!==o.id&&(o.id=o.li_attr.id.toString()),o.id||0===o.id||(o.id=l),o.li_attr.id||(o.li_attr.id=o.id),e&&"object"==typeof e.a_attr)for(n in e.a_attr)e.a_attr.hasOwnProperty(n)&&(o.a_attr[n]=e.a_attr[n]);if(e&&e.children&&e.children.length){for(n=0,r=e.children.length;n<r;n++)a=c[s=this._parse_model_from_json(e.children[n],o.id,i)],o.children.push(s),a.children_d.length&&(o.children_d=o.children_d.concat(a.children_d));o.children_d=o.children.concat(o.children_d)}return e&&e.children&&!0===e.children&&(o.state.loaded=!1,o.children=[],o.children_d=[]),delete e.data,delete e.children,o.original=e,(c[o.id]=o).state.selected&&this._data.core.selected.push(o.id),o.id},_redraw:function(){for(var e,t=(this._model.force_full_redraw?this._model.data[I.jstree.root].children:this._model.changed).concat([]),i=y.createElement("UL"),n=this._data.core.focused,r=0,s=t.length;r<s;r++)(e=this.redraw_node(t[r],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&i.appendChild(e);this._model.force_full_redraw&&(i.className=this.get_container_ul()[0].className,i.setAttribute("role","presentation"),this.element.empty().append(i)),null!==n&&this.settings.core.restore_focus&&((e=this.get_node(n,!0))&&e.length&&e.children(".jstree-anchor")[0]!==y.activeElement?e.children(".jstree-anchor").trigger("focus"):this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:t})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(e){var t,i=this.get_node(e),n=!1,r=!1,s=y;if(!i)return!1;if(i.id===I.jstree.root)return this.redraw(!0);if(!(e=this.get_node(e,!0))||!e.length)return!1;if(e.children(".jstree-children").remove(),e=e[0],i.children.length&&i.state.loaded){for((r=s.createElement("UL")).setAttribute("role","group"),r.className="jstree-children",n=0,t=i.children.length;n<t;n++)r.appendChild(this.redraw_node(i.children[n],!0,!0));e.appendChild(r)}},redraw_node:function(e,t,i,n){var r=this.get_node(e),s=!1,a=!1,o=!1,l=!1,c=!1,d=!1,u="",h=y,p=this._model.data,f=!1,m=null,g=!1,v=!1;if(!r)return!1;if(r.id===I.jstree.root)return this.redraw(!0);if(t=t||0===r.children.length,e=y.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(r.id[0])?"\\3"+r.id[0]+" "+r.id.substr(1).replace(I.jstree.idregex,"\\$&"):r.id.replace(I.jstree.idregex,"\\$&"))):y.getElementById(r.id))e=I(e),i||((s=e.parent().parent()[0])===this.element[0]&&(s=null),a=e.index()),(t=!(t||!r.children.length||e.children(".jstree-children").length)||t)||(o=e.children(".jstree-children")[0]),f=e.children(".jstree-anchor")[0]===y.activeElement,e.remove();else if(t=!0,!i){if(!(null===(s=r.parent!==I.jstree.root?I("#"+r.parent.replace(I.jstree.idregex,"\\$&"),this.element)[0]:null)||s&&p[r.parent].state.opened))return!1;a=I.inArray(r.id,(null===s?p[I.jstree.root]:p[r.parent]).children)}for(l in e=this._data.core.node.cloneNode(!0),u="jstree-node ",r.li_attr)r.li_attr.hasOwnProperty(l)&&"id"!==l&&("class"!==l?e.setAttribute(l,r.li_attr[l]):u+=r.li_attr[l]);for(r.a_attr.id||(r.a_attr.id=r.id+"_anchor"),e.childNodes[1].setAttribute("aria-selected",!!r.state.selected),e.childNodes[1].setAttribute("aria-level",r.parents.length),this.settings.core.compute_elements_positions&&(e.childNodes[1].setAttribute("aria-setsize",p[r.parent].children.length),e.childNodes[1].setAttribute("aria-posinset",p[r.parent].children.indexOf(r.id)+1)),r.state.disabled&&e.childNodes[1].setAttribute("aria-disabled",!0),l=0,c=r.children.length;l<c;l++)if(!p[r.children[l]].state.hidden){g=!0;break}if(null!==r.parent&&p[r.parent]&&!r.state.hidden&&(l=I.inArray(r.id,p[r.parent].children),v=r.id,-1!==l))for(l++,c=p[r.parent].children.length;l<c&&(v=p[p[r.parent].children[l]].state.hidden?v:p[r.parent].children[l])===r.id;l++);for(c in r.state.hidden&&(u+=" jstree-hidden"),r.state.loading&&(u+=" jstree-loading"),r.state.loaded&&!g?u+=" jstree-leaf":(u+=r.state.opened&&r.state.loaded?" jstree-open":" jstree-closed",e.childNodes[1].setAttribute("aria-expanded",r.state.opened&&r.state.loaded)),v===r.id&&(u+=" jstree-last"),e.id=r.id,e.className=u,u=(r.state.selected?" jstree-clicked":"")+(r.state.disabled?" jstree-disabled":""),r.a_attr)!r.a_attr.hasOwnProperty(c)||"href"===c&&"#"===r.a_attr[c]||("class"!==c?e.childNodes[1].setAttribute(c,r.a_attr[c]):u+=" "+r.a_attr[c]);if(u.length&&(e.childNodes[1].className="jstree-anchor "+u),(r.icon&&!0!==r.icon||!1===r.icon)&&(!1===r.icon?e.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===r.icon.indexOf("/")&&-1===r.icon.indexOf(".")?e.childNodes[1].childNodes[0].className+=" "+r.icon+" jstree-themeicon-custom":(e.childNodes[1].childNodes[0].style.backgroundImage='url("'+r.icon+'")',e.childNodes[1].childNodes[0].style.backgroundPosition="center center",e.childNodes[1].childNodes[0].style.backgroundSize="auto",e.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?e.childNodes[1].appendChild(h.createTextNode(r.text)):e.childNodes[1].innerHTML+=r.text,t&&r.children.length&&(r.state.opened||n)&&r.state.loaded){for((d=h.createElement("UL")).setAttribute("role","group"),d.className="jstree-children",l=0,c=r.children.length;l<c;l++)d.appendChild(this.redraw_node(r.children[l],t,!0));e.appendChild(d)}if(o&&e.appendChild(o),!i){for(l=0,c=(s=s||this.element[0]).childNodes.length;l<c;l++)if(s.childNodes[l]&&s.childNodes[l].className&&-1!==s.childNodes[l].className.indexOf("jstree-children")){m=s.childNodes[l];break}m||((m=h.createElement("UL")).setAttribute("role","group"),m.className="jstree-children",s.appendChild(m)),a<(s=m).childNodes.length?s.insertBefore(e,s.childNodes[a]):s.appendChild(e),f&&(n=this.element[0].scrollTop,o=this.element[0].scrollLeft,e.childNodes[1].focus(),this.element[0].scrollTop=n,this.element[0].scrollLeft=o)}return r.state.opened&&!r.state.loaded&&(r.state.opened=!1,setTimeout(function(){this.open_node(r.id,!1,0)}.bind(this),0)),e},open_node:function(e,i,n){var t,r,s,a;if(I.vakata.is_array(e)){for(t=0,r=(e=e.slice()).length;t<r;t++)this.open_node(e[t],i,n);return!0}return!(!(e=this.get_node(e))||e.id===I.jstree.root)&&(n=n===O?this.settings.core.animation:n,this.is_closed(e)?this.is_loaded(e)?(s=this.get_node(e,!0),a=this,s.length&&(n&&s.children(".jstree-children").length&&s.children(".jstree-children").stop(!0,!0),e.children.length&&!this._firstChild(s.children(".jstree-children")[0])&&this.draw_children(e),n?(this.trigger("before_open",{node:e}),s.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").children(".jstree-anchor").attr("aria-expanded",!0).end().children(".jstree-children").stop(!0,!0).slideDown(n,function(){this.style.display="",a.element&&a.trigger("after_open",{node:e})})):(this.trigger("before_open",{node:e}),s[0].className=s[0].className.replace("jstree-closed","jstree-open"),s[0].childNodes[1].setAttribute("aria-expanded",!0))),e.state.opened=!0,i&&i.call(this,e,!0),s.length||this.trigger("before_open",{node:e}),this.trigger("open_node",{node:e}),n&&s.length||this.trigger("after_open",{node:e}),!0):this.is_loading(e)?setTimeout(function(){this.open_node(e,i,n)}.bind(this),500):void this.load_node(e,function(e,t){return t?this.open_node(e,i,n):!!i&&i.call(this,e,!1)}):(i&&i.call(this,e,!1),!1))},_open_to:function(e){if(!(e=this.get_node(e))||e.id===I.jstree.root)return!1;for(var t=e.parents,i=0,n=t.length;i<n;i+=1)i!==I.jstree.root&&this.open_node(t[i],!1,0);return I("#"+e.id.replace(I.jstree.idregex,"\\$&"),this.element)},close_node:function(e,t){var i,n,r,s;if(I.vakata.is_array(e)){for(i=0,n=(e=e.slice()).length;i<n;i++)this.close_node(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===I.jstree.root)&&!this.is_closed(e)&&(t=t===O?this.settings.core.animation:t,s=(r=this).get_node(e,!0),e.state.opened=!1,this.trigger("close_node",{node:e}),void(s.length?t?s.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").children(".jstree-anchor").attr("aria-expanded",!1).end().children(".jstree-children").stop(!0,!0).slideUp(t,function(){this.style.display="",s.children(".jstree-children").remove(),r.element&&r.trigger("after_close",{node:e})}):(s[0].className=s[0].className.replace("jstree-open","jstree-closed"),s.children(".jstree-anchor").attr("aria-expanded",!1),s.children(".jstree-children").remove(),this.trigger("after_close",{node:e})):this.trigger("after_close",{node:e})))},toggle_node:function(e){var t,i;if(I.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.toggle_node(e[t]);return!0}return this.is_closed(e)?this.open_node(e):this.is_open(e)?this.close_node(e):void 0},open_all:function(e,i,n){if(e=e||I.jstree.root,!(e=this.get_node(e)))return!1;var t,r,s,a=e.id===I.jstree.root?this.get_container_ul():this.get_node(e,!0);if(!a.length){for(t=0,r=e.children_d.length;t<r;t++)this.is_closed(this._model.data[e.children_d[t]])&&(this._model.data[e.children_d[t]].state.opened=!0);return this.trigger("open_all",{node:e})}n=n||a,(a=(s=this).is_closed(e)?a.find(".jstree-closed").addBack():a.find(".jstree-closed")).each(function(){s.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,i,n)},i||0)}),0===n.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(n)})},close_all:function(e,t){if(e=e||I.jstree.root,!(e=this.get_node(e)))return!1;var i,n,r=e.id===I.jstree.root?this.get_container_ul():this.get_node(e,!0),s=this;for(r.length&&(r=this.is_open(e)?r.find(".jstree-open").addBack():r.find(".jstree-open"),I(r.get().reverse()).each(function(){s.close_node(this,t||0)})),i=0,n=e.children_d.length;i<n;i++)this._model.data[e.children_d[i]].state.opened=!1;this.trigger("close_all",{node:e})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(e){var t,i;if(I.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.enable_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===I.jstree.root)return!1;e.state.disabled=!1,this.get_node(e,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:e})},disable_node:function(e){var t,i;if(I.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.disable_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===I.jstree.root)return!1;e.state.disabled=!0,this.get_node(e,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:e})},is_hidden:function(e){return!0===(e=this.get_node(e)).state.hidden},hide_node:function(e,t){var i,n;if(I.vakata.is_array(e)){for(i=0,n=(e=e.slice()).length;i<n;i++)this.hide_node(e[i],!0);return t||this.redraw(),!0}if(!(e=this.get_node(e))||e.id===I.jstree.root)return!1;e.state.hidden||(e.state.hidden=!0,this._node_changed(e.parent),t||this.redraw(),this.trigger("hide_node",{node:e}))},show_node:function(e,t){var i,n;if(I.vakata.is_array(e)){for(i=0,n=(e=e.slice()).length;i<n;i++)this.show_node(e[i],!0);return t||this.redraw(),!0}if(!(e=this.get_node(e))||e.id===I.jstree.root)return!1;e.state.hidden&&(e.state.hidden=!1,this._node_changed(e.parent),t||this.redraw(),this.trigger("show_node",{node:e}))},hide_all:function(e){var t,i=this._model.data,n=[];for(t in i)i.hasOwnProperty(t)&&t!==I.jstree.root&&!i[t].state.hidden&&(i[t].state.hidden=!0,n.push(t));return this._model.force_full_redraw=!0,e||this.redraw(),this.trigger("hide_all",{nodes:n}),n},show_all:function(e){var t,i=this._model.data,n=[];for(t in i)i.hasOwnProperty(t)&&t!==I.jstree.root&&i[t].state.hidden&&(i[t].state.hidden=!1,n.push(t));return this._model.force_full_redraw=!0,e||this.redraw(),this.trigger("show_all",{nodes:n}),n},activate_node:function(e,t){if(this.is_disabled(e))return!1;if(t&&"object"==typeof t||(t={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==O?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&(!t.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(t.shiftKey){for(var i=this.get_node(e).id,n=this._data.core.last_clicked.id,r=this.get_node(this._data.core.last_clicked.parent).children,s=!1,a=0,o=r.length;a<o;a+=1)r[a]===i&&(s=!s),r[a]===n&&(s=!s),this.is_disabled(r[a])||!s&&r[a]!==i&&r[a]!==n?t.ctrlKey||this.deselect_node(r[a],!0,t):this.is_hidden(r[a])||this.select_node(r[a],!0,!1,t);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:t})}else this.is_selected(e)?this.deselect_node(e,!1,t):(t.ctrlKey&&(this._data.core.last_clicked=this.get_node(e)),this.select_node(e,!1,!1,t));else!this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,t):(this.is_selected(e)&&1===this._data.core.selected.length||(this.deselect_all(!0),this.select_node(e,!1,!1,t)),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:t})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),i=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){i.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||!e.children(".jstree-hovered").length)return!1;e.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(e)})},select_node:function(e,t,i,n){var r,s,a;if(I.vakata.is_array(e)){for(s=0,a=(e=e.slice()).length;s<a;s++)this.select_node(e[s],t,i,n);return!0}if(!(e=this.get_node(e))||e.id===I.jstree.root)return!1;r=this.get_node(e,!0),e.state.selected||(e.state.selected=!0,this._data.core.selected.push(e.id),(r=i?r:this._open_to(e))&&r.length&&r.children(".jstree-anchor").addClass("jstree-clicked").attr("aria-selected",!0),this.trigger("select_node",{node:e,selected:this._data.core.selected,event:n}),t)||this.trigger("changed",{action:"select_node",node:e,selected:this._data.core.selected,event:n})},deselect_node:function(e,t,i){var n,r,s;if(I.vakata.is_array(e)){for(n=0,r=(e=e.slice()).length;n<r;n++)this.deselect_node(e[n],t,i);return!0}if(!(e=this.get_node(e))||e.id===I.jstree.root)return!1;s=this.get_node(e,!0),e.state.selected&&(e.state.selected=!1,this._data.core.selected=I.vakata.array_remove_item(this._data.core.selected,e.id),s.length&&s.children(".jstree-anchor").removeClass("jstree-clicked").attr("aria-selected",!1),this.trigger("deselect_node",{node:e,selected:this._data.core.selected,event:i}),t||this.trigger("changed",{action:"deselect_node",node:e,selected:this._data.core.selected,event:i}))},select_all:function(e){var t,i,n=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[I.jstree.root].children_d.concat(),t=0,i=this._data.core.selected.length;t<i;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),e||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:n})},deselect_all:function(e){for(var t=this._data.core.selected.concat([]),i=0,n=this._data.core.selected.length;i<n;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:t}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:t})},is_selected:function(e){return!(!(e=this.get_node(e))||e.id===I.jstree.root)&&e.state.selected},get_selected:function(e){return e?I.map(this._data.core.selected,function(e){return this.get_node(e)}.bind(this)):this._data.core.selected.slice()},get_top_selected:function(e){for(var t,i,n=this.get_selected(!0),r={},s=0,a=n.length;s<a;s++)r[n[s].id]=n[s];for(s=0,a=n.length;s<a;s++)for(t=0,i=n[s].children_d.length;t<i;t++)r[n[s].children_d[t]]&&delete r[n[s].children_d[t]];for(s in n=[],r)r.hasOwnProperty(s)&&n.push(s);return e?I.map(n,function(e){return this.get_node(e)}.bind(this)):n},get_bottom_selected:function(e){for(var t=this.get_selected(!0),i=[],n=0,r=t.length;n<r;n++)t[n].children.length||i.push(t[n].id);return e?I.map(i,function(e){return this.get_node(e)}.bind(this)):i},get_state:function(){var e,t={core:{open:[],loaded:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(e in this._model.data)this._model.data.hasOwnProperty(e)&&e!==I.jstree.root&&(this._model.data[e].state.loaded&&this.settings.core.loaded_state&&t.core.loaded.push(e),this._model.data[e].state.opened&&t.core.open.push(e),this._model.data[e].state.selected)&&t.core.selected.push(e);return t},set_state:function(t,i){if(t){if(t.core&&t.core.selected&&t.core.initial_selection===O&&(t.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),t.core){var n,e;if(t.core.loaded)return this.settings.core.loaded_state&&I.vakata.is_array(t.core.loaded)&&t.core.loaded.length?this._load_nodes(t.core.loaded,function(e){delete t.core.loaded,this.set_state(t,i)}):(delete t.core.loaded,this.set_state(t,i)),!1;if(t.core.open)return I.vakata.is_array(t.core.open)&&t.core.open.length?this._load_nodes(t.core.open,function(e){this.open_node(e,!1,0),delete t.core.open,this.set_state(t,i)}):(delete t.core.open,this.set_state(t,i)),!1;if(t.core.scroll)return t.core.scroll&&t.core.scroll.left!==O&&this.element.scrollLeft(t.core.scroll.left),t.core.scroll&&t.core.scroll.top!==O&&this.element.scrollTop(t.core.scroll.top),delete t.core.scroll,this.set_state(t,i),!1;if(t.core.selected)return n=this,t.core.initial_selection!==O&&t.core.initial_selection!==this._data.core.selected.concat([]).sort().join(",")||(this.deselect_all(),I.each(t.core.selected,function(e,t){n.select_node(t,!1,!0)})),delete t.core.initial_selection,delete t.core.selected,this.set_state(t,i),!1;for(e in t)t.hasOwnProperty(e)&&"core"!==e&&-1===I.inArray(e,this.settings.plugins)&&delete t[e];if(I.isEmptyObject(t.core))return delete t.core,this.set_state(t,i),!1}return!I.isEmptyObject(t)||(t=null,i&&i.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(e,t){this._data.core.state=!0===t?{}:this.get_state(),t&&I.vakata.is_function(t)&&(this._data.core.state=t.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[I.jstree.root]={id:I.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var i=this.get_container_ul()[0].className;e||(this.element.html("<ul class='"+i+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='none' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' role='treeitem' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(I.jstree.root,function(e,t){t&&(this.get_container_ul()[0].className=i,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(I.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(!(t=this.get_node(t))||t.id===I.jstree.root)return!1;var i=[],e=[],n=this._data.core.selected.concat([]);e.push(t.id),!0===t.state.opened&&i.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){e.push(this.id),i.push(this.id)}),this._load_nodes(e,function(e){this.open_node(i,!1,0),this.select_node(n),this.trigger("refresh_node",{node:t,nodes:e})}.bind(this),!1,!0)},set_id:function(e,t){if(!(e=this.get_node(e))||e.id===I.jstree.root)return!1;var i,n,r=this._model.data,s=e.id;for(t=t.toString(),r[e.parent].children[I.inArray(e.id,r[e.parent].children)]=t,i=0,n=e.parents.length;i<n;i++)r[e.parents[i]].children_d[I.inArray(e.id,r[e.parents[i]].children_d)]=t;for(i=0,n=e.children.length;i<n;i++)r[e.children[i]].parent=t;for(i=0,n=e.children_d.length;i<n;i++)r[e.children_d[i]].parents[I.inArray(e.id,r[e.children_d[i]].parents)]=t;return-1!==(i=I.inArray(e.id,this._data.core.selected))&&(this._data.core.selected[i]=t),(i=this.get_node(e.id,!0))&&(i.attr("id",t),this.element.attr("aria-activedescendant")===e.id)&&this.element.attr("aria-activedescendant",t),delete r[e.id],e.id=t,r[e.li_attr.id=t]=e,this.trigger("set_id",{node:e,new:e.id,old:s}),!0},get_text:function(e){return!(!(e=this.get_node(e))||e.id===I.jstree.root)&&e.text},set_text:function(e,t){var i,n;if(I.vakata.is_array(e)){for(i=0,n=(e=e.slice()).length;i<n;i++)this.set_text(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===I.jstree.root||(e.text=t,this.get_node(e,!0).length&&this.redraw_node(e.id),this.trigger("set_text",{obj:e,text:t}),0))},get_json:function(e,t,i){if(!(e=this.get_node(e||I.jstree.root)))return!1;t&&t.flat&&!i&&(i=[]);var n,r,s={id:e.id,text:e.text,icon:this.get_icon(e),li_attr:I.extend(!0,{},e.li_attr),a_attr:I.extend(!0,{},e.a_attr),state:{},data:(!t||!t.no_data)&&I.extend(!0,I.vakata.is_array(e.data)?[]:{},e.data)};if(t&&t.flat?s.parent=e.parent:s.children=[],t&&t.no_state)delete s.state;else for(n in e.state)e.state.hasOwnProperty(n)&&(s.state[n]=e.state[n]);if(t&&t.no_li_attr&&delete s.li_attr,t&&t.no_a_attr&&delete s.a_attr,t&&t.no_id&&(delete s.id,s.li_attr&&s.li_attr.id&&delete s.li_attr.id,s.a_attr)&&s.a_attr.id&&delete s.a_attr.id,t&&t.flat&&e.id!==I.jstree.root&&i.push(s),!t||!t.no_children)for(n=0,r=e.children.length;n<r;n++)t&&t.flat?this.get_json(e.children[n],t,i):s.children.push(this.get_json(e.children[n],t));return t&&t.flat?i:e.id===I.jstree.root?s.children:s},create_node:function(e,t,i,n,r){if(null===e&&(e=I.jstree.root),!(e=this.get_node(e)))return!1;if(!(i=i===O?"last":i).toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,i,n,!0)});var s,a,o,l;switch((t="string"==typeof(t=t||{text:this.get_string("New node")})?{text:t}:I.extend(!0,{},t)).text===O&&(t.text=this.get_string("New node")),i=e.id===I.jstree.root&&"after"===(i="before"===i?"first":i)?"last":i){case"before":s=this.get_node(e.parent),i=I.inArray(e.id,s.children),e=s;break;case"after":s=this.get_node(e.parent),i=I.inArray(e.id,s.children)+1,e=s;break;case"inside":case"first":i=0;break;case"last":i=e.children.length;break;default:i=i||0}if(i>e.children.length&&(i=e.children.length),t.id===O&&(t.id=!0),!this.check("create_node",t,e,i))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===t.id&&delete t.id,!(t=this._parse_model_from_json(t,e.id,e.parents.concat())))return!1;for(s=this.get_node(t),(a=[]).push(t),a=a.concat(s.children_d),this.trigger("model",{nodes:a,parent:e.id}),e.children_d=e.children_d.concat(a),o=0,l=e.parents.length;o<l;o++)this._model.data[e.parents[o]].children_d=this._model.data[e.parents[o]].children_d.concat(a);for(t=s,s=[],o=0,l=e.children.length;o<l;o++)s[i<=o?o+1:o]=e.children[o];return s[i]=t.id,e.children=s,this.redraw_node(e,!0),this.trigger("create_node",{node:this.get_node(t),parent:e.id,position:i}),n&&n.call(this,this.get_node(t)),t.id},rename_node:function(e,t){var i,n,r;if(I.vakata.is_array(e)){for(i=0,n=(e=e.slice()).length;i<n;i++)this.rename_node(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===I.jstree.root||(r=e.text,this.check("rename_node",e,this.get_parent(e),t)?(this.set_text(e,t),this.trigger("rename_node",{node:e,text:t,old:r}),0):(this.settings.core.error.call(this,this._data.core.last_error),1)))},delete_node:function(e){var t,i,n,r,s,a,o,l,c,d,u;if(I.vakata.is_array(e))for(t=0,i=(e=e.slice()).length;t<i;t++)this.delete_node(e[t]);else{if(!(e=this.get_node(e))||e.id===I.jstree.root)return!1;if(n=this.get_node(e.parent),u=I.inArray(e.id,n.children),c=!1,!this.check("delete_node",e,n,u))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==u&&(n.children=I.vakata.array_remove(n.children,u)),(r=e.children_d.concat([])).push(e.id),s=0,a=e.parents.length;s<a;s++)this._model.data[e.parents[s]].children_d=I.vakata.array_filter(this._model.data[e.parents[s]].children_d,function(e){return-1===I.inArray(e,r)});for(o=0,l=r.length;o<l;o++)if(this._model.data[r[o]].state.selected){c=!0;break}for(c&&(this._data.core.selected=I.vakata.array_filter(this._data.core.selected,function(e){return-1===I.inArray(e,r)})),this.trigger("delete_node",{node:e,parent:n.id}),c&&this.trigger("changed",{action:"delete_node",node:e,selected:this._data.core.selected,parent:n.id}),o=0,l=r.length;o<l;o++)delete this._model.data[r[o]];-1!==I.inArray(this._data.core.focused,r)&&(this._data.core.focused=null,d=this.element[0].scrollTop,u=this.element[0].scrollLeft,n.id===I.jstree.root?this._model.data[I.jstree.root].children[0]&&this.get_node(this._model.data[I.jstree.root].children[0],!0).children(".jstree-anchor").trigger("focus"):this.get_node(n,!0).children(".jstree-anchor").trigger("focus"),this.element[0].scrollTop=d,this.element[0].scrollLeft=u),this.redraw_node(n,!0)}return!0},check:function(e,t,i,n,r){t=t&&t.id?t:this.get_node(t),i=i&&i.id?i:this.get_node(i);var s=e.match(/^(move_node|copy_node|create_node)$/i)?i:t,a=this.settings.core.check_callback;if("move_node"===e||"copy_node"===e){if(!(r&&r.is_multi||"move_node"!==e||I.inArray(t.id,i.children)!==n))return!(this._data.core.last_error={error:"check",plugin:"core",id:"core_08",reason:"Moving node to its current position",data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})});if(!(r&&r.is_multi||t.id!==i.id&&("move_node"!==e||I.inArray(t.id,i.children)!==n)&&-1===I.inArray(i.id,t.children_d)))return!(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})})}return(s=s&&s.data?s.data:s)&&s.functions&&(!1===s.functions[e]||!0===s.functions[e])?(!1===s.functions[e]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),s.functions[e]):!(!1===a||I.vakata.is_function(a)&&!1===a.call(this,e,t,i,n,r)||a&&!1===a[e])||!(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})})},last_error:function(){return this._data.core.last_error},move_node:function(e,t,i,n,r,s,a){var o,l,c,d,u,h,p,f,m,g,v,y,_,b;if(t=this.get_node(t),i=i===O?0:i,!t)return!1;if(!i.toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(t))return this.load_node(t,function(){this.move_node(e,t,i,n,!0,!1,a)});if(I.vakata.is_array(e)){if(1!==e.length){for(o=0,l=e.length;o<l;o++)(m=this.move_node(e[o],t,i,n,r,!1,a))&&(t=m,i="after");return this.redraw(),!0}e=e[0]}if(!(e=e&&e.id!==O?e:this.get_node(e))||e.id===I.jstree.root)return!1;if(c=(e.parent||I.jstree.root).toString(),u=i.toString().match(/^(before|after)$/)&&t.id!==I.jstree.root?this.get_node(t.parent):t,p=!(h=a||(this._model.data[e.id]?this:I.jstree.reference(e.id)))||!h._id||this._id!==h._id,d=h&&h._id&&c&&h._model.data[c]&&h._model.data[c].children?I.inArray(e.id,h._model.data[c].children):-1,h&&h._id&&(e=h._model.data[e.id]),p)return!!(m=this.copy_node(e,t,i,n,r,!1,a))&&(h&&h.delete_node(e),m);switch(i=t.id===I.jstree.root&&"after"===(i="before"===i?"first":i)?"last":i){case"before":i=I.inArray(t.id,u.children);break;case"after":i=I.inArray(t.id,u.children)+1;break;case"inside":case"first":i=0;break;case"last":i=u.children.length;break;default:i=i||0}if(i>u.children.length&&(i=u.children.length),!this.check("move_node",e,u,i,{core:!0,origin:a,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(e.parent===u.id){for(f=u.children.concat(),-1!==(m=I.inArray(e.id,f))&&(f=I.vakata.array_remove(f,m),m<i)&&i--,m=[],g=0,v=f.length;g<v;g++)m[i<=g?g+1:g]=f[g];m[i]=e.id,u.children=m,this._node_changed(u.id),this.redraw(u.id===I.jstree.root)}else{for((m=e.children_d.concat()).push(e.id),g=0,v=e.parents.length;g<v;g++){for(f=[],y=0,_=(b=h._model.data[e.parents[g]].children_d).length;y<_;y++)-1===I.inArray(b[y],m)&&f.push(b[y]);h._model.data[e.parents[g]].children_d=f}for(h._model.data[c].children=I.vakata.array_remove_item(h._model.data[c].children,e.id),g=0,v=u.parents.length;g<v;g++)this._model.data[u.parents[g]].children_d=this._model.data[u.parents[g]].children_d.concat(m);for(f=[],g=0,v=u.children.length;g<v;g++)f[i<=g?g+1:g]=u.children[g];for(f[i]=e.id,u.children=f,u.children_d.push(e.id),u.children_d=u.children_d.concat(e.children_d),e.parent=u.id,(m=u.parents.concat()).unshift(u.id),b=e.parents.length,m=(e.parents=m).concat(),g=0,v=e.children_d.length;g<v;g++)this._model.data[e.children_d[g]].parents=this._model.data[e.children_d[g]].parents.slice(0,-1*b),Array.prototype.push.apply(this._model.data[e.children_d[g]].parents,m);c!==I.jstree.root&&u.id!==I.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(c),this._node_changed(u.id)),s||this.redraw()}return n&&n.call(this,e,u,i),this.trigger("move_node",{node:e,parent:u.id,position:i,old_parent:c,old_position:d,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id,old_instance:h,new_instance:this}),e.id},copy_node:function(e,t,i,n,r,s,a){var o,l,c,d,u,h,p,f,m,g;if(t=this.get_node(t),i=i===O?0:i,!t)return!1;if(!i.toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(t))return this.load_node(t,function(){this.copy_node(e,t,i,n,!0,!1,a)});if(I.vakata.is_array(e)){if(1!==e.length){for(o=0,l=e.length;o<l;o++)(d=this.copy_node(e[o],t,i,n,r,!0,a))&&(t=d,i="after");return this.redraw(),!0}e=e[0]}if(!(e=e&&e.id!==O?e:this.get_node(e))||e.id===I.jstree.root)return!1;switch(f=(e.parent||I.jstree.root).toString(),m=i.toString().match(/^(before|after)$/)&&t.id!==I.jstree.root?this.get_node(t.parent):t,(g=a||(this._model.data[e.id]?this:I.jstree.reference(e.id)))&&g._id&&(this._id,g._id),g&&g._id&&(e=g._model.data[e.id]),i=t.id===I.jstree.root&&"after"===(i="before"===i?"first":i)?"last":i){case"before":i=I.inArray(t.id,m.children);break;case"after":i=I.inArray(t.id,m.children)+1;break;case"inside":case"first":i=0;break;case"last":i=m.children.length;break;default:i=i||0}if(i>m.children.length&&(i=m.children.length),!this.check("copy_node",e,m,i,{core:!0,origin:a,is_multi:g&&g._id&&g._id!==this._id,is_foreign:!g||!g._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(p=g?g.get_json(e,{no_id:!0,no_data:!0,no_state:!0}):e))return!1;if(!0===p.id&&delete p.id,!(p=this._parse_model_from_json(p,m.id,m.parents.concat())))return!1;for(d=this.get_node(p),e&&e.state&&!1===e.state.loaded&&(d.state.loaded=!1),(c=[]).push(p),c=c.concat(d.children_d),this.trigger("model",{nodes:c,parent:m.id}),u=0,h=m.parents.length;u<h;u++)this._model.data[m.parents[u]].children_d=this._model.data[m.parents[u]].children_d.concat(c);for(c=[],u=0,h=m.children.length;u<h;u++)c[i<=u?u+1:u]=m.children[u];return c[i]=d.id,m.children=c,m.children_d.push(d.id),m.children_d=m.children_d.concat(d.children_d),m.id===I.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(m.id),s||this.redraw(m.id===I.jstree.root),n&&n.call(this,d,m,i),this.trigger("copy_node",{node:d,original:e,parent:m.id,position:i,old_parent:f,old_position:g&&g._id&&f&&g._model.data[f]&&g._model.data[f].children?I.inArray(e.id,g._model.data[f].children):-1,is_multi:g&&g._id&&g._id!==this._id,is_foreign:!g||!g._id,old_instance:g,new_instance:this}),d.id},cut:function(e){if(e=e||this._data.core.selected.concat(),!(e=I.vakata.is_array(e)?e:[e]).length)return!1;for(var t,i=[],n=0,r=e.length;n<r;n++)(t=this.get_node(e[n]))&&(t.id||0===t.id)&&t.id!==I.jstree.root&&i.push(t);if(!i.length)return!1;o=i,l="move_node",(f=this).trigger("cut",{node:e})},copy:function(e){if(e=e||this._data.core.selected.concat(),!(e=I.vakata.is_array(e)?e:[e]).length)return!1;for(var t,i=[],n=0,r=e.length;n<r;n++)(t=this.get_node(e[n]))&&t.id!==O&&t.id!==I.jstree.root&&i.push(t);if(!i.length)return!1;o=i,l="copy_node",(f=this).trigger("copy",{node:e})},get_buffer:function(){return{mode:l,node:o,inst:f}},can_paste:function(){return!1!==l&&!1!==o},paste:function(e,t){if(!((e=this.get_node(e))&&l&&l.match(/^(copy_node|move_node)$/)&&o))return!1;this[l](o,e,t,!1,!1,!1,f)&&this.trigger("paste",{parent:e.id,node:o,mode:l}),f=l=o=!1},clear_buffer:function(){f=l=o=!1,this.trigger("clear_buffer")},edit:function(i,e,n){var t,r,s,a,o,l,c,d,u=!1;return!!(i=this.get_node(i))&&(this.check("edit",i,this.get_parent(i))?(d=i,e="string"==typeof e?e:i.text,this.set_text(i,""),i=this._open_to(i),d.text=e,c=this._data.core.rtl,t=this.element.width(),this._data.core.focused=d.id,r=i.children(".jstree-anchor").trigger("focus"),s=I("<span></span>"),a=e,o=I("<div></div>",{css:{position:"absolute",top:"-200px",left:c?"0px":"-1000px",visibility:"hidden"}}).appendTo(y.body),l=I("<input />",{value:a,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:function(e){e.stopImmediatePropagation(),e.preventDefault();var t=s.children(".jstree-rename-input").val(),e=this.settings.core.force_text;""===t&&(t=a),o.remove(),s.replaceWith(r),s.remove(),a=e?a:I("<div></div>").append(I.parseHTML(a)).html(),i=this.get_node(i),this.set_text(i,a),(e=!!this.rename_node(i,e?I("<div></div>").text(t).text():I("<div></div>").append(I.parseHTML(t)).html()))||this.set_text(i,a),this._data.core.focused=d.id,setTimeout(function(){var e=this.get_node(d.id,!0);e.length&&(this._data.core.focused=d.id,e.children(".jstree-anchor").trigger("focus"))}.bind(this),0),n&&n.call(this,d,e,u,t),l=null}.bind(this),keydown:function(e){var t=e.which;27===t&&(u=!0,this.value=a),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){l.width(Math.min(o.text("pW"+this.value).width(),t))},keypress:function(e){if(13===e.which)return!1}}),c={fontFamily:r.css("fontFamily")||"",fontSize:r.css("fontSize")||"",fontWeight:r.css("fontWeight")||"",fontStyle:r.css("fontStyle")||"",fontStretch:r.css("fontStretch")||"",fontVariant:r.css("fontVariant")||"",letterSpacing:r.css("letterSpacing")||"",wordSpacing:r.css("wordSpacing")||""},s.attr("class",r.attr("class")).append(r.contents().clone()).append(l),r.replaceWith(s),o.css(c),l.css(c).width(Math.min(o.text("pW"+l[0].value).width(),t))[0].select(),void I(y).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(e){l&&e.target!==l&&I(l).trigger("blur")})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(e,t){if(!e)return!1;(t=!0===t?(this.settings.core.themes.dir||I.jstree.path+"/themes")+"/"+e+"/style.css":t)&&-1===I.inArray(t,i)&&(I("head").append('<link rel="stylesheet" href="'+t+'" type="text/css" />'),i.push(t)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=e,this.element.addClass("jstree-"+e),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+e+"-responsive"),this.trigger("set_theme",{theme:e})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),(this._data.core.themes.variant=e)&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(e,t){var i,n,r,s;if(I.vakata.is_array(e)){for(i=0,n=(e=e.slice()).length;i<n;i++)this.set_icon(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===I.jstree.root||(s=e.icon,e.icon=!0===t||null===t||t===O||""===t||t,r=this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===t?(r.removeClass("jstree-themeicon-custom "+s).css("background","").removeAttr("rel"),this.hide_icon(e)):(!0===t||null===t||t===O||""===t?r.removeClass("jstree-themeicon-custom "+s).css("background","").removeAttr("rel"):(-1===t.indexOf("/")&&-1===t.indexOf(".")?(r.removeClass(s).css("background",""),r.addClass(t+" jstree-themeicon-custom")):(r.removeClass(s).css("background",""),r.addClass("jstree-themeicon-custom").css("background","url('"+t+"') center center no-repeat"))).attr("rel",t),!1===s&&this.show_icon(e)),0))},get_icon:function(e){return!(!(e=this.get_node(e))||e.id===I.jstree.root)&&e.icon},hide_icon:function(e){var t,i;if(I.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.hide_icon(e[t]);return!0}return!(!(e=this.get_node(e))||e===I.jstree.root||(e.icon=!1,this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),0))},show_icon:function(e){var t,i,n;if(I.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.show_icon(e[t]);return!0}return!(!(e=this.get_node(e))||e===I.jstree.root||(n=this.get_node(e,!0),e.icon=!n.length||n.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),e.icon||(e.icon=!0),n.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),0))}},I.vakata={},I.vakata.attributes=function(e,i){e=I(e)[0];var n=i?{}:[];return e&&e.attributes&&I.each(e.attributes,function(e,t){-1===I.inArray(t.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==t.value&&""!==I.vakata.trim(t.value)&&(i?n[t.name]=t.value:n.push(t.name))}),n},I.vakata.array_unique=function(e){for(var t=[],i={},n=0,r=e.length;n<r;n++)i[e[n]]===O&&(t.push(e[n]),i[e[n]]=!0);return t},I.vakata.array_remove=function(e,t){return e.splice(t,1),e},I.vakata.array_remove_item=function(e,t){return-1!==(t=I.inArray(t,e))?I.vakata.array_remove(e,t):e},I.vakata.array_filter=function(e,t,i,n,r){if(e.filter)return e.filter(t,i);for(r in n=[],e)~~r+""==r+""&&0<=r&&t.call(i,e[r],+r,e)&&n.push(e[r]);return n},I.vakata.trim=function(e){return String.prototype.trim?String.prototype.trim.call(e.toString()):e.toString().replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},I.vakata.is_function=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},I.vakata.is_array=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Function.prototype.bind||(Function.prototype.bind=function(){var t=this,i=arguments[0],n=Array.prototype.slice.call(arguments,1);if("function"!=typeof t)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");return function(){var e=n.concat(Array.prototype.slice.call(arguments));return t.apply(i,e)}}),I.jstree.plugins.changed=function(e,s){var a=[];this.trigger=function(e,t){if(t=t||{},"changed"===e.replace(".jstree","")){t.changed={selected:[],deselected:[]};for(var i={},n=0,r=a.length;n<r;n++)i[a[n]]=1;for(n=0,r=t.selected.length;n<r;n++)i[t.selected[n]]?i[t.selected[n]]=2:t.changed.selected.push(t.selected[n]);for(n=0,r=a.length;n<r;n++)1===i[a[n]]&&t.changed.deselected.push(a[n]);a=t.selected.slice()}s.trigger.call(this,e,t)},this.refresh=function(e,t){return a=[],s.refresh.apply(this,arguments)}},y.createElement("I")),_=(v.className="jstree-icon jstree-checkbox",v.setAttribute("role","presentation"),I.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},I.jstree.plugins.checkbox=function(e,l){this.bind=function(){l.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")}.bind(this)).on("loading.jstree",function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()}.bind(this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(this._undetermined.bind(this),50)}.bind(this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",function(e,t){for(var i=this._model.data,n=(i[t.parent],t.nodes),r=0,s=n.length;r<s;r++)i[n[r]].state.checked=i[n[r]].state.checked||i[n[r]].original&&i[n[r]].original.state&&i[n[r]].original.state.checked,i[n[r]].state.checked&&this._data.checkbox.selected.push(n[r])}.bind(this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",function(e,t){var i,n,r,s,a,o,l=this._model.data,c=l[t.parent],d=t.nodes,u=[],t=this.settings.checkbox.cascade,h=this.settings.checkbox.tie_selection;if(-1!==t.indexOf("down"))if(c.state[h?"selected":"checked"]){for(n=0,r=d.length;n<r;n++)l[d[n]].state[h?"selected":"checked"]=!0;this._data[h?"core":"checkbox"].selected=this._data[h?"core":"checkbox"].selected.concat(d)}else for(n=0,r=d.length;n<r;n++)if(l[d[n]].state[h?"selected":"checked"]){for(s=0,a=l[d[n]].children_d.length;s<a;s++)l[l[d[n]].children_d[s]].state[h?"selected":"checked"]=!0;this._data[h?"core":"checkbox"].selected=this._data[h?"core":"checkbox"].selected.concat(l[d[n]].children_d)}if(-1!==t.indexOf("up")){for(n=0,r=c.children_d.length;n<r;n++)l[c.children_d[n]].children.length||u.push(l[c.children_d[n]].parent);for(s=0,a=(u=I.vakata.array_unique(u)).length;s<a;s++)for(c=l[u[s]];c&&c.id!==I.jstree.root;){for(n=i=0,r=c.children.length;n<r;n++)i+=l[c.children[n]].state[h?"selected":"checked"];if(i!==r)break;c.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(c.id),(o=this.get_node(c,!0))&&o.length&&o.children(".jstree-anchor").attr("aria-selected",!0).addClass(h?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}}this._data[h?"core":"checkbox"].selected=I.vakata.array_unique(this._data[h?"core":"checkbox"].selected)}.bind(this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",function(e,t){var i,n,r=t.node,s=this._model.data,a=this.get_node(r.parent),t=this.settings.checkbox.cascade,o=this.settings.checkbox.tie_selection,l={},c=this._data[o?"core":"checkbox"].selected;for(h=0,p=c.length;h<p;h++)l[c[h]]=!0;if(-1!==t.indexOf("down"))for(var d=this._cascade_new_checked_state(r.id,!0),u=r.children_d.concat(r.id),h=0,p=u.length;h<p;h++)-1<d.indexOf(u[h])?l[u[h]]=!0:delete l[u[h]];if(-1!==t.indexOf("up"))for(;a&&a.id!==I.jstree.root;){for(h=i=0,p=a.children.length;h<p;h++)i+=s[a.children[h]].state[o?"selected":"checked"];if(i!==p)break;a.state[o?"selected":"checked"]=!0,l[a.id]=!0,(n=this.get_node(a,!0))&&n.length&&n.children(".jstree-anchor").attr("aria-selected",!0).addClass(o?"jstree-clicked":"jstree-checked"),a=this.get_node(a.parent)}for(h in c=[],l)l.hasOwnProperty(h)&&c.push(h);this._data[o?"core":"checkbox"].selected=c}.bind(this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",function(e,t){for(var i,n=this.get_node(I.jstree.root),r=this._model.data,s=0,a=n.children_d.length;s<a;s++)(i=r[n.children_d[s]])&&i.original&&i.original.state&&i.original.state.undetermined&&(i.original.state.undetermined=!1)}.bind(this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",function(e,t){var i,n,r,s,a=t.node,o=(this.get_node(a,!0),this.settings.checkbox.cascade),l=this.settings.checkbox.tie_selection,t=this._data[l?"core":"checkbox"].selected,c=a.children_d.concat(a.id);if(-1!==o.indexOf("down")&&(s=this._cascade_new_checked_state(a.id,!1),t=I.vakata.array_filter(t,function(e){return-1===c.indexOf(e)||-1<s.indexOf(e)})),-1!==o.indexOf("up")&&-1===t.indexOf(a.id)){for(i=0,n=a.parents.length;i<n;i++)(r=this._model.data[a.parents[i]]).state[l?"selected":"checked"]=!1,r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1),(r=this.get_node(a.parents[i],!0))&&r.length&&r.children(".jstree-anchor").attr("aria-selected",!1).removeClass(l?"jstree-clicked":"jstree-checked");t=I.vakata.array_filter(t,function(e){return-1===a.parents.indexOf(e)})}this._data[l?"core":"checkbox"].selected=t}.bind(this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",function(e,t){for(var i,n,r,s,a=this.get_node(t.parent),o=this._model.data,l=this.settings.checkbox.tie_selection;a&&a.id!==I.jstree.root&&!a.state[l?"selected":"checked"];){for(i=r=0,n=a.children.length;i<n;i++)r+=o[a.children[i]].state[l?"selected":"checked"];if(!(0<n&&r===n))break;a.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(a.id),(s=this.get_node(a,!0))&&s.length&&s.children(".jstree-anchor").attr("aria-selected",!0).addClass(l?"jstree-clicked":"jstree-checked"),a=this.get_node(a.parent)}}.bind(this)).on("move_node.jstree",function(e,t){var i,n,r,s,a,o=t.is_multi,l=t.old_parent,t=this.get_node(t.parent),c=this._model.data,d=this.settings.checkbox.tie_selection;if(!o)for(i=this.get_node(l);i&&i.id!==I.jstree.root&&!i.state[d?"selected":"checked"];){for(r=n=0,s=i.children.length;r<s;r++)n+=c[i.children[r]].state[d?"selected":"checked"];if(!(0<s&&n===s))break;i.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(i.id),(a=this.get_node(i,!0))&&a.length&&a.children(".jstree-anchor").attr("aria-selected",!0).addClass(d?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}for(i=t;i&&i.id!==I.jstree.root;){for(r=n=0,s=i.children.length;r<s;r++)n+=c[i.children[r]].state[d?"selected":"checked"];if(n===s)i.state[d?"selected":"checked"]||(i.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(i.id),(a=this.get_node(i,!0))&&a.length&&a.children(".jstree-anchor").attr("aria-selected",!0).addClass(d?"jstree-clicked":"jstree-checked"));else{if(!i.state[d?"selected":"checked"])break;i.state[d?"selected":"checked"]=!1,this._data[d?"core":"checkbox"].selected=I.vakata.array_remove_item(this._data[d?"core":"checkbox"].selected,i.id),(a=this.get_node(i,!0))&&a.length&&a.children(".jstree-anchor").attr("aria-selected",!1).removeClass(d?"jstree-clicked":"jstree-checked")}i=this.get_node(i.parent)}}.bind(this))},this.get_undetermined=function(e){if(-1===this.settings.checkbox.cascade.indexOf("undetermined"))return[];for(var i,n,r={},s=this._model.data,t=this.settings.checkbox.tie_selection,a=this._data[t?"core":"checkbox"].selected,o=[],l=this,c=[],d=0,u=a.length;d<u;d++)if(s[a[d]]&&s[a[d]].parents)for(i=0,n=s[a[d]].parents.length;i<n&&r[s[a[d]].parents[i]]===O;i++)s[a[d]].parents[i]!==I.jstree.root&&(r[s[a[d]].parents[i]]=!0,o.push(s[a[d]].parents[i]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var e,t=l.get_node(this);if(t)if(t.state.loaded){for(d=0,u=t.children_d.length;d<u;d++)if(!(e=s[t.children_d[d]]).state.loaded&&e.original&&e.original.state&&e.original.state.undetermined&&!0===e.original.state.undetermined)for(r[e.id]===O&&e.id!==I.jstree.root&&(r[e.id]=!0,o.push(e.id)),i=0,n=e.parents.length;i<n;i++)r[e.parents[i]]===O&&e.parents[i]!==I.jstree.root&&(r[e.parents[i]]=!0,o.push(e.parents[i]))}else if(t.original&&t.original.state&&t.original.state.undetermined&&!0===t.original.state.undetermined)for(r[t.id]===O&&t.id!==I.jstree.root&&(r[t.id]=!0,o.push(t.id)),i=0,n=t.parents.length;i<n;i++)r[t.parents[i]]===O&&t.parents[i]!==I.jstree.root&&(r[t.parents[i]]=!0,o.push(t.parents[i]))}),d=0,u=o.length;d<u;d++)s[o[d]].state[t?"selected":"checked"]||c.push(e?s[o[d]]:o[d]);return c},this._undetermined=function(){if(null!==this.element){var e,t,i,n=this.get_undetermined(!1);for(this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),e=0,t=n.length;e<t;e++)(i=this.get_node(n[e],!0))&&i.length&&i.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(e,t,i,n){if(e=l.redraw_node.apply(this,arguments)){for(var r=null,s=null,a=0,o=e.childNodes.length;a<o;a++)if(e.childNodes[a]&&e.childNodes[a].className&&-1!==e.childNodes[a].className.indexOf("jstree-anchor")){r=e.childNodes[a];break}r&&(!this.settings.checkbox.tie_selection&&this._model.data[e.id].state.checked&&(r.className+=" jstree-checked"),s=v.cloneNode(!1),this._model.data[e.id].state.checkbox_disabled&&(s.className+=" jstree-checkbox-disabled"),r.insertBefore(s,r.childNodes[0]))}return i||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(this._undetermined.bind(this),50)),e},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(e){e=this.get_node(e);var t,i,n=this.settings.checkbox.cascade,r=this.settings.checkbox.tie_selection,s=this._data[r?"core":"checkbox"].selected,a=this._model.data;if(e&&!0!==e.state[r?"selected":"checked"]&&-1!==n.indexOf("undetermined")&&(-1!==n.indexOf("down")||-1!==n.indexOf("up"))){if(!e.state.loaded&&!0===e.original.state.undetermined)return!0;for(t=0,i=e.children_d.length;t<i;t++)if(-1!==I.inArray(e.children_d[t],s)||!a[e.children_d[t]].state.loaded&&a[e.children_d[t]].original.state.undetermined)return!0}return!1},this.disable_checkbox=function(e){var t,i,n;if(I.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.disable_checkbox(e[t]);return!0}if(!(e=this.get_node(e))||e.id===I.jstree.root)return!1;n=this.get_node(e,!0),e.state.checkbox_disabled||(e.state.checkbox_disabled=!0,n&&n.length&&n.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:e}))},this.enable_checkbox=function(e){var t,i,n;if(I.vakata.is_array(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.enable_checkbox(e[t]);return!0}if(!(e=this.get_node(e))||e.id===I.jstree.root)return!1;n=this.get_node(e,!0),e.state.checkbox_disabled&&(e.state.checkbox_disabled=!1,n&&n.length&&n.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:e}))},this.activate_node=function(e,t){return!I(t.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||I(t.target).hasClass("jstree-checkbox"))&&(t.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!I(t.target).hasClass("jstree-checkbox")?l.activate_node.call(this,e,t):!this.is_disabled(e)&&(this.is_checked(e)?this.uncheck_node(e,t):this.check_node(e,t),void this.trigger("activate_node",{node:this.get_node(e)})))},this.delete_node=function(e){if(!this.settings.checkbox.tie_selection&&!I.vakata.is_array(e)){var t,i,n,r=!1;if(!(e=this.get_node(e))||e.id===I.jstree.root)return!1;for((t=e.children_d.concat([])).push(e.id),i=0,n=t.length;i<n;i++)if(this._model.data[t[i]].state.checked){r=!0;break}r&&(this._data.checkbox.selected=I.vakata.array_filter(this._data.checkbox.selected,function(e){return-1===I.inArray(e,t)}))}return l.delete_node.call(this,e)},this._cascade_new_checked_state=function(e,t){var i,n,r=this.settings.checkbox.tie_selection,s=this._model.data[e],a=[],o=[];if(!this.settings.checkbox.cascade_to_disabled&&s.state.disabled||!this.settings.checkbox.cascade_to_hidden&&s.state.hidden)c=this.get_checked_descendants(e),s.state[r?"selected":"checked"]&&c.push(s.id),a=a.concat(c);else{if(s.children)for(i=0,n=s.children.length;i<n;i++){var l=s.children[i],c=this._cascade_new_checked_state(l,t),a=a.concat(c);-1<c.indexOf(l)&&o.push(l)}var d=this.get_node(s,!0),e=0<o.length&&o.length<s.children.length;s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=e),!e&&t&&o.length===s.children.length?(s.state[r?"selected":"checked"]=t,a.push(s.id),d.children(".jstree-anchor").attr("aria-selected",!0).addClass(r?"jstree-clicked":"jstree-checked")):(s.state[r?"selected":"checked"]=!1,d.children(".jstree-anchor").attr("aria-selected",!1).removeClass(r?"jstree-clicked":"jstree-checked"))}return a},this.get_checked_descendants=function(e){var t=this,i=t.settings.checkbox.tie_selection,e=t._model.data[e];return I.vakata.array_filter(e.children_d,function(e){return t._model.data[e].state[i?"selected":"checked"]})},this.check_node=function(e,t){if(this.settings.checkbox.tie_selection)return this.select_node(e,!1,!0,t);var i,n,r;if(I.vakata.is_array(e)){for(n=0,r=(e=e.slice()).length;n<r;n++)this.check_node(e[n],t);return!0}if(!(e=this.get_node(e))||e.id===I.jstree.root)return!1;i=this.get_node(e,!0),e.state.checked||(e.state.checked=!0,this._data.checkbox.selected.push(e.id),i&&i.length&&i.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:e,selected:this._data.checkbox.selected,event:t}))},this.uncheck_node=function(e,t){if(this.settings.checkbox.tie_selection)return this.deselect_node(e,!1,t);var i,n,r;if(I.vakata.is_array(e)){for(i=0,n=(e=e.slice()).length;i<n;i++)this.uncheck_node(e[i],t);return!0}if(!(e=this.get_node(e))||e.id===I.jstree.root)return!1;r=this.get_node(e,!0),e.state.checked&&(e.state.checked=!1,this._data.checkbox.selected=I.vakata.array_remove_item(this._data.checkbox.selected,e.id),r.length&&r.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:e,selected:this._data.checkbox.selected,event:t}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var e,t;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[I.jstree.root].children_d.concat(),e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();for(var e=this._data.checkbox.selected.concat([]),t=0,i=this._data.checkbox.selected.length;t<i;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:e})},this.is_checked=function(e){return this.settings.checkbox.tie_selection?this.is_selected(e):!(!(e=this.get_node(e))||e.id===I.jstree.root)&&e.state.checked},this.get_checked=function(e){return this.settings.checkbox.tie_selection?this.get_selected(e):e?I.map(this._data.checkbox.selected,function(e){return this.get_node(e)}.bind(this)):this._data.checkbox.selected.slice()},this.get_top_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_top_selected(e);for(var t,i,n=this.get_checked(!0),r={},s=0,a=n.length;s<a;s++)r[n[s].id]=n[s];for(s=0,a=n.length;s<a;s++)for(t=0,i=n[s].children_d.length;t<i;t++)r[n[s].children_d[t]]&&delete r[n[s].children_d[t]];for(s in n=[],r)r.hasOwnProperty(s)&&n.push(s);return e?I.map(n,function(e){return this.get_node(e)}.bind(this)):n},this.get_bottom_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(e);for(var t=this.get_checked(!0),i=[],n=0,r=t.length;n<r;n++)t[n].children.length||i.push(t[n].id);return e?I.map(i,function(e){return this.get_node(e)}.bind(this)):i},this.load_node=function(e,t){var i,n,r;if(!I.vakata.is_array(e)&&!this.settings.checkbox.tie_selection&&(r=this.get_node(e))&&r.state.loaded)for(i=0,n=r.children_d.length;i<n;i++)this._model.data[r.children_d[i]].state.checked&&(this._data.checkbox.selected=I.vakata.array_remove_item(this._data.checkbox.selected,r.children_d[i]));return l.load_node.apply(this,arguments)},this.get_state=function(){var e=l.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection||(e.checkbox=this._data.checkbox.selected.slice()),e},this.set_state=function(e,t){var i,n=l.set_state.apply(this,arguments);return n&&e.checkbox?(this.settings.checkbox.tie_selection||(this.uncheck_all(),i=this,I.each(e.checkbox,function(e,t){i.check_node(t)})),delete e.checkbox,this.set_state(e,t),!1):n},this.refresh=function(e,t){return this.settings.checkbox.tie_selection&&(this._data.checkbox.selected=[]),l.refresh.apply(this,arguments)}},I.jstree.defaults.conditionalselect=function(){return!0},I.jstree.plugins.conditionalselect=function(e,i){this.activate_node=function(e,t){if(this.settings.conditionalselect.call(this,this.get_node(e),t))return i.activate_node.call(this,e,t)}},I.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(e,t){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(e){var i=I.jstree.reference(e.reference),e=i.get_node(e.reference);i.create_node(e,{},"last",function(t){try{i.edit(t)}catch(e){setTimeout(function(){i.edit(t)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(e){var t=I.jstree.reference(e.reference),e=t.get_node(e.reference);t.edit(e)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(e){var t=I.jstree.reference(e.reference),e=t.get_node(e.reference);t.is_selected(e)?t.delete_node(t.get_selected()):t.delete_node(e)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){var t=I.jstree.reference(e.reference),e=t.get_node(e.reference);t.is_selected(e)?t.cut(t.get_top_selected()):t.cut(e)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){var t=I.jstree.reference(e.reference),e=t.get_node(e.reference);t.is_selected(e)?t.copy(t.get_top_selected()):t.copy(e)}},paste:{separator_before:!1,icon:!1,_disabled:function(e){return!I.jstree.reference(e.reference).can_paste()},separator_after:!1,label:"Paste",action:function(e){var t=I.jstree.reference(e.reference),e=t.get_node(e.reference);t.paste(e)}}}}}}},I.jstree.plugins.contextmenu=function(e,s){this.bind=function(){s.bind.call(this);var t,i,n=0,r=null;this.element.on("init.jstree loading.jstree ready.jstree",function(){this.get_container_ul().addClass("jstree-contextmenu")}.bind(this)).on("contextmenu.jstree",".jstree-anchor",function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),n=e.ctrlKey?+new Date:0,(t||r)&&(n=+new Date+1e4),r&&clearTimeout(r),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))}.bind(this)).on("click.jstree",".jstree-anchor",function(e){this._data.contextmenu.visible&&(!n||250<+new Date-n)&&I.vakata.context.hide(),n=0}.bind(this)).on("touchstart.jstree",".jstree-anchor",function(e){e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(t=e.originalEvent.changedTouches[0].clientX,i=e.originalEvent.changedTouches[0].clientY,r=setTimeout(function(){I(e.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){r&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(10<Math.abs(t-e.originalEvent.changedTouches[0].clientX)||10<Math.abs(i-e.originalEvent.changedTouches[0].clientY))&&(clearTimeout(r),I.vakata.context.hide())}).on("touchend.vakata.jstree",function(e){r&&clearTimeout(r)}),I(y).on("context_hide.vakata.jstree",function(e,t){this._data.contextmenu.visible=!1,I(t.reference).removeClass("jstree-context")}.bind(this))},this.teardown=function(){this._data.contextmenu.visible&&I.vakata.context.hide(),I(y).off("context_hide.vakata.jstree"),s.teardown.call(this)},this.show_contextmenu=function(t,i,n,e){if(!(t=this.get_node(t))||t.id===I.jstree.root)return!1;var r=this.settings.contextmenu,s=this.get_node(t,!0).children(".jstree-anchor"),a=!1;!r.show_at_node&&i!==O&&n!==O||(s=s.offset(),i=s.left,n=s.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(t)&&this.activate_node(t,e),a=r.items,I.vakata.is_function(a)&&(a=a.call(this,t,function(e){this._show_contextmenu(t,i,n,e)}.bind(this))),I.isPlainObject(a)&&this._show_contextmenu(t,i,n,a)},this._show_contextmenu=function(e,t,i,n){var r=this.get_node(e,!0).children(".jstree-anchor");I(y).one("context_show.vakata.jstree",function(e,t){var i="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";I(t.element).addClass(i),r.addClass("jstree-context")}.bind(this)),this._data.contextmenu.visible=!0,I.vakata.context.show(r,{x:t,y:i},n),this.trigger("show_contextmenu",{node:e,x:t,y:i})}},h={element:u=!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1},(d=I).vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(e){d(y).triggerHandler("context_"+e+".vakata",{reference:h.reference,element:h.element,position:{x:h.position_x,y:h.position_y}})},_execute:function(e){return!(!(e=h.items[e])||e._disabled&&(!d.vakata.is_function(e._disabled)||e._disabled({item:e,reference:h.reference,element:h.element}))||!e.action)&&e.action.call(null,{item:e,reference:h.reference,element:h.element,position:{x:h.position_x,y:h.position_y}})},_parse:function(e,t){if(!e)return!1;t||(h.html="",h.items=[]);var i,n="",r=!1;return t&&(n+="<ul>"),d.each(e,function(e,t){return!t||(h.items.push(t),!r&&t.separator_before&&(n+="<li class='vakata-context-separator'><a href='#' "+(d.vakata.context.settings.icons?"":'class="vakata-context-no-icons"')+">&#160;</a></li>"),r=!1,n=(n+="<li class='"+(t._class||"")+(!0===t._disabled||d.vakata.is_function(t._disabled)&&t._disabled({item:t,reference:h.reference,element:h.element})?" vakata-contextmenu-disabled ":"")+"' "+(t.shortcut?" data-shortcut='"+t.shortcut+"' ":"")+">")+("<a href='#' rel='"+(h.items.length-1)+"' "+(t.title?"title='"+t.title+"'":"")+">"),d.vakata.context.settings.icons&&(n+="<i ",t.icon&&(-1!==t.icon.indexOf("/")||-1!==t.icon.indexOf(".")?n+=" style='background:url(\""+t.icon+"\") center center no-repeat' ":n+=" class='"+t.icon+"' "),n+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),n+=(d.vakata.is_function(t.label)?t.label({item:e,reference:h.reference,element:h.element}):t.label)+(t.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+t.shortcut+'">'+(t.shortcut_label||"")+"</span>":"")+"</a>",t.submenu&&(i=d.vakata.context._parse(t.submenu,!0))&&(n+=i),n+="</li>",void(t.separator_after&&(n+="<li class='vakata-context-separator'><a href='#' "+(d.vakata.context.settings.icons?"":'class="vakata-context-no-icons"')+">&#160;</a></li>",r=!0)))}),n=n.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),t&&(n+="</ul>"),t||(h.html=n,d.vakata.context._trigger("parse")),10<n.length&&n},_show_submenu:function(e){var t,i,n,r,s,a,o,l;(e=d(e)).length&&e.children("ul").length&&(t=e.children("ul"),n=(i=e.offset().left)+e.outerWidth(),r=e.offset().top,s=t.width(),a=t.height(),o=d(window).width()+d(window).scrollLeft(),l=d(window).height()+d(window).scrollTop(),u?e[n-(s+10+e.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):e[o<n+s&&o-n<i?"addClass":"removeClass"]("vakata-context-right"),l<r+a+10&&t.css("bottom","-1px"),e.hasClass("vakata-context-right")?i<s&&t.css("margin-right",i-s):o-n<s&&t.css("margin-left",o-n-s),t.show())},show:function(e,t,i){var n,r,s,a,o,l,c;switch(h.element&&h.element.length&&h.element.width(""),!0){case!t&&!e:return!1;case!!t&&!!e:h.reference=e,h.position_x=t.x,h.position_y=t.y;break;case!t&&!!e:n=(h.reference=e).offset(),h.position_x=n.left+e.outerHeight(),h.position_y=n.top;break;case!!t&&!e:h.position_x=t.x,h.position_y=t.y}e&&!i&&d(e).data("vakata_contextmenu")&&(i=d(e).data("vakata_contextmenu")),d.vakata.context._parse(i)&&h.element.html(h.html),h.items.length&&(h.element.appendTo(y.body),r=h.element,s=h.position_x,a=h.position_y,o=r.width(),l=r.height(),c=d(window).width()+d(window).scrollLeft(),i=d(window).height()+d(window).scrollTop(),u&&(s-=r.outerWidth()-d(e).outerWidth())<d(window).scrollLeft()+20&&(s=d(window).scrollLeft()+20),h.element.css({left:s=c<s+o+20?c-(o+20):s,top:i<a+l+20?i-(l+20):a}).show().find("a").first().trigger("focus").parent().addClass("vakata-context-hover"),h.is_visible=!0,d.vakata.context._trigger("show"))},hide:function(){h.is_visible&&(h.element.hide().find("ul").hide().end().find(":focus").trigger("blur").end().detach(),h.is_visible=!1,d.vakata.context._trigger("hide"))}},d(function(){u="rtl"===d(y.body).css("direction");var t=!1;h.element=d("<ul class='vakata-context'></ul>"),h.element.on("mouseenter","li",function(e){e.stopImmediatePropagation(),d.contains(this,e.relatedTarget)||(t&&clearTimeout(t),h.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),d(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),d.vakata.context._show_submenu(this))}).on("mouseleave","li",function(e){d.contains(this,e.relatedTarget)||d(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(e){d(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),d.vakata.context.settings.hide_onmouseleave&&(t=setTimeout(function(){d.vakata.context.hide()},d.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(e){e.preventDefault(),d(this).trigger("blur").parent().hasClass("vakata-context-disabled")||!1===d.vakata.context._execute(d(this).attr("rel"))||d.vakata.context.hide()}).on("keydown","a",function(e){var t=null;switch(e.which){case 13:case 32:e.type="click",e.preventDefault(),d(e.currentTarget).trigger(e);break;case 37:h.is_visible&&(h.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").trigger("focus"),e.stopImmediatePropagation(),e.preventDefault());break;case 38:h.is_visible&&((t=(t=h.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length?t:h.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()).addClass("vakata-context-hover").children("a").trigger("focus"),e.stopImmediatePropagation(),e.preventDefault());break;case 39:h.is_visible&&(h.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").trigger("focus"),e.stopImmediatePropagation(),e.preventDefault());break;case 40:h.is_visible&&((t=(t=h.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length?t:h.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()).addClass("vakata-context-hover").children("a").trigger("focus"),e.stopImmediatePropagation(),e.preventDefault());break;case 27:d.vakata.context.hide(),e.preventDefault()}}).on("keydown",function(e){e.preventDefault(),(e=h.element.find(".vakata-contextmenu-shortcut-"+e.which).parent()).parent().not(".vakata-context-disabled")&&e.trigger("click")}),d(y).on("mousedown.vakata.jstree",function(e){h.is_visible&&h.element[0]!==e.target&&!d.contains(h.element[0],e.target)&&d.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,t){h.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),u&&h.element.addClass("vakata-context-rtl").css("direction","rtl"),h.element.find("ul").hide().end()})}),I.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1,blank_space_drop:!1},I.jstree.plugins.dnd=function(e,o){this.init=function(e,t){o.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in y.createElement("span")},this.bind=function(){o.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",function(e){if(this.settings.dnd.large_drag_target&&I(e.target).closest(".jstree-node")[0]!==e.currentTarget)return!0;if("touchstart"===e.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!I(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var t=this.get_node(e.target),i=this.is_selected(t)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,n=1<i?i+" "+this.get_string("nodes"):this.get_text(e.currentTarget);if(this.settings.core.force_text&&(n=I.vakata.html.escape(n)),t&&(t.id||0===t.id)&&t.id!==I.jstree.root&&(1===e.which||"touchstart"===e.type||"dragstart"===e.type)&&(!0===this.settings.dnd.is_draggable||I.vakata.is_function(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,1<i?this.get_top_selected(!0):[t],e))){if(r={jstree:!0,origin:this,obj:this.get_node(t,!0),nodes:1<i?this.get_top_selected():[t.id]},s=e.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),I.vakata.dnd.start(e,r,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+n+'<ins class="jstree-copy">+</ins></div>');I.vakata.dnd._trigger("start",e,{helper:I(),element:s,data:r})}}.bind(this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(e){return e.preventDefault(),I.vakata.dnd._trigger("move",e,{helper:I(),element:s,data:r}),!1}).on("drop.jstree",function(e){return e.preventDefault(),I.vakata.dnd._trigger("stop",e,{helper:I(),element:s,data:r}),!1}.bind(this))},this.redraw_node=function(e,t,i,n){if((e=o.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{for(var r=null,s=0,a=e.childNodes.length;s<a;s++)if(e.childNodes[s]&&e.childNodes[s].className&&-1!==e.childNodes[s].className.indexOf("jstree-anchor")){r=e.childNodes[s];break}r&&r.setAttribute("draggable",!0)}return e}},I(function(){var E=!1,C=!1,A=!1,P=!1,L=I('<div id="jstree-marker">&#160;</div>').hide();I(y).on("dragover.vakata.jstree",function(e){s&&I.vakata.dnd._trigger("move",e,{helper:I(),element:s,data:r})}).on("drop.vakata.jstree",function(e){s&&(I.vakata.dnd._trigger("stop",e,{helper:I(),element:s,data:r}),r=s=null)}).on("dnd_start.vakata.jstree",function(e,t){A=E=!1,t&&t.data&&t.data.jstree&&L.appendTo(y.body)}).on("dnd_move.vakata.jstree",function(e,r){var s=r.event.target!==A.target;if(!P||r.event&&"dragover"===r.event.type&&!s||clearTimeout(P),r&&r.data&&r.data.jstree&&(!r.event.target.id||"jstree-marker"!==r.event.target.id)){A=r.event;var a,t,o,l,c,d,u,h,p,f,m,g,v,y,_,b,T,w,x,S=I.jstree.reference(r.event.target),k=!1;if(S&&S._data&&S._data.dnd)if(L.attr("class","jstree-"+S.get_theme()+(S.settings.core.themes.responsive?" jstree-dnd-responsive":"")),T=r.data.origin&&(r.data.origin.settings.dnd.always_copy||r.data.origin.settings.dnd.copy&&(r.event.metaKey||r.event.ctrlKey)),r.helper.children().attr("class","jstree-"+S.get_theme()+" jstree-"+S.get_theme()+"-"+S.get_theme_variant()+" "+(S.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[T?"show":"hide"](),r.event.target!==S.element[0]&&r.event.target!==S.get_container_ul()[0]||0!==S.get_container_ul().children().length&&!S.settings.dnd.blank_space_drop){if((k=S.settings.dnd.large_drop_target?I(r.event.target).closest(".jstree-node").children(".jstree-anchor"):I(r.event.target).closest(".jstree-anchor"))&&k.length&&k.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(a=k.offset(),t=(r.event.pageY!==O?r.event:r.event.originalEvent).pageY-a.top,c=k.outerHeight(),h=t<c/3?["b","i","a"]:c-c/3<t?["a","i","b"]:c/2<t?["i","a","b"]:["i","b","a"],I.each(h,function(e,t){switch(t){case"b":o=a.left-6,l=a.top,d=S.get_parent(k),u=k.parent().index(),x="jstree-below";break;case"i":_=S.settings.dnd.inside_pos,b=S.get_node(k.parent()),o=a.left-2,l=a.top+c/2+1,d=b.id,u="first"===_?0:"last"===_?b.children.length:Math.min(_,b.children.length),x="jstree-inside";break;case"a":o=a.left-6,l=a.top+c,d=S.get_parent(k),u=k.parent().index()+1,x="jstree-above"}for(p=!0,f=0,m=r.data.nodes.length;f<m;f++)if(g=r.data.origin&&(r.data.origin.settings.dnd.always_copy||r.data.origin.settings.dnd.copy&&(r.event.metaKey||r.event.ctrlKey))?"copy_node":"move_node",v=u,"move_node"==g&&"a"===t&&r.data.origin&&r.data.origin===S&&d===S.get_parent(r.data.nodes[f])&&(y=S.get_node(d),v>I.inArray(r.data.nodes[f],y.children))&&--v,!(p=p&&(S&&S.settings&&S.settings.dnd&&!1===S.settings.dnd.check_while_dragging||S.check(g,r.data.origin&&r.data.origin!==S?r.data.origin.get_node(r.data.nodes[f]):r.data.nodes[f],d,v,{dnd:!0,ref:S.get_node(k.parent()),pos:t,origin:r.data.origin,is_multi:r.data.origin&&r.data.origin!==S,is_foreign:!r.data.origin})))){S&&S.last_error&&(C=S.last_error());break}var i,n;if("i"===t&&k.parent().is(".jstree-closed")&&S.settings.dnd.open_timeout&&(r.event&&"dragover"===r.event.type&&!s||(P&&clearTimeout(P),P=setTimeout((n=k,function(){i.open_node(n)}),(i=S).settings.dnd.open_timeout))),p)return(w=S.get_node(d,!0)).hasClass(".jstree-dnd-parent")||(I(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),w.addClass("jstree-dnd-parent")),E={ins:S,par:d,pos:"i"!==t||"last"!==_||0!==u||S.is_loaded(b)?u:"last"},L.css({left:o+"px",top:l+"px"}).show(),L.removeClass("jstree-above jstree-inside jstree-below").addClass(x),r.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),r.event.originalEvent&&r.event.originalEvent.dataTransfer&&(r.event.originalEvent.dataTransfer.dropEffect=T?"copy":"move"),C={},!(h=!0)}),!0===h))return}else{for(p=!0,f=0,m=r.data.nodes.length;f<m&&(p=p&&S.check(r.data.origin&&(r.data.origin.settings.dnd.always_copy||r.data.origin.settings.dnd.copy&&(r.event.metaKey||r.event.ctrlKey))?"copy_node":"move_node",r.data.origin&&r.data.origin!==S?r.data.origin.get_node(r.data.nodes[f]):r.data.nodes[f],I.jstree.root,"last",{dnd:!0,ref:S.get_node(I.jstree.root),pos:"i",origin:r.data.origin,is_multi:r.data.origin&&r.data.origin!==S,is_foreign:!r.data.origin}));f++);if(p)return E={ins:S,par:I.jstree.root,pos:"last"},L.hide(),r.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(r.event.originalEvent&&r.event.originalEvent.dataTransfer&&(r.event.originalEvent.dataTransfer.dropEffect=T?"copy":"move"))}I(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),E=!1,r.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),r.event.originalEvent&&r.event.originalEvent.dataTransfer,L.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(L.hide(),A=E=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(e,t){if(I(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),P&&clearTimeout(P),t&&t.data&&t.data.jstree){L.hide().detach();var i,n,r=[];if(E){for(i=0,n=t.data.nodes.length;i<n;i++)r[i]=t.data.origin?t.data.origin.get_node(t.data.nodes[i]):t.data.nodes[i];E.ins[t.data.origin&&(t.data.origin.settings.dnd.always_copy||t.data.origin.settings.dnd.copy&&(t.event.metaKey||t.event.ctrlKey))?"copy_node":"move_node"](r,E.par,E.pos,!1,!1,!1,t.data.origin)}else(i=I(t.event.target).closest(".jstree")).length&&C&&C.error&&"check"===C.error&&(i=i.jstree(!0))&&i.settings.core.error.call(this,C);E=A=!1}}).on("keyup.jstree keydown.jstree",function(e,t){(t=I.vakata.dnd._get())&&t.data&&t.data.jstree&&("keyup"===e.type&&27===e.which?(P&&clearTimeout(P),P=A=C=E=!1,L.hide().detach(),I.vakata.dnd._clean()):(t.helper.find(".jstree-copy").first()[t.data.origin&&(t.data.origin.settings.dnd.always_copy||t.data.origin.settings.dnd.copy&&(e.metaKey||e.ctrlKey))?"show":"hide"](),A&&(A.metaKey=e.metaKey,A.ctrlKey=e.ctrlKey,I.vakata.dnd._trigger("move",A))))})}),p={element:!((c=I).vakata.html={div:c("<div></div>"),escape:function(e){return c.vakata.html.div.text(e).html()},strip:function(e){return c.vakata.html.div.empty().append(c.parseHTML(e)).text()}}),target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},c.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:10},_trigger:function(e,t,i){(i=i===O?c.vakata.dnd._get():i).event=t,c(y).triggerHandler("dnd_"+e+".vakata",i)},_get:function(){return{data:p.data,element:p.element,helper:p.helper}},_clean:function(){p.helper&&p.helper.remove(),p.scroll_i&&(clearInterval(p.scroll_i),p.scroll_i=!1),p={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},s=null,c(y).off("mousemove.vakata.jstree touchmove.vakata.jstree",c.vakata.dnd.drag),c(y).off("mouseup.vakata.jstree touchend.vakata.jstree",c.vakata.dnd.stop)},_scroll:function(e){var t;return p.scroll_e&&(p.scroll_l||p.scroll_t)?p.scroll_i?!0!==e&&(t=p.scroll_e.scrollTop(),e=p.scroll_e.scrollLeft(),p.scroll_e.scrollTop(t+p.scroll_t*c.vakata.dnd.settings.scroll_speed),p.scroll_e.scrollLeft(e+p.scroll_l*c.vakata.dnd.settings.scroll_speed),void(t===p.scroll_e.scrollTop()&&e===p.scroll_e.scrollLeft()||c.vakata.dnd._trigger("scroll",p.scroll_e))):(p.scroll_i=setInterval(c.vakata.dnd._scroll,100),!1):(p.scroll_i&&(clearInterval(p.scroll_i),p.scroll_i=!1),!1)},start:function(e,t,i){"touchstart"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=y.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),p.is_drag&&c.vakata.dnd.stop({});try{e.currentTarget.unselectable="on",e.currentTarget.onselectstart=function(){return!1},e.currentTarget.style&&(e.currentTarget.style.touchAction="none",e.currentTarget.style.msTouchAction="none",e.currentTarget.style.MozUserSelect="none")}catch(e){}return p.init_x=e.pageX,p.init_y=e.pageY,p.data=t,p.is_down=!0,p.element=e.currentTarget,p.target=e.target,p.is_touch="touchstart"===e.type,!1!==i&&(p.helper=c("<div id='vakata-dnd'></div>").html(i).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),c(y).on("mousemove.vakata.jstree touchmove.vakata.jstree",c.vakata.dnd.drag),c(y).on("mouseup.vakata.jstree touchend.vakata.jstree",c.vakata.dnd.stop),!1},drag:function(i){if("touchmove"===i.type&&i.originalEvent&&i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0]&&(i.pageX=i.originalEvent.changedTouches[0].pageX,i.pageY=i.originalEvent.changedTouches[0].pageY,i.target=y.elementFromPoint(i.originalEvent.changedTouches[0].pageX-window.pageXOffset,i.originalEvent.changedTouches[0].pageY-window.pageYOffset)),p.is_down){if(!p.is_drag){if(!(Math.abs(i.pageX-p.init_x)>(p.is_touch?c.vakata.dnd.settings.threshold_touch:c.vakata.dnd.settings.threshold)||Math.abs(i.pageY-p.init_y)>(p.is_touch?c.vakata.dnd.settings.threshold_touch:c.vakata.dnd.settings.threshold)))return;p.helper&&(p.helper.appendTo(y.body),p.helper_w=p.helper.outerWidth()),p.is_drag=!0,c(p.target).one("click.vakata",!1),c.vakata.dnd._trigger("start",i)}var e,t,n,r=!1,s=!1,a=!1,o=!1,l=!1;return p.scroll_t=0,p.scroll_l=0,p.scroll_e=!1,c(c(i.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return this.ownerDocument&&/^auto|scroll$/.test(c(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var e=c(this),t=e.offset();if(this.scrollHeight>this.offsetHeight&&(t.top+e.height()-i.pageY<c.vakata.dnd.settings.scroll_proximity&&(p.scroll_t=1),i.pageY-t.top<c.vakata.dnd.settings.scroll_proximity)&&(p.scroll_t=-1),this.scrollWidth>this.offsetWidth&&(t.left+e.width()-i.pageX<c.vakata.dnd.settings.scroll_proximity&&(p.scroll_l=1),i.pageX-t.left<c.vakata.dnd.settings.scroll_proximity)&&(p.scroll_l=-1),p.scroll_t||p.scroll_l)return p.scroll_e=c(this),!1}),!p.scroll_e&&(r=c(y),s=c(window),a=r.height(),n=s.height(),o=r.width(),s=s.width(),e=r.scrollTop(),t=r.scrollLeft(),n<a&&i.pageY-e<c.vakata.dnd.settings.scroll_proximity&&(p.scroll_t=-1),n<a&&n-(i.pageY-e)<c.vakata.dnd.settings.scroll_proximity&&(p.scroll_t=1),s<o&&i.pageX-t<c.vakata.dnd.settings.scroll_proximity&&(p.scroll_l=-1),s<o&&s-(i.pageX-t)<c.vakata.dnd.settings.scroll_proximity&&(p.scroll_l=1),p.scroll_t||p.scroll_l)&&(p.scroll_e=r),p.scroll_e&&c.vakata.dnd._scroll(!0),p.helper&&(n=parseInt(i.pageY+c.vakata.dnd.settings.helper_top,10),l=parseInt(i.pageX+c.vakata.dnd.settings.helper_left,10),o&&l+p.helper_w>o&&(l=o-(p.helper_w+2)),p.helper.css({left:l+"px",top:(a&&a<n+25?a-50:n)+"px"})),c.vakata.dnd._trigger("move",i),!1}},stop:function(e){var t;return"touchend"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=y.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),p.is_drag?(e.target!==p.target&&c(p.target).off("click.vakata"),c.vakata.dnd._trigger("stop",e)):"touchend"===e.type&&e.target===p.target&&(t=setTimeout(function(){c(e.target).trigger("click")},100),c(e.target).one("click",function(){t&&clearTimeout(t)})),c.vakata.dnd._clean(),!1}},I.jstree.defaults.massload=null,I.jstree.plugins.massload=function(e,d){this.init=function(e,t){this._data.massload={},d.init.call(this,e,t)},this._load_nodes=function(s,a,o,l){var e,t,c,i=this.settings.massload,n=[],r=this._model.data;if(!o){for(e=0,t=s.length;e<t;e++)r[s[e]]&&(r[s[e]].state.loaded||r[s[e]].state.failed)&&!l||(n.push(s[e]),(c=this.get_node(s[e],!0))&&c.length&&c.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},n.length){if(I.vakata.is_function(i))return i.call(this,n,function(e){var t,i;if(e)for(t in e)e.hasOwnProperty(t)&&(this._data.massload[t]=e[t]);for(t=0,i=s.length;t<i;t++)(c=this.get_node(s[t],!0))&&c.length&&c.removeClass("jstree-loading").attr("aria-busy",!1);d._load_nodes.call(this,s,a,o,l)}.bind(this));if("object"==typeof i&&i&&i.url)return i=I.extend(!0,{},i),I.vakata.is_function(i.url)&&(i.url=i.url.call(this,n)),I.vakata.is_function(i.data)&&(i.data=i.data.call(this,n)),I.ajax(i).done(function(e,t,i){var n,r;if(e)for(n in e)e.hasOwnProperty(n)&&(this._data.massload[n]=e[n]);for(n=0,r=s.length;n<r;n++)(c=this.get_node(s[n],!0))&&c.length&&c.removeClass("jstree-loading").attr("aria-busy",!1);d._load_nodes.call(this,s,a,o,l)}.bind(this)).fail(function(e){d._load_nodes.call(this,s,a,o,l)}.bind(this))}}return d._load_nodes.call(this,s,a,o,l)},this._load_node=function(e,t){var i,n=this._data.massload[e.id];return n?(i=this["string"==typeof n?"_append_html_data":"_append_json_data"](e,"string"==typeof n?I(I.parseHTML(n)).filter(function(){return 3!==this.nodeType}):n,function(e){t.call(this,e)}),(n=this.get_node(e.id,!0))&&n.length&&n.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[e.id],i):d._load_node.call(this,e,t)}},I.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},I.jstree.plugins.search=function(e,o){this.bind=function(){o.bind.call(this),this._data.search.str="",this._data.search.dom=I(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",function(e,t){if(this._data.search.som&&t.res.length){for(var i,n,r=this._model.data,s=[],a=0,o=t.res.length;a<o;a++)if(r[t.res[a]]&&!r[t.res[a]].state.hidden&&(s.push(t.res[a]),s=s.concat(r[t.res[a]].parents),this._data.search.smc))for(i=0,n=r[t.res[a]].children_d.length;i<n;i++)r[r[t.res[a]].children_d[i]]&&!r[r[t.res[a]].children_d[i]].state.hidden&&s.push(r[t.res[a]].children_d[i]);s=I.vakata.array_remove_item(I.vakata.array_unique(s),I.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(s,!0),this.redraw(!0)}}.bind(this)).on("clear_search.jstree",function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))}.bind(this))},this.search=function(n,e,t,i,r,s){if(!1===n||""===I.vakata.trim(n.toString()))return this.clear_search();i=(i=this.get_node(i))&&(i.id||0===i.id)?i.id:null,n=n.toString();var a,o,l=this.settings.search,c=l.ajax||!1,d=this._model.data,u=null,h=[],p=[];if(this._data.search.res.length&&!r&&this.clear_search(),t===O&&(t=l.show_only_matches),s===O&&(s=l.show_only_matches_children),!e&&!1!==c)return I.vakata.is_function(c)?c.call(this,n,function(e){e&&e.d&&(e=e.d),this._load_nodes(I.vakata.is_array(e)?I.vakata.array_unique(e):[],function(){this.search(n,!0,t,i,r,s)})}.bind(this),i):((c=I.extend({},c)).data||(c.data={}),c.data.str=n,i&&(c.data.inside=i),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=I.ajax(c).fail(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(c)},this.settings.core.error.call(this,this._data.core.last_error)}.bind(this)).done(function(e){e&&e.d&&(e=e.d),this._load_nodes(I.vakata.is_array(e)?I.vakata.array_unique(e):[],function(){this.search(n,!0,t,i,r,s)})}.bind(this)),this._data.search.lastRequest);if(r||(this._data.search.str=n,this._data.search.dom=I(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=t,this._data.search.smc=s),u=new I.vakata.search(n,!0,{caseSensitive:l.case_sensitive,fuzzy:l.fuzzy}),I.each(d[i||I.jstree.root].children_d,function(e,t){var i=d[t];i.text&&!i.state.hidden&&(!l.search_leaves_only||i.state.loaded&&0===i.children.length)&&(l.search_callback&&l.search_callback.call(this,n,i)||!l.search_callback&&u.search(i.text).isMatch)&&(h.push(t),p=p.concat(i.parents))}),h.length){for(a=0,o=(p=I.vakata.array_unique(p)).length;a<o;a++)p[a]!==I.jstree.root&&d[p[a]]&&!0===this.open_node(p[a],null,0)&&this._data.search.opn.push(p[a]);r?(this._data.search.dom=this._data.search.dom.add(I(this.element[0].querySelectorAll("#"+I.map(h,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(I.jstree.idregex,"\\$&"):e.replace(I.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=I.vakata.array_unique(this._data.search.res.concat(h))):(this._data.search.dom=I(this.element[0].querySelectorAll("#"+I.map(h,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(I.jstree.idregex,"\\$&"):e.replace(I.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=h),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:n,res:this._data.search.res,show_only_matches:t})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=I(this.element[0].querySelectorAll("#"+I.map(this._data.search.res,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(I.jstree.idregex,"\\$&"):e.replace(I.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=I()},this.redraw_node=function(e,t,i,n){if((e=o.redraw_node.apply(this,arguments))&&-1!==I.inArray(e.id,this._data.search.res)){for(var r=null,s=0,a=e.childNodes.length;s<a;s++)if(e.childNodes[s]&&e.childNodes[s].className&&-1!==e.childNodes[s].className.indexOf("jstree-anchor")){r=e.childNodes[s];break}r&&(r.className+=" jstree-search")}return e}},(n=I).vakata.search=function(g,e,v){v=v||{},!1!==(v=n.extend({},n.vakata.search.defaults,v)).fuzzy&&(v.fuzzy=!0),g=v.caseSensitive?g:g.toLowerCase();var y,_,b,t,T=v.location,i=v.distance,w=v.threshold,x=g.length;return 32<x&&(v.fuzzy=!1),v.fuzzy&&(y=1<<x-1,_=function(){for(var e={},t=0,t=0;t<x;t++)e[g.charAt(t)]=0;for(t=0;t<x;t++)e[g.charAt(t)]|=1<<x-t-1;return e}(),b=function(e,t){e/=x,t=Math.abs(T-t);return i?e+t/i:t?1:e}),t=function(e){if(e=v.caseSensitive?e.toString():e.toString().toLowerCase(),g===e||-1!==e.indexOf(g))return{isMatch:!0,score:0};if(!v.fuzzy)return{isMatch:!1,score:1};var t,i,n,r,s,a,o,l,c,d=e.length,u=w,h=e.indexOf(g,T),p=x+d,f=1,m=[];for(-1!==h&&(u=Math.min(b(0,h),u),-1!==(h=e.lastIndexOf(g,T+x)))&&(u=Math.min(b(0,h),u)),h=-1,t=0;t<x;t++){for(n=0,r=p;n<r;)b(t,T+r)<=u?n=r:p=r,r=Math.floor((p-n)/2+n);for(p=r,a=Math.max(1,T-r+1),o=Math.min(T+r,d)+x,(l=new Array(o+2))[o+1]=(1<<t)-1,i=o;a<=i;i--)if(c=_[e.charAt(i-1)],l[i]=0===t?(l[i+1]<<1|1)&c:(l[i+1]<<1|1)&c|(s[i+1]|s[i])<<1|1|s[i+1],l[i]&y&&(f=b(t,i-1))<=u){if(u=f,m.push(h=i-1),!(T<h))break;a=Math.max(1,2*T-h)}if(b(t+1,T)>u)break;s=l}return{isMatch:0<=h,score:f}},!0===e?{search:t}:t(e)},n.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1},I.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},!(I.jstree.plugins.sort=function(e,t){this.bind=function(){t.bind.call(this),this.element.on("model.jstree",function(e,t){this.sort(t.parent,!0)}.bind(this)).on("rename_node.jstree create_node.jstree",function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)}.bind(this)).on("move_node.jstree copy_node.jstree",function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)}.bind(this))},this.sort=function(e,t){var i,n;if((e=this.get_node(e))&&e.children&&e.children.length&&(e.children.sort(this.settings.sort.bind(this)),t))for(i=0,n=e.children_d.length;i<n;i++)this.sort(e.children_d[i],!1)}})),b=(I.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1,preserve_loaded:!1},I.jstree.plugins.state=function(e,t){this.bind=function(){t.bind.call(this);var i=function(){this.element.on(this.settings.state.events,function(){_&&clearTimeout(_),_=setTimeout(function(){this.save_state()}.bind(this),100)}.bind(this)),this.trigger("state_ready")}.bind(this);this.element.on("ready.jstree",function(e,t){this.element.one("restore_state.jstree",i),this.restore_state()||i()}.bind(this))},this.save_state=function(){var e=this.get_state(),e=(this.settings.state.preserve_loaded||delete e.core.loaded,{state:e,ttl:this.settings.state.ttl,sec:+new Date});I.vakata.storage.set(this.settings.state.key,JSON.stringify(e))},this.restore_state=function(){var i=I.vakata.storage.get(this.settings.state.key);if(i)try{i=JSON.parse(i)}catch(e){return!1}return!(i&&i.ttl&&i.sec&&+new Date-i.sec>i.ttl||!(i=(i=i&&i.state?i.state:i)&&I.vakata.is_function(this.settings.state.filter)?this.settings.state.filter.call(this,i):i)||(this.settings.state.preserve_loaded||delete i.core.loaded,this.element.one("set_state.jstree",function(e,t){t.instance.trigger("restore_state",{state:I.extend(!0,{},i)})}),this.set_state(i),0))},this.clear_state=function(){return I.vakata.storage.del(this.settings.state.key)}},I.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}},I.jstree.defaults.types={default:{}},I.jstree.defaults.types[I.jstree.root]={},I.jstree.plugins.types=function(e,d){this.init=function(e,t){var i,n;if(t&&t.types&&t.types.default)for(i in t.types)if("default"!==i&&i!==I.jstree.root&&t.types.hasOwnProperty(i))for(n in t.types.default)t.types.default.hasOwnProperty(n)&&t.types[i][n]===O&&(t.types[i][n]=t.types.default[n]);d.init.call(this,e,t),this._model.data[I.jstree.root].type=I.jstree.root},this.refresh=function(e,t){d.refresh.call(this,e,t),this._model.data[I.jstree.root].type=I.jstree.root},this.bind=function(){this.element.on("model.jstree",function(e,t){for(var i,n=this._model.data,r=t.nodes,s=this.settings.types,a="default",o=0,l=r.length;o<l;o++){if(a="default",n[r[o]].original&&n[r[o]].original.type&&s[n[r[o]].original.type]&&(a=n[r[o]].original.type),n[r[o]].data&&n[r[o]].data.jstree&&n[r[o]].data.jstree.type&&s[n[r[o]].data.jstree.type]&&(a=n[r[o]].data.jstree.type),n[r[o]].type=a,!0===n[r[o]].icon&&s[a].icon!==O&&(n[r[o]].icon=s[a].icon),s[a].li_attr!==O&&"object"==typeof s[a].li_attr)for(i in s[a].li_attr)s[a].li_attr.hasOwnProperty(i)&&"id"!==i&&(n[r[o]].li_attr[i]===O?n[r[o]].li_attr[i]=s[a].li_attr[i]:"class"===i&&(n[r[o]].li_attr.class=s[a].li_attr.class+" "+n[r[o]].li_attr.class));if(s[a].a_attr!==O&&"object"==typeof s[a].a_attr)for(i in s[a].a_attr)s[a].a_attr.hasOwnProperty(i)&&"id"!==i&&(n[r[o]].a_attr[i]===O?n[r[o]].a_attr[i]=s[a].a_attr[i]:"href"===i&&"#"===n[r[o]].a_attr[i]?n[r[o]].a_attr.href=s[a].a_attr.href:"class"===i&&(n[r[o]].a_attr.class=s[a].a_attr.class+" "+n[r[o]].a_attr.class))}n[I.jstree.root].type=I.jstree.root}.bind(this)),d.bind.call(this)},this.get_json=function(e,t,i){var n,r,s=this._model.data,a=t?I.extend(!0,{},t,{no_id:!1}):{},o=d.get_json.call(this,e,a,i);if(!1===o)return!1;if(I.vakata.is_array(o))for(n=0,r=o.length;n<r;n++)o[n].type=(o[n].id||0===o[n].id)&&s[o[n].id]&&s[o[n].id].type?s[o[n].id].type:"default",t&&t.no_id&&(delete o[n].id,o[n].li_attr&&o[n].li_attr.id&&delete o[n].li_attr.id,o[n].a_attr)&&o[n].a_attr.id&&delete o[n].a_attr.id;else o.type=(o.id||0===o.id)&&s[o.id]&&s[o.id].type?s[o.id].type:"default",t&&t.no_id&&(o=this._delete_ids(o));return o},this._delete_ids=function(e){if(I.vakata.is_array(e))for(var t=0,i=e.length;t<i;t++)e[t]=this._delete_ids(e[t]);else delete e.id,e.li_attr&&e.li_attr.id&&delete e.li_attr.id,e.a_attr&&e.a_attr.id&&delete e.a_attr.id,e.children&&I.vakata.is_array(e.children)&&(e.children=this._delete_ids(e.children));return e},this.check=function(e,t,i,n,r){if(!1===d.check.call(this,e,t,i,n,r))return!1;t=t&&(t.id||0===t.id)?t:this.get_node(t),i=i&&(i.id||0===i.id)?i:this.get_node(i);var s,a,o,l,c=(c=t&&(t.id||0===t.id)?r&&r.origin?r.origin:I.jstree.reference(t.id):null)&&c._model&&c._model.data?c._model.data:null;switch(e){case"create_node":case"move_node":case"copy_node":if("move_node"!==e||-1===I.inArray(t.id,i.children)){if((s=this.get_rules(i)).max_children!==O&&-1!==s.max_children&&s.max_children===i.children.length)return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})});if(s.valid_children!==O&&-1!==s.valid_children&&-1===I.inArray(t.type||"default",s.valid_children))return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})});if(c&&t.children_d&&t.parents){for(o=a=0,l=t.children_d.length;o<l;o++)a=Math.max(a,c[t.children_d[o]].parents.length);a=a-t.parents.length+1}(a<=0||a===O)&&(a=1);do{if(s.max_depth!==O&&-1!==s.max_depth&&s.max_depth<a)return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})})}while(i=this.get_node(i.parent),s=this.get_rules(i),a++,i)}}return!0},this.get_rules=function(e){return!!(e=this.get_node(e))&&((e=this.get_type(e,!0)).max_depth===O&&(e.max_depth=-1),e.max_children===O&&(e.max_children=-1),e.valid_children===O&&(e.valid_children=-1),e)},this.get_type=function(e,t){return!!(e=this.get_node(e))&&(t?I.extend({type:e.type},this.settings.types[e.type]):e.type)},this.set_type=function(e,t){var i,n,r,s,a,o,l,c,d=this._model.data;if(I.vakata.is_array(e))for(n=0,r=(e=e.slice()).length;n<r;n++)this.set_type(e[n],t);else{if(i=this.settings.types,e=this.get_node(e),!i[t]||!e)return!1;if((l=this.get_node(e,!0))&&l.length&&(c=l.children(".jstree-anchor")),s=e.type,a=this.get_icon(e),e.type=t,!0!==a&&i[s]&&(i[s].icon===O||a!==i[s].icon)||this.set_icon(e,i[t].icon===O||i[t].icon),i[s]&&i[s].li_attr!==O&&"object"==typeof i[s].li_attr)for(o in i[s].li_attr)i[s].li_attr.hasOwnProperty(o)&&"id"!==o&&("class"===o?(d[e.id].li_attr.class=(d[e.id].li_attr.class||"").replace(i[s].li_attr[o],""),l&&l.removeClass(i[s].li_attr[o])):d[e.id].li_attr[o]===i[s].li_attr[o]&&(d[e.id].li_attr[o]=null,l)&&l.removeAttr(o));if(i[s]&&i[s].a_attr!==O&&"object"==typeof i[s].a_attr)for(o in i[s].a_attr)i[s].a_attr.hasOwnProperty(o)&&"id"!==o&&("class"===o?(d[e.id].a_attr.class=(d[e.id].a_attr.class||"").replace(i[s].a_attr[o],""),c&&c.removeClass(i[s].a_attr[o])):d[e.id].a_attr[o]===i[s].a_attr[o]&&("href"===o?(d[e.id].a_attr[o]="#",c&&c.attr("href","#")):(delete d[e.id].a_attr[o],c&&c.removeAttr(o))));if(i[t].li_attr!==O&&"object"==typeof i[t].li_attr)for(o in i[t].li_attr)i[t].li_attr.hasOwnProperty(o)&&"id"!==o&&(d[e.id].li_attr[o]===O?(d[e.id].li_attr[o]=i[t].li_attr[o],l&&("class"===o?l.addClass(i[t].li_attr[o]):l.attr(o,i[t].li_attr[o]))):"class"===o&&(d[e.id].li_attr.class=i[t].li_attr[o]+" "+d[e.id].li_attr.class,l)&&l.addClass(i[t].li_attr[o]));if(i[t].a_attr!==O&&"object"==typeof i[t].a_attr)for(o in i[t].a_attr)i[t].a_attr.hasOwnProperty(o)&&"id"!==o&&(d[e.id].a_attr[o]===O?(d[e.id].a_attr[o]=i[t].a_attr[o],c&&("class"===o?c.addClass(i[t].a_attr[o]):c.attr(o,i[t].a_attr[o]))):"href"===o&&"#"===d[e.id].a_attr[o]?(d[e.id].a_attr.href=i[t].a_attr.href,c&&c.attr("href",i[t].a_attr.href)):"class"===o&&(d[e.id].a_attr.class=i[t].a_attr.class+" "+d[e.id].a_attr.class,c)&&c.addClass(i[t].a_attr[o]))}return!0}},I.jstree.defaults.unique={case_sensitive:!1,trim_whitespace:!1,duplicate:function(e,t){return e+" ("+t+")"}},I.jstree.plugins.unique=function(e,m){this.check=function(e,t,i,n,r){if(!1===m.check.call(this,e,t,i,n,r))return!1;if(t=t&&(t.id||0===t.id)?t:this.get_node(t),(i=i&&(i.id||0===i.id)?i:this.get_node(i))&&i.children){for(var s,a="rename_node"===e?n:t.text,o=[],l=this.settings.unique.case_sensitive,c=this.settings.unique.trim_whitespace,d=this._model.data,u=0,h=i.children.length;u<h;u++)s=d[i.children[u]].text,l||(s=s.toLowerCase()),c&&(s=s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),o.push(s);switch(l||(a=a.toLowerCase()),c&&(a=a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),e){case"delete_node":return!0;case"rename_node":return s=t.text||"",l||(s=s.toLowerCase()),c&&(s=s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),(u=-1===I.inArray(a,o)||t.text&&s===a)||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})}),u;case"create_node":return(u=-1===I.inArray(a,o))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})}),u;case"copy_node":return(u=-1===I.inArray(a,o))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})}),u;case"move_node":return(u=t.parent===i.id&&(!r||!r.is_multi)||-1===I.inArray(a,o))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:n,obj:!(!t||!t.id&&0!==t.id)&&t.id,par:!(!i||!i.id&&0!==i.id)&&i.id})}),u}}return!0},this.create_node=function(e,t,i,n,r){if(!t||"object"==typeof t&&t.text===O){if(null===e&&(e=I.jstree.root),!(e=this.get_node(e)))return m.create_node.call(this,e,t,i,n,r);if(!(i=i===O?"last":i).toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(e))return m.create_node.call(this,e,t,i,n,r);t=t||{};for(var s,a,o=this._model.data,l=this.settings.unique.case_sensitive,c=this.settings.unique.trim_whitespace,d=this.settings.unique.duplicate,u=s=this.get_string("New node"),h=[],p=0,f=e.children.length;p<f;p++)a=o[e.children[p]].text,l||(a=a.toLowerCase()),c&&(a=a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),h.push(a);for(p=1,a=u,l||(a=a.toLowerCase()),c&&(a=a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));-1!==I.inArray(a,h);)a=u=d.call(this,s,++p).toString(),l||(a=a.toLowerCase()),c&&(a=a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));t.text=u}return m.create_node.call(this,e,t,i,n,r)}},y.createElement("DIV"));if(b.setAttribute("unselectable","on"),b.setAttribute("role","presentation"),b.className="jstree-wholerow",b.innerHTML="&#160;",I.jstree.plugins.wholerow=function(e,s){this.bind=function(){s.bind.call(this),this.element.on("ready.jstree set_state.jstree",function(){this.hide_dots()}.bind(this)).on("init.jstree loading.jstree ready.jstree",function(){this.get_container_ul().addClass("jstree-wholerow-ul")}.bind(this)).on("deselect_all.jstree",function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")}.bind(this)).on("changed.jstree",function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");for(var i=!1,n=0,r=t.selected.length;n<r;n++)(i=this.get_node(t.selected[n],!0))&&i.length&&i.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}.bind(this)).on("open_node.jstree",function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}.bind(this)).on("hover_node.jstree dehover_node.jstree",function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")}.bind(this)).on("contextmenu.jstree",".jstree-wholerow",function(e){var t;this._data.contextmenu&&(e.preventDefault(),t=I.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY}),I(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t))}.bind(this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var t=I.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});I(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).trigger("focus")}).on("dblclick.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var t=I.Event("dblclick",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});I(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).trigger("focus")}).on("click.jstree",".jstree-leaf > .jstree-ocl",function(e){e.stopImmediatePropagation();var t=I.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});I(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).trigger("focus")}.bind(this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1}.bind(this)).on("mouseleave.jstree",".jstree-node",function(e){this.dehover_node(e.currentTarget)}.bind(this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),s.teardown.call(this)},this.redraw_node=function(e,t,i,n){var r;return(e=s.redraw_node.apply(this,arguments))&&(r=b.cloneNode(!0),-1!==I.inArray(e.id,this._data.core.selected)&&(r.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===e.id&&(r.className+=" jstree-wholerow-hovered"),e.insertBefore(r,e.childNodes[0])),e}},window.customElements&&Object&&Object.create){(e=Object.create(HTMLElement.prototype)).createdCallback=function(){var e,t={core:{},plugins:[]};for(e in I.jstree.plugins)I.jstree.plugins.hasOwnProperty(e)&&this.attributes[e]&&(t.plugins.push(e),this.getAttribute(e))&&JSON.parse(this.getAttribute(e))&&(t[e]=JSON.parse(this.getAttribute(e)));for(e in I.jstree.defaults.core)I.jstree.defaults.core.hasOwnProperty(e)&&this.attributes[e]&&(t.core[e]=JSON.parse(this.getAttribute(e))||this.getAttribute(e));I(this).jstree(t)};try{window.customElements.define("vakata-jstree",function(){},{prototype:e})}catch(e){}}}});var inputTimer,$=jQuery,$body=$("body"),$h=$("header"),extraMenuCtrl={handlersBinded:!1,initSetting:!1,active:!1,$menuBtn:"",init:function(e){!e&&0!=this.initSetting||(this.destroy(),$("#navMain > ul li:has(ul)").append('<a href="#" class="subbutton" title="UntermenÃ¼ Ã¶ffnen"></a>'),$("#navMain > ul li:has(ul)").each(function(){var e='<li class="submenu--header"><a href="#" class="backbutton" title="UntermenÃ¼ schlieÃen"></a>'+$(this).find(">:first-child")[0].outerHTML+"</li>";$(this).find("> ul").prepend(e)}),$(".shopNavWrap > ul li:has(ul)").append('<a href="#" class="subbutton" title="UntermenÃ¼ Ã¶ffnen"></a>'),$(".shopNavWrap > ul li:has(ul)").each(function(){var e='<li class="submenu--header"><a href="#" class="backbutton" title="UntermenÃ¼ schlieÃen"></a>'+$(this).find(">:first-child")[0].outerHTML+"</li>";$(this).find("ul").first().prepend(e)}),this.initSetting=!0),this.$menuBtn=$(".menu-button"),this.handlersBinded||this.bindHandlers()},destroy:function(){$("a.subbutton, .submenu--header").each(function(){$(this).remove()}),this.$menuBtn=$(".menu-button"),this.reset(),this.initSetting=!1},bindHandlers:function(){var i=this;i.handlersBinded=!0,$(document).on("click",".menu-item-has-children a.subbutton",function(e){e.preventDefault();var e=$(this),t=e.prev();i.active=e.parent().attr("data-id"),i.subMenu.show(e,t)}),$(document).on("click",".menu-item-has-children a.backbutton",function(e){e.preventDefault();var e=$(this),t=e.parent("ul");i.subMenu.reset(e,t)}),$(document).on("click",".menu-button",i.show.bind(i)),$(document).on("click",".app--nav--trigger",function(e){var t;$(this).data("nav")&&($(".app--nav--trigger").not($(this)).removeClass("active"),$(this).toggleClass("active"),t=$(this).data("nav"),e.preventDefault(),$body.hasClass("active-menu")&&!$body.hasClass("active-"+t)||($body.hasClass("active-menu")&&$body.hasClass("active-"+t)?($body.removeClass("active-menu"),i.subMenu.reset()):$body.addClass("active-menu")),$(".app--nav--trigger").each(function(e){$(this).data("nav")&&$(this).data("nav")!=t&&$body.removeClass("active-"+$(this).data("nav"))}),$body.toggleClass("active-"+t).removeClass("active-submenu"),i.subMenu.reset())})},show:function(e){e.preventDefault(),$body.toggleClass("active-menu"),this.$menuBtn.toggleClass("active-button")},reset:function(){$body.removeClass("active-menu"),this.$menuBtn.removeClass("active-button")},subMenu:{show:function(e,t){t.hasClass("sub-active")&&e.off("mouseenter mouseleave"),t.toggleClass("sub-active"),$body.toggleClass("active-submenu")},reset:function(){$body.removeClass("active-submenu"),setTimeout(function(){$(".sub-active").removeClass("sub-active"),$(".subbutton.active").removeClass("active")},300)}}},throttel=function(e){clearTimeout(resizeTimer),inputTimer=setTimeout(function(){page.resizeHook()},50)};function forEach(e,t){return Array.prototype.forEach.call(e,t)}$(document).ready(function(){(page={$window:$(window),$html:$("html"),$body:$("body"),$header:$("header"),$masterWrap:$("#masterWrap"),$menuButton:$(".menu-button"),$apiSearch:$("#movie-api-search"),$liveSearch:$("#movie-live-search"),$searchBtn:$(".search-btn"),mobileSize:1080,tabletSize:1600,activeClass:"is-active",activeMenu:"active-menu",activeButton:"active-button",src:"data-desktop-src",videosrc:"desktop-src",init:function(){this.movieLiveSearch()},bindHandlers:function(){window.addEventListener("resize",debounce),window.addEventListener("scroll",debounceScroll)},movieLiveSearch:function(){var t=this;t.$apiSearch.on("input",function(){$this=$(this),$resultList=$("#movieSearchResults"),setTimeout(function(){var e=$this.val();$this.val(e),0==e.length?$resultList.addClass("hidden"):$resultList.removeClass("hidden"),$.ajax({url:"/admin/movies/movie-api-search",type:"post",data:{movie:e},success:function(e){$resultList.html(e)},error:function(e,t,i){console.log("Fehler: "+i)}})},500)}),t.$liveSearch.on("input",function(){$this=$(this),$resultList=$("#movieLivesearchResults"),$resultPageList=$("#moviePageLivesearchResults"),$searchValueEl=$("#search-value"),setTimeout(function(){var e=$this.val();console.log($("#searchpage").length),0<$("#searchpage").length?($searchValueEl.text(e),$.ajax({url:"/live-search",type:"post",data:{movie:e},success:function(e){$resultPageList.html(e)},error:function(e,t,i){console.log("Fehler: "+i)}})):(0==e.length?$resultList.addClass("hidden"):$resultList.removeClass("hidden"),$.ajax({url:"/searchbar",type:"post",data:{movie:e},success:function(e){$resultList.html(e)},error:function(e,t,i){console.log("Fehler: "+i)}}))},500)}),t.$searchBtn.on("click",function(e){0<t.$liveSearch.val().length||(e.preventDefault(),$(".search-bar").hasClass("active-search")?(t.$liveSearch.val(""),$(".search-bar").removeClass("active-search")):$(".search-bar").addClass("active-search"))})}}).init()});var resizeTimer,resizeTimerScroll,debounce=function(e){clearTimeout(resizeTimer),resizeTimer=setTimeout(function(){page.resizeHook()},50)},debounceScroll=function(e){clearTimeout(resizeTimerScroll),resizeTimerScroll=setTimeout(function(){checkPosition(),page.lazyLoad()},10)},checkPosition=function(e){var t=$(window).scrollTop();80<t||page.mobile&&50<t?($h.addClass("fluid"),$("#masterWrap").addClass("fluid")):($h.removeClass("fluid"),$("#masterWrap").removeClass("fluid"))};$(document).ready(function(){(page={$window:$(window),$html:$("html"),$body:$("body"),$header:$("header"),$masterWrap:$("#masterWrap"),$menuButton:$(".menu-button"),mobileSize:1080,tabletSize:1600,activeClass:"is-active",activeMenu:"active-menu",activeButton:"active-button",src:"data-desktop-src",videosrc:"desktop-src",init:function(){var e=this;e.bindHandlers(),e.themeChange(),e.desktopViewportCheck(),e.fixedHeader(),e.navMobile(),e.initPictures(),e.modal(),e.initSlider(),e.customPagination(),e.initScrolltrigger(),e.jstree(),e.userMenuBtn(),e.infinitLoad(),e.movieTimeSafe(),e.initPlayer(),e.myList(),e.lazyLoad()},bindHandlers:function(){window.addEventListener("resize",debounce),window.addEventListener("scroll",debounceScroll)},desktopViewportCheck:function(){extraMenuCtrl.init(!0),window.innerWidth>=this.mobileSize?(this.mobile=!1,this.$masterWrap.removeClass("mobile-state")):(this.mobile=!0,this.$masterWrap.addClass("mobile-state"))},lockScrollPosition:function(){var e=[document.documentElement.scrollLeft,document.documentElement.scrollTop];this.$html.data("scroll-position",e),this.$html.css("overflow-y","hidden"),window.scroll(e[0],e[1])},unlockScrollPosition:function(){var e=this.$html.data("scroll-position");if(void 0===e)return!1;this.$html.css("overflow-y","auto"),window.scroll(e[0],e[1])},resizeHook:function(){this.desktopViewportCheck(),this.fixedHeader(),this.navMobile(),this.initPictures()},initScrolltrigger:function(){var e=new ScrollTrigger.default({trigger:{once:!0},offset:{element:{x:0,y:function(e,t,i){return.5}}}});e.add("[data-trigger]"),e.add(".card-slider"),e.add(".genre-slider"),e.add("#load-count"),e.add(".currentWatch-slider"),e.add(".lazy-load")},initPictures:function(){var t=this;t.$window.width()<860?t.src="data-mobile-src":t.$window.width()<1280?t.src="data-tablet-src":t.src="data-desktop-src",forEach(document.querySelectorAll(".lazyOwl"),function(e){e.setAttribute("src",e.getAttribute(t.src))}),forEach(document.querySelectorAll(".lazyPic"),function(e){e.setAttribute("src",e.getAttribute(t.src))}),forEach(document.querySelectorAll(".lazyBG"),function(e){e.parentElement.style.backgroundImage="url('"+e.getAttribute(t.src)+"')"})},fixedHeader:function(){headerHeight=this.$header.height(),this.$header.hasClass("fixed-header")?this.$body.css("padding-top",headerHeight):this.$body.css("padding-top",0)},navMobile:function(){var e=$("#navMain");headerHeight=this.$header.height(),e.css({top:headerHeight,height:"calc(100vh - "+headerHeight+"px)"})},themeChange:function(){var t=this;$("#theme-switch").on("click",function(e){e.preventDefault(),expireDate=new Date(Math.floor((new Date).getTime()+31536e6)),"light"===t.$html.attr("data-theme")?(document.cookie="pageTheme=dark; path=/; expires="+expireDate,t.$html.attr("data-theme","dark")):(document.cookie="pageTheme=light; path=/; expires="+expireDate,t.$html.attr("data-theme","light"))})},modal:function(){0<$("#modal").length||this.$body.append('<div class="modal" id="modal"><div class="modal-overlay"></div><div class="modal-wrap large"><div class="modal-inner-wrap"></div><a href="#" class="modal-close"></a></div></div>'),$modal=$("#modal"),$modalWrap=$("#modal .modal-wrap"),$modalInnerWrap=$("#modal .modal-inner-wrap"),$modalOverlay=$("#modal .modal-overlay"),$modalCloseBtn=$("#modal .modal-close"),$(document).on("click","a[data-modal]",function(e){e.preventDefault();e=$(this);$src=$(e.attr("data-src")),$modalInnerWrap.empty(),$src.clone().appendTo(".modal-inner-wrap"),$("body").addClass("active-modal"),$modal.addClass("active")}),$modalOverlay.on("click",function(){$modal.removeClass("active"),$("body").removeClass("active-modal")}),$modalCloseBtn.on("click",function(e){e.preventDefault(),$modal.removeClass("active"),$("body").removeClass("active-modal")})},initSlider:function(){sliderNumber=1,$(".swiper").each(function(){var e=$(this);const t="swiper-"+sliderNumber,i=".swiper-"+sliderNumber;e.addClass(t);var n=2,r=6,s=8,a=1080,o=1400;new Swiper(i,{loop:!0,slidesPerView:n,spaceBetween:16,allowTouchMove:!0,breakpoints:{1080:{slidesPerView:r},1400:{slidesPerView:s}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}).on("resize",function(){var e;e=this,(bp=window.innerWidth)>=o?$(i+" .swiper-slide").length>s?e.loop=!0:e.loop=!1:bp>=a?$(i+" .swiper-slide").length>r?e.loop=!0:e.loop=!1:$(i+" .swiper-slide").length>n?e.loop=!0:e.loop=!1,e.update()}),e.find('[data-fancybox="gallery"]').each(function(){$(this).attr("data-fancybox",t)}),sliderNumber++})},customPagination:function(){$sortField=$("#sortField"),$sizeField=$("#sizeField"),$btnPrev=$(".pag-prev"),$btnCurrent=$(".pag-current"),$btnNext=$(".pag-next"),$outputCount=$("#outputCount");var e=$sortField.find("option"),t=$sizeField.find("option"),i=new URLSearchParams(window.location.search);function n(){$sortVal=$sortField.find(":selected").val(),$sizeVal=$sizeField.find(":selected").val(),$pageVal=$btnCurrentVal,$options="?currentPage="+$pageVal+"&rows="+$sizeVal+"&sort="+$sortVal;var e=window.location.origin+window.location.pathname+$options;window.location.href=e}$currentRows=i.get("rows"),$currentSort=i.get("sort"),$currentPage=i.get("currentPage"),e.each(function(){$currentSort==$(this).val()&&$(this).prop("selected",!0)}),t.each(function(){$currentRows==parseInt($(this).val())&&$(this).prop("selected",!0)}),$sortField.on("change",function(){$btnCurrentVal=parseInt($btnCurrent.attr("data-site")),n()}),$sizeField.on("change",function(){$btnCurrentVal=parseInt($btnCurrent.attr("data-site")),n()})},jstree:function(){0<$("#file-tree").length&&$.ajax({url:"/admin/file-api",type:"get",dataType:"json",success:function(e){$("#file-tree").jstree({core:{animation:0,check_callback:!0,themes:{stripes:!0},data:e,multiple:!1},checkbox:{three_state:!1},types:{video:{icon:"jstree-file"}},plugins:["contextmenu","dnd","search","state","types","wholerow"]}),$("#file-tree").on("select_node.jstree",function(e,t){var i;t.instance.get_node(t.selected[0]).text.endsWith(".mp4")?(i=$("#file-tree").jstree("get_path",t.node,"/"),$("#inputMoviePath").attr("value","/media/"+i),$("#inputMovieSubmit").css("display","inline-flex")):(t.instance.deselect_node(t.selected[0]),$("#inputMovieSubmit").css("display","none"))})},error:function(e,t,i){console.error(i)}})},initPlayer:function(){0<$("#player").length&&(videojs("player"),video=$("video")[0],sekunde=$("span[data-time]").attr("data-time"),video.addEventListener("loadedmetadata",function(){video.currentTime=sekunde,$("#player-back-btn").appendTo(".video-js")}))},userMenuBtn:function(){($menuBtn=$("#user-menu-btn")).on("click",function(e){var t=$(this);t.hasClass("active")&&!$(e.target).is(".user-menu")?t.removeClass("active"):t.addClass("active")}),$menuBtn.on("blur",function(){console.log("change");var e=$(this);!e.is(":hover")&&e.hasClass("active")&&e.removeClass("active")})},infinitLoad:function(){var n,r,s,a,o,l=this;function i(){a||!0!==o&&(a=!0,$("#loading-message").css("display","block"),setTimeout(function(){$("#loading-message").css("display","none");for(var e=Math.min(r+s,n.length),t=n.slice(r,e),i=0;i<t.length;i++)$('<div class="col-6 col-2-medium grid-padding">'+t[i]+"</div>").appendTo("#movie-list");(r+=t.length)===n.length&&(o=!0),l.lazyLoad(),a=!1},1e3))}1===($resultList=$("#movie-list")).length&&(n=[],r=0,o=a=!(s=20),$(window).scroll(function(){var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight);window.scrollY+e>=t&&i()}),$.ajax({url:"/movie-scroll-load",method:"GET",success:function(e){n=JSON.parse(e),i()},error:function(e,t,i){console.log("Fehler beim Laden weiterer Filme."),a=!1}}))},myList:function(){function t(e){$(e).addClass("loading");var t=$(e).attr("data-movie-id"),i=$(e).attr("data-type");setTimeout(function(){$.ajax({url:"/add-to-list",type:"post",data:{movieID:t,type:i},success:function(e){},error:function(e,t,i){console.log("Fehler: "+i)}}),$(e).removeClass("loading"),"add"===i?($('a[data-movie-id="'+t+'"][data-type="add"]').addClass("hidden"),$('a[data-movie-id="'+t+'"][data-type="remove"]').removeClass("hidden")):"remove"===i&&($('a[data-movie-id="'+t+'"][data-type="remove"]').addClass("hidden"),$('a[data-movie-id="'+t+'"][data-type="add"]').removeClass("hidden"))},1e3)}$(document).on("click","a.add-to-list",function(e){e.preventDefault();$(this).hasClass("loading")||t(this)}),$(document).on("click","a.remove-from-list",function(e){e.preventDefault();$(this).hasClass("loading")||t(this)})},movieTimeSafe:function(){var i=this;0<$("#mainPlayer").length&&($player=$("#mainPlayer"),video=$("video")[0],$(video).on("loadedmetadata",function(){var e=!1;function t(){var e=video.currentTime,t=video.duration;$resultList=$("#test"),e===t&&(e=0),$.ajax({url:"/movie-watch-time",type:"post",data:{movieID:$(video).attr("data-id"),time:e,totalLength:t},success:function(e){$resultList.html(e),i.lazyLoad()},error:function(e,t,i){console.log("Fehler: "+i)}})}$(video).on("play",function(){t(),clearInterval(e),e=setInterval(t,3e4)}),$(video).on("pause",function(){clearInterval(e),t()}),$(video).on("stop",function(){clearInterval(e),t()})}))},lazyLoad:function(){for(var e=document.querySelectorAll(".lazy-load"),t=0;t<e.length;t++)e[t].src=e[t].getAttribute("data-src"),e[t].addEventListener("load",function(){this.style.visibility="visible"})}}).init()});